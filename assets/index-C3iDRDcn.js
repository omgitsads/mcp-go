function I3(t,n){for(var i=0;i<n.length;i++){const a=n[i];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in t)){const A=Object.getOwnPropertyDescriptor(a,l);A&&Object.defineProperty(t,l,A.get?A:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const A of l)if(A.type==="childList")for(const u of A.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function i(l){const A={};return l.integrity&&(A.integrity=l.integrity),l.referrerPolicy&&(A.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?A.credentials="include":l.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function a(l){if(l.ep)return;l.ep=!0;const A=i(l);fetch(l.href,A)}})();function Ds(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $A={exports:{}},Wo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C;function sy(){if($C)return Wo;$C=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(a,l,A){var u=null;if(A!==void 0&&(u=""+A),l.key!==void 0&&(u=""+l.key),"key"in l){A={};for(var f in l)f!=="key"&&(A[f]=l[f])}else A=l;return l=A.ref,{$$typeof:t,type:a,key:u,ref:l!==void 0?l:null,props:A}}return Wo.Fragment=n,Wo.jsx=i,Wo.jsxs=i,Wo}var KC;function ly(){return KC||(KC=1,$A.exports=sy()),$A.exports}var g=ly();const Ay=Ds(g),cy=I3({__proto__:null,default:Ay},[g]);var KA={exports:{}},Go={},ZA={exports:{}},XA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZC;function uy(){return ZC||(ZC=1,function(t){function n(I,V){var Q=I.length;I.push(V);e:for(;0<Q;){var K=Q-1>>>1,P=I[K];if(0<l(P,V))I[K]=V,I[Q]=P,Q=K;else break e}}function i(I){return I.length===0?null:I[0]}function a(I){if(I.length===0)return null;var V=I[0],Q=I.pop();if(Q!==V){I[0]=Q;e:for(var K=0,P=I.length,X=P>>>1;K<X;){var e2=2*(K+1)-1,o2=I[e2],f2=e2+1,B2=I[f2];if(0>l(o2,Q))f2<P&&0>l(B2,o2)?(I[K]=B2,I[f2]=Q,K=f2):(I[K]=o2,I[e2]=Q,K=e2);else if(f2<P&&0>l(B2,Q))I[K]=B2,I[f2]=Q,K=f2;else break e}}return V}function l(I,V){var Q=I.sortIndex-V.sortIndex;return Q!==0?Q:I.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var A=performance;t.unstable_now=function(){return A.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var C=[],m=[],h=1,p=null,v=3,x=!1,y=!1,B=!1,F=!1,T=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function M(I){for(var V=i(m);V!==null;){if(V.callback===null)a(m);else if(V.startTime<=I)a(m),V.sortIndex=V.expirationTime,n(C,V);else break;V=i(m)}}function N(I){if(B=!1,M(I),!y)if(i(C)!==null)y=!0,E||(E=!0,s2());else{var V=i(m);V!==null&&u2(N,V.startTime-I)}}var E=!1,k=-1,j=5,z=-1;function r2(){return F?!0:!(t.unstable_now()-z<j)}function c2(){if(F=!1,E){var I=t.unstable_now();z=I;var V=!0;try{e:{y=!1,B&&(B=!1,w(k),k=-1),x=!0;var Q=v;try{t:{for(M(I),p=i(C);p!==null&&!(p.expirationTime>I&&r2());){var K=p.callback;if(typeof K=="function"){p.callback=null,v=p.priorityLevel;var P=K(p.expirationTime<=I);if(I=t.unstable_now(),typeof P=="function"){p.callback=P,M(I),V=!0;break t}p===i(C)&&a(C),M(I)}else a(C);p=i(C)}if(p!==null)V=!0;else{var X=i(m);X!==null&&u2(N,X.startTime-I),V=!1}}break e}finally{p=null,v=Q,x=!1}V=void 0}}finally{V?s2():E=!1}}}var s2;if(typeof R=="function")s2=function(){R(c2)};else if(typeof MessageChannel<"u"){var i2=new MessageChannel,Z=i2.port2;i2.port1.onmessage=c2,s2=function(){Z.postMessage(null)}}else s2=function(){T(c2,0)};function u2(I,V){k=T(function(){I(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(I){switch(v){case 1:case 2:case 3:var V=3;break;default:V=v}var Q=v;v=V;try{return I()}finally{v=Q}},t.unstable_requestPaint=function(){F=!0},t.unstable_runWithPriority=function(I,V){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Q=v;v=I;try{return V()}finally{v=Q}},t.unstable_scheduleCallback=function(I,V,Q){var K=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?K+Q:K):Q=K,I){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=Q+P,I={id:h++,callback:V,priorityLevel:I,startTime:Q,expirationTime:P,sortIndex:-1},Q>K?(I.sortIndex=Q,n(m,I),i(C)===null&&I===i(m)&&(B?(w(k),k=-1):B=!0,u2(N,Q-K))):(I.sortIndex=P,n(C,I),y||x||(y=!0,E||(E=!0,s2()))),I},t.unstable_shouldYield=r2,t.unstable_wrapCallback=function(I){var V=v;return function(){var Q=v;v=V;try{return I.apply(this,arguments)}finally{v=Q}}}}(XA)),XA}var XC;function fy(){return XC||(XC=1,ZA.exports=uy()),ZA.exports}var QA={exports:{}},M2={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QC;function dy(){if(QC)return M2;QC=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function v(P){return P===null||typeof P!="object"?null:(P=p&&P[p]||P["@@iterator"],typeof P=="function"?P:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,B={};function F(P,X,e2){this.props=P,this.context=X,this.refs=B,this.updater=e2||x}F.prototype.isReactComponent={},F.prototype.setState=function(P,X){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,X,"setState")},F.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function T(){}T.prototype=F.prototype;function w(P,X,e2){this.props=P,this.context=X,this.refs=B,this.updater=e2||x}var R=w.prototype=new T;R.constructor=w,y(R,F.prototype),R.isPureReactComponent=!0;var M=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function k(P,X,e2,o2,f2,B2){return e2=B2.ref,{$$typeof:t,type:P,key:X,ref:e2!==void 0?e2:null,props:B2}}function j(P,X){return k(P.type,X,void 0,void 0,void 0,P.props)}function z(P){return typeof P=="object"&&P!==null&&P.$$typeof===t}function r2(P){var X={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(e2){return X[e2]})}var c2=/\/+/g;function s2(P,X){return typeof P=="object"&&P!==null&&P.key!=null?r2(""+P.key):X.toString(36)}function i2(){}function Z(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(i2,i2):(P.status="pending",P.then(function(X){P.status==="pending"&&(P.status="fulfilled",P.value=X)},function(X){P.status==="pending"&&(P.status="rejected",P.reason=X)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function u2(P,X,e2,o2,f2){var B2=typeof P;(B2==="undefined"||B2==="boolean")&&(P=null);var p2=!1;if(P===null)p2=!0;else switch(B2){case"bigint":case"string":case"number":p2=!0;break;case"object":switch(P.$$typeof){case t:case n:p2=!0;break;case h:return p2=P._init,u2(p2(P._payload),X,e2,o2,f2)}}if(p2)return f2=f2(P),p2=o2===""?"."+s2(P,0):o2,M(f2)?(e2="",p2!=null&&(e2=p2.replace(c2,"$&/")+"/"),u2(f2,X,e2,"",function(N2){return N2})):f2!=null&&(z(f2)&&(f2=j(f2,e2+(f2.key==null||P&&P.key===f2.key?"":(""+f2.key).replace(c2,"$&/")+"/")+p2)),X.push(f2)),1;p2=0;var G2=o2===""?".":o2+":";if(M(P))for(var y2=0;y2<P.length;y2++)o2=P[y2],B2=G2+s2(o2,y2),p2+=u2(o2,X,e2,B2,f2);else if(y2=v(P),typeof y2=="function")for(P=y2.call(P),y2=0;!(o2=P.next()).done;)o2=o2.value,B2=G2+s2(o2,y2++),p2+=u2(o2,X,e2,B2,f2);else if(B2==="object"){if(typeof P.then=="function")return u2(Z(P),X,e2,o2,f2);throw X=String(P),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return p2}function I(P,X,e2){if(P==null)return P;var o2=[],f2=0;return u2(P,o2,"","",function(B2){return X.call(e2,B2,f2++)}),o2}function V(P){if(P._status===-1){var X=P._result;X=X(),X.then(function(e2){(P._status===0||P._status===-1)&&(P._status=1,P._result=e2)},function(e2){(P._status===0||P._status===-1)&&(P._status=2,P._result=e2)}),P._status===-1&&(P._status=0,P._result=X)}if(P._status===1)return P._result.default;throw P._result}var Q=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function K(){}return M2.Children={map:I,forEach:function(P,X,e2){I(P,function(){X.apply(this,arguments)},e2)},count:function(P){var X=0;return I(P,function(){X++}),X},toArray:function(P){return I(P,function(X){return X})||[]},only:function(P){if(!z(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},M2.Component=F,M2.Fragment=i,M2.Profiler=l,M2.PureComponent=w,M2.StrictMode=a,M2.Suspense=C,M2.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,M2.__COMPILER_RUNTIME={__proto__:null,c:function(P){return N.H.useMemoCache(P)}},M2.cache=function(P){return function(){return P.apply(null,arguments)}},M2.cloneElement=function(P,X,e2){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var o2=y({},P.props),f2=P.key,B2=void 0;if(X!=null)for(p2 in X.ref!==void 0&&(B2=void 0),X.key!==void 0&&(f2=""+X.key),X)!E.call(X,p2)||p2==="key"||p2==="__self"||p2==="__source"||p2==="ref"&&X.ref===void 0||(o2[p2]=X[p2]);var p2=arguments.length-2;if(p2===1)o2.children=e2;else if(1<p2){for(var G2=Array(p2),y2=0;y2<p2;y2++)G2[y2]=arguments[y2+2];o2.children=G2}return k(P.type,f2,void 0,void 0,B2,o2)},M2.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:A,_context:P},P},M2.createElement=function(P,X,e2){var o2,f2={},B2=null;if(X!=null)for(o2 in X.key!==void 0&&(B2=""+X.key),X)E.call(X,o2)&&o2!=="key"&&o2!=="__self"&&o2!=="__source"&&(f2[o2]=X[o2]);var p2=arguments.length-2;if(p2===1)f2.children=e2;else if(1<p2){for(var G2=Array(p2),y2=0;y2<p2;y2++)G2[y2]=arguments[y2+2];f2.children=G2}if(P&&P.defaultProps)for(o2 in p2=P.defaultProps,p2)f2[o2]===void 0&&(f2[o2]=p2[o2]);return k(P,B2,void 0,void 0,null,f2)},M2.createRef=function(){return{current:null}},M2.forwardRef=function(P){return{$$typeof:f,render:P}},M2.isValidElement=z,M2.lazy=function(P){return{$$typeof:h,_payload:{_status:-1,_result:P},_init:V}},M2.memo=function(P,X){return{$$typeof:m,type:P,compare:X===void 0?null:X}},M2.startTransition=function(P){var X=N.T,e2={};N.T=e2;try{var o2=P(),f2=N.S;f2!==null&&f2(e2,o2),typeof o2=="object"&&o2!==null&&typeof o2.then=="function"&&o2.then(K,Q)}catch(B2){Q(B2)}finally{N.T=X}},M2.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},M2.use=function(P){return N.H.use(P)},M2.useActionState=function(P,X,e2){return N.H.useActionState(P,X,e2)},M2.useCallback=function(P,X){return N.H.useCallback(P,X)},M2.useContext=function(P){return N.H.useContext(P)},M2.useDebugValue=function(){},M2.useDeferredValue=function(P,X){return N.H.useDeferredValue(P,X)},M2.useEffect=function(P,X,e2){var o2=N.H;if(typeof e2=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return o2.useEffect(P,X)},M2.useId=function(){return N.H.useId()},M2.useImperativeHandle=function(P,X,e2){return N.H.useImperativeHandle(P,X,e2)},M2.useInsertionEffect=function(P,X){return N.H.useInsertionEffect(P,X)},M2.useLayoutEffect=function(P,X){return N.H.useLayoutEffect(P,X)},M2.useMemo=function(P,X){return N.H.useMemo(P,X)},M2.useOptimistic=function(P,X){return N.H.useOptimistic(P,X)},M2.useReducer=function(P,X,e2){return N.H.useReducer(P,X,e2)},M2.useRef=function(P){return N.H.useRef(P)},M2.useState=function(P){return N.H.useState(P)},M2.useSyncExternalStore=function(P,X,e2){return N.H.useSyncExternalStore(P,X,e2)},M2.useTransition=function(){return N.H.useTransition()},M2.version="19.1.0",M2}var JC;function fu(){return JC||(JC=1,QA.exports=dy()),QA.exports}var JA={exports:{}},k0={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ep;function my(){if(ep)return k0;ep=1;var t=fu();function n(C){var m="https://react.dev/errors/"+C;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)m+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+C+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function A(C,m,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:p==null?null:""+p,children:C,containerInfo:m,implementation:h}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(C,m){if(C==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return k0.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,k0.createPortal=function(C,m){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(n(299));return A(C,m,null,h)},k0.flushSync=function(C){var m=u.T,h=a.p;try{if(u.T=null,a.p=2,C)return C()}finally{u.T=m,a.p=h,a.d.f()}},k0.preconnect=function(C,m){typeof C=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,a.d.C(C,m))},k0.prefetchDNS=function(C){typeof C=="string"&&a.d.D(C)},k0.preinit=function(C,m){if(typeof C=="string"&&m&&typeof m.as=="string"){var h=m.as,p=f(h,m.crossOrigin),v=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;h==="style"?a.d.S(C,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:x}):h==="script"&&a.d.X(C,{crossOrigin:p,integrity:v,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},k0.preinitModule=function(C,m){if(typeof C=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var h=f(m.as,m.crossOrigin);a.d.M(C,{crossOrigin:h,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&a.d.M(C)},k0.preload=function(C,m){if(typeof C=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var h=m.as,p=f(h,m.crossOrigin);a.d.L(C,h,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},k0.preloadModule=function(C,m){if(typeof C=="string")if(m){var h=f(m.as,m.crossOrigin);a.d.m(C,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:h,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else a.d.m(C)},k0.requestFormReset=function(C){a.d.r(C)},k0.unstable_batchedUpdates=function(C,m){return C(m)},k0.useFormState=function(C,m,h){return u.H.useFormState(C,m,h)},k0.useFormStatus=function(){return u.H.useHostTransitionStatus()},k0.version="19.1.0",k0}var tp;function q3(){if(tp)return JA.exports;tp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),JA.exports=my(),JA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function Cy(){if(rp)return Go;rp=1;var t=fy(),n=fu(),i=q3();function a(e){var r="https://react.dev/errors/"+e;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function A(e){var r=e,o=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(o=r.return),e=r.return;while(e)}return r.tag===3?o:null}function u(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function f(e){if(A(e)!==e)throw Error(a(188))}function C(e){var r=e.alternate;if(!r){if(r=A(e),r===null)throw Error(a(188));return r!==e?null:e}for(var o=e,s=r;;){var c=o.return;if(c===null)break;var d=c.alternate;if(d===null){if(s=c.return,s!==null){o=s;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===o)return f(c),e;if(d===s)return f(c),r;d=d.sibling}throw Error(a(188))}if(o.return!==s.return)o=c,s=d;else{for(var S=!1,b=c.child;b;){if(b===o){S=!0,o=c,s=d;break}if(b===s){S=!0,s=c,o=d;break}b=b.sibling}if(!S){for(b=d.child;b;){if(b===o){S=!0,o=d,s=c;break}if(b===s){S=!0,s=d,o=c;break}b=b.sibling}if(!S)throw Error(a(189))}}if(o.alternate!==s)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?e:r}function m(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e;for(e=e.child;e!==null;){if(r=m(e),r!==null)return r;e=e.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),R=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),r2=Symbol.for("react.memo_cache_sentinel"),c2=Symbol.iterator;function s2(e){return e===null||typeof e!="object"?null:(e=c2&&e[c2]||e["@@iterator"],typeof e=="function"?e:null)}var i2=Symbol.for("react.client.reference");function Z(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===i2?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case y:return"Fragment";case F:return"Profiler";case B:return"StrictMode";case N:return"Suspense";case E:return"SuspenseList";case z:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case x:return"Portal";case R:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case M:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return r=e.displayName||null,r!==null?r:Z(e.type)||"Memo";case j:r=e._payload,e=e._init;try{return Z(e(r))}catch{}}return null}var u2=Array.isArray,I=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},K=[],P=-1;function X(e){return{current:e}}function e2(e){0>P||(e.current=K[P],K[P]=null,P--)}function o2(e,r){P++,K[P]=e.current,e.current=r}var f2=X(null),B2=X(null),p2=X(null),G2=X(null);function y2(e,r){switch(o2(p2,r),o2(B2,e),o2(f2,null),r.nodeType){case 9:case 11:e=(e=r.documentElement)&&(e=e.namespaceURI)?yC(e):0;break;default:if(e=r.tagName,r=r.namespaceURI)r=yC(r),e=BC(r,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}e2(f2),o2(f2,e)}function N2(){e2(f2),e2(B2),e2(p2)}function z2(e){e.memoizedState!==null&&o2(G2,e);var r=f2.current,o=BC(r,e.type);r!==o&&(o2(B2,e),o2(f2,o))}function f0(e){B2.current===e&&(e2(f2),e2(B2)),G2.current===e&&(e2(G2),Oo._currentValue=Q)}var N0=Object.prototype.hasOwnProperty,be=t.unstable_scheduleCallback,W0=t.unstable_cancelCallback,zn=t.unstable_shouldYield,Wn=t.unstable_requestPaint,O0=t.unstable_now,Gn=t.unstable_getCurrentPriorityLevel,et=t.unstable_ImmediatePriority,Di=t.unstable_UserBlockingPriority,jr=t.unstable_NormalPriority,tt=t.unstable_LowPriority,Bt=t.unstable_IdlePriority,vi=t.log,Vn=t.unstable_setDisableYieldValue,G0=null,A0=null;function we(e){if(typeof vi=="function"&&Vn(e),A0&&typeof A0.setStrictMode=="function")try{A0.setStrictMode(G0,e)}catch{}}var b0=Math.clz32?Math.clz32:xi,Ws=Math.log,He=Math.LN2;function xi(e){return e>>>=0,e===0?32:31-(Ws(e)/He|0)|0}var ir=256,ar=4194304;function rt(e){var r=e&42;if(r!==0)return r;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function sr(e,r,o){var s=e.pendingLanes;if(s===0)return 0;var c=0,d=e.suspendedLanes,S=e.pingedLanes;e=e.warmLanes;var b=s&134217727;return b!==0?(s=b&~d,s!==0?c=rt(s):(S&=b,S!==0?c=rt(S):o||(o=b&~e,o!==0&&(c=rt(o))))):(b=s&~d,b!==0?c=rt(b):S!==0?c=rt(S):o||(o=s&~e,o!==0&&(c=rt(o)))),c===0?0:r!==0&&r!==c&&(r&d)===0&&(d=c&-c,o=r&-r,d>=o||d===32&&(o&4194048)!==0)?r:c}function Ue(e,r){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&r)===0}function yi(e,r){switch(e){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hr(){var e=ir;return ir<<=1,(ir&4194048)===0&&(ir=256),e}function Bi(){var e=ar;return ar<<=1,(ar&62914560)===0&&(ar=4194304),e}function Ur(e){for(var r=[],o=0;31>o;o++)r.push(e);return r}function lr(e,r){e.pendingLanes|=r,r!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Si(e,r,o,s,c,d){var S=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var b=e.entanglements,_=e.expirationTimes,W=e.hiddenUpdates;for(o=S&~o;0<o;){var J=31-b0(o),n2=1<<J;b[J]=0,_[J]=-1;var G=W[J];if(G!==null)for(W[J]=null,J=0;J<G.length;J++){var Y=G[J];Y!==null&&(Y.lane&=-536870913)}o&=~n2}s!==0&&Ar(e,s,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(S&~r))}function Ar(e,r,o){e.pendingLanes|=r,e.suspendedLanes&=~r;var s=31-b0(r);e.entangledLanes|=r,e.entanglements[s]=e.entanglements[s]|1073741824|o&4194090}function cr(e,r){var o=e.entangledLanes|=r;for(e=e.entanglements;o;){var s=31-b0(o),c=1<<s;c&r|e[s]&r&&(e[s]|=r),o&=~c}}function Yn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function $n(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function L(){var e=V.p;return e!==0?e:(e=window.event,e===void 0?32:UC(e.type))}function H(e,r){var o=V.p;try{return V.p=e,r()}finally{V.p=o}}var $=Math.random().toString(36).slice(2),a2="__reactFiber$"+$,A2="__reactProps$"+$,g2="__reactContainer$"+$,S2="__reactEvents$"+$,d2="__reactListeners$"+$,v2="__reactHandles$"+$,x2="__reactResources$"+$,R2="__reactMarker$"+$;function h2(e){delete e[a2],delete e[A2],delete e[S2],delete e[d2],delete e[v2]}function w2(e){var r=e[a2];if(r)return r;for(var o=e.parentNode;o;){if(r=o[g2]||o[a2]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(e=RC(e);e!==null;){if(o=e[a2])return o;e=RC(e)}return r}e=o,o=e.parentNode}return null}function W2(e){if(e=e[a2]||e[g2]){var r=e.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return e}return null}function a0(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e.stateNode;throw Error(a(33))}function c0(e){var r=e[x2];return r||(r=e[x2]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function V2(e){e[R2]=!0}var H2=new Set,St={};function j0(e,r){ce(e,r),ce(e+"Capture",r)}function ce(e,r){for(St[e]=r,e=0;e<r.length;e++)H2.add(r[e])}var V0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ft={},Tt={};function Kn(e){return N0.call(Tt,e)?!0:N0.call(Ft,e)?!1:V0.test(e)?Tt[e]=!0:(Ft[e]=!0,!1)}function ue(e,r,o){if(Kn(r))if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(r);return;case"boolean":var s=r.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(r);return}}e.setAttribute(r,""+o)}}function nt(e,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttribute(r,""+o)}}function I2(e,r,o,s){if(s===null)e.removeAttribute(o);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(r,o,""+s)}}var _0,Ee;function Me(e){if(_0===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);_0=r&&r[1]||"",Ee=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_0+e+Ee}var ur=!1;function s0(e,r){if(!e||ur)return"";ur=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(r){var n2=function(){throw Error()};if(Object.defineProperty(n2.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n2,[])}catch(Y){var G=Y}Reflect.construct(e,[],n2)}else{try{n2.call()}catch(Y){G=Y}e.call(n2.prototype)}}else{try{throw Error()}catch(Y){G=Y}(n2=e())&&typeof n2.catch=="function"&&n2.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=s.DetermineComponentFrameRoot(),S=d[0],b=d[1];if(S&&b){var _=S.split(`
`),W=b.split(`
`);for(c=s=0;s<_.length&&!_[s].includes("DetermineComponentFrameRoot");)s++;for(;c<W.length&&!W[c].includes("DetermineComponentFrameRoot");)c++;if(s===_.length||c===W.length)for(s=_.length-1,c=W.length-1;1<=s&&0<=c&&_[s]!==W[c];)c--;for(;1<=s&&0<=c;s--,c--)if(_[s]!==W[c]){if(s!==1||c!==1)do if(s--,c--,0>c||_[s]!==W[c]){var J=`
`+_[s].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=s&&0<=c);break}}}finally{ur=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?Me(o):""}function Rt(e){switch(e.tag){case 26:case 27:case 5:return Me(e.type);case 16:return Me("Lazy");case 13:return Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return s0(e.type,!1);case 11:return s0(e.type.render,!1);case 1:return s0(e.type,!0);case 31:return Me("Activity");default:return""}}function Zn(e){try{var r="";do r+=Rt(e),e=e.return;while(e);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Y0(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gf(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function rv(e){var r=gf(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),s=""+e[r];if(!e.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,d=o.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return c.call(this)},set:function(S){s=""+S,d.call(this,S)}}),Object.defineProperty(e,r,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(S){s=""+S},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function Fi(e){e._valueTracker||(e._valueTracker=rv(e))}function hf(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var o=r.getValue(),s="";return e&&(s=gf(e)?e.checked?"true":"false":e.value),e=s,e!==o?(r.setValue(e),!0):!1}function Ti(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var nv=/[\n"\\]/g;function fe(e){return e.replace(nv,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Gs(e,r,o,s,c,d,S,b){e.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.type=S:e.removeAttribute("type"),r!=null?S==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+Y0(r)):e.value!==""+Y0(r)&&(e.value=""+Y0(r)):S!=="submit"&&S!=="reset"||e.removeAttribute("value"),r!=null?Vs(e,S,Y0(r)):o!=null?Vs(e,S,Y0(o)):s!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Y0(b):e.removeAttribute("name")}function Df(e,r,o,s,c,d,S,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),r!=null||o!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;o=o!=null?""+Y0(o):"",r=r!=null?""+Y0(r):o,b||r===e.value||(e.value=r),e.defaultValue=r}s=s??c,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=b?e.checked:!!s,e.defaultChecked=!!s,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.name=S)}function Vs(e,r,o){r==="number"&&Ti(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function zr(e,r,o,s){if(e=e.options,r){r={};for(var c=0;c<o.length;c++)r["$"+o[c]]=!0;for(o=0;o<e.length;o++)c=r.hasOwnProperty("$"+e[o].value),e[o].selected!==c&&(e[o].selected=c),c&&s&&(e[o].defaultSelected=!0)}else{for(o=""+Y0(o),r=null,c=0;c<e.length;c++){if(e[c].value===o){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}r!==null||e[c].disabled||(r=e[c])}r!==null&&(r.selected=!0)}}function vf(e,r,o){if(r!=null&&(r=""+Y0(r),r!==e.value&&(e.value=r),o==null)){e.defaultValue!==r&&(e.defaultValue=r);return}e.defaultValue=o!=null?""+Y0(o):""}function xf(e,r,o,s){if(r==null){if(s!=null){if(o!=null)throw Error(a(92));if(u2(s)){if(1<s.length)throw Error(a(93));s=s[0]}o=s}o==null&&(o=""),r=o}o=Y0(r),e.defaultValue=o,s=e.textContent,s===o&&s!==""&&s!==null&&(e.value=s)}function Wr(e,r){if(r){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=r;return}}e.textContent=r}var ov=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yf(e,r,o){var s=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?s?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="":s?e.setProperty(r,o):typeof o!="number"||o===0||ov.has(r)?r==="float"?e.cssFloat=o:e[r]=(""+o).trim():e[r]=o+"px"}function Bf(e,r,o){if(r!=null&&typeof r!="object")throw Error(a(62));if(e=e.style,o!=null){for(var s in o)!o.hasOwnProperty(s)||r!=null&&r.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var c in r)s=r[c],r.hasOwnProperty(c)&&o[c]!==s&&yf(e,c,s)}else for(var d in r)r.hasOwnProperty(d)&&yf(e,d,r[d])}function Ys(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),av=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ri(e){return av.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var $s=null;function Ks(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gr=null,Vr=null;function Sf(e){var r=W2(e);if(r&&(e=r.stateNode)){var o=e[A2]||null;e:switch(e=r.stateNode,r.type){case"input":if(Gs(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+fe(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var s=o[r];if(s!==e&&s.form===e.form){var c=s[A2]||null;if(!c)throw Error(a(90));Gs(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(r=0;r<o.length;r++)s=o[r],s.form===e.form&&hf(s)}break e;case"textarea":vf(e,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&zr(e,!!o.multiple,r,!1)}}}var Zs=!1;function Ff(e,r,o){if(Zs)return e(r,o);Zs=!0;try{var s=e(r);return s}finally{if(Zs=!1,(Gr!==null||Vr!==null)&&(fa(),Gr&&(r=Gr,e=Vr,Vr=Gr=null,Sf(r),e)))for(r=0;r<e.length;r++)Sf(e[r])}}function Xn(e,r){var o=e.stateNode;if(o===null)return null;var s=o[A2]||null;if(s===null)return null;o=s[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(a(231,r,typeof o));return o}var ot=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xs=!1;if(ot)try{var Qn={};Object.defineProperty(Qn,"passive",{get:function(){Xs=!0}}),window.addEventListener("test",Qn,Qn),window.removeEventListener("test",Qn,Qn)}catch{Xs=!1}var bt=null,Qs=null,bi=null;function Tf(){if(bi)return bi;var e,r=Qs,o=r.length,s,c="value"in bt?bt.value:bt.textContent,d=c.length;for(e=0;e<o&&r[e]===c[e];e++);var S=o-e;for(s=1;s<=S&&r[o-s]===c[d-s];s++);return bi=c.slice(e,1<s?1-s:void 0)}function wi(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Ei(){return!0}function Rf(){return!1}function $0(e){function r(o,s,c,d,S){this._reactName=o,this._targetInst=c,this.type=s,this.nativeEvent=d,this.target=S,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(o=e[b],this[b]=o?o(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ei:Rf,this.isPropagationStopped=Rf,this}return h(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),r}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mi=$0(fr),Jn=h({},fr,{view:0,detail:0}),sv=$0(Jn),Js,el,eo,Pi=h({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==eo&&(eo&&e.type==="mousemove"?(Js=e.screenX-eo.screenX,el=e.screenY-eo.screenY):el=Js=0,eo=e),Js)},movementY:function(e){return"movementY"in e?e.movementY:el}}),bf=$0(Pi),lv=h({},Pi,{dataTransfer:0}),Av=$0(lv),cv=h({},Jn,{relatedTarget:0}),tl=$0(cv),uv=h({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),fv=$0(uv),dv=h({},fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mv=$0(dv),Cv=h({},fr,{data:0}),wf=$0(Cv),pv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dv(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=hv[e])?!!r[e]:!1}function rl(){return Dv}var vv=h({},Jn,{key:function(e){if(e.key){var r=pv[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=wi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rl,charCode:function(e){return e.type==="keypress"?wi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xv=$0(vv),yv=h({},Pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ef=$0(yv),Bv=h({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rl}),Sv=$0(Bv),Fv=h({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tv=$0(Fv),Rv=h({},Pi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bv=$0(Rv),wv=h({},fr,{newState:0,oldState:0}),Ev=$0(wv),Mv=[9,13,27,32],nl=ot&&"CompositionEvent"in window,to=null;ot&&"documentMode"in document&&(to=document.documentMode);var Pv=ot&&"TextEvent"in window&&!to,Mf=ot&&(!nl||to&&8<to&&11>=to),Pf=" ",Nf=!1;function _f(e,r){switch(e){case"keyup":return Mv.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yr=!1;function Nv(e,r){switch(e){case"compositionend":return Lf(r);case"keypress":return r.which!==32?null:(Nf=!0,Pf);case"textInput":return e=r.data,e===Pf&&Nf?null:e;default:return null}}function _v(e,r){if(Yr)return e==="compositionend"||!nl&&_f(e,r)?(e=Tf(),bi=Qs=bt=null,Yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Mf&&r.locale!=="ko"?null:r.data;default:return null}}var Lv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kf(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Lv[e.type]:r==="textarea"}function If(e,r,o,s){Gr?Vr?Vr.push(s):Vr=[s]:Gr=s,r=ha(r,"onChange"),0<r.length&&(o=new Mi("onChange","change",null,o,s),e.push({event:o,listeners:r}))}var ro=null,no=null;function kv(e){gC(e,0)}function Ni(e){var r=a0(e);if(hf(r))return e}function qf(e,r){if(e==="change")return r}var Of=!1;if(ot){var ol;if(ot){var il="oninput"in document;if(!il){var jf=document.createElement("div");jf.setAttribute("oninput","return;"),il=typeof jf.oninput=="function"}ol=il}else ol=!1;Of=ol&&(!document.documentMode||9<document.documentMode)}function Hf(){ro&&(ro.detachEvent("onpropertychange",Uf),no=ro=null)}function Uf(e){if(e.propertyName==="value"&&Ni(no)){var r=[];If(r,no,e,Ks(e)),Ff(kv,r)}}function Iv(e,r,o){e==="focusin"?(Hf(),ro=r,no=o,ro.attachEvent("onpropertychange",Uf)):e==="focusout"&&Hf()}function qv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ni(no)}function Ov(e,r){if(e==="click")return Ni(r)}function jv(e,r){if(e==="input"||e==="change")return Ni(r)}function Hv(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Q0=typeof Object.is=="function"?Object.is:Hv;function oo(e,r){if(Q0(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var o=Object.keys(e),s=Object.keys(r);if(o.length!==s.length)return!1;for(s=0;s<o.length;s++){var c=o[s];if(!N0.call(r,c)||!Q0(e[c],r[c]))return!1}return!0}function zf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wf(e,r){var o=zf(e);e=0;for(var s;o;){if(o.nodeType===3){if(s=e+o.textContent.length,e<=r&&s>=r)return{node:o,offset:r-e};e=s}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zf(o)}}function Gf(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Gf(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Vf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var r=Ti(e.document);r instanceof e.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)e=r.contentWindow;else break;r=Ti(e.document)}return r}function al(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}var Uv=ot&&"documentMode"in document&&11>=document.documentMode,$r=null,sl=null,io=null,ll=!1;function Yf(e,r,o){var s=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;ll||$r==null||$r!==Ti(s)||(s=$r,"selectionStart"in s&&al(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),io&&oo(io,s)||(io=s,s=ha(sl,"onSelect"),0<s.length&&(r=new Mi("onSelect","select",null,r,o),e.push({event:r,listeners:s}),r.target=$r)))}function dr(e,r){var o={};return o[e.toLowerCase()]=r.toLowerCase(),o["Webkit"+e]="webkit"+r,o["Moz"+e]="moz"+r,o}var Kr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},Al={},$f={};ot&&($f=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function mr(e){if(Al[e])return Al[e];if(!Kr[e])return e;var r=Kr[e],o;for(o in r)if(r.hasOwnProperty(o)&&o in $f)return Al[e]=r[o];return e}var Kf=mr("animationend"),Zf=mr("animationiteration"),Xf=mr("animationstart"),zv=mr("transitionrun"),Wv=mr("transitionstart"),Gv=mr("transitioncancel"),Qf=mr("transitionend"),Jf=new Map,cl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cl.push("scrollEnd");function Pe(e,r){Jf.set(e,r),j0(r,[e])}var ed=new WeakMap;function de(e,r){if(typeof e=="object"&&e!==null){var o=ed.get(e);return o!==void 0?o:(r={value:e,source:r,stack:Zn(r)},ed.set(e,r),r)}return{value:e,source:r,stack:Zn(r)}}var me=[],Zr=0,ul=0;function _i(){for(var e=Zr,r=ul=Zr=0;r<e;){var o=me[r];me[r++]=null;var s=me[r];me[r++]=null;var c=me[r];me[r++]=null;var d=me[r];if(me[r++]=null,s!==null&&c!==null){var S=s.pending;S===null?c.next=c:(c.next=S.next,S.next=c),s.pending=c}d!==0&&td(o,c,d)}}function Li(e,r,o,s){me[Zr++]=e,me[Zr++]=r,me[Zr++]=o,me[Zr++]=s,ul|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function fl(e,r,o,s){return Li(e,r,o,s),ki(e)}function Xr(e,r){return Li(e,null,null,r),ki(e)}function td(e,r,o){e.lanes|=o;var s=e.alternate;s!==null&&(s.lanes|=o);for(var c=!1,d=e.return;d!==null;)d.childLanes|=o,s=d.alternate,s!==null&&(s.childLanes|=o),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&r!==null&&(c=31-b0(o),e=d.hiddenUpdates,s=e[c],s===null?e[c]=[r]:s.push(r),r.lane=o|536870912),d):null}function ki(e){if(50<Mo)throw Mo=0,hA=null,Error(a(185));for(var r=e.return;r!==null;)e=r,r=e.return;return e.tag===3?e.stateNode:null}var Qr={};function Vv(e,r,o,s){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function J0(e,r,o,s){return new Vv(e,r,o,s)}function dl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function it(e,r){var o=e.alternate;return o===null?(o=J0(e.tag,r,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=r,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,r=e.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function rd(e,r){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=r,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,r=o.dependencies,e.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e}function Ii(e,r,o,s,c,d){var S=0;if(s=e,typeof e=="function")dl(e)&&(S=1);else if(typeof e=="string")S=$x(e,o,f2.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case z:return e=J0(31,o,r,c),e.elementType=z,e.lanes=d,e;case y:return Cr(o.children,c,d,r);case B:S=8,c|=24;break;case F:return e=J0(12,o,r,c|2),e.elementType=F,e.lanes=d,e;case N:return e=J0(13,o,r,c),e.elementType=N,e.lanes=d,e;case E:return e=J0(19,o,r,c),e.elementType=E,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T:case R:S=10;break e;case w:S=9;break e;case M:S=11;break e;case k:S=14;break e;case j:S=16,s=null;break e}S=29,o=Error(a(130,e===null?"null":typeof e,"")),s=null}return r=J0(S,o,r,c),r.elementType=e,r.type=s,r.lanes=d,r}function Cr(e,r,o,s){return e=J0(7,e,s,r),e.lanes=o,e}function ml(e,r,o){return e=J0(6,e,null,r),e.lanes=o,e}function Cl(e,r,o){return r=J0(4,e.children!==null?e.children:[],e.key,r),r.lanes=o,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}var Jr=[],en=0,qi=null,Oi=0,Ce=[],pe=0,pr=null,at=1,st="";function gr(e,r){Jr[en++]=Oi,Jr[en++]=qi,qi=e,Oi=r}function nd(e,r,o){Ce[pe++]=at,Ce[pe++]=st,Ce[pe++]=pr,pr=e;var s=at;e=st;var c=32-b0(s)-1;s&=~(1<<c),o+=1;var d=32-b0(r)+c;if(30<d){var S=c-c%5;d=(s&(1<<S)-1).toString(32),s>>=S,c-=S,at=1<<32-b0(r)+c|o<<c|s,st=d+e}else at=1<<d|o<<c|s,st=e}function pl(e){e.return!==null&&(gr(e,1),nd(e,1,0))}function gl(e){for(;e===qi;)qi=Jr[--en],Jr[en]=null,Oi=Jr[--en],Jr[en]=null;for(;e===pr;)pr=Ce[--pe],Ce[pe]=null,st=Ce[--pe],Ce[pe]=null,at=Ce[--pe],Ce[pe]=null}var H0=null,d0=null,$2=!1,hr=null,ze=!1,hl=Error(a(519));function Dr(e){var r=Error(a(418,""));throw lo(de(r,e)),hl}function od(e){var r=e.stateNode,o=e.type,s=e.memoizedProps;switch(r[a2]=e,r[A2]=s,o){case"dialog":j2("cancel",r),j2("close",r);break;case"iframe":case"object":case"embed":j2("load",r);break;case"video":case"audio":for(o=0;o<No.length;o++)j2(No[o],r);break;case"source":j2("error",r);break;case"img":case"image":case"link":j2("error",r),j2("load",r);break;case"details":j2("toggle",r);break;case"input":j2("invalid",r),Df(r,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),Fi(r);break;case"select":j2("invalid",r);break;case"textarea":j2("invalid",r),xf(r,s.value,s.defaultValue,s.children),Fi(r)}o=s.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||s.suppressHydrationWarning===!0||xC(r.textContent,o)?(s.popover!=null&&(j2("beforetoggle",r),j2("toggle",r)),s.onScroll!=null&&j2("scroll",r),s.onScrollEnd!=null&&j2("scrollend",r),s.onClick!=null&&(r.onclick=Da),r=!0):r=!1,r||Dr(e)}function id(e){for(H0=e.return;H0;)switch(H0.tag){case 5:case 13:ze=!1;return;case 27:case 3:ze=!0;return;default:H0=H0.return}}function ao(e){if(e!==H0)return!1;if(!$2)return id(e),$2=!0,!1;var r=e.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||_A(e.type,e.memoizedProps)),o=!o),o&&d0&&Dr(e),id(e),r===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8)if(o=e.data,o==="/$"){if(r===0){d0=_e(e.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;e=e.nextSibling}d0=null}}else r===27?(r=d0,Wt(e.type)?(e=qA,qA=null,d0=e):d0=r):d0=H0?_e(e.stateNode.nextSibling):null;return!0}function so(){d0=H0=null,$2=!1}function ad(){var e=hr;return e!==null&&(X0===null?X0=e:X0.push.apply(X0,e),hr=null),e}function lo(e){hr===null?hr=[e]:hr.push(e)}var Dl=X(null),vr=null,lt=null;function wt(e,r,o){o2(Dl,r._currentValue),r._currentValue=o}function At(e){e._currentValue=Dl.current,e2(Dl)}function vl(e,r,o){for(;e!==null;){var s=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,s!==null&&(s.childLanes|=r)):s!==null&&(s.childLanes&r)!==r&&(s.childLanes|=r),e===o)break;e=e.return}}function xl(e,r,o,s){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var S=c.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=c;for(var _=0;_<r.length;_++)if(b.context===r[_]){d.lanes|=o,b=d.alternate,b!==null&&(b.lanes|=o),vl(d.return,o,e),s||(S=null);break e}d=b.next}}else if(c.tag===18){if(S=c.return,S===null)throw Error(a(341));S.lanes|=o,d=S.alternate,d!==null&&(d.lanes|=o),vl(S,o,e),S=null}else S=c.child;if(S!==null)S.return=c;else for(S=c;S!==null;){if(S===e){S=null;break}if(c=S.sibling,c!==null){c.return=S.return,S=c;break}S=S.return}c=S}}function Ao(e,r,o,s){e=null;for(var c=r,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var S=c.alternate;if(S===null)throw Error(a(387));if(S=S.memoizedProps,S!==null){var b=c.type;Q0(c.pendingProps.value,S.value)||(e!==null?e.push(b):e=[b])}}else if(c===G2.current){if(S=c.alternate,S===null)throw Error(a(387));S.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Oo):e=[Oo])}c=c.return}e!==null&&xl(r,e,o,s),r.flags|=262144}function ji(e){for(e=e.firstContext;e!==null;){if(!Q0(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function xr(e){vr=e,lt=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function L0(e){return sd(vr,e)}function Hi(e,r){return vr===null&&xr(e),sd(e,r)}function sd(e,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},lt===null){if(e===null)throw Error(a(308));lt=r,e.dependencies={lanes:0,firstContext:r},e.flags|=524288}else lt=lt.next=r;return o}var Yv=typeof AbortController<"u"?AbortController:function(){var e=[],r=this.signal={aborted:!1,addEventListener:function(o,s){e.push(s)}};this.abort=function(){r.aborted=!0,e.forEach(function(o){return o()})}},$v=t.unstable_scheduleCallback,Kv=t.unstable_NormalPriority,y0={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yl(){return{controller:new Yv,data:new Map,refCount:0}}function co(e){e.refCount--,e.refCount===0&&$v(Kv,function(){e.controller.abort()})}var uo=null,Bl=0,tn=0,rn=null;function Zv(e,r){if(uo===null){var o=uo=[];Bl=0,tn=FA(),rn={status:"pending",value:void 0,then:function(s){o.push(s)}}}return Bl++,r.then(ld,ld),r}function ld(){if(--Bl===0&&uo!==null){rn!==null&&(rn.status="fulfilled");var e=uo;uo=null,tn=0,rn=null;for(var r=0;r<e.length;r++)(0,e[r])()}}function Xv(e,r){var o=[],s={status:"pending",value:null,reason:null,then:function(c){o.push(c)}};return e.then(function(){s.status="fulfilled",s.value=r;for(var c=0;c<o.length;c++)(0,o[c])(r)},function(c){for(s.status="rejected",s.reason=c,c=0;c<o.length;c++)(0,o[c])(void 0)}),s}var Ad=I.S;I.S=function(e,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Zv(e,r),Ad!==null&&Ad(e,r)};var yr=X(null);function Sl(){var e=yr.current;return e!==null?e:t0.pooledCache}function Ui(e,r){r===null?o2(yr,yr.current):o2(yr,r.pool)}function cd(){var e=Sl();return e===null?null:{parent:y0._currentValue,pool:e}}var fo=Error(a(460)),ud=Error(a(474)),zi=Error(a(542)),Fl={then:function(){}};function fd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Wi(){}function dd(e,r,o){switch(o=e[o],o===void 0?e.push(r):o!==r&&(r.then(Wi,Wi),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,Cd(e),e;default:if(typeof r.status=="string")r.then(Wi,Wi);else{if(e=t0,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=r,e.status="pending",e.then(function(s){if(r.status==="pending"){var c=r;c.status="fulfilled",c.value=s}},function(s){if(r.status==="pending"){var c=r;c.status="rejected",c.reason=s}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,Cd(e),e}throw mo=r,fo}}var mo=null;function md(){if(mo===null)throw Error(a(459));var e=mo;return mo=null,e}function Cd(e){if(e===fo||e===zi)throw Error(a(483))}var Et=!1;function Tl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rl(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Mt(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Pt(e,r,o){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(K2&2)!==0){var c=s.pending;return c===null?r.next=r:(r.next=c.next,c.next=r),s.pending=r,r=ki(e),td(e,null,o),r}return Li(e,s,r,o),ki(e)}function Co(e,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var s=r.lanes;s&=e.pendingLanes,o|=s,r.lanes=o,cr(e,o)}}function bl(e,r){var o=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,o===s)){var c=null,d=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};d===null?c=d=S:d=d.next=S,o=o.next}while(o!==null);d===null?c=d=r:d=d.next=r}else c=d=r;o={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:s.shared,callbacks:s.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=r:e.next=r,o.lastBaseUpdate=r}var wl=!1;function po(){if(wl){var e=rn;if(e!==null)throw e}}function go(e,r,o,s){wl=!1;var c=e.updateQueue;Et=!1;var d=c.firstBaseUpdate,S=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var _=b,W=_.next;_.next=null,S===null?d=W:S.next=W,S=_;var J=e.alternate;J!==null&&(J=J.updateQueue,b=J.lastBaseUpdate,b!==S&&(b===null?J.firstBaseUpdate=W:b.next=W,J.lastBaseUpdate=_))}if(d!==null){var n2=c.baseState;S=0,J=W=_=null,b=d;do{var G=b.lane&-536870913,Y=G!==b.lane;if(Y?(U2&G)===G:(s&G)===G){G!==0&&G===tn&&(wl=!0),J!==null&&(J=J.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var b2=e,F2=b;G=r;var J2=o;switch(F2.tag){case 1:if(b2=F2.payload,typeof b2=="function"){n2=b2.call(J2,n2,G);break e}n2=b2;break e;case 3:b2.flags=b2.flags&-65537|128;case 0:if(b2=F2.payload,G=typeof b2=="function"?b2.call(J2,n2,G):b2,G==null)break e;n2=h({},n2,G);break e;case 2:Et=!0}}G=b.callback,G!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=c.callbacks,Y===null?c.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},J===null?(W=J=Y,_=n2):J=J.next=Y,S|=G;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;Y=b,b=Y.next,Y.next=null,c.lastBaseUpdate=Y,c.shared.pending=null}}while(!0);J===null&&(_=n2),c.baseState=_,c.firstBaseUpdate=W,c.lastBaseUpdate=J,d===null&&(c.shared.lanes=0),jt|=S,e.lanes=S,e.memoizedState=n2}}function pd(e,r){if(typeof e!="function")throw Error(a(191,e));e.call(r)}function gd(e,r){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)pd(o[e],r)}var nn=X(null),Gi=X(0);function hd(e,r){e=pt,o2(Gi,e),o2(nn,r),pt=e|r.baseLanes}function El(){o2(Gi,pt),o2(nn,nn.current)}function Ml(){pt=Gi.current,e2(nn),e2(Gi)}var Nt=0,_2=null,X2=null,v0=null,Vi=!1,on=!1,Br=!1,Yi=0,ho=0,an=null,Qv=0;function p0(){throw Error(a(321))}function Pl(e,r){if(r===null)return!1;for(var o=0;o<r.length&&o<e.length;o++)if(!Q0(e[o],r[o]))return!1;return!0}function Nl(e,r,o,s,c,d){return Nt=d,_2=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,I.H=e===null||e.memoizedState===null?tm:rm,Br=!1,d=o(s,c),Br=!1,on&&(d=vd(r,o,s,c)),Dd(e),d}function Dd(e){I.H=Ji;var r=X2!==null&&X2.next!==null;if(Nt=0,v0=X2=_2=null,Vi=!1,ho=0,an=null,r)throw Error(a(300));e===null||S0||(e=e.dependencies,e!==null&&ji(e)&&(S0=!0))}function vd(e,r,o,s){_2=e;var c=0;do{if(on&&(an=null),ho=0,on=!1,25<=c)throw Error(a(301));if(c+=1,v0=X2=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}I.H=ix,d=r(o,s)}while(on);return d}function Jv(){var e=I.H,r=e.useState()[0];return r=typeof r.then=="function"?Do(r):r,e=e.useState()[0],(X2!==null?X2.memoizedState:null)!==e&&(_2.flags|=1024),r}function _l(){var e=Yi!==0;return Yi=0,e}function Ll(e,r,o){r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~o}function kl(e){if(Vi){for(e=e.memoizedState;e!==null;){var r=e.queue;r!==null&&(r.pending=null),e=e.next}Vi=!1}Nt=0,v0=X2=_2=null,on=!1,ho=Yi=0,an=null}function K0(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return v0===null?_2.memoizedState=v0=e:v0=v0.next=e,v0}function x0(){if(X2===null){var e=_2.alternate;e=e!==null?e.memoizedState:null}else e=X2.next;var r=v0===null?_2.memoizedState:v0.next;if(r!==null)v0=r,X2=e;else{if(e===null)throw _2.alternate===null?Error(a(467)):Error(a(310));X2=e,e={memoizedState:X2.memoizedState,baseState:X2.baseState,baseQueue:X2.baseQueue,queue:X2.queue,next:null},v0===null?_2.memoizedState=v0=e:v0=v0.next=e}return v0}function Il(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Do(e){var r=ho;return ho+=1,an===null&&(an=[]),e=dd(an,e,r),r=_2,(v0===null?r.memoizedState:v0.next)===null&&(r=r.alternate,I.H=r===null||r.memoizedState===null?tm:rm),e}function $i(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Do(e);if(e.$$typeof===R)return L0(e)}throw Error(a(438,String(e)))}function ql(e){var r=null,o=_2.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var s=_2.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(r={data:s.data.map(function(c){return c.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Il(),_2.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(e),s=0;s<e;s++)o[s]=r2;return r.index++,o}function ct(e,r){return typeof r=="function"?r(e):r}function Ki(e){var r=x0();return Ol(r,X2,e)}function Ol(e,r,o){var s=e.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=o;var c=e.baseQueue,d=s.pending;if(d!==null){if(c!==null){var S=c.next;c.next=d.next,d.next=S}r.baseQueue=c=d,s.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{r=c.next;var b=S=null,_=null,W=r,J=!1;do{var n2=W.lane&-536870913;if(n2!==W.lane?(U2&n2)===n2:(Nt&n2)===n2){var G=W.revertLane;if(G===0)_!==null&&(_=_.next={lane:0,revertLane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),n2===tn&&(J=!0);else if((Nt&G)===G){W=W.next,G===tn&&(J=!0);continue}else n2={lane:0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},_===null?(b=_=n2,S=d):_=_.next=n2,_2.lanes|=G,jt|=G;n2=W.action,Br&&o(d,n2),d=W.hasEagerState?W.eagerState:o(d,n2)}else G={lane:n2,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},_===null?(b=_=G,S=d):_=_.next=G,_2.lanes|=n2,jt|=n2;W=W.next}while(W!==null&&W!==r);if(_===null?S=d:_.next=b,!Q0(d,e.memoizedState)&&(S0=!0,J&&(o=rn,o!==null)))throw o;e.memoizedState=d,e.baseState=S,e.baseQueue=_,s.lastRenderedState=d}return c===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function jl(e){var r=x0(),o=r.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=e;var s=o.dispatch,c=o.pending,d=r.memoizedState;if(c!==null){o.pending=null;var S=c=c.next;do d=e(d,S.action),S=S.next;while(S!==c);Q0(d,r.memoizedState)||(S0=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),o.lastRenderedState=d}return[d,s]}function xd(e,r,o){var s=_2,c=x0(),d=$2;if(d){if(o===void 0)throw Error(a(407));o=o()}else o=r();var S=!Q0((X2||c).memoizedState,o);S&&(c.memoizedState=o,S0=!0),c=c.queue;var b=Sd.bind(null,s,c,e);if(vo(2048,8,b,[e]),c.getSnapshot!==r||S||v0!==null&&v0.memoizedState.tag&1){if(s.flags|=2048,sn(9,Zi(),Bd.bind(null,s,c,o,r),null),t0===null)throw Error(a(349));d||(Nt&124)!==0||yd(s,r,o)}return o}function yd(e,r,o){e.flags|=16384,e={getSnapshot:r,value:o},r=_2.updateQueue,r===null?(r=Il(),_2.updateQueue=r,r.stores=[e]):(o=r.stores,o===null?r.stores=[e]:o.push(e))}function Bd(e,r,o,s){r.value=o,r.getSnapshot=s,Fd(r)&&Td(e)}function Sd(e,r,o){return o(function(){Fd(r)&&Td(e)})}function Fd(e){var r=e.getSnapshot;e=e.value;try{var o=r();return!Q0(e,o)}catch{return!0}}function Td(e){var r=Xr(e,2);r!==null&&oe(r,e,2)}function Hl(e){var r=K0();if(typeof e=="function"){var o=e;if(e=o(),Br){we(!0);try{o()}finally{we(!1)}}}return r.memoizedState=r.baseState=e,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ct,lastRenderedState:e},r}function Rd(e,r,o,s){return e.baseState=o,Ol(e,X2,typeof s=="function"?s:ct)}function ex(e,r,o,s,c){if(Qi(e))throw Error(a(485));if(e=r.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){d.listeners.push(S)}};I.T!==null?o(!0):d.isTransition=!1,s(d),o=r.pending,o===null?(d.next=r.pending=d,bd(r,d)):(d.next=o.next,r.pending=o.next=d)}}function bd(e,r){var o=r.action,s=r.payload,c=e.state;if(r.isTransition){var d=I.T,S={};I.T=S;try{var b=o(c,s),_=I.S;_!==null&&_(S,b),wd(e,r,b)}catch(W){Ul(e,r,W)}finally{I.T=d}}else try{d=o(c,s),wd(e,r,d)}catch(W){Ul(e,r,W)}}function wd(e,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(s){Ed(e,r,s)},function(s){return Ul(e,r,s)}):Ed(e,r,o)}function Ed(e,r,o){r.status="fulfilled",r.value=o,Md(r),e.state=o,r=e.pending,r!==null&&(o=r.next,o===r?e.pending=null:(o=o.next,r.next=o,bd(e,o)))}function Ul(e,r,o){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do r.status="rejected",r.reason=o,Md(r),r=r.next;while(r!==s)}e.action=null}function Md(e){e=e.listeners;for(var r=0;r<e.length;r++)(0,e[r])()}function Pd(e,r){return r}function Nd(e,r){if($2){var o=t0.formState;if(o!==null){e:{var s=_2;if($2){if(d0){t:{for(var c=d0,d=ze;c.nodeType!==8;){if(!d){c=null;break t}if(c=_e(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){d0=_e(c.nextSibling),s=c.data==="F!";break e}}Dr(s)}s=!1}s&&(r=o[0])}}return o=K0(),o.memoizedState=o.baseState=r,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pd,lastRenderedState:r},o.queue=s,o=Qd.bind(null,_2,s),s.dispatch=o,s=Hl(!1),d=Yl.bind(null,_2,!1,s.queue),s=K0(),c={state:r,dispatch:null,action:e,pending:null},s.queue=c,o=ex.bind(null,_2,c,d,o),c.dispatch=o,s.memoizedState=e,[r,o,!1]}function _d(e){var r=x0();return Ld(r,X2,e)}function Ld(e,r,o){if(r=Ol(e,r,Pd)[0],e=Ki(ct)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var s=Do(r)}catch(S){throw S===fo?zi:S}else s=r;r=x0();var c=r.queue,d=c.dispatch;return o!==r.memoizedState&&(_2.flags|=2048,sn(9,Zi(),tx.bind(null,c,o),null)),[s,d,e]}function tx(e,r){e.action=r}function kd(e){var r=x0(),o=X2;if(o!==null)return Ld(r,o,e);x0(),r=r.memoizedState,o=x0();var s=o.queue.dispatch;return o.memoizedState=e,[r,s,!1]}function sn(e,r,o,s){return e={tag:e,create:o,deps:s,inst:r,next:null},r=_2.updateQueue,r===null&&(r=Il(),_2.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=e.next=e:(s=o.next,o.next=e,e.next=s,r.lastEffect=e),e}function Zi(){return{destroy:void 0,resource:void 0}}function Id(){return x0().memoizedState}function Xi(e,r,o,s){var c=K0();s=s===void 0?null:s,_2.flags|=e,c.memoizedState=sn(1|r,Zi(),o,s)}function vo(e,r,o,s){var c=x0();s=s===void 0?null:s;var d=c.memoizedState.inst;X2!==null&&s!==null&&Pl(s,X2.memoizedState.deps)?c.memoizedState=sn(r,d,o,s):(_2.flags|=e,c.memoizedState=sn(1|r,d,o,s))}function qd(e,r){Xi(8390656,8,e,r)}function Od(e,r){vo(2048,8,e,r)}function jd(e,r){return vo(4,2,e,r)}function Hd(e,r){return vo(4,4,e,r)}function Ud(e,r){if(typeof r=="function"){e=e();var o=r(e);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function zd(e,r,o){o=o!=null?o.concat([e]):null,vo(4,4,Ud.bind(null,r,e),o)}function zl(){}function Wd(e,r){var o=x0();r=r===void 0?null:r;var s=o.memoizedState;return r!==null&&Pl(r,s[1])?s[0]:(o.memoizedState=[e,r],e)}function Gd(e,r){var o=x0();r=r===void 0?null:r;var s=o.memoizedState;if(r!==null&&Pl(r,s[1]))return s[0];if(s=e(),Br){we(!0);try{e()}finally{we(!1)}}return o.memoizedState=[s,r],s}function Wl(e,r,o){return o===void 0||(Nt&1073741824)!==0?e.memoizedState=r:(e.memoizedState=o,e=$m(),_2.lanes|=e,jt|=e,o)}function Vd(e,r,o,s){return Q0(o,r)?o:nn.current!==null?(e=Wl(e,o,s),Q0(e,r)||(S0=!0),e):(Nt&42)===0?(S0=!0,e.memoizedState=o):(e=$m(),_2.lanes|=e,jt|=e,r)}function Yd(e,r,o,s,c){var d=V.p;V.p=d!==0&&8>d?d:8;var S=I.T,b={};I.T=b,Yl(e,!1,r,o);try{var _=c(),W=I.S;if(W!==null&&W(b,_),_!==null&&typeof _=="object"&&typeof _.then=="function"){var J=Xv(_,s);xo(e,r,J,ne(e))}else xo(e,r,s,ne(e))}catch(n2){xo(e,r,{then:function(){},status:"rejected",reason:n2},ne())}finally{V.p=d,I.T=S}}function rx(){}function Gl(e,r,o,s){if(e.tag!==5)throw Error(a(476));var c=$d(e).queue;Yd(e,c,r,Q,o===null?rx:function(){return Kd(e),o(s)})}function $d(e){var r=e.memoizedState;if(r!==null)return r;r={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ct,lastRenderedState:Q},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ct,lastRenderedState:o},next:null},e.memoizedState=r,e=e.alternate,e!==null&&(e.memoizedState=r),r}function Kd(e){var r=$d(e).next.queue;xo(e,r,{},ne())}function Vl(){return L0(Oo)}function Zd(){return x0().memoizedState}function Xd(){return x0().memoizedState}function nx(e){for(var r=e.return;r!==null;){switch(r.tag){case 24:case 3:var o=ne();e=Mt(o);var s=Pt(r,e,o);s!==null&&(oe(s,r,o),Co(s,r,o)),r={cache:yl()},e.payload=r;return}r=r.return}}function ox(e,r,o){var s=ne();o={lane:s,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Qi(e)?Jd(r,o):(o=fl(e,r,o,s),o!==null&&(oe(o,e,s),em(o,r,s)))}function Qd(e,r,o){var s=ne();xo(e,r,o,s)}function xo(e,r,o,s){var c={lane:s,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Qi(e))Jd(r,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var S=r.lastRenderedState,b=d(S,o);if(c.hasEagerState=!0,c.eagerState=b,Q0(b,S))return Li(e,r,c,0),t0===null&&_i(),!1}catch{}finally{}if(o=fl(e,r,c,s),o!==null)return oe(o,e,s),em(o,r,s),!0}return!1}function Yl(e,r,o,s){if(s={lane:2,revertLane:FA(),action:s,hasEagerState:!1,eagerState:null,next:null},Qi(e)){if(r)throw Error(a(479))}else r=fl(e,o,s,2),r!==null&&oe(r,e,2)}function Qi(e){var r=e.alternate;return e===_2||r!==null&&r===_2}function Jd(e,r){on=Vi=!0;var o=e.pending;o===null?r.next=r:(r.next=o.next,o.next=r),e.pending=r}function em(e,r,o){if((o&4194048)!==0){var s=r.lanes;s&=e.pendingLanes,o|=s,r.lanes=o,cr(e,o)}}var Ji={readContext:L0,use:$i,useCallback:p0,useContext:p0,useEffect:p0,useImperativeHandle:p0,useLayoutEffect:p0,useInsertionEffect:p0,useMemo:p0,useReducer:p0,useRef:p0,useState:p0,useDebugValue:p0,useDeferredValue:p0,useTransition:p0,useSyncExternalStore:p0,useId:p0,useHostTransitionStatus:p0,useFormState:p0,useActionState:p0,useOptimistic:p0,useMemoCache:p0,useCacheRefresh:p0},tm={readContext:L0,use:$i,useCallback:function(e,r){return K0().memoizedState=[e,r===void 0?null:r],e},useContext:L0,useEffect:qd,useImperativeHandle:function(e,r,o){o=o!=null?o.concat([e]):null,Xi(4194308,4,Ud.bind(null,r,e),o)},useLayoutEffect:function(e,r){return Xi(4194308,4,e,r)},useInsertionEffect:function(e,r){Xi(4,2,e,r)},useMemo:function(e,r){var o=K0();r=r===void 0?null:r;var s=e();if(Br){we(!0);try{e()}finally{we(!1)}}return o.memoizedState=[s,r],s},useReducer:function(e,r,o){var s=K0();if(o!==void 0){var c=o(r);if(Br){we(!0);try{o(r)}finally{we(!1)}}}else c=r;return s.memoizedState=s.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},s.queue=e,e=e.dispatch=ox.bind(null,_2,e),[s.memoizedState,e]},useRef:function(e){var r=K0();return e={current:e},r.memoizedState=e},useState:function(e){e=Hl(e);var r=e.queue,o=Qd.bind(null,_2,r);return r.dispatch=o,[e.memoizedState,o]},useDebugValue:zl,useDeferredValue:function(e,r){var o=K0();return Wl(o,e,r)},useTransition:function(){var e=Hl(!1);return e=Yd.bind(null,_2,e.queue,!0,!1),K0().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,r,o){var s=_2,c=K0();if($2){if(o===void 0)throw Error(a(407));o=o()}else{if(o=r(),t0===null)throw Error(a(349));(U2&124)!==0||yd(s,r,o)}c.memoizedState=o;var d={value:o,getSnapshot:r};return c.queue=d,qd(Sd.bind(null,s,d,e),[e]),s.flags|=2048,sn(9,Zi(),Bd.bind(null,s,d,o,r),null),o},useId:function(){var e=K0(),r=t0.identifierPrefix;if($2){var o=st,s=at;o=(s&~(1<<32-b0(s)-1)).toString(32)+o,r="«"+r+"R"+o,o=Yi++,0<o&&(r+="H"+o.toString(32)),r+="»"}else o=Qv++,r="«"+r+"r"+o.toString(32)+"»";return e.memoizedState=r},useHostTransitionStatus:Vl,useFormState:Nd,useActionState:Nd,useOptimistic:function(e){var r=K0();r.memoizedState=r.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Yl.bind(null,_2,!0,o),o.dispatch=r,[e,r]},useMemoCache:ql,useCacheRefresh:function(){return K0().memoizedState=nx.bind(null,_2)}},rm={readContext:L0,use:$i,useCallback:Wd,useContext:L0,useEffect:Od,useImperativeHandle:zd,useInsertionEffect:jd,useLayoutEffect:Hd,useMemo:Gd,useReducer:Ki,useRef:Id,useState:function(){return Ki(ct)},useDebugValue:zl,useDeferredValue:function(e,r){var o=x0();return Vd(o,X2.memoizedState,e,r)},useTransition:function(){var e=Ki(ct)[0],r=x0().memoizedState;return[typeof e=="boolean"?e:Do(e),r]},useSyncExternalStore:xd,useId:Zd,useHostTransitionStatus:Vl,useFormState:_d,useActionState:_d,useOptimistic:function(e,r){var o=x0();return Rd(o,X2,e,r)},useMemoCache:ql,useCacheRefresh:Xd},ix={readContext:L0,use:$i,useCallback:Wd,useContext:L0,useEffect:Od,useImperativeHandle:zd,useInsertionEffect:jd,useLayoutEffect:Hd,useMemo:Gd,useReducer:jl,useRef:Id,useState:function(){return jl(ct)},useDebugValue:zl,useDeferredValue:function(e,r){var o=x0();return X2===null?Wl(o,e,r):Vd(o,X2.memoizedState,e,r)},useTransition:function(){var e=jl(ct)[0],r=x0().memoizedState;return[typeof e=="boolean"?e:Do(e),r]},useSyncExternalStore:xd,useId:Zd,useHostTransitionStatus:Vl,useFormState:kd,useActionState:kd,useOptimistic:function(e,r){var o=x0();return X2!==null?Rd(o,X2,e,r):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:ql,useCacheRefresh:Xd},ln=null,yo=0;function ea(e){var r=yo;return yo+=1,ln===null&&(ln=[]),dd(ln,e,r)}function Bo(e,r){r=r.props.ref,e.ref=r!==void 0?r:null}function ta(e,r){throw r.$$typeof===p?Error(a(525)):(e=Object.prototype.toString.call(r),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)))}function nm(e){var r=e._init;return r(e._payload)}function om(e){function r(O,q){if(e){var U=O.deletions;U===null?(O.deletions=[q],O.flags|=16):U.push(q)}}function o(O,q){if(!e)return null;for(;q!==null;)r(O,q),q=q.sibling;return null}function s(O){for(var q=new Map;O!==null;)O.key!==null?q.set(O.key,O):q.set(O.index,O),O=O.sibling;return q}function c(O,q){return O=it(O,q),O.index=0,O.sibling=null,O}function d(O,q,U){return O.index=U,e?(U=O.alternate,U!==null?(U=U.index,U<q?(O.flags|=67108866,q):U):(O.flags|=67108866,q)):(O.flags|=1048576,q)}function S(O){return e&&O.alternate===null&&(O.flags|=67108866),O}function b(O,q,U,t2){return q===null||q.tag!==6?(q=ml(U,O.mode,t2),q.return=O,q):(q=c(q,U),q.return=O,q)}function _(O,q,U,t2){var m2=U.type;return m2===y?J(O,q,U.props.children,t2,U.key):q!==null&&(q.elementType===m2||typeof m2=="object"&&m2!==null&&m2.$$typeof===j&&nm(m2)===q.type)?(q=c(q,U.props),Bo(q,U),q.return=O,q):(q=Ii(U.type,U.key,U.props,null,O.mode,t2),Bo(q,U),q.return=O,q)}function W(O,q,U,t2){return q===null||q.tag!==4||q.stateNode.containerInfo!==U.containerInfo||q.stateNode.implementation!==U.implementation?(q=Cl(U,O.mode,t2),q.return=O,q):(q=c(q,U.children||[]),q.return=O,q)}function J(O,q,U,t2,m2){return q===null||q.tag!==7?(q=Cr(U,O.mode,t2,m2),q.return=O,q):(q=c(q,U),q.return=O,q)}function n2(O,q,U){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=ml(""+q,O.mode,U),q.return=O,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case v:return U=Ii(q.type,q.key,q.props,null,O.mode,U),Bo(U,q),U.return=O,U;case x:return q=Cl(q,O.mode,U),q.return=O,q;case j:var t2=q._init;return q=t2(q._payload),n2(O,q,U)}if(u2(q)||s2(q))return q=Cr(q,O.mode,U,null),q.return=O,q;if(typeof q.then=="function")return n2(O,ea(q),U);if(q.$$typeof===R)return n2(O,Hi(O,q),U);ta(O,q)}return null}function G(O,q,U,t2){var m2=q!==null?q.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return m2!==null?null:b(O,q,""+U,t2);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case v:return U.key===m2?_(O,q,U,t2):null;case x:return U.key===m2?W(O,q,U,t2):null;case j:return m2=U._init,U=m2(U._payload),G(O,q,U,t2)}if(u2(U)||s2(U))return m2!==null?null:J(O,q,U,t2,null);if(typeof U.then=="function")return G(O,q,ea(U),t2);if(U.$$typeof===R)return G(O,q,Hi(O,U),t2);ta(O,U)}return null}function Y(O,q,U,t2,m2){if(typeof t2=="string"&&t2!==""||typeof t2=="number"||typeof t2=="bigint")return O=O.get(U)||null,b(q,O,""+t2,m2);if(typeof t2=="object"&&t2!==null){switch(t2.$$typeof){case v:return O=O.get(t2.key===null?U:t2.key)||null,_(q,O,t2,m2);case x:return O=O.get(t2.key===null?U:t2.key)||null,W(q,O,t2,m2);case j:var q2=t2._init;return t2=q2(t2._payload),Y(O,q,U,t2,m2)}if(u2(t2)||s2(t2))return O=O.get(U)||null,J(q,O,t2,m2,null);if(typeof t2.then=="function")return Y(O,q,U,ea(t2),m2);if(t2.$$typeof===R)return Y(O,q,U,Hi(q,t2),m2);ta(q,t2)}return null}function b2(O,q,U,t2){for(var m2=null,q2=null,D2=q,T2=q=0,T0=null;D2!==null&&T2<U.length;T2++){D2.index>T2?(T0=D2,D2=null):T0=D2.sibling;var Y2=G(O,D2,U[T2],t2);if(Y2===null){D2===null&&(D2=T0);break}e&&D2&&Y2.alternate===null&&r(O,D2),q=d(Y2,q,T2),q2===null?m2=Y2:q2.sibling=Y2,q2=Y2,D2=T0}if(T2===U.length)return o(O,D2),$2&&gr(O,T2),m2;if(D2===null){for(;T2<U.length;T2++)D2=n2(O,U[T2],t2),D2!==null&&(q=d(D2,q,T2),q2===null?m2=D2:q2.sibling=D2,q2=D2);return $2&&gr(O,T2),m2}for(D2=s(D2);T2<U.length;T2++)T0=Y(D2,O,T2,U[T2],t2),T0!==null&&(e&&T0.alternate!==null&&D2.delete(T0.key===null?T2:T0.key),q=d(T0,q,T2),q2===null?m2=T0:q2.sibling=T0,q2=T0);return e&&D2.forEach(function(Kt){return r(O,Kt)}),$2&&gr(O,T2),m2}function F2(O,q,U,t2){if(U==null)throw Error(a(151));for(var m2=null,q2=null,D2=q,T2=q=0,T0=null,Y2=U.next();D2!==null&&!Y2.done;T2++,Y2=U.next()){D2.index>T2?(T0=D2,D2=null):T0=D2.sibling;var Kt=G(O,D2,Y2.value,t2);if(Kt===null){D2===null&&(D2=T0);break}e&&D2&&Kt.alternate===null&&r(O,D2),q=d(Kt,q,T2),q2===null?m2=Kt:q2.sibling=Kt,q2=Kt,D2=T0}if(Y2.done)return o(O,D2),$2&&gr(O,T2),m2;if(D2===null){for(;!Y2.done;T2++,Y2=U.next())Y2=n2(O,Y2.value,t2),Y2!==null&&(q=d(Y2,q,T2),q2===null?m2=Y2:q2.sibling=Y2,q2=Y2);return $2&&gr(O,T2),m2}for(D2=s(D2);!Y2.done;T2++,Y2=U.next())Y2=Y(D2,O,T2,Y2.value,t2),Y2!==null&&(e&&Y2.alternate!==null&&D2.delete(Y2.key===null?T2:Y2.key),q=d(Y2,q,T2),q2===null?m2=Y2:q2.sibling=Y2,q2=Y2);return e&&D2.forEach(function(ay){return r(O,ay)}),$2&&gr(O,T2),m2}function J2(O,q,U,t2){if(typeof U=="object"&&U!==null&&U.type===y&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case v:e:{for(var m2=U.key;q!==null;){if(q.key===m2){if(m2=U.type,m2===y){if(q.tag===7){o(O,q.sibling),t2=c(q,U.props.children),t2.return=O,O=t2;break e}}else if(q.elementType===m2||typeof m2=="object"&&m2!==null&&m2.$$typeof===j&&nm(m2)===q.type){o(O,q.sibling),t2=c(q,U.props),Bo(t2,U),t2.return=O,O=t2;break e}o(O,q);break}else r(O,q);q=q.sibling}U.type===y?(t2=Cr(U.props.children,O.mode,t2,U.key),t2.return=O,O=t2):(t2=Ii(U.type,U.key,U.props,null,O.mode,t2),Bo(t2,U),t2.return=O,O=t2)}return S(O);case x:e:{for(m2=U.key;q!==null;){if(q.key===m2)if(q.tag===4&&q.stateNode.containerInfo===U.containerInfo&&q.stateNode.implementation===U.implementation){o(O,q.sibling),t2=c(q,U.children||[]),t2.return=O,O=t2;break e}else{o(O,q);break}else r(O,q);q=q.sibling}t2=Cl(U,O.mode,t2),t2.return=O,O=t2}return S(O);case j:return m2=U._init,U=m2(U._payload),J2(O,q,U,t2)}if(u2(U))return b2(O,q,U,t2);if(s2(U)){if(m2=s2(U),typeof m2!="function")throw Error(a(150));return U=m2.call(U),F2(O,q,U,t2)}if(typeof U.then=="function")return J2(O,q,ea(U),t2);if(U.$$typeof===R)return J2(O,q,Hi(O,U),t2);ta(O,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,q!==null&&q.tag===6?(o(O,q.sibling),t2=c(q,U),t2.return=O,O=t2):(o(O,q),t2=ml(U,O.mode,t2),t2.return=O,O=t2),S(O)):o(O,q)}return function(O,q,U,t2){try{yo=0;var m2=J2(O,q,U,t2);return ln=null,m2}catch(D2){if(D2===fo||D2===zi)throw D2;var q2=J0(29,D2,null,O.mode);return q2.lanes=t2,q2.return=O,q2}finally{}}}var An=om(!0),im=om(!1),ge=X(null),We=null;function _t(e){var r=e.alternate;o2(B0,B0.current&1),o2(ge,e),We===null&&(r===null||nn.current!==null||r.memoizedState!==null)&&(We=e)}function am(e){if(e.tag===22){if(o2(B0,B0.current),o2(ge,e),We===null){var r=e.alternate;r!==null&&r.memoizedState!==null&&(We=e)}}else Lt()}function Lt(){o2(B0,B0.current),o2(ge,ge.current)}function ut(e){e2(ge),We===e&&(We=null),e2(B0)}var B0=X(0);function ra(e){for(var r=e;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||IA(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function $l(e,r,o,s){r=e.memoizedState,o=o(s,r),o=o==null?r:h({},r,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Kl={enqueueSetState:function(e,r,o){e=e._reactInternals;var s=ne(),c=Mt(s);c.payload=r,o!=null&&(c.callback=o),r=Pt(e,c,s),r!==null&&(oe(r,e,s),Co(r,e,s))},enqueueReplaceState:function(e,r,o){e=e._reactInternals;var s=ne(),c=Mt(s);c.tag=1,c.payload=r,o!=null&&(c.callback=o),r=Pt(e,c,s),r!==null&&(oe(r,e,s),Co(r,e,s))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var o=ne(),s=Mt(o);s.tag=2,r!=null&&(s.callback=r),r=Pt(e,s,o),r!==null&&(oe(r,e,o),Co(r,e,o))}};function sm(e,r,o,s,c,d,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,S):r.prototype&&r.prototype.isPureReactComponent?!oo(o,s)||!oo(c,d):!0}function lm(e,r,o,s){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,s),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,s),r.state!==e&&Kl.enqueueReplaceState(r,r.state,null)}function Sr(e,r){var o=r;if("ref"in r){o={};for(var s in r)s!=="ref"&&(o[s]=r[s])}if(e=e.defaultProps){o===r&&(o=h({},o));for(var c in e)o[c]===void 0&&(o[c]=e[c])}return o}var na=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Am(e){na(e)}function cm(e){console.error(e)}function um(e){na(e)}function oa(e,r){try{var o=e.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(s){setTimeout(function(){throw s})}}function fm(e,r,o){try{var s=e.onCaughtError;s(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Zl(e,r,o){return o=Mt(o),o.tag=3,o.payload={element:null},o.callback=function(){oa(e,r)},o}function dm(e){return e=Mt(e),e.tag=3,e}function mm(e,r,o,s){var c=o.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;e.payload=function(){return c(d)},e.callback=function(){fm(r,o,s)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(e.callback=function(){fm(r,o,s),typeof c!="function"&&(Ht===null?Ht=new Set([this]):Ht.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})})}function ax(e,r,o,s,c){if(o.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(r=o.alternate,r!==null&&Ao(r,o,c,!0),o=ge.current,o!==null){switch(o.tag){case 13:return We===null?vA():o.alternate===null&&m0===0&&(m0=3),o.flags&=-257,o.flags|=65536,o.lanes=c,s===Fl?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([s]):r.add(s),yA(e,s,c)),!1;case 22:return o.flags|=65536,s===Fl?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([s])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([s]):o.add(s)),yA(e,s,c)),!1}throw Error(a(435,o.tag))}return yA(e,s,c),vA(),!1}if($2)return r=ge.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=c,s!==hl&&(e=Error(a(422),{cause:s}),lo(de(e,o)))):(s!==hl&&(r=Error(a(423),{cause:s}),lo(de(r,o))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,s=de(s,o),c=Zl(e.stateNode,s,c),bl(e,c),m0!==4&&(m0=2)),!1;var d=Error(a(520),{cause:s});if(d=de(d,o),Eo===null?Eo=[d]:Eo.push(d),m0!==4&&(m0=2),r===null)return!0;s=de(s,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,e=c&-c,o.lanes|=e,e=Zl(o.stateNode,s,e),bl(o,e),!1;case 1:if(r=o.type,d=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ht===null||!Ht.has(d))))return o.flags|=65536,c&=-c,o.lanes|=c,c=dm(c),mm(c,e,o,s),bl(o,c),!1}o=o.return}while(o!==null);return!1}var Cm=Error(a(461)),S0=!1;function w0(e,r,o,s){r.child=e===null?im(r,null,o,s):An(r,e.child,o,s)}function pm(e,r,o,s,c){o=o.render;var d=r.ref;if("ref"in s){var S={};for(var b in s)b!=="ref"&&(S[b]=s[b])}else S=s;return xr(r),s=Nl(e,r,o,S,d,c),b=_l(),e!==null&&!S0?(Ll(e,r,c),ft(e,r,c)):($2&&b&&pl(r),r.flags|=1,w0(e,r,s,c),r.child)}function gm(e,r,o,s,c){if(e===null){var d=o.type;return typeof d=="function"&&!dl(d)&&d.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=d,hm(e,r,d,s,c)):(e=Ii(o.type,null,s,r,r.mode,c),e.ref=r.ref,e.return=r,r.child=e)}if(d=e.child,!oA(e,c)){var S=d.memoizedProps;if(o=o.compare,o=o!==null?o:oo,o(S,s)&&e.ref===r.ref)return ft(e,r,c)}return r.flags|=1,e=it(d,s),e.ref=r.ref,e.return=r,r.child=e}function hm(e,r,o,s,c){if(e!==null){var d=e.memoizedProps;if(oo(d,s)&&e.ref===r.ref)if(S0=!1,r.pendingProps=s=d,oA(e,c))(e.flags&131072)!==0&&(S0=!0);else return r.lanes=e.lanes,ft(e,r,c)}return Xl(e,r,o,s,c)}function Dm(e,r,o){var s=r.pendingProps,c=s.children,d=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if((r.flags&128)!==0){if(s=d!==null?d.baseLanes|o:o,e!==null){for(c=r.child=e.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;r.childLanes=d&~s}else r.childLanes=0,r.child=null;return vm(e,r,s,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ui(r,d!==null?d.cachePool:null),d!==null?hd(r,d):El(),am(r);else return r.lanes=r.childLanes=536870912,vm(e,r,d!==null?d.baseLanes|o:o,o)}else d!==null?(Ui(r,d.cachePool),hd(r,d),Lt(),r.memoizedState=null):(e!==null&&Ui(r,null),El(),Lt());return w0(e,r,c,o),r.child}function vm(e,r,o,s){var c=Sl();return c=c===null?null:{parent:y0._currentValue,pool:c},r.memoizedState={baseLanes:o,cachePool:c},e!==null&&Ui(r,null),El(),am(r),e!==null&&Ao(e,r,s,!0),null}function ia(e,r){var o=r.ref;if(o===null)e!==null&&e.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(e===null||e.ref!==o)&&(r.flags|=4194816)}}function Xl(e,r,o,s,c){return xr(r),o=Nl(e,r,o,s,void 0,c),s=_l(),e!==null&&!S0?(Ll(e,r,c),ft(e,r,c)):($2&&s&&pl(r),r.flags|=1,w0(e,r,o,c),r.child)}function xm(e,r,o,s,c,d){return xr(r),r.updateQueue=null,o=vd(r,s,o,c),Dd(e),s=_l(),e!==null&&!S0?(Ll(e,r,d),ft(e,r,d)):($2&&s&&pl(r),r.flags|=1,w0(e,r,o,d),r.child)}function ym(e,r,o,s,c){if(xr(r),r.stateNode===null){var d=Qr,S=o.contextType;typeof S=="object"&&S!==null&&(d=L0(S)),d=new o(s,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Kl,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=s,d.state=r.memoizedState,d.refs={},Tl(r),S=o.contextType,d.context=typeof S=="object"&&S!==null?L0(S):Qr,d.state=r.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&($l(r,o,S,s),d.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(S=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),S!==d.state&&Kl.enqueueReplaceState(d,d.state,null),go(r,s,d,c),po(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),s=!0}else if(e===null){d=r.stateNode;var b=r.memoizedProps,_=Sr(o,b);d.props=_;var W=d.context,J=o.contextType;S=Qr,typeof J=="object"&&J!==null&&(S=L0(J));var n2=o.getDerivedStateFromProps;J=typeof n2=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,J||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||W!==S)&&lm(r,d,s,S),Et=!1;var G=r.memoizedState;d.state=G,go(r,s,d,c),po(),W=r.memoizedState,b||G!==W||Et?(typeof n2=="function"&&($l(r,o,n2,s),W=r.memoizedState),(_=Et||sm(r,o,_,s,G,W,S))?(J||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=s,r.memoizedState=W),d.props=s,d.state=W,d.context=S,s=_):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),s=!1)}else{d=r.stateNode,Rl(e,r),S=r.memoizedProps,J=Sr(o,S),d.props=J,n2=r.pendingProps,G=d.context,W=o.contextType,_=Qr,typeof W=="object"&&W!==null&&(_=L0(W)),b=o.getDerivedStateFromProps,(W=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S!==n2||G!==_)&&lm(r,d,s,_),Et=!1,G=r.memoizedState,d.state=G,go(r,s,d,c),po();var Y=r.memoizedState;S!==n2||G!==Y||Et||e!==null&&e.dependencies!==null&&ji(e.dependencies)?(typeof b=="function"&&($l(r,o,b,s),Y=r.memoizedState),(J=Et||sm(r,o,J,s,G,Y,_)||e!==null&&e.dependencies!==null&&ji(e.dependencies))?(W||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,Y,_),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,Y,_)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||S===e.memoizedProps&&G===e.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&G===e.memoizedState||(r.flags|=1024),r.memoizedProps=s,r.memoizedState=Y),d.props=s,d.state=Y,d.context=_,s=J):(typeof d.componentDidUpdate!="function"||S===e.memoizedProps&&G===e.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&G===e.memoizedState||(r.flags|=1024),s=!1)}return d=s,ia(e,r),s=(r.flags&128)!==0,d||s?(d=r.stateNode,o=s&&typeof o.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,e!==null&&s?(r.child=An(r,e.child,null,c),r.child=An(r,null,o,c)):w0(e,r,o,c),r.memoizedState=d.state,e=r.child):e=ft(e,r,c),e}function Bm(e,r,o,s){return so(),r.flags|=256,w0(e,r,o,s),r.child}var Ql={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jl(e){return{baseLanes:e,cachePool:cd()}}function eA(e,r,o){return e=e!==null?e.childLanes&~o:0,r&&(e|=he),e}function Sm(e,r,o){var s=r.pendingProps,c=!1,d=(r.flags&128)!==0,S;if((S=d)||(S=e!==null&&e.memoizedState===null?!1:(B0.current&2)!==0),S&&(c=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,e===null){if($2){if(c?_t(r):Lt(),$2){var b=d0,_;if(_=b){e:{for(_=b,b=ze;_.nodeType!==8;){if(!b){b=null;break e}if(_=_e(_.nextSibling),_===null){b=null;break e}}b=_}b!==null?(r.memoizedState={dehydrated:b,treeContext:pr!==null?{id:at,overflow:st}:null,retryLane:536870912,hydrationErrors:null},_=J0(18,null,null,0),_.stateNode=b,_.return=r,r.child=_,H0=r,d0=null,_=!0):_=!1}_||Dr(r)}if(b=r.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return IA(b)?r.lanes=32:r.lanes=536870912,null;ut(r)}return b=s.children,s=s.fallback,c?(Lt(),c=r.mode,b=aa({mode:"hidden",children:b},c),s=Cr(s,c,o,null),b.return=r,s.return=r,b.sibling=s,r.child=b,c=r.child,c.memoizedState=Jl(o),c.childLanes=eA(e,S,o),r.memoizedState=Ql,s):(_t(r),tA(r,b))}if(_=e.memoizedState,_!==null&&(b=_.dehydrated,b!==null)){if(d)r.flags&256?(_t(r),r.flags&=-257,r=rA(e,r,o)):r.memoizedState!==null?(Lt(),r.child=e.child,r.flags|=128,r=null):(Lt(),c=s.fallback,b=r.mode,s=aa({mode:"visible",children:s.children},b),c=Cr(c,b,o,null),c.flags|=2,s.return=r,c.return=r,s.sibling=c,r.child=s,An(r,e.child,null,o),s=r.child,s.memoizedState=Jl(o),s.childLanes=eA(e,S,o),r.memoizedState=Ql,r=c);else if(_t(r),IA(b)){if(S=b.nextSibling&&b.nextSibling.dataset,S)var W=S.dgst;S=W,s=Error(a(419)),s.stack="",s.digest=S,lo({value:s,source:null,stack:null}),r=rA(e,r,o)}else if(S0||Ao(e,r,o,!1),S=(o&e.childLanes)!==0,S0||S){if(S=t0,S!==null&&(s=o&-o,s=(s&42)!==0?1:Yn(s),s=(s&(S.suspendedLanes|o))!==0?0:s,s!==0&&s!==_.retryLane))throw _.retryLane=s,Xr(e,s),oe(S,e,s),Cm;b.data==="$?"||vA(),r=rA(e,r,o)}else b.data==="$?"?(r.flags|=192,r.child=e.child,r=null):(e=_.treeContext,d0=_e(b.nextSibling),H0=r,$2=!0,hr=null,ze=!1,e!==null&&(Ce[pe++]=at,Ce[pe++]=st,Ce[pe++]=pr,at=e.id,st=e.overflow,pr=r),r=tA(r,s.children),r.flags|=4096);return r}return c?(Lt(),c=s.fallback,b=r.mode,_=e.child,W=_.sibling,s=it(_,{mode:"hidden",children:s.children}),s.subtreeFlags=_.subtreeFlags&65011712,W!==null?c=it(W,c):(c=Cr(c,b,o,null),c.flags|=2),c.return=r,s.return=r,s.sibling=c,r.child=s,s=c,c=r.child,b=e.child.memoizedState,b===null?b=Jl(o):(_=b.cachePool,_!==null?(W=y0._currentValue,_=_.parent!==W?{parent:W,pool:W}:_):_=cd(),b={baseLanes:b.baseLanes|o,cachePool:_}),c.memoizedState=b,c.childLanes=eA(e,S,o),r.memoizedState=Ql,s):(_t(r),o=e.child,e=o.sibling,o=it(o,{mode:"visible",children:s.children}),o.return=r,o.sibling=null,e!==null&&(S=r.deletions,S===null?(r.deletions=[e],r.flags|=16):S.push(e)),r.child=o,r.memoizedState=null,o)}function tA(e,r){return r=aa({mode:"visible",children:r},e.mode),r.return=e,e.child=r}function aa(e,r){return e=J0(22,e,null,r),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function rA(e,r,o){return An(r,e.child,null,o),e=tA(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function Fm(e,r,o){e.lanes|=r;var s=e.alternate;s!==null&&(s.lanes|=r),vl(e.return,r,o)}function nA(e,r,o,s,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:s,tail:o,tailMode:c}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=o,d.tailMode=c)}function Tm(e,r,o){var s=r.pendingProps,c=s.revealOrder,d=s.tail;if(w0(e,r,s.children,o),s=B0.current,(s&2)!==0)s=s&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fm(e,o,r);else if(e.tag===19)Fm(e,o,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(o2(B0,s),c){case"forwards":for(o=r.child,c=null;o!==null;)e=o.alternate,e!==null&&ra(e)===null&&(c=o),o=o.sibling;o=c,o===null?(c=r.child,r.child=null):(c=o.sibling,o.sibling=null),nA(r,!1,c,o,d);break;case"backwards":for(o=null,c=r.child,r.child=null;c!==null;){if(e=c.alternate,e!==null&&ra(e)===null){r.child=c;break}e=c.sibling,c.sibling=o,o=c,c=e}nA(r,!0,o,null,d);break;case"together":nA(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ft(e,r,o){if(e!==null&&(r.dependencies=e.dependencies),jt|=r.lanes,(o&r.childLanes)===0)if(e!==null){if(Ao(e,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(e!==null&&r.child!==e.child)throw Error(a(153));if(r.child!==null){for(e=r.child,o=it(e,e.pendingProps),r.child=o,o.return=r;e.sibling!==null;)e=e.sibling,o=o.sibling=it(e,e.pendingProps),o.return=r;o.sibling=null}return r.child}function oA(e,r){return(e.lanes&r)!==0?!0:(e=e.dependencies,!!(e!==null&&ji(e)))}function sx(e,r,o){switch(r.tag){case 3:y2(r,r.stateNode.containerInfo),wt(r,y0,e.memoizedState.cache),so();break;case 27:case 5:z2(r);break;case 4:y2(r,r.stateNode.containerInfo);break;case 10:wt(r,r.type,r.memoizedProps.value);break;case 13:var s=r.memoizedState;if(s!==null)return s.dehydrated!==null?(_t(r),r.flags|=128,null):(o&r.child.childLanes)!==0?Sm(e,r,o):(_t(r),e=ft(e,r,o),e!==null?e.sibling:null);_t(r);break;case 19:var c=(e.flags&128)!==0;if(s=(o&r.childLanes)!==0,s||(Ao(e,r,o,!1),s=(o&r.childLanes)!==0),c){if(s)return Tm(e,r,o);r.flags|=128}if(c=r.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),o2(B0,B0.current),s)break;return null;case 22:case 23:return r.lanes=0,Dm(e,r,o);case 24:wt(r,y0,e.memoizedState.cache)}return ft(e,r,o)}function Rm(e,r,o){if(e!==null)if(e.memoizedProps!==r.pendingProps)S0=!0;else{if(!oA(e,o)&&(r.flags&128)===0)return S0=!1,sx(e,r,o);S0=(e.flags&131072)!==0}else S0=!1,$2&&(r.flags&1048576)!==0&&nd(r,Oi,r.index);switch(r.lanes=0,r.tag){case 16:e:{e=r.pendingProps;var s=r.elementType,c=s._init;if(s=c(s._payload),r.type=s,typeof s=="function")dl(s)?(e=Sr(s,e),r.tag=1,r=ym(null,r,s,e,o)):(r.tag=0,r=Xl(null,r,s,e,o));else{if(s!=null){if(c=s.$$typeof,c===M){r.tag=11,r=pm(null,r,s,e,o);break e}else if(c===k){r.tag=14,r=gm(null,r,s,e,o);break e}}throw r=Z(s)||s,Error(a(306,r,""))}}return r;case 0:return Xl(e,r,r.type,r.pendingProps,o);case 1:return s=r.type,c=Sr(s,r.pendingProps),ym(e,r,s,c,o);case 3:e:{if(y2(r,r.stateNode.containerInfo),e===null)throw Error(a(387));s=r.pendingProps;var d=r.memoizedState;c=d.element,Rl(e,r),go(r,s,null,o);var S=r.memoizedState;if(s=S.cache,wt(r,y0,s),s!==d.cache&&xl(r,[y0],o,!0),po(),s=S.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=Bm(e,r,s,o);break e}else if(s!==c){c=de(Error(a(424)),r),lo(c),r=Bm(e,r,s,o);break e}else{switch(e=r.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(d0=_e(e.firstChild),H0=r,$2=!0,hr=null,ze=!0,o=im(r,null,s,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(so(),s===c){r=ft(e,r,o);break e}w0(e,r,s,o)}r=r.child}return r;case 26:return ia(e,r),e===null?(o=MC(r.type,null,r.pendingProps,null))?r.memoizedState=o:$2||(o=r.type,e=r.pendingProps,s=va(p2.current).createElement(o),s[a2]=r,s[A2]=e,M0(s,o,e),V2(s),r.stateNode=s):r.memoizedState=MC(r.type,e.memoizedProps,r.pendingProps,e.memoizedState),null;case 27:return z2(r),e===null&&$2&&(s=r.stateNode=bC(r.type,r.pendingProps,p2.current),H0=r,ze=!0,c=d0,Wt(r.type)?(qA=c,d0=_e(s.firstChild)):d0=c),w0(e,r,r.pendingProps.children,o),ia(e,r),e===null&&(r.flags|=4194304),r.child;case 5:return e===null&&$2&&((c=s=d0)&&(s=Lx(s,r.type,r.pendingProps,ze),s!==null?(r.stateNode=s,H0=r,d0=_e(s.firstChild),ze=!1,c=!0):c=!1),c||Dr(r)),z2(r),c=r.type,d=r.pendingProps,S=e!==null?e.memoizedProps:null,s=d.children,_A(c,d)?s=null:S!==null&&_A(c,S)&&(r.flags|=32),r.memoizedState!==null&&(c=Nl(e,r,Jv,null,null,o),Oo._currentValue=c),ia(e,r),w0(e,r,s,o),r.child;case 6:return e===null&&$2&&((e=o=d0)&&(o=kx(o,r.pendingProps,ze),o!==null?(r.stateNode=o,H0=r,d0=null,e=!0):e=!1),e||Dr(r)),null;case 13:return Sm(e,r,o);case 4:return y2(r,r.stateNode.containerInfo),s=r.pendingProps,e===null?r.child=An(r,null,s,o):w0(e,r,s,o),r.child;case 11:return pm(e,r,r.type,r.pendingProps,o);case 7:return w0(e,r,r.pendingProps,o),r.child;case 8:return w0(e,r,r.pendingProps.children,o),r.child;case 12:return w0(e,r,r.pendingProps.children,o),r.child;case 10:return s=r.pendingProps,wt(r,r.type,s.value),w0(e,r,s.children,o),r.child;case 9:return c=r.type._context,s=r.pendingProps.children,xr(r),c=L0(c),s=s(c),r.flags|=1,w0(e,r,s,o),r.child;case 14:return gm(e,r,r.type,r.pendingProps,o);case 15:return hm(e,r,r.type,r.pendingProps,o);case 19:return Tm(e,r,o);case 31:return s=r.pendingProps,o=r.mode,s={mode:s.mode,children:s.children},e===null?(o=aa(s,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=it(e.child,s),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return Dm(e,r,o);case 24:return xr(r),s=L0(y0),e===null?(c=Sl(),c===null&&(c=t0,d=yl(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=o),c=d),r.memoizedState={parent:s,cache:c},Tl(r),wt(r,y0,c)):((e.lanes&o)!==0&&(Rl(e,r),go(r,null,null,o),po()),c=e.memoizedState,d=r.memoizedState,c.parent!==s?(c={parent:s,cache:s},r.memoizedState=c,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=c),wt(r,y0,s)):(s=d.cache,wt(r,y0,s),s!==c.cache&&xl(r,[y0],o,!0))),w0(e,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function dt(e){e.flags|=4}function bm(e,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!kC(r)){if(r=ge.current,r!==null&&((U2&4194048)===U2?We!==null:(U2&62914560)!==U2&&(U2&536870912)===0||r!==We))throw mo=Fl,ud;e.flags|=8192}}function sa(e,r){r!==null&&(e.flags|=4),e.flags&16384&&(r=e.tag!==22?Bi():536870912,e.lanes|=r,dn|=r)}function So(e,r){if(!$2)switch(e.tailMode){case"hidden":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function u0(e){var r=e.alternate!==null&&e.alternate.child===e.child,o=0,s=0;if(r)for(var c=e.child;c!==null;)o|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)o|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=o,r}function lx(e,r,o){var s=r.pendingProps;switch(gl(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return u0(r),null;case 1:return u0(r),null;case 3:return o=r.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),r.memoizedState.cache!==s&&(r.flags|=2048),At(y0),N2(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(ao(r)?dt(r):e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ad())),u0(r),null;case 26:return o=r.memoizedState,e===null?(dt(r),o!==null?(u0(r),bm(r,o)):(u0(r),r.flags&=-16777217)):o?o!==e.memoizedState?(dt(r),u0(r),bm(r,o)):(u0(r),r.flags&=-16777217):(e.memoizedProps!==s&&dt(r),u0(r),r.flags&=-16777217),null;case 27:f0(r),o=p2.current;var c=r.type;if(e!==null&&r.stateNode!=null)e.memoizedProps!==s&&dt(r);else{if(!s){if(r.stateNode===null)throw Error(a(166));return u0(r),null}e=f2.current,ao(r)?od(r):(e=bC(c,s,o),r.stateNode=e,dt(r))}return u0(r),null;case 5:if(f0(r),o=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==s&&dt(r);else{if(!s){if(r.stateNode===null)throw Error(a(166));return u0(r),null}if(e=f2.current,ao(r))od(r);else{switch(c=va(p2.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?c.createElement("select",{is:s.is}):c.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?c.createElement(o,{is:s.is}):c.createElement(o)}}e[a2]=r,e[A2]=s;e:for(c=r.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===r)break e;for(;c.sibling===null;){if(c.return===null||c.return===r)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r.stateNode=e;e:switch(M0(e,o,s),o){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&dt(r)}}return u0(r),r.flags&=-16777217,null;case 6:if(e&&r.stateNode!=null)e.memoizedProps!==s&&dt(r);else{if(typeof s!="string"&&r.stateNode===null)throw Error(a(166));if(e=p2.current,ao(r)){if(e=r.stateNode,o=r.memoizedProps,s=null,c=H0,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}e[a2]=r,e=!!(e.nodeValue===o||s!==null&&s.suppressHydrationWarning===!0||xC(e.nodeValue,o)),e||Dr(r)}else e=va(e).createTextNode(s),e[a2]=r,r.stateNode=e}return u0(r),null;case 13:if(s=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=ao(r),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(a(318));if(c=r.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[a2]=r}else so(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;u0(r),c=!1}else c=ad(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return r.flags&256?(ut(r),r):(ut(r),null)}if(ut(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=s!==null,e=e!==null&&e.memoizedState!==null,o){s=r.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool);var d=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048)}return o!==e&&o&&(r.child.flags|=8192),sa(r,r.updateQueue),u0(r),null;case 4:return N2(),e===null&&wA(r.stateNode.containerInfo),u0(r),null;case 10:return At(r.type),u0(r),null;case 19:if(e2(B0),c=r.memoizedState,c===null)return u0(r),null;if(s=(r.flags&128)!==0,d=c.rendering,d===null)if(s)So(c,!1);else{if(m0!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(d=ra(e),d!==null){for(r.flags|=128,So(c,!1),e=d.updateQueue,r.updateQueue=e,sa(r,e),r.subtreeFlags=0,e=o,o=r.child;o!==null;)rd(o,e),o=o.sibling;return o2(B0,B0.current&1|2),r.child}e=e.sibling}c.tail!==null&&O0()>ca&&(r.flags|=128,s=!0,So(c,!1),r.lanes=4194304)}else{if(!s)if(e=ra(d),e!==null){if(r.flags|=128,s=!0,e=e.updateQueue,r.updateQueue=e,sa(r,e),So(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!$2)return u0(r),null}else 2*O0()-c.renderingStartTime>ca&&o!==536870912&&(r.flags|=128,s=!0,So(c,!1),r.lanes=4194304);c.isBackwards?(d.sibling=r.child,r.child=d):(e=c.last,e!==null?e.sibling=d:r.child=d,c.last=d)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=O0(),r.sibling=null,e=B0.current,o2(B0,s?e&1|2:e&1),r):(u0(r),null);case 22:case 23:return ut(r),Ml(),s=r.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(r.flags|=8192):s&&(r.flags|=8192),s?(o&536870912)!==0&&(r.flags&128)===0&&(u0(r),r.subtreeFlags&6&&(r.flags|=8192)):u0(r),o=r.updateQueue,o!==null&&sa(r,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==o&&(r.flags|=2048),e!==null&&e2(yr),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),At(y0),u0(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function Ax(e,r){switch(gl(r),r.tag){case 1:return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return At(y0),N2(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 26:case 27:case 5:return f0(r),null;case 13:if(ut(r),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(a(340));so()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return e2(B0),null;case 4:return N2(),null;case 10:return At(r.type),null;case 22:case 23:return ut(r),Ml(),e!==null&&e2(yr),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 24:return At(y0),null;case 25:return null;default:return null}}function wm(e,r){switch(gl(r),r.tag){case 3:At(y0),N2();break;case 26:case 27:case 5:f0(r);break;case 4:N2();break;case 13:ut(r);break;case 19:e2(B0);break;case 10:At(r.type);break;case 22:case 23:ut(r),Ml(),e!==null&&e2(yr);break;case 24:At(y0)}}function Fo(e,r){try{var o=r.updateQueue,s=o!==null?o.lastEffect:null;if(s!==null){var c=s.next;o=c;do{if((o.tag&e)===e){s=void 0;var d=o.create,S=o.inst;s=d(),S.destroy=s}o=o.next}while(o!==c)}}catch(b){e0(r,r.return,b)}}function kt(e,r,o){try{var s=r.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var d=c.next;s=d;do{if((s.tag&e)===e){var S=s.inst,b=S.destroy;if(b!==void 0){S.destroy=void 0,c=r;var _=o,W=b;try{W()}catch(J){e0(c,_,J)}}}s=s.next}while(s!==d)}}catch(J){e0(r,r.return,J)}}function Em(e){var r=e.updateQueue;if(r!==null){var o=e.stateNode;try{gd(r,o)}catch(s){e0(e,e.return,s)}}}function Mm(e,r,o){o.props=Sr(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(s){e0(e,r,s)}}function To(e,r){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof o=="function"?e.refCleanup=o(s):o.current=s}}catch(c){e0(e,r,c)}}function Ge(e,r){var o=e.ref,s=e.refCleanup;if(o!==null)if(typeof s=="function")try{s()}catch(c){e0(e,r,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(c){e0(e,r,c)}else o.current=null}function Pm(e){var r=e.type,o=e.memoizedProps,s=e.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&s.focus();break e;case"img":o.src?s.src=o.src:o.srcSet&&(s.srcset=o.srcSet)}}catch(c){e0(e,e.return,c)}}function iA(e,r,o){try{var s=e.stateNode;Ex(s,e.type,o,r),s[A2]=r}catch(c){e0(e,e.return,c)}}function Nm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Wt(e.type)||e.tag===4}function aA(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Wt(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sA(e,r,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(e),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Da));else if(s!==4&&(s===27&&Wt(e.type)&&(o=e.stateNode,r=null),e=e.child,e!==null))for(sA(e,r,o),e=e.sibling;e!==null;)sA(e,r,o),e=e.sibling}function la(e,r,o){var s=e.tag;if(s===5||s===6)e=e.stateNode,r?o.insertBefore(e,r):o.appendChild(e);else if(s!==4&&(s===27&&Wt(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(la(e,r,o),e=e.sibling;e!==null;)la(e,r,o),e=e.sibling}function _m(e){var r=e.stateNode,o=e.memoizedProps;try{for(var s=e.type,c=r.attributes;c.length;)r.removeAttributeNode(c[0]);M0(r,s,o),r[a2]=e,r[A2]=o}catch(d){e0(e,e.return,d)}}var mt=!1,g0=!1,lA=!1,Lm=typeof WeakSet=="function"?WeakSet:Set,F0=null;function cx(e,r){if(e=e.containerInfo,PA=Ta,e=Vf(e),al(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var s=o.getSelection&&o.getSelection();if(s&&s.rangeCount!==0){o=s.anchorNode;var c=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{o.nodeType,d.nodeType}catch{o=null;break e}var S=0,b=-1,_=-1,W=0,J=0,n2=e,G=null;t:for(;;){for(var Y;n2!==o||c!==0&&n2.nodeType!==3||(b=S+c),n2!==d||s!==0&&n2.nodeType!==3||(_=S+s),n2.nodeType===3&&(S+=n2.nodeValue.length),(Y=n2.firstChild)!==null;)G=n2,n2=Y;for(;;){if(n2===e)break t;if(G===o&&++W===c&&(b=S),G===d&&++J===s&&(_=S),(Y=n2.nextSibling)!==null)break;n2=G,G=n2.parentNode}n2=Y}o=b===-1||_===-1?null:{start:b,end:_}}else o=null}o=o||{start:0,end:0}}else o=null;for(NA={focusedElem:e,selectionRange:o},Ta=!1,F0=r;F0!==null;)if(r=F0,e=r.child,(r.subtreeFlags&1024)!==0&&e!==null)e.return=r,F0=e;else for(;F0!==null;){switch(r=F0,d=r.alternate,e=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,o=r,c=d.memoizedProps,d=d.memoizedState,s=o.stateNode;try{var b2=Sr(o.type,c,o.elementType===o.type);e=s.getSnapshotBeforeUpdate(b2,d),s.__reactInternalSnapshotBeforeUpdate=e}catch(F2){e0(o,o.return,F2)}}break;case 3:if((e&1024)!==0){if(e=r.stateNode.containerInfo,o=e.nodeType,o===9)kA(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":kA(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=r.sibling,e!==null){e.return=r.return,F0=e;break}F0=r.return}}function km(e,r,o){var s=o.flags;switch(o.tag){case 0:case 11:case 15:It(e,o),s&4&&Fo(5,o);break;case 1:if(It(e,o),s&4)if(e=o.stateNode,r===null)try{e.componentDidMount()}catch(S){e0(o,o.return,S)}else{var c=Sr(o.type,r.memoizedProps);r=r.memoizedState;try{e.componentDidUpdate(c,r,e.__reactInternalSnapshotBeforeUpdate)}catch(S){e0(o,o.return,S)}}s&64&&Em(o),s&512&&To(o,o.return);break;case 3:if(It(e,o),s&64&&(e=o.updateQueue,e!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{gd(e,r)}catch(S){e0(o,o.return,S)}}break;case 27:r===null&&s&4&&_m(o);case 26:case 5:It(e,o),r===null&&s&4&&Pm(o),s&512&&To(o,o.return);break;case 12:It(e,o);break;case 13:It(e,o),s&4&&Om(e,o),s&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=Dx.bind(null,o),Ix(e,o))));break;case 22:if(s=o.memoizedState!==null||mt,!s){r=r!==null&&r.memoizedState!==null||g0,c=mt;var d=g0;mt=s,(g0=r)&&!d?qt(e,o,(o.subtreeFlags&8772)!==0):It(e,o),mt=c,g0=d}break;case 30:break;default:It(e,o)}}function Im(e){var r=e.alternate;r!==null&&(e.alternate=null,Im(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&h2(r)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var l0=null,Z0=!1;function Ct(e,r,o){for(o=o.child;o!==null;)qm(e,r,o),o=o.sibling}function qm(e,r,o){if(A0&&typeof A0.onCommitFiberUnmount=="function")try{A0.onCommitFiberUnmount(G0,o)}catch{}switch(o.tag){case 26:g0||Ge(o,r),Ct(e,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:g0||Ge(o,r);var s=l0,c=Z0;Wt(o.type)&&(l0=o.stateNode,Z0=!1),Ct(e,r,o),Lo(o.stateNode),l0=s,Z0=c;break;case 5:g0||Ge(o,r);case 6:if(s=l0,c=Z0,l0=null,Ct(e,r,o),l0=s,Z0=c,l0!==null)if(Z0)try{(l0.nodeType===9?l0.body:l0.nodeName==="HTML"?l0.ownerDocument.body:l0).removeChild(o.stateNode)}catch(d){e0(o,r,d)}else try{l0.removeChild(o.stateNode)}catch(d){e0(o,r,d)}break;case 18:l0!==null&&(Z0?(e=l0,TC(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),zo(e)):TC(l0,o.stateNode));break;case 4:s=l0,c=Z0,l0=o.stateNode.containerInfo,Z0=!0,Ct(e,r,o),l0=s,Z0=c;break;case 0:case 11:case 14:case 15:g0||kt(2,o,r),g0||kt(4,o,r),Ct(e,r,o);break;case 1:g0||(Ge(o,r),s=o.stateNode,typeof s.componentWillUnmount=="function"&&Mm(o,r,s)),Ct(e,r,o);break;case 21:Ct(e,r,o);break;case 22:g0=(s=g0)||o.memoizedState!==null,Ct(e,r,o),g0=s;break;default:Ct(e,r,o)}}function Om(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{zo(e)}catch(o){e0(r,r.return,o)}}function ux(e){switch(e.tag){case 13:case 19:var r=e.stateNode;return r===null&&(r=e.stateNode=new Lm),r;case 22:return e=e.stateNode,r=e._retryCache,r===null&&(r=e._retryCache=new Lm),r;default:throw Error(a(435,e.tag))}}function AA(e,r){var o=ux(e);r.forEach(function(s){var c=vx.bind(null,e,s);o.has(s)||(o.add(s),s.then(c,c))})}function ee(e,r){var o=r.deletions;if(o!==null)for(var s=0;s<o.length;s++){var c=o[s],d=e,S=r,b=S;e:for(;b!==null;){switch(b.tag){case 27:if(Wt(b.type)){l0=b.stateNode,Z0=!1;break e}break;case 5:l0=b.stateNode,Z0=!1;break e;case 3:case 4:l0=b.stateNode.containerInfo,Z0=!0;break e}b=b.return}if(l0===null)throw Error(a(160));qm(d,S,c),l0=null,Z0=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)jm(r,e),r=r.sibling}var Ne=null;function jm(e,r){var o=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ee(r,e),te(e),s&4&&(kt(3,e,e.return),Fo(3,e),kt(5,e,e.return));break;case 1:ee(r,e),te(e),s&512&&(g0||o===null||Ge(o,o.return)),s&64&&mt&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?s:o.concat(s))));break;case 26:var c=Ne;if(ee(r,e),te(e),s&512&&(g0||o===null||Ge(o,o.return)),s&4){var d=o!==null?o.memoizedState:null;if(s=e.memoizedState,o===null)if(s===null)if(e.stateNode===null){e:{s=e.type,o=e.memoizedProps,c=c.ownerDocument||c;t:switch(s){case"title":d=c.getElementsByTagName("title")[0],(!d||d[R2]||d[a2]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(s),c.head.insertBefore(d,c.querySelector("head > title"))),M0(d,s,o),d[a2]=e,V2(d),s=d;break e;case"link":var S=_C("link","href",c).get(s+(o.href||""));if(S){for(var b=0;b<S.length;b++)if(d=S[b],d.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&d.getAttribute("rel")===(o.rel==null?null:o.rel)&&d.getAttribute("title")===(o.title==null?null:o.title)&&d.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(b,1);break t}}d=c.createElement(s),M0(d,s,o),c.head.appendChild(d);break;case"meta":if(S=_C("meta","content",c).get(s+(o.content||""))){for(b=0;b<S.length;b++)if(d=S[b],d.getAttribute("content")===(o.content==null?null:""+o.content)&&d.getAttribute("name")===(o.name==null?null:o.name)&&d.getAttribute("property")===(o.property==null?null:o.property)&&d.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&d.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(b,1);break t}}d=c.createElement(s),M0(d,s,o),c.head.appendChild(d);break;default:throw Error(a(468,s))}d[a2]=e,V2(d),s=d}e.stateNode=s}else LC(c,e.type,e.stateNode);else e.stateNode=NC(c,s,e.memoizedProps);else d!==s?(d===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):d.count--,s===null?LC(c,e.type,e.stateNode):NC(c,s,e.memoizedProps)):s===null&&e.stateNode!==null&&iA(e,e.memoizedProps,o.memoizedProps)}break;case 27:ee(r,e),te(e),s&512&&(g0||o===null||Ge(o,o.return)),o!==null&&s&4&&iA(e,e.memoizedProps,o.memoizedProps);break;case 5:if(ee(r,e),te(e),s&512&&(g0||o===null||Ge(o,o.return)),e.flags&32){c=e.stateNode;try{Wr(c,"")}catch(Y){e0(e,e.return,Y)}}s&4&&e.stateNode!=null&&(c=e.memoizedProps,iA(e,c,o!==null?o.memoizedProps:c)),s&1024&&(lA=!0);break;case 6:if(ee(r,e),te(e),s&4){if(e.stateNode===null)throw Error(a(162));s=e.memoizedProps,o=e.stateNode;try{o.nodeValue=s}catch(Y){e0(e,e.return,Y)}}break;case 3:if(Ba=null,c=Ne,Ne=xa(r.containerInfo),ee(r,e),Ne=c,te(e),s&4&&o!==null&&o.memoizedState.isDehydrated)try{zo(r.containerInfo)}catch(Y){e0(e,e.return,Y)}lA&&(lA=!1,Hm(e));break;case 4:s=Ne,Ne=xa(e.stateNode.containerInfo),ee(r,e),te(e),Ne=s;break;case 12:ee(r,e),te(e);break;case 13:ee(r,e),te(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(CA=O0()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,AA(e,s)));break;case 22:c=e.memoizedState!==null;var _=o!==null&&o.memoizedState!==null,W=mt,J=g0;if(mt=W||c,g0=J||_,ee(r,e),g0=J,mt=W,te(e),s&8192)e:for(r=e.stateNode,r._visibility=c?r._visibility&-2:r._visibility|1,c&&(o===null||_||mt||g0||Fr(e)),o=null,r=e;;){if(r.tag===5||r.tag===26){if(o===null){_=o=r;try{if(d=_.stateNode,c)S=d.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{b=_.stateNode;var n2=_.memoizedProps.style,G=n2!=null&&n2.hasOwnProperty("display")?n2.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Y){e0(_,_.return,Y)}}}else if(r.tag===6){if(o===null){_=r;try{_.stateNode.nodeValue=c?"":_.memoizedProps}catch(Y){e0(_,_.return,Y)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}s&4&&(s=e.updateQueue,s!==null&&(o=s.retryQueue,o!==null&&(s.retryQueue=null,AA(e,o))));break;case 19:ee(r,e),te(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,AA(e,s)));break;case 30:break;case 21:break;default:ee(r,e),te(e)}}function te(e){var r=e.flags;if(r&2){try{for(var o,s=e.return;s!==null;){if(Nm(s)){o=s;break}s=s.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var c=o.stateNode,d=aA(e);la(e,d,c);break;case 5:var S=o.stateNode;o.flags&32&&(Wr(S,""),o.flags&=-33);var b=aA(e);la(e,b,S);break;case 3:case 4:var _=o.stateNode.containerInfo,W=aA(e);sA(e,W,_);break;default:throw Error(a(161))}}catch(J){e0(e,e.return,J)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Hm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var r=e;Hm(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),e=e.sibling}}function It(e,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)km(e,r.alternate,r),r=r.sibling}function Fr(e){for(e=e.child;e!==null;){var r=e;switch(r.tag){case 0:case 11:case 14:case 15:kt(4,r,r.return),Fr(r);break;case 1:Ge(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Mm(r,r.return,o),Fr(r);break;case 27:Lo(r.stateNode);case 26:case 5:Ge(r,r.return),Fr(r);break;case 22:r.memoizedState===null&&Fr(r);break;case 30:Fr(r);break;default:Fr(r)}e=e.sibling}}function qt(e,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var s=r.alternate,c=e,d=r,S=d.flags;switch(d.tag){case 0:case 11:case 15:qt(c,d,o),Fo(4,d);break;case 1:if(qt(c,d,o),s=d,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(W){e0(s,s.return,W)}if(s=d,c=s.updateQueue,c!==null){var b=s.stateNode;try{var _=c.shared.hiddenCallbacks;if(_!==null)for(c.shared.hiddenCallbacks=null,c=0;c<_.length;c++)pd(_[c],b)}catch(W){e0(s,s.return,W)}}o&&S&64&&Em(d),To(d,d.return);break;case 27:_m(d);case 26:case 5:qt(c,d,o),o&&s===null&&S&4&&Pm(d),To(d,d.return);break;case 12:qt(c,d,o);break;case 13:qt(c,d,o),o&&S&4&&Om(c,d);break;case 22:d.memoizedState===null&&qt(c,d,o),To(d,d.return);break;case 30:break;default:qt(c,d,o)}r=r.sibling}}function cA(e,r){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(e=r.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&co(o))}function uA(e,r){e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&co(e))}function Ve(e,r,o,s){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Um(e,r,o,s),r=r.sibling}function Um(e,r,o,s){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Ve(e,r,o,s),c&2048&&Fo(9,r);break;case 1:Ve(e,r,o,s);break;case 3:Ve(e,r,o,s),c&2048&&(e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&co(e)));break;case 12:if(c&2048){Ve(e,r,o,s),e=r.stateNode;try{var d=r.memoizedProps,S=d.id,b=d.onPostCommit;typeof b=="function"&&b(S,r.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(_){e0(r,r.return,_)}}else Ve(e,r,o,s);break;case 13:Ve(e,r,o,s);break;case 23:break;case 22:d=r.stateNode,S=r.alternate,r.memoizedState!==null?d._visibility&2?Ve(e,r,o,s):Ro(e,r):d._visibility&2?Ve(e,r,o,s):(d._visibility|=2,cn(e,r,o,s,(r.subtreeFlags&10256)!==0)),c&2048&&cA(S,r);break;case 24:Ve(e,r,o,s),c&2048&&uA(r.alternate,r);break;default:Ve(e,r,o,s)}}function cn(e,r,o,s,c){for(c=c&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=e,S=r,b=o,_=s,W=S.flags;switch(S.tag){case 0:case 11:case 15:cn(d,S,b,_,c),Fo(8,S);break;case 23:break;case 22:var J=S.stateNode;S.memoizedState!==null?J._visibility&2?cn(d,S,b,_,c):Ro(d,S):(J._visibility|=2,cn(d,S,b,_,c)),c&&W&2048&&cA(S.alternate,S);break;case 24:cn(d,S,b,_,c),c&&W&2048&&uA(S.alternate,S);break;default:cn(d,S,b,_,c)}r=r.sibling}}function Ro(e,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=e,s=r,c=s.flags;switch(s.tag){case 22:Ro(o,s),c&2048&&cA(s.alternate,s);break;case 24:Ro(o,s),c&2048&&uA(s.alternate,s);break;default:Ro(o,s)}r=r.sibling}}var bo=8192;function un(e){if(e.subtreeFlags&bo)for(e=e.child;e!==null;)zm(e),e=e.sibling}function zm(e){switch(e.tag){case 26:un(e),e.flags&bo&&e.memoizedState!==null&&Zx(Ne,e.memoizedState,e.memoizedProps);break;case 5:un(e);break;case 3:case 4:var r=Ne;Ne=xa(e.stateNode.containerInfo),un(e),Ne=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=bo,bo=16777216,un(e),bo=r):un(e));break;default:un(e)}}function Wm(e){var r=e.alternate;if(r!==null&&(e=r.child,e!==null)){r.child=null;do r=e.sibling,e.sibling=null,e=r;while(e!==null)}}function wo(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var s=r[o];F0=s,Vm(s,e)}Wm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Gm(e),e=e.sibling}function Gm(e){switch(e.tag){case 0:case 11:case 15:wo(e),e.flags&2048&&kt(9,e,e.return);break;case 3:wo(e);break;case 12:wo(e);break;case 22:var r=e.stateNode;e.memoizedState!==null&&r._visibility&2&&(e.return===null||e.return.tag!==13)?(r._visibility&=-3,Aa(e)):wo(e);break;default:wo(e)}}function Aa(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var s=r[o];F0=s,Vm(s,e)}Wm(e)}for(e=e.child;e!==null;){switch(r=e,r.tag){case 0:case 11:case 15:kt(8,r,r.return),Aa(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Aa(r));break;default:Aa(r)}e=e.sibling}}function Vm(e,r){for(;F0!==null;){var o=F0;switch(o.tag){case 0:case 11:case 15:kt(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var s=o.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:co(o.memoizedState.cache)}if(s=o.child,s!==null)s.return=o,F0=s;else e:for(o=e;F0!==null;){s=F0;var c=s.sibling,d=s.return;if(Im(s),s===o){F0=null;break e}if(c!==null){c.return=d,F0=c;break e}F0=d}}}var fx={getCacheForType:function(e){var r=L0(y0),o=r.data.get(e);return o===void 0&&(o=e(),r.data.set(e,o)),o}},dx=typeof WeakMap=="function"?WeakMap:Map,K2=0,t0=null,O2=null,U2=0,Z2=0,re=null,Ot=!1,fn=!1,fA=!1,pt=0,m0=0,jt=0,Tr=0,dA=0,he=0,dn=0,Eo=null,X0=null,mA=!1,CA=0,ca=1/0,ua=null,Ht=null,E0=0,Ut=null,mn=null,Cn=0,pA=0,gA=null,Ym=null,Mo=0,hA=null;function ne(){if((K2&2)!==0&&U2!==0)return U2&-U2;if(I.T!==null){var e=tn;return e!==0?e:FA()}return L()}function $m(){he===0&&(he=(U2&536870912)===0||$2?Hr():536870912);var e=ge.current;return e!==null&&(e.flags|=32),he}function oe(e,r,o){(e===t0&&(Z2===2||Z2===9)||e.cancelPendingCommit!==null)&&(pn(e,0),zt(e,U2,he,!1)),lr(e,o),((K2&2)===0||e!==t0)&&(e===t0&&((K2&2)===0&&(Tr|=o),m0===4&&zt(e,U2,he,!1)),Ye(e))}function Km(e,r,o){if((K2&6)!==0)throw Error(a(327));var s=!o&&(r&124)===0&&(r&e.expiredLanes)===0||Ue(e,r),c=s?px(e,r):xA(e,r,!0),d=s;do{if(c===0){fn&&!s&&zt(e,r,0,!1);break}else{if(o=e.current.alternate,d&&!mx(o)){c=xA(e,r,!1),d=!1;continue}if(c===2){if(d=r,e.errorRecoveryDisabledLanes&d)var S=0;else S=e.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var b=e;c=Eo;var _=b.current.memoizedState.isDehydrated;if(_&&(pn(b,S).flags|=256),S=xA(b,S,!1),S!==2){if(fA&&!_){b.errorRecoveryDisabledLanes|=d,Tr|=d,c=4;break e}d=X0,X0=c,d!==null&&(X0===null?X0=d:X0.push.apply(X0,d))}c=S}if(d=!1,c!==2)continue}}if(c===1){pn(e,0),zt(e,r,0,!0);break}e:{switch(s=e,d=c,d){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:zt(s,r,he,!Ot);break e;case 2:X0=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(c=CA+300-O0(),10<c)){if(zt(s,r,he,!Ot),sr(s,0,!0)!==0)break e;s.timeoutHandle=SC(Zm.bind(null,s,o,X0,ua,mA,r,he,Tr,dn,Ot,d,2,-0,0),c);break e}Zm(s,o,X0,ua,mA,r,he,Tr,dn,Ot,d,0,-0,0)}}break}while(!0);Ye(e)}function Zm(e,r,o,s,c,d,S,b,_,W,J,n2,G,Y){if(e.timeoutHandle=-1,n2=r.subtreeFlags,(n2&8192||(n2&16785408)===16785408)&&(qo={stylesheets:null,count:0,unsuspend:Kx},zm(r),n2=Xx(),n2!==null)){e.cancelPendingCommit=n2(nC.bind(null,e,r,d,o,s,c,S,b,_,J,1,G,Y)),zt(e,d,S,!W);return}nC(e,r,d,o,s,c,S,b,_)}function mx(e){for(var r=e;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var s=0;s<o.length;s++){var c=o[s],d=c.getSnapshot;c=c.value;try{if(!Q0(d(),c))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function zt(e,r,o,s){r&=~dA,r&=~Tr,e.suspendedLanes|=r,e.pingedLanes&=~r,s&&(e.warmLanes|=r),s=e.expirationTimes;for(var c=r;0<c;){var d=31-b0(c),S=1<<d;s[d]=-1,c&=~S}o!==0&&Ar(e,o,r)}function fa(){return(K2&6)===0?(Po(0),!1):!0}function DA(){if(O2!==null){if(Z2===0)var e=O2.return;else e=O2,lt=vr=null,kl(e),ln=null,yo=0,e=O2;for(;e!==null;)wm(e.alternate,e),e=e.return;O2=null}}function pn(e,r){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,Px(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),DA(),t0=e,O2=o=it(e.current,null),U2=r,Z2=0,re=null,Ot=!1,fn=Ue(e,r),fA=!1,dn=he=dA=Tr=jt=m0=0,X0=Eo=null,mA=!1,(r&8)!==0&&(r|=r&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=r;0<s;){var c=31-b0(s),d=1<<c;r|=e[c],s&=~d}return pt=r,_i(),o}function Xm(e,r){_2=null,I.H=Ji,r===fo||r===zi?(r=md(),Z2=3):r===ud?(r=md(),Z2=4):Z2=r===Cm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,re=r,O2===null&&(m0=1,oa(e,de(r,e.current)))}function Qm(){var e=I.H;return I.H=Ji,e===null?Ji:e}function Jm(){var e=I.A;return I.A=fx,e}function vA(){m0=4,Ot||(U2&4194048)!==U2&&ge.current!==null||(fn=!0),(jt&134217727)===0&&(Tr&134217727)===0||t0===null||zt(t0,U2,he,!1)}function xA(e,r,o){var s=K2;K2|=2;var c=Qm(),d=Jm();(t0!==e||U2!==r)&&(ua=null,pn(e,r)),r=!1;var S=m0;e:do try{if(Z2!==0&&O2!==null){var b=O2,_=re;switch(Z2){case 8:DA(),S=6;break e;case 3:case 2:case 9:case 6:ge.current===null&&(r=!0);var W=Z2;if(Z2=0,re=null,gn(e,b,_,W),o&&fn){S=0;break e}break;default:W=Z2,Z2=0,re=null,gn(e,b,_,W)}}Cx(),S=m0;break}catch(J){Xm(e,J)}while(!0);return r&&e.shellSuspendCounter++,lt=vr=null,K2=s,I.H=c,I.A=d,O2===null&&(t0=null,U2=0,_i()),S}function Cx(){for(;O2!==null;)eC(O2)}function px(e,r){var o=K2;K2|=2;var s=Qm(),c=Jm();t0!==e||U2!==r?(ua=null,ca=O0()+500,pn(e,r)):fn=Ue(e,r);e:do try{if(Z2!==0&&O2!==null){r=O2;var d=re;t:switch(Z2){case 1:Z2=0,re=null,gn(e,r,d,1);break;case 2:case 9:if(fd(d)){Z2=0,re=null,tC(r);break}r=function(){Z2!==2&&Z2!==9||t0!==e||(Z2=7),Ye(e)},d.then(r,r);break e;case 3:Z2=7;break e;case 4:Z2=5;break e;case 7:fd(d)?(Z2=0,re=null,tC(r)):(Z2=0,re=null,gn(e,r,d,7));break;case 5:var S=null;switch(O2.tag){case 26:S=O2.memoizedState;case 5:case 27:var b=O2;if(!S||kC(S)){Z2=0,re=null;var _=b.sibling;if(_!==null)O2=_;else{var W=b.return;W!==null?(O2=W,da(W)):O2=null}break t}}Z2=0,re=null,gn(e,r,d,5);break;case 6:Z2=0,re=null,gn(e,r,d,6);break;case 8:DA(),m0=6;break e;default:throw Error(a(462))}}gx();break}catch(J){Xm(e,J)}while(!0);return lt=vr=null,I.H=s,I.A=c,K2=o,O2!==null?0:(t0=null,U2=0,_i(),m0)}function gx(){for(;O2!==null&&!zn();)eC(O2)}function eC(e){var r=Rm(e.alternate,e,pt);e.memoizedProps=e.pendingProps,r===null?da(e):O2=r}function tC(e){var r=e,o=r.alternate;switch(r.tag){case 15:case 0:r=xm(o,r,r.pendingProps,r.type,void 0,U2);break;case 11:r=xm(o,r,r.pendingProps,r.type.render,r.ref,U2);break;case 5:kl(r);default:wm(o,r),r=O2=rd(r,pt),r=Rm(o,r,pt)}e.memoizedProps=e.pendingProps,r===null?da(e):O2=r}function gn(e,r,o,s){lt=vr=null,kl(r),ln=null,yo=0;var c=r.return;try{if(ax(e,c,r,o,U2)){m0=1,oa(e,de(o,e.current)),O2=null;return}}catch(d){if(c!==null)throw O2=c,d;m0=1,oa(e,de(o,e.current)),O2=null;return}r.flags&32768?($2||s===1?e=!0:fn||(U2&536870912)!==0?e=!1:(Ot=e=!0,(s===2||s===9||s===3||s===6)&&(s=ge.current,s!==null&&s.tag===13&&(s.flags|=16384))),rC(r,e)):da(r)}function da(e){var r=e;do{if((r.flags&32768)!==0){rC(r,Ot);return}e=r.return;var o=lx(r.alternate,r,pt);if(o!==null){O2=o;return}if(r=r.sibling,r!==null){O2=r;return}O2=r=e}while(r!==null);m0===0&&(m0=5)}function rC(e,r){do{var o=Ax(e.alternate,e);if(o!==null){o.flags&=32767,O2=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(e=e.sibling,e!==null)){O2=e;return}O2=e=o}while(e!==null);m0=6,O2=null}function nC(e,r,o,s,c,d,S,b,_){e.cancelPendingCommit=null;do ma();while(E0!==0);if((K2&6)!==0)throw Error(a(327));if(r!==null){if(r===e.current)throw Error(a(177));if(d=r.lanes|r.childLanes,d|=ul,Si(e,o,d,S,b,_),e===t0&&(O2=t0=null,U2=0),mn=r,Ut=e,Cn=o,pA=d,gA=c,Ym=s,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,xx(jr,function(){return lC(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||s){s=I.T,I.T=null,c=V.p,V.p=2,S=K2,K2|=4;try{cx(e,r,o)}finally{K2=S,V.p=c,I.T=s}}E0=1,oC(),iC(),aC()}}function oC(){if(E0===1){E0=0;var e=Ut,r=mn,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=I.T,I.T=null;var s=V.p;V.p=2;var c=K2;K2|=4;try{jm(r,e);var d=NA,S=Vf(e.containerInfo),b=d.focusedElem,_=d.selectionRange;if(S!==b&&b&&b.ownerDocument&&Gf(b.ownerDocument.documentElement,b)){if(_!==null&&al(b)){var W=_.start,J=_.end;if(J===void 0&&(J=W),"selectionStart"in b)b.selectionStart=W,b.selectionEnd=Math.min(J,b.value.length);else{var n2=b.ownerDocument||document,G=n2&&n2.defaultView||window;if(G.getSelection){var Y=G.getSelection(),b2=b.textContent.length,F2=Math.min(_.start,b2),J2=_.end===void 0?F2:Math.min(_.end,b2);!Y.extend&&F2>J2&&(S=J2,J2=F2,F2=S);var O=Wf(b,F2),q=Wf(b,J2);if(O&&q&&(Y.rangeCount!==1||Y.anchorNode!==O.node||Y.anchorOffset!==O.offset||Y.focusNode!==q.node||Y.focusOffset!==q.offset)){var U=n2.createRange();U.setStart(O.node,O.offset),Y.removeAllRanges(),F2>J2?(Y.addRange(U),Y.extend(q.node,q.offset)):(U.setEnd(q.node,q.offset),Y.addRange(U))}}}}for(n2=[],Y=b;Y=Y.parentNode;)Y.nodeType===1&&n2.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<n2.length;b++){var t2=n2[b];t2.element.scrollLeft=t2.left,t2.element.scrollTop=t2.top}}Ta=!!PA,NA=PA=null}finally{K2=c,V.p=s,I.T=o}}e.current=r,E0=2}}function iC(){if(E0===2){E0=0;var e=Ut,r=mn,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=I.T,I.T=null;var s=V.p;V.p=2;var c=K2;K2|=4;try{km(e,r.alternate,r)}finally{K2=c,V.p=s,I.T=o}}E0=3}}function aC(){if(E0===4||E0===3){E0=0,Wn();var e=Ut,r=mn,o=Cn,s=Ym;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?E0=5:(E0=0,mn=Ut=null,sC(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ht=null),$n(o),r=r.stateNode,A0&&typeof A0.onCommitFiberRoot=="function")try{A0.onCommitFiberRoot(G0,r,void 0,(r.current.flags&128)===128)}catch{}if(s!==null){r=I.T,c=V.p,V.p=2,I.T=null;try{for(var d=e.onRecoverableError,S=0;S<s.length;S++){var b=s[S];d(b.value,{componentStack:b.stack})}}finally{I.T=r,V.p=c}}(Cn&3)!==0&&ma(),Ye(e),c=e.pendingLanes,(o&4194090)!==0&&(c&42)!==0?e===hA?Mo++:(Mo=0,hA=e):Mo=0,Po(0)}}function sC(e,r){(e.pooledCacheLanes&=r)===0&&(r=e.pooledCache,r!=null&&(e.pooledCache=null,co(r)))}function ma(e){return oC(),iC(),aC(),lC()}function lC(){if(E0!==5)return!1;var e=Ut,r=pA;pA=0;var o=$n(Cn),s=I.T,c=V.p;try{V.p=32>o?32:o,I.T=null,o=gA,gA=null;var d=Ut,S=Cn;if(E0=0,mn=Ut=null,Cn=0,(K2&6)!==0)throw Error(a(331));var b=K2;if(K2|=4,Gm(d.current),Um(d,d.current,S,o),K2=b,Po(0,!1),A0&&typeof A0.onPostCommitFiberRoot=="function")try{A0.onPostCommitFiberRoot(G0,d)}catch{}return!0}finally{V.p=c,I.T=s,sC(e,r)}}function AC(e,r,o){r=de(o,r),r=Zl(e.stateNode,r,2),e=Pt(e,r,2),e!==null&&(lr(e,2),Ye(e))}function e0(e,r,o){if(e.tag===3)AC(e,e,o);else for(;r!==null;){if(r.tag===3){AC(r,e,o);break}else if(r.tag===1){var s=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ht===null||!Ht.has(s))){e=de(o,e),o=dm(2),s=Pt(r,o,2),s!==null&&(mm(o,s,r,e),lr(s,2),Ye(s));break}}r=r.return}}function yA(e,r,o){var s=e.pingCache;if(s===null){s=e.pingCache=new dx;var c=new Set;s.set(r,c)}else c=s.get(r),c===void 0&&(c=new Set,s.set(r,c));c.has(o)||(fA=!0,c.add(o),e=hx.bind(null,e,r,o),r.then(e,e))}function hx(e,r,o){var s=e.pingCache;s!==null&&s.delete(r),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,t0===e&&(U2&o)===o&&(m0===4||m0===3&&(U2&62914560)===U2&&300>O0()-CA?(K2&2)===0&&pn(e,0):dA|=o,dn===U2&&(dn=0)),Ye(e)}function cC(e,r){r===0&&(r=Bi()),e=Xr(e,r),e!==null&&(lr(e,r),Ye(e))}function Dx(e){var r=e.memoizedState,o=0;r!==null&&(o=r.retryLane),cC(e,o)}function vx(e,r){var o=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(o=c.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(a(314))}s!==null&&s.delete(r),cC(e,o)}function xx(e,r){return be(e,r)}var Ca=null,hn=null,BA=!1,pa=!1,SA=!1,Rr=0;function Ye(e){e!==hn&&e.next===null&&(hn===null?Ca=hn=e:hn=hn.next=e),pa=!0,BA||(BA=!0,Bx())}function Po(e,r){if(!SA&&pa){SA=!0;do for(var o=!1,s=Ca;s!==null;){if(e!==0){var c=s.pendingLanes;if(c===0)var d=0;else{var S=s.suspendedLanes,b=s.pingedLanes;d=(1<<31-b0(42|e)+1)-1,d&=c&~(S&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(o=!0,mC(s,d))}else d=U2,d=sr(s,s===t0?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(d&3)===0||Ue(s,d)||(o=!0,mC(s,d));s=s.next}while(o);SA=!1}}function yx(){uC()}function uC(){pa=BA=!1;var e=0;Rr!==0&&(Mx()&&(e=Rr),Rr=0);for(var r=O0(),o=null,s=Ca;s!==null;){var c=s.next,d=fC(s,r);d===0?(s.next=null,o===null?Ca=c:o.next=c,c===null&&(hn=o)):(o=s,(e!==0||(d&3)!==0)&&(pa=!0)),s=c}Po(e)}function fC(e,r){for(var o=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var S=31-b0(d),b=1<<S,_=c[S];_===-1?((b&o)===0||(b&s)!==0)&&(c[S]=yi(b,r)):_<=r&&(e.expiredLanes|=b),d&=~b}if(r=t0,o=U2,o=sr(e,e===r?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,o===0||e===r&&(Z2===2||Z2===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&W0(s),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||Ue(e,o)){if(r=o&-o,r===e.callbackPriority)return r;switch(s!==null&&W0(s),$n(o)){case 2:case 8:o=Di;break;case 32:o=jr;break;case 268435456:o=Bt;break;default:o=jr}return s=dC.bind(null,e),o=be(o,s),e.callbackPriority=r,e.callbackNode=o,r}return s!==null&&s!==null&&W0(s),e.callbackPriority=2,e.callbackNode=null,2}function dC(e,r){if(E0!==0&&E0!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(ma()&&e.callbackNode!==o)return null;var s=U2;return s=sr(e,e===t0?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Km(e,s,r),fC(e,O0()),e.callbackNode!=null&&e.callbackNode===o?dC.bind(null,e):null)}function mC(e,r){if(ma())return null;Km(e,r,!0)}function Bx(){Nx(function(){(K2&6)!==0?be(et,yx):uC()})}function FA(){return Rr===0&&(Rr=Hr()),Rr}function CC(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ri(""+e)}function pC(e,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,e.id&&o.setAttribute("form",e.id),r.parentNode.insertBefore(o,r),e=new FormData(e),o.parentNode.removeChild(o),e}function Sx(e,r,o,s,c){if(r==="submit"&&o&&o.stateNode===c){var d=CC((c[A2]||null).action),S=s.submitter;S&&(r=(r=S[A2]||null)?CC(r.formAction):S.getAttribute("formAction"),r!==null&&(d=r,S=null));var b=new Mi("action","action",null,s,c);e.push({event:b,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Rr!==0){var _=S?pC(c,S):new FormData(c);Gl(o,{pending:!0,data:_,method:c.method,action:d},null,_)}}else typeof d=="function"&&(b.preventDefault(),_=S?pC(c,S):new FormData(c),Gl(o,{pending:!0,data:_,method:c.method,action:d},d,_))},currentTarget:c}]})}}for(var TA=0;TA<cl.length;TA++){var RA=cl[TA],Fx=RA.toLowerCase(),Tx=RA[0].toUpperCase()+RA.slice(1);Pe(Fx,"on"+Tx)}Pe(Kf,"onAnimationEnd"),Pe(Zf,"onAnimationIteration"),Pe(Xf,"onAnimationStart"),Pe("dblclick","onDoubleClick"),Pe("focusin","onFocus"),Pe("focusout","onBlur"),Pe(zv,"onTransitionRun"),Pe(Wv,"onTransitionStart"),Pe(Gv,"onTransitionCancel"),Pe(Qf,"onTransitionEnd"),ce("onMouseEnter",["mouseout","mouseover"]),ce("onMouseLeave",["mouseout","mouseover"]),ce("onPointerEnter",["pointerout","pointerover"]),ce("onPointerLeave",["pointerout","pointerover"]),j0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),j0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),j0("onBeforeInput",["compositionend","keypress","textInput","paste"]),j0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),j0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),j0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(No));function gC(e,r){r=(r&4)!==0;for(var o=0;o<e.length;o++){var s=e[o],c=s.event;s=s.listeners;e:{var d=void 0;if(r)for(var S=s.length-1;0<=S;S--){var b=s[S],_=b.instance,W=b.currentTarget;if(b=b.listener,_!==d&&c.isPropagationStopped())break e;d=b,c.currentTarget=W;try{d(c)}catch(J){na(J)}c.currentTarget=null,d=_}else for(S=0;S<s.length;S++){if(b=s[S],_=b.instance,W=b.currentTarget,b=b.listener,_!==d&&c.isPropagationStopped())break e;d=b,c.currentTarget=W;try{d(c)}catch(J){na(J)}c.currentTarget=null,d=_}}}}function j2(e,r){var o=r[S2];o===void 0&&(o=r[S2]=new Set);var s=e+"__bubble";o.has(s)||(hC(r,e,2,!1),o.add(s))}function bA(e,r,o){var s=0;r&&(s|=4),hC(o,e,s,r)}var ga="_reactListening"+Math.random().toString(36).slice(2);function wA(e){if(!e[ga]){e[ga]=!0,H2.forEach(function(o){o!=="selectionchange"&&(Rx.has(o)||bA(o,!1,e),bA(o,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[ga]||(r[ga]=!0,bA("selectionchange",!1,r))}}function hC(e,r,o,s){switch(UC(r)){case 2:var c=ey;break;case 8:c=ty;break;default:c=zA}o=c.bind(null,r,o,e),c=void 0,!Xs||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(r,o,{capture:!0,passive:c}):e.addEventListener(r,o,!0):c!==void 0?e.addEventListener(r,o,{passive:c}):e.addEventListener(r,o,!1)}function EA(e,r,o,s,c){var d=s;if((r&1)===0&&(r&2)===0&&s!==null)e:for(;;){if(s===null)return;var S=s.tag;if(S===3||S===4){var b=s.stateNode.containerInfo;if(b===c)break;if(S===4)for(S=s.return;S!==null;){var _=S.tag;if((_===3||_===4)&&S.stateNode.containerInfo===c)return;S=S.return}for(;b!==null;){if(S=w2(b),S===null)return;if(_=S.tag,_===5||_===6||_===26||_===27){s=d=S;continue e}b=b.parentNode}}s=s.return}Ff(function(){var W=d,J=Ks(o),n2=[];e:{var G=Jf.get(e);if(G!==void 0){var Y=Mi,b2=e;switch(e){case"keypress":if(wi(o)===0)break e;case"keydown":case"keyup":Y=xv;break;case"focusin":b2="focus",Y=tl;break;case"focusout":b2="blur",Y=tl;break;case"beforeblur":case"afterblur":Y=tl;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Av;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Sv;break;case Kf:case Zf:case Xf:Y=fv;break;case Qf:Y=Tv;break;case"scroll":case"scrollend":Y=sv;break;case"wheel":Y=bv;break;case"copy":case"cut":case"paste":Y=mv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Ef;break;case"toggle":case"beforetoggle":Y=Ev}var F2=(r&4)!==0,J2=!F2&&(e==="scroll"||e==="scrollend"),O=F2?G!==null?G+"Capture":null:G;F2=[];for(var q=W,U;q!==null;){var t2=q;if(U=t2.stateNode,t2=t2.tag,t2!==5&&t2!==26&&t2!==27||U===null||O===null||(t2=Xn(q,O),t2!=null&&F2.push(_o(q,t2,U))),J2)break;q=q.return}0<F2.length&&(G=new Y(G,b2,null,o,J),n2.push({event:G,listeners:F2}))}}if((r&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",G&&o!==$s&&(b2=o.relatedTarget||o.fromElement)&&(w2(b2)||b2[g2]))break e;if((Y||G)&&(G=J.window===J?J:(G=J.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(b2=o.relatedTarget||o.toElement,Y=W,b2=b2?w2(b2):null,b2!==null&&(J2=A(b2),F2=b2.tag,b2!==J2||F2!==5&&F2!==27&&F2!==6)&&(b2=null)):(Y=null,b2=W),Y!==b2)){if(F2=bf,t2="onMouseLeave",O="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(F2=Ef,t2="onPointerLeave",O="onPointerEnter",q="pointer"),J2=Y==null?G:a0(Y),U=b2==null?G:a0(b2),G=new F2(t2,q+"leave",Y,o,J),G.target=J2,G.relatedTarget=U,t2=null,w2(J)===W&&(F2=new F2(O,q+"enter",b2,o,J),F2.target=U,F2.relatedTarget=J2,t2=F2),J2=t2,Y&&b2)t:{for(F2=Y,O=b2,q=0,U=F2;U;U=Dn(U))q++;for(U=0,t2=O;t2;t2=Dn(t2))U++;for(;0<q-U;)F2=Dn(F2),q--;for(;0<U-q;)O=Dn(O),U--;for(;q--;){if(F2===O||O!==null&&F2===O.alternate)break t;F2=Dn(F2),O=Dn(O)}F2=null}else F2=null;Y!==null&&DC(n2,G,Y,F2,!1),b2!==null&&J2!==null&&DC(n2,J2,b2,F2,!0)}}e:{if(G=W?a0(W):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var m2=qf;else if(kf(G))if(Of)m2=jv;else{m2=qv;var q2=Iv}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?W&&Ys(W.elementType)&&(m2=qf):m2=Ov;if(m2&&(m2=m2(e,W))){If(n2,m2,o,J);break e}q2&&q2(e,G,W),e==="focusout"&&W&&G.type==="number"&&W.memoizedProps.value!=null&&Vs(G,"number",G.value)}switch(q2=W?a0(W):window,e){case"focusin":(kf(q2)||q2.contentEditable==="true")&&($r=q2,sl=W,io=null);break;case"focusout":io=sl=$r=null;break;case"mousedown":ll=!0;break;case"contextmenu":case"mouseup":case"dragend":ll=!1,Yf(n2,o,J);break;case"selectionchange":if(Uv)break;case"keydown":case"keyup":Yf(n2,o,J)}var D2;if(nl)e:{switch(e){case"compositionstart":var T2="onCompositionStart";break e;case"compositionend":T2="onCompositionEnd";break e;case"compositionupdate":T2="onCompositionUpdate";break e}T2=void 0}else Yr?_f(e,o)&&(T2="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(T2="onCompositionStart");T2&&(Mf&&o.locale!=="ko"&&(Yr||T2!=="onCompositionStart"?T2==="onCompositionEnd"&&Yr&&(D2=Tf()):(bt=J,Qs="value"in bt?bt.value:bt.textContent,Yr=!0)),q2=ha(W,T2),0<q2.length&&(T2=new wf(T2,e,null,o,J),n2.push({event:T2,listeners:q2}),D2?T2.data=D2:(D2=Lf(o),D2!==null&&(T2.data=D2)))),(D2=Pv?Nv(e,o):_v(e,o))&&(T2=ha(W,"onBeforeInput"),0<T2.length&&(q2=new wf("onBeforeInput","beforeinput",null,o,J),n2.push({event:q2,listeners:T2}),q2.data=D2)),Sx(n2,e,W,o,J)}gC(n2,r)})}function _o(e,r,o){return{instance:e,listener:r,currentTarget:o}}function ha(e,r){for(var o=r+"Capture",s=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=Xn(e,o),c!=null&&s.unshift(_o(e,c,d)),c=Xn(e,r),c!=null&&s.push(_o(e,c,d))),e.tag===3)return s;e=e.return}return[]}function Dn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function DC(e,r,o,s,c){for(var d=r._reactName,S=[];o!==null&&o!==s;){var b=o,_=b.alternate,W=b.stateNode;if(b=b.tag,_!==null&&_===s)break;b!==5&&b!==26&&b!==27||W===null||(_=W,c?(W=Xn(o,d),W!=null&&S.unshift(_o(o,W,_))):c||(W=Xn(o,d),W!=null&&S.push(_o(o,W,_)))),o=o.return}S.length!==0&&e.push({event:r,listeners:S})}var bx=/\r\n?/g,wx=/\u0000|\uFFFD/g;function vC(e){return(typeof e=="string"?e:""+e).replace(bx,`
`).replace(wx,"")}function xC(e,r){return r=vC(r),vC(e)===r}function Da(){}function Q2(e,r,o,s,c,d){switch(o){case"children":typeof s=="string"?r==="body"||r==="textarea"&&s===""||Wr(e,s):(typeof s=="number"||typeof s=="bigint")&&r!=="body"&&Wr(e,""+s);break;case"className":nt(e,"class",s);break;case"tabIndex":nt(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,o,s);break;case"style":Bf(e,s,d);break;case"data":if(r!=="object"){nt(e,"data",s);break}case"src":case"href":if(s===""&&(r!=="a"||o!=="href")){e.removeAttribute(o);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(o);break}s=Ri(""+s),e.setAttribute(o,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(o==="formAction"?(r!=="input"&&Q2(e,r,"name",c.name,c,null),Q2(e,r,"formEncType",c.formEncType,c,null),Q2(e,r,"formMethod",c.formMethod,c,null),Q2(e,r,"formTarget",c.formTarget,c,null)):(Q2(e,r,"encType",c.encType,c,null),Q2(e,r,"method",c.method,c,null),Q2(e,r,"target",c.target,c,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(o);break}s=Ri(""+s),e.setAttribute(o,s);break;case"onClick":s!=null&&(e.onclick=Da);break;case"onScroll":s!=null&&j2("scroll",e);break;case"onScrollEnd":s!=null&&j2("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(o=s.__html,o!=null){if(c.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}o=Ri(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(o,""+s):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":s===!0?e.setAttribute(o,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(o,s):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(o,s):e.removeAttribute(o);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(o):e.setAttribute(o,s);break;case"popover":j2("beforetoggle",e),j2("toggle",e),ue(e,"popover",s);break;case"xlinkActuate":I2(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":I2(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":I2(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":I2(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":I2(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":I2(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":I2(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":I2(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":I2(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":ue(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=iv.get(o)||o,ue(e,o,s))}}function MA(e,r,o,s,c,d){switch(o){case"style":Bf(e,s,d);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(o=s.__html,o!=null){if(c.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"children":typeof s=="string"?Wr(e,s):(typeof s=="number"||typeof s=="bigint")&&Wr(e,""+s);break;case"onScroll":s!=null&&j2("scroll",e);break;case"onScrollEnd":s!=null&&j2("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Da);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!St.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(c=o.endsWith("Capture"),r=o.slice(2,c?o.length-7:void 0),d=e[A2]||null,d=d!=null?d[o]:null,typeof d=="function"&&e.removeEventListener(r,d,c),typeof s=="function")){typeof d!="function"&&d!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(r,s,c);break e}o in e?e[o]=s:s===!0?e.setAttribute(o,""):ue(e,o,s)}}}function M0(e,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":j2("error",e),j2("load",e);var s=!1,c=!1,d;for(d in o)if(o.hasOwnProperty(d)){var S=o[d];if(S!=null)switch(d){case"src":s=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Q2(e,r,d,S,o,null)}}c&&Q2(e,r,"srcSet",o.srcSet,o,null),s&&Q2(e,r,"src",o.src,o,null);return;case"input":j2("invalid",e);var b=d=S=c=null,_=null,W=null;for(s in o)if(o.hasOwnProperty(s)){var J=o[s];if(J!=null)switch(s){case"name":c=J;break;case"type":S=J;break;case"checked":_=J;break;case"defaultChecked":W=J;break;case"value":d=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(a(137,r));break;default:Q2(e,r,s,J,o,null)}}Df(e,d,b,_,W,S,c,!1),Fi(e);return;case"select":j2("invalid",e),s=S=d=null;for(c in o)if(o.hasOwnProperty(c)&&(b=o[c],b!=null))switch(c){case"value":d=b;break;case"defaultValue":S=b;break;case"multiple":s=b;default:Q2(e,r,c,b,o,null)}r=d,o=S,e.multiple=!!s,r!=null?zr(e,!!s,r,!1):o!=null&&zr(e,!!s,o,!0);return;case"textarea":j2("invalid",e),d=c=s=null;for(S in o)if(o.hasOwnProperty(S)&&(b=o[S],b!=null))switch(S){case"value":s=b;break;case"defaultValue":c=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(a(91));break;default:Q2(e,r,S,b,o,null)}xf(e,s,c,d),Fi(e);return;case"option":for(_ in o)if(o.hasOwnProperty(_)&&(s=o[_],s!=null))switch(_){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Q2(e,r,_,s,o,null)}return;case"dialog":j2("beforetoggle",e),j2("toggle",e),j2("cancel",e),j2("close",e);break;case"iframe":case"object":j2("load",e);break;case"video":case"audio":for(s=0;s<No.length;s++)j2(No[s],e);break;case"image":j2("error",e),j2("load",e);break;case"details":j2("toggle",e);break;case"embed":case"source":case"link":j2("error",e),j2("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in o)if(o.hasOwnProperty(W)&&(s=o[W],s!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Q2(e,r,W,s,o,null)}return;default:if(Ys(r)){for(J in o)o.hasOwnProperty(J)&&(s=o[J],s!==void 0&&MA(e,r,J,s,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(s=o[b],s!=null&&Q2(e,r,b,s,o,null))}function Ex(e,r,o,s){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,S=null,b=null,_=null,W=null,J=null;for(Y in o){var n2=o[Y];if(o.hasOwnProperty(Y)&&n2!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":_=n2;default:s.hasOwnProperty(Y)||Q2(e,r,Y,null,s,n2)}}for(var G in s){var Y=s[G];if(n2=o[G],s.hasOwnProperty(G)&&(Y!=null||n2!=null))switch(G){case"type":d=Y;break;case"name":c=Y;break;case"checked":W=Y;break;case"defaultChecked":J=Y;break;case"value":S=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,r));break;default:Y!==n2&&Q2(e,r,G,Y,s,n2)}}Gs(e,S,b,_,W,J,d,c);return;case"select":Y=S=b=G=null;for(d in o)if(_=o[d],o.hasOwnProperty(d)&&_!=null)switch(d){case"value":break;case"multiple":Y=_;default:s.hasOwnProperty(d)||Q2(e,r,d,null,s,_)}for(c in s)if(d=s[c],_=o[c],s.hasOwnProperty(c)&&(d!=null||_!=null))switch(c){case"value":G=d;break;case"defaultValue":b=d;break;case"multiple":S=d;default:d!==_&&Q2(e,r,c,d,s,_)}r=b,o=S,s=Y,G!=null?zr(e,!!o,G,!1):!!s!=!!o&&(r!=null?zr(e,!!o,r,!0):zr(e,!!o,o?[]:"",!1));return;case"textarea":Y=G=null;for(b in o)if(c=o[b],o.hasOwnProperty(b)&&c!=null&&!s.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Q2(e,r,b,null,s,c)}for(S in s)if(c=s[S],d=o[S],s.hasOwnProperty(S)&&(c!=null||d!=null))switch(S){case"value":G=c;break;case"defaultValue":Y=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==d&&Q2(e,r,S,c,s,d)}vf(e,G,Y);return;case"option":for(var b2 in o)if(G=o[b2],o.hasOwnProperty(b2)&&G!=null&&!s.hasOwnProperty(b2))switch(b2){case"selected":e.selected=!1;break;default:Q2(e,r,b2,null,s,G)}for(_ in s)if(G=s[_],Y=o[_],s.hasOwnProperty(_)&&G!==Y&&(G!=null||Y!=null))switch(_){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Q2(e,r,_,G,s,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var F2 in o)G=o[F2],o.hasOwnProperty(F2)&&G!=null&&!s.hasOwnProperty(F2)&&Q2(e,r,F2,null,s,G);for(W in s)if(G=s[W],Y=o[W],s.hasOwnProperty(W)&&G!==Y&&(G!=null||Y!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(a(137,r));break;default:Q2(e,r,W,G,s,Y)}return;default:if(Ys(r)){for(var J2 in o)G=o[J2],o.hasOwnProperty(J2)&&G!==void 0&&!s.hasOwnProperty(J2)&&MA(e,r,J2,void 0,s,G);for(J in s)G=s[J],Y=o[J],!s.hasOwnProperty(J)||G===Y||G===void 0&&Y===void 0||MA(e,r,J,G,s,Y);return}}for(var O in o)G=o[O],o.hasOwnProperty(O)&&G!=null&&!s.hasOwnProperty(O)&&Q2(e,r,O,null,s,G);for(n2 in s)G=s[n2],Y=o[n2],!s.hasOwnProperty(n2)||G===Y||G==null&&Y==null||Q2(e,r,n2,G,s,Y)}var PA=null,NA=null;function va(e){return e.nodeType===9?e:e.ownerDocument}function yC(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function BC(e,r){if(e===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&r==="foreignObject"?0:e}function _A(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var LA=null;function Mx(){var e=window.event;return e&&e.type==="popstate"?e===LA?!1:(LA=e,!0):(LA=null,!1)}var SC=typeof setTimeout=="function"?setTimeout:void 0,Px=typeof clearTimeout=="function"?clearTimeout:void 0,FC=typeof Promise=="function"?Promise:void 0,Nx=typeof queueMicrotask=="function"?queueMicrotask:typeof FC<"u"?function(e){return FC.resolve(null).then(e).catch(_x)}:SC;function _x(e){setTimeout(function(){throw e})}function Wt(e){return e==="head"}function TC(e,r){var o=r,s=0,c=0;do{var d=o.nextSibling;if(e.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(0<s&&8>s){o=s;var S=e.ownerDocument;if(o&1&&Lo(S.documentElement),o&2&&Lo(S.body),o&4)for(o=S.head,Lo(o),S=o.firstChild;S;){var b=S.nextSibling,_=S.nodeName;S[R2]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&S.rel.toLowerCase()==="stylesheet"||o.removeChild(S),S=b}}if(c===0){e.removeChild(d),zo(r);return}c--}else o==="$"||o==="$?"||o==="$!"?c++:s=o.charCodeAt(0)-48;else s=0;o=d}while(o);zo(r)}function kA(e){var r=e.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":kA(o),h2(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function Lx(e,r,o,s){for(;e.nodeType===1;){var c=o;if(e.nodeName.toLowerCase()!==r.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[R2])switch(r){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(r==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=_e(e.nextSibling),e===null)break}return null}function kx(e,r,o){if(r==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=_e(e.nextSibling),e===null))return null;return e}function IA(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Ix(e,r){var o=e.ownerDocument;if(e.data!=="$?"||o.readyState==="complete")r();else{var s=function(){r(),o.removeEventListener("DOMContentLoaded",s)};o.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function _e(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return e}var qA=null;function RC(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return e;r--}else o==="/$"&&r++}e=e.previousSibling}return null}function bC(e,r,o){switch(r=va(o),e){case"html":if(e=r.documentElement,!e)throw Error(a(452));return e;case"head":if(e=r.head,!e)throw Error(a(453));return e;case"body":if(e=r.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function Lo(e){for(var r=e.attributes;r.length;)e.removeAttributeNode(r[0]);h2(e)}var De=new Map,wC=new Set;function xa(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var gt=V.d;V.d={f:qx,r:Ox,D:jx,C:Hx,L:Ux,m:zx,X:Gx,S:Wx,M:Vx};function qx(){var e=gt.f(),r=fa();return e||r}function Ox(e){var r=W2(e);r!==null&&r.tag===5&&r.type==="form"?Kd(r):gt.r(e)}var vn=typeof document>"u"?null:document;function EC(e,r,o){var s=vn;if(s&&typeof r=="string"&&r){var c=fe(r);c='link[rel="'+e+'"][href="'+c+'"]',typeof o=="string"&&(c+='[crossorigin="'+o+'"]'),wC.has(c)||(wC.add(c),e={rel:e,crossOrigin:o,href:r},s.querySelector(c)===null&&(r=s.createElement("link"),M0(r,"link",e),V2(r),s.head.appendChild(r)))}}function jx(e){gt.D(e),EC("dns-prefetch",e,null)}function Hx(e,r){gt.C(e,r),EC("preconnect",e,r)}function Ux(e,r,o){gt.L(e,r,o);var s=vn;if(s&&e&&r){var c='link[rel="preload"][as="'+fe(r)+'"]';r==="image"&&o&&o.imageSrcSet?(c+='[imagesrcset="'+fe(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(c+='[imagesizes="'+fe(o.imageSizes)+'"]')):c+='[href="'+fe(e)+'"]';var d=c;switch(r){case"style":d=xn(e);break;case"script":d=yn(e)}De.has(d)||(e=h({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:e,as:r},o),De.set(d,e),s.querySelector(c)!==null||r==="style"&&s.querySelector(ko(d))||r==="script"&&s.querySelector(Io(d))||(r=s.createElement("link"),M0(r,"link",e),V2(r),s.head.appendChild(r)))}}function zx(e,r){gt.m(e,r);var o=vn;if(o&&e){var s=r&&typeof r.as=="string"?r.as:"script",c='link[rel="modulepreload"][as="'+fe(s)+'"][href="'+fe(e)+'"]',d=c;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=yn(e)}if(!De.has(d)&&(e=h({rel:"modulepreload",href:e},r),De.set(d,e),o.querySelector(c)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Io(d)))return}s=o.createElement("link"),M0(s,"link",e),V2(s),o.head.appendChild(s)}}}function Wx(e,r,o){gt.S(e,r,o);var s=vn;if(s&&e){var c=c0(s).hoistableStyles,d=xn(e);r=r||"default";var S=c.get(d);if(!S){var b={loading:0,preload:null};if(S=s.querySelector(ko(d)))b.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":r},o),(o=De.get(d))&&OA(e,o);var _=S=s.createElement("link");V2(_),M0(_,"link",e),_._p=new Promise(function(W,J){_.onload=W,_.onerror=J}),_.addEventListener("load",function(){b.loading|=1}),_.addEventListener("error",function(){b.loading|=2}),b.loading|=4,ya(S,r,s)}S={type:"stylesheet",instance:S,count:1,state:b},c.set(d,S)}}}function Gx(e,r){gt.X(e,r);var o=vn;if(o&&e){var s=c0(o).hoistableScripts,c=yn(e),d=s.get(c);d||(d=o.querySelector(Io(c)),d||(e=h({src:e,async:!0},r),(r=De.get(c))&&jA(e,r),d=o.createElement("script"),V2(d),M0(d,"link",e),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(c,d))}}function Vx(e,r){gt.M(e,r);var o=vn;if(o&&e){var s=c0(o).hoistableScripts,c=yn(e),d=s.get(c);d||(d=o.querySelector(Io(c)),d||(e=h({src:e,async:!0,type:"module"},r),(r=De.get(c))&&jA(e,r),d=o.createElement("script"),V2(d),M0(d,"link",e),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(c,d))}}function MC(e,r,o,s){var c=(c=p2.current)?xa(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=xn(o.href),o=c0(c).hoistableStyles,s=o.get(r),s||(s={type:"style",instance:null,count:0,state:null},o.set(r,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=xn(o.href);var d=c0(c).hoistableStyles,S=d.get(e);if(S||(c=c.ownerDocument||c,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,S),(d=c.querySelector(ko(e)))&&!d._p&&(S.instance=d,S.state.loading=5),De.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},De.set(e,o),d||Yx(c,e,o,S.state))),r&&s===null)throw Error(a(528,""));return S}if(r&&s!==null)throw Error(a(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=yn(o),o=c0(c).hoistableScripts,s=o.get(r),s||(s={type:"script",instance:null,count:0,state:null},o.set(r,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function xn(e){return'href="'+fe(e)+'"'}function ko(e){return'link[rel="stylesheet"]['+e+"]"}function PC(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Yx(e,r,o,s){e.querySelector('link[rel="preload"][as="style"]['+r+"]")?s.loading=1:(r=e.createElement("link"),s.preload=r,r.addEventListener("load",function(){return s.loading|=1}),r.addEventListener("error",function(){return s.loading|=2}),M0(r,"link",o),V2(r),e.head.appendChild(r))}function yn(e){return'[src="'+fe(e)+'"]'}function Io(e){return"script[async]"+e}function NC(e,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var s=e.querySelector('style[data-href~="'+fe(o.href)+'"]');if(s)return r.instance=s,V2(s),s;var c=h({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),V2(s),M0(s,"style",c),ya(s,o.precedence,e),r.instance=s;case"stylesheet":c=xn(o.href);var d=e.querySelector(ko(c));if(d)return r.state.loading|=4,r.instance=d,V2(d),d;s=PC(o),(c=De.get(c))&&OA(s,c),d=(e.ownerDocument||e).createElement("link"),V2(d);var S=d;return S._p=new Promise(function(b,_){S.onload=b,S.onerror=_}),M0(d,"link",s),r.state.loading|=4,ya(d,o.precedence,e),r.instance=d;case"script":return d=yn(o.src),(c=e.querySelector(Io(d)))?(r.instance=c,V2(c),c):(s=o,(c=De.get(d))&&(s=h({},o),jA(s,c)),e=e.ownerDocument||e,c=e.createElement("script"),V2(c),M0(c,"link",s),e.head.appendChild(c),r.instance=c);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(s=r.instance,r.state.loading|=4,ya(s,o.precedence,e));return r.instance}function ya(e,r,o){for(var s=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=s.length?s[s.length-1]:null,d=c,S=0;S<s.length;S++){var b=s[S];if(b.dataset.precedence===r)d=b;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(e,r.firstChild))}function OA(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.title==null&&(e.title=r.title)}function jA(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.integrity==null&&(e.integrity=r.integrity)}var Ba=null;function _C(e,r,o){if(Ba===null){var s=new Map,c=Ba=new Map;c.set(o,s)}else c=Ba,s=c.get(o),s||(s=new Map,c.set(o,s));if(s.has(e))return s;for(s.set(e,null),o=o.getElementsByTagName(e),c=0;c<o.length;c++){var d=o[c];if(!(d[R2]||d[a2]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var S=d.getAttribute(r)||"";S=e+S;var b=s.get(S);b?b.push(d):s.set(S,[d])}}return s}function LC(e,r,o){e=e.ownerDocument||e,e.head.insertBefore(o,r==="title"?e.querySelector("head > title"):null)}function $x(e,r,o){if(o===1||r.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return e=r.disabled,typeof r.precedence=="string"&&e==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function kC(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var qo=null;function Kx(){}function Zx(e,r,o){if(qo===null)throw Error(a(475));var s=qo;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var c=xn(o.href),d=e.querySelector(ko(c));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=Sa.bind(s),e.then(s,s)),r.state.loading|=4,r.instance=d,V2(d);return}d=e.ownerDocument||e,o=PC(o),(c=De.get(c))&&OA(o,c),d=d.createElement("link"),V2(d);var S=d;S._p=new Promise(function(b,_){S.onload=b,S.onerror=_}),M0(d,"link",o),r.instance=d}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(r,e),(e=r.state.preload)&&(r.state.loading&3)===0&&(s.count++,r=Sa.bind(s),e.addEventListener("load",r),e.addEventListener("error",r))}}function Xx(){if(qo===null)throw Error(a(475));var e=qo;return e.stylesheets&&e.count===0&&HA(e,e.stylesheets),0<e.count?function(r){var o=setTimeout(function(){if(e.stylesheets&&HA(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(o)}}:null}function Sa(){if(this.count--,this.count===0){if(this.stylesheets)HA(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fa=null;function HA(e,r){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fa=new Map,r.forEach(Qx,e),Fa=null,Sa.call(e))}function Qx(e,r){if(!(r.state.loading&4)){var o=Fa.get(e);if(o)var s=o.get(null);else{o=new Map,Fa.set(e,o);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var S=c[d];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),s=S)}s&&o.set(null,s)}c=r.instance,S=c.getAttribute("data-precedence"),d=o.get(S)||s,d===s&&o.set(null,c),o.set(S,c),this.count++,s=Sa.bind(this),c.addEventListener("load",s),c.addEventListener("error",s),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),r.state.loading|=4}}var Oo={$$typeof:R,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function Jx(e,r,o,s,c,d,S,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function IC(e,r,o,s,c,d,S,b,_,W,J,n2){return e=new Jx(e,r,o,S,b,_,W,n2),r=1,d===!0&&(r|=24),d=J0(3,null,null,r),e.current=d,d.stateNode=e,r=yl(),r.refCount++,e.pooledCache=r,r.refCount++,d.memoizedState={element:s,isDehydrated:o,cache:r},Tl(d),e}function qC(e){return e?(e=Qr,e):Qr}function OC(e,r,o,s,c,d){c=qC(c),s.context===null?s.context=c:s.pendingContext=c,s=Mt(r),s.payload={element:o},d=d===void 0?null:d,d!==null&&(s.callback=d),o=Pt(e,s,r),o!==null&&(oe(o,e,r),Co(o,e,r))}function jC(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<r?o:r}}function UA(e,r){jC(e,r),(e=e.alternate)&&jC(e,r)}function HC(e){if(e.tag===13){var r=Xr(e,67108864);r!==null&&oe(r,e,67108864),UA(e,67108864)}}var Ta=!0;function ey(e,r,o,s){var c=I.T;I.T=null;var d=V.p;try{V.p=2,zA(e,r,o,s)}finally{V.p=d,I.T=c}}function ty(e,r,o,s){var c=I.T;I.T=null;var d=V.p;try{V.p=8,zA(e,r,o,s)}finally{V.p=d,I.T=c}}function zA(e,r,o,s){if(Ta){var c=WA(s);if(c===null)EA(e,r,s,Ra,o),zC(e,s);else if(ny(c,e,r,o,s))s.stopPropagation();else if(zC(e,s),r&4&&-1<ry.indexOf(e)){for(;c!==null;){var d=W2(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var S=rt(d.pendingLanes);if(S!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;S;){var _=1<<31-b0(S);b.entanglements[1]|=_,S&=~_}Ye(d),(K2&6)===0&&(ca=O0()+500,Po(0))}}break;case 13:b=Xr(d,2),b!==null&&oe(b,d,2),fa(),UA(d,2)}if(d=WA(s),d===null&&EA(e,r,s,Ra,o),d===c)break;c=d}c!==null&&s.stopPropagation()}else EA(e,r,s,null,o)}}function WA(e){return e=Ks(e),GA(e)}var Ra=null;function GA(e){if(Ra=null,e=w2(e),e!==null){var r=A(e);if(r===null)e=null;else{var o=r.tag;if(o===13){if(e=u(r),e!==null)return e;e=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null)}}return Ra=e,null}function UC(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gn()){case et:return 2;case Di:return 8;case jr:case tt:return 32;case Bt:return 268435456;default:return 32}default:return 32}}var VA=!1,Gt=null,Vt=null,Yt=null,jo=new Map,Ho=new Map,$t=[],ry="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zC(e,r){switch(e){case"focusin":case"focusout":Gt=null;break;case"dragenter":case"dragleave":Vt=null;break;case"mouseover":case"mouseout":Yt=null;break;case"pointerover":case"pointerout":jo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(r.pointerId)}}function Uo(e,r,o,s,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:r,domEventName:o,eventSystemFlags:s,nativeEvent:d,targetContainers:[c]},r!==null&&(r=W2(r),r!==null&&HC(r)),e):(e.eventSystemFlags|=s,r=e.targetContainers,c!==null&&r.indexOf(c)===-1&&r.push(c),e)}function ny(e,r,o,s,c){switch(r){case"focusin":return Gt=Uo(Gt,e,r,o,s,c),!0;case"dragenter":return Vt=Uo(Vt,e,r,o,s,c),!0;case"mouseover":return Yt=Uo(Yt,e,r,o,s,c),!0;case"pointerover":var d=c.pointerId;return jo.set(d,Uo(jo.get(d)||null,e,r,o,s,c)),!0;case"gotpointercapture":return d=c.pointerId,Ho.set(d,Uo(Ho.get(d)||null,e,r,o,s,c)),!0}return!1}function WC(e){var r=w2(e.target);if(r!==null){var o=A(r);if(o!==null){if(r=o.tag,r===13){if(r=u(o),r!==null){e.blockedOn=r,H(e.priority,function(){if(o.tag===13){var s=ne();s=Yn(s);var c=Xr(o,s);c!==null&&oe(c,o,s),UA(o,s)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ba(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var o=WA(e.nativeEvent);if(o===null){o=e.nativeEvent;var s=new o.constructor(o.type,o);$s=s,o.target.dispatchEvent(s),$s=null}else return r=W2(o),r!==null&&HC(r),e.blockedOn=o,!1;r.shift()}return!0}function GC(e,r,o){ba(e)&&o.delete(r)}function oy(){VA=!1,Gt!==null&&ba(Gt)&&(Gt=null),Vt!==null&&ba(Vt)&&(Vt=null),Yt!==null&&ba(Yt)&&(Yt=null),jo.forEach(GC),Ho.forEach(GC)}function wa(e,r){e.blockedOn===r&&(e.blockedOn=null,VA||(VA=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oy)))}var Ea=null;function VC(e){Ea!==e&&(Ea=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ea===e&&(Ea=null);for(var r=0;r<e.length;r+=3){var o=e[r],s=e[r+1],c=e[r+2];if(typeof s!="function"){if(GA(s||o)===null)continue;break}var d=W2(o);d!==null&&(e.splice(r,3),r-=3,Gl(d,{pending:!0,data:c,method:o.method,action:s},s,c))}}))}function zo(e){function r(_){return wa(_,e)}Gt!==null&&wa(Gt,e),Vt!==null&&wa(Vt,e),Yt!==null&&wa(Yt,e),jo.forEach(r),Ho.forEach(r);for(var o=0;o<$t.length;o++){var s=$t[o];s.blockedOn===e&&(s.blockedOn=null)}for(;0<$t.length&&(o=$t[0],o.blockedOn===null);)WC(o),o.blockedOn===null&&$t.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(s=0;s<o.length;s+=3){var c=o[s],d=o[s+1],S=c[A2]||null;if(typeof d=="function")S||VC(o);else if(S){var b=null;if(d&&d.hasAttribute("formAction")){if(c=d,S=d[A2]||null)b=S.formAction;else if(GA(c)!==null)continue}else b=S.action;typeof b=="function"?o[s+1]=b:(o.splice(s,3),s-=3),VC(o)}}}function YA(e){this._internalRoot=e}Ma.prototype.render=YA.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(a(409));var o=r.current,s=ne();OC(o,s,e,r,null,null)},Ma.prototype.unmount=YA.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;OC(e.current,2,null,e,null,null),fa(),r[g2]=null}};function Ma(e){this._internalRoot=e}Ma.prototype.unstable_scheduleHydration=function(e){if(e){var r=L();e={blockedOn:null,target:e,priority:r};for(var o=0;o<$t.length&&r!==0&&r<$t[o].priority;o++);$t.splice(o,0,e),o===0&&WC(e)}};var YC=n.version;if(YC!=="19.1.0")throw Error(a(527,YC,"19.1.0"));V.findDOMNode=function(e){var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=C(r),e=e!==null?m(e):null,e=e===null?null:e.stateNode,e};var iy={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pa.isDisabled&&Pa.supportsFiber)try{G0=Pa.inject(iy),A0=Pa}catch{}}return Go.createRoot=function(e,r){if(!l(e))throw Error(a(299));var o=!1,s="",c=Am,d=cm,S=um,b=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onUncaughtError!==void 0&&(c=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(b=r.unstable_transitionCallbacks)),r=IC(e,1,!1,null,null,o,s,c,d,S,b,null),e[g2]=r.current,wA(e),new YA(r)},Go.hydrateRoot=function(e,r,o){if(!l(e))throw Error(a(299));var s=!1,c="",d=Am,S=cm,b=um,_=null,W=null;return o!=null&&(o.unstable_strictMode===!0&&(s=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(d=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(_=o.unstable_transitionCallbacks),o.formState!==void 0&&(W=o.formState)),r=IC(e,1,!0,r,o??null,s,c,d,S,b,_,W),r.context=qC(null),o=r.current,s=ne(),s=Yn(s),c=Mt(s),c.callback=null,Pt(o,c,s),o=s,r.current.lanes=o,lr(r,o),Ye(r),e[g2]=r.current,wA(e),new Ma(r)},Go.version="19.1.0",Go}var np;function py(){if(np)return KA.exports;np=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),KA.exports=Cy(),KA.exports}var gy=py(),D=fu();const n0=Ds(D),vs=I3({__proto__:null,default:n0},[D]);var Vo={},op;function hy(){if(op)return Vo;op=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.parse=u,Vo.serialize=m;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,A=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function u(v,x){const y=new A,B=v.length;if(B<2)return y;const F=(x==null?void 0:x.decode)||h;let T=0;do{const w=v.indexOf("=",T);if(w===-1)break;const R=v.indexOf(";",T),M=R===-1?B:R;if(w>M){T=v.lastIndexOf(";",w-1)+1;continue}const N=f(v,T,w),E=C(v,w,N),k=v.slice(N,E);if(y[k]===void 0){let j=f(v,w+1,M),z=C(v,M,j);const r2=F(v.slice(j,z));y[k]=r2}T=M+1}while(T<B);return y}function f(v,x,y){do{const B=v.charCodeAt(x);if(B!==32&&B!==9)return x}while(++x<y);return y}function C(v,x,y){for(;x>y;){const B=v.charCodeAt(--x);if(B!==32&&B!==9)return x+1}return y}function m(v,x,y){const B=(y==null?void 0:y.encode)||encodeURIComponent;if(!t.test(v))throw new TypeError(`argument name is invalid: ${v}`);const F=B(x);if(!n.test(F))throw new TypeError(`argument val is invalid: ${x}`);let T=v+"="+F;if(!y)return T;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);T+="; Max-Age="+y.maxAge}if(y.domain){if(!i.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);T+="; Domain="+y.domain}if(y.path){if(!a.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);T+="; Path="+y.path}if(y.expires){if(!p(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);T+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(T+="; HttpOnly"),y.secure&&(T+="; Secure"),y.partitioned&&(T+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":T+="; Priority=Low";break;case"medium":T+="; Priority=Medium";break;case"high":T+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":T+="; SameSite=Strict";break;case"lax":T+="; SameSite=Lax";break;case"none":T+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return T}function h(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function p(v){return l.call(v)==="[object Date]"}return Vo}hy();/**
 * react-router v7.6.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var O3=t=>{throw TypeError(t)},Dy=(t,n,i)=>n.has(t)||O3("Cannot "+i),ec=(t,n,i)=>(Dy(t,n,"read from private field"),i?i.call(t):n.get(t)),vy=(t,n,i)=>n.has(t)?O3("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,i),ip="popstate";function xy(t={}){function n(a,l){let{pathname:A,search:u,hash:f}=a.location;return ri("",{pathname:A,search:u,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function i(a,l){return typeof l=="string"?l:Qt(l)}return By(n,i,null,t)}function k2(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function D0(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function yy(){return Math.random().toString(36).substring(2,10)}function ap(t,n){return{usr:t.state,key:t.key,idx:n}}function ri(t,n,i=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof n=="string"?tr(n):n,state:i,key:n&&n.key||a||yy()}}function Qt({pathname:t="/",search:n="",hash:i=""}){return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function tr(t){let n={};if(t){let i=t.indexOf("#");i>=0&&(n.hash=t.substring(i),t=t.substring(0,i));let a=t.indexOf("?");a>=0&&(n.search=t.substring(a),t=t.substring(0,a)),t&&(n.pathname=t)}return n}function By(t,n,i,a={}){let{window:l=document.defaultView,v5Compat:A=!1}=a,u=l.history,f="POP",C=null,m=h();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function h(){return(u.state||{idx:null}).idx}function p(){f="POP";let F=h(),T=F==null?null:F-m;m=F,C&&C({action:f,location:B.location,delta:T})}function v(F,T){f="PUSH";let w=ri(B.location,F,T);m=h()+1;let R=ap(w,m),M=B.createHref(w);try{u.pushState(R,"",M)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;l.location.assign(M)}A&&C&&C({action:f,location:B.location,delta:1})}function x(F,T){f="REPLACE";let w=ri(B.location,F,T);m=h();let R=ap(w,m),M=B.createHref(w);u.replaceState(R,"",M),A&&C&&C({action:f,location:B.location,delta:0})}function y(F){return j3(F)}let B={get action(){return f},get location(){return t(l,u)},listen(F){if(C)throw new Error("A history only accepts one active listener");return l.addEventListener(ip,p),C=F,()=>{l.removeEventListener(ip,p),C=null}},createHref(F){return n(l,F)},createURL:y,encodeLocation(F){let T=y(F);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:v,replace:x,go(F){return u.go(F)}};return B}function j3(t,n=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),k2(i,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:Qt(t);return a=a.replace(/ $/,"%20"),!n&&a.startsWith("//")&&(a=i+a),new URL(a,i)}var Xo,sp=class{constructor(t){if(vy(this,Xo,new Map),t)for(let[n,i]of t)this.set(n,i)}get(t){if(ec(this,Xo).has(t))return ec(this,Xo).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,n){ec(this,Xo).set(t,n)}};Xo=new WeakMap;var Sy=new Set(["lazy","caseSensitive","path","id","index","children"]);function Fy(t){return Sy.has(t)}var Ty=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function Ry(t){return Ty.has(t)}function by(t){return t.index===!0}function os(t,n,i=[],a={}){return t.map((l,A)=>{let u=[...i,String(A)],f=typeof l.id=="string"?l.id:u.join("-");if(k2(l.index!==!0||!l.children,"Cannot specify children on an index route"),k2(!a[f],`Found a route id collision on id "${f}".  Route id's must be globally unique within Data Router usages`),by(l)){let C={...l,...n(l),id:f};return a[f]=C,C}else{let C={...l,...n(l),id:f,children:void 0};return a[f]=C,l.children&&(C.children=os(l.children,n,u,a)),C}})}function ht(t,n,i="/"){return Ka(t,n,i,!1)}function Ka(t,n,i,a){let l=typeof n=="string"?tr(n):n,A=Ae(l.pathname||"/",i);if(A==null)return null;let u=U3(t);wy(u);let f=null;for(let C=0;f==null&&C<u.length;++C){let m=W3(A);f=qy(u[C],m,a)}return f}function H3(t,n){let{route:i,pathname:a,params:l}=t;return{id:i.id,pathname:a,params:l,data:n[i.id],handle:i.handle}}function U3(t,n=[],i=[],a=""){let l=(A,u,f)=>{let C={relativePath:f===void 0?A.path||"":f,caseSensitive:A.caseSensitive===!0,childrenIndex:u,route:A};C.relativePath.startsWith("/")&&(k2(C.relativePath.startsWith(a),`Absolute route path "${C.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(a.length));let m=Ke([a,C.relativePath]),h=i.concat(C);A.children&&A.children.length>0&&(k2(A.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),U3(A.children,n,h,m)),!(A.path==null&&!A.index)&&n.push({path:m,score:ky(m,A.index),routesMeta:h})};return t.forEach((A,u)=>{var f;if(A.path===""||!((f=A.path)!=null&&f.includes("?")))l(A,u);else for(let C of z3(A.path))l(A,u,C)}),n}function z3(t){let n=t.split("/");if(n.length===0)return[];let[i,...a]=n,l=i.endsWith("?"),A=i.replace(/\?$/,"");if(a.length===0)return l?[A,""]:[A];let u=z3(a.join("/")),f=[];return f.push(...u.map(C=>C===""?A:[A,C].join("/"))),l&&f.push(...u),f.map(C=>t.startsWith("/")&&C===""?"/":C)}function wy(t){t.sort((n,i)=>n.score!==i.score?i.score-n.score:Iy(n.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var Ey=/^:[\w-]+$/,My=3,Py=2,Ny=1,_y=10,Ly=-2,lp=t=>t==="*";function ky(t,n){let i=t.split("/"),a=i.length;return i.some(lp)&&(a+=Ly),n&&(a+=Py),i.filter(l=>!lp(l)).reduce((l,A)=>l+(Ey.test(A)?My:A===""?Ny:_y),a)}function Iy(t,n){return t.length===n.length&&t.slice(0,-1).every((a,l)=>a===n[l])?t[t.length-1]-n[n.length-1]:0}function qy(t,n,i=!1){let{routesMeta:a}=t,l={},A="/",u=[];for(let f=0;f<a.length;++f){let C=a[f],m=f===a.length-1,h=A==="/"?n:n.slice(A.length)||"/",p=Er({path:C.relativePath,caseSensitive:C.caseSensitive,end:m},h),v=C.route;if(!p&&m&&i&&!a[a.length-1].route.index&&(p=Er({path:C.relativePath,caseSensitive:C.caseSensitive,end:!1},h)),!p)return null;Object.assign(l,p.params),u.push({params:l,pathname:Ke([A,p.pathname]),pathnameBase:Uy(Ke([A,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(A=Ke([A,p.pathnameBase]))}return u}function Er(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,a]=Oy(t.path,t.caseSensitive,t.end),l=n.match(i);if(!l)return null;let A=l[0],u=A.replace(/(.)\/+$/,"$1"),f=l.slice(1);return{params:a.reduce((m,{paramName:h,isOptional:p},v)=>{if(h==="*"){let y=f[v]||"";u=A.slice(0,A.length-y.length).replace(/(.)\/+$/,"$1")}const x=f[v];return p&&!x?m[h]=void 0:m[h]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:A,pathnameBase:u,pattern:t}}function Oy(t,n=!1,i=!0){D0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,C)=>(a.push({paramName:f,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),a]}function W3(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return D0(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),t}}function Ae(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,a=t.charAt(i);return a&&a!=="/"?null:t.slice(i)||"/"}function jy(t,n="/"){let{pathname:i,search:a="",hash:l=""}=typeof t=="string"?tr(t):t;return{pathname:i?i.startsWith("/")?i:Hy(i,n):n,search:zy(a),hash:Wy(l)}}function Hy(t,n){let i=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?i.length>1&&i.pop():l!=="."&&i.push(l)}),i.length>1?i.join("/"):"/"}function tc(t,n,i,a){return`Cannot include a '${t}' character in a manually specified \`to.${n}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function G3(t){return t.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function du(t){let n=G3(t);return n.map((i,a)=>a===n.length-1?i.pathname:i.pathnameBase)}function mu(t,n,i,a=!1){let l;typeof t=="string"?l=tr(t):(l={...t},k2(!l.pathname||!l.pathname.includes("?"),tc("?","pathname","search",l)),k2(!l.pathname||!l.pathname.includes("#"),tc("#","pathname","hash",l)),k2(!l.search||!l.search.includes("#"),tc("#","search","hash",l)));let A=t===""||l.pathname==="",u=A?"/":l.pathname,f;if(u==null)f=i;else{let p=n.length-1;if(!a&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),p-=1;l.pathname=v.join("/")}f=p>=0?n[p]:"/"}let C=jy(l,f),m=u&&u!=="/"&&u.endsWith("/"),h=(A||u===".")&&i.endsWith("/");return!C.pathname.endsWith("/")&&(m||h)&&(C.pathname+="/"),C}var Ke=t=>t.join("/").replace(/\/\/+/g,"/"),Uy=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zy=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Wy=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,is=class{constructor(t,n,i,a=!1){this.status=t,this.statusText=n||"",this.internal=a,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function ni(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var V3=["POST","PUT","PATCH","DELETE"],Gy=new Set(V3),Vy=["GET",...V3],Yy=new Set(Vy),$y=new Set([301,302,303,307,308]),Ky=new Set([307,308]),rc={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Zy={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Yo={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Cu=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xy=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Y3="remix-router-transitions",$3=Symbol("ResetLoaderData");function Qy(t){const n=t.window?t.window:typeof window<"u"?window:void 0,i=typeof n<"u"&&typeof n.document<"u"&&typeof n.document.createElement<"u";k2(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=t.hydrationRouteProperties||[],l=t.mapRouteProperties||Xy,A={},u=os(t.routes,l,void 0,A),f,C=t.basename||"/",m=t.dataStrategy||nB,h={unstable_middleware:!1,...t.future},p=null,v=new Set,x=null,y=null,B=null,F=t.hydrationData!=null,T=ht(u,t.history.location,C),w=!1,R=null,M;if(T==null&&!t.patchRoutesOnNavigation){let L=ve(404,{pathname:t.history.location.pathname}),{matches:H,route:$}=vp(u);M=!0,T=H,R={[$.id]:L}}else if(T&&!t.hydrationData&&Ar(T,u,t.history.location.pathname).active&&(T=null),T)if(T.some(L=>L.route.lazy))M=!1;else if(!T.some(L=>L.route.loader))M=!0;else{let L=t.hydrationData?t.hydrationData.loaderData:null,H=t.hydrationData?t.hydrationData.errors:null;if(H){let $=T.findIndex(a2=>H[a2.route.id]!==void 0);M=T.slice(0,$+1).every(a2=>!_c(a2.route,L,H))}else M=T.every($=>!_c($.route,L,H))}else{M=!1,T=[];let L=Ar(null,u,t.history.location.pathname);L.active&&L.matches&&(w=!0,T=L.matches)}let N,E={historyAction:t.history.action,location:t.history.location,matches:T,initialized:M,navigation:rc,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||R,fetchers:new Map,blockers:new Map},k="POP",j=!1,z,r2=!1,c2=new Map,s2=null,i2=!1,Z=!1,u2=new Set,I=new Map,V=0,Q=-1,K=new Map,P=new Set,X=new Map,e2=new Map,o2=new Set,f2=new Map,B2,p2=null;function G2(){if(p=t.history.listen(({action:L,location:H,delta:$})=>{if(B2){B2(),B2=void 0;return}D0(f2.size===0||$!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let a2=yi({currentLocation:E.location,nextLocation:H,historyAction:L});if(a2&&$!=null){let A2=new Promise(g2=>{B2=g2});t.history.go($*-1),Ue(a2,{state:"blocked",location:H,proceed(){Ue(a2,{state:"proceeding",proceed:void 0,reset:void 0,location:H}),A2.then(()=>t.history.go($))},reset(){let g2=new Map(E.blockers);g2.set(a2,Yo),z2({blockers:g2})}});return}return W0(L,H)}),i){mB(n,c2);let L=()=>CB(n,c2);n.addEventListener("pagehide",L),s2=()=>n.removeEventListener("pagehide",L)}return E.initialized||W0("POP",E.location,{initialHydration:!0}),N}function y2(){p&&p(),s2&&s2(),v.clear(),z&&z.abort(),E.fetchers.forEach((L,H)=>b0(H)),E.blockers.forEach((L,H)=>sr(H))}function N2(L){return v.add(L),()=>v.delete(L)}function z2(L,H={}){E={...E,...L};let $=[],a2=[];E.fetchers.forEach((A2,g2)=>{A2.state==="idle"&&(o2.has(g2)?$.push(g2):a2.push(g2))}),o2.forEach(A2=>{!E.fetchers.has(A2)&&!I.has(A2)&&$.push(A2)}),[...v].forEach(A2=>A2(E,{deletedFetchers:$,viewTransitionOpts:H.viewTransitionOpts,flushSync:H.flushSync===!0})),$.forEach(A2=>b0(A2)),a2.forEach(A2=>E.fetchers.delete(A2))}function f0(L,H,{flushSync:$}={}){var x2,R2;let a2=E.actionData!=null&&E.navigation.formMethod!=null&&ae(E.navigation.formMethod)&&E.navigation.state==="loading"&&((x2=L.state)==null?void 0:x2._isRedirect)!==!0,A2;H.actionData?Object.keys(H.actionData).length>0?A2=H.actionData:A2=null:a2?A2=E.actionData:A2=null;let g2=H.loaderData?hp(E.loaderData,H.loaderData,H.matches||[],H.errors):E.loaderData,S2=E.blockers;S2.size>0&&(S2=new Map(S2),S2.forEach((h2,w2)=>S2.set(w2,Yo)));let d2=j===!0||E.navigation.formMethod!=null&&ae(E.navigation.formMethod)&&((R2=L.state)==null?void 0:R2._isRedirect)!==!0;f&&(u=f,f=void 0),i2||k==="POP"||(k==="PUSH"?t.history.push(L,L.state):k==="REPLACE"&&t.history.replace(L,L.state));let v2;if(k==="POP"){let h2=c2.get(E.location.pathname);h2&&h2.has(L.pathname)?v2={currentLocation:E.location,nextLocation:L}:c2.has(L.pathname)&&(v2={currentLocation:L,nextLocation:E.location})}else if(r2){let h2=c2.get(E.location.pathname);h2?h2.add(L.pathname):(h2=new Set([L.pathname]),c2.set(E.location.pathname,h2)),v2={currentLocation:E.location,nextLocation:L}}z2({...H,actionData:A2,loaderData:g2,historyAction:k,location:L,initialized:!0,navigation:rc,revalidation:"idle",restoreScrollPosition:Si(L,H.matches||E.matches),preventScrollReset:d2,blockers:S2},{viewTransitionOpts:v2,flushSync:$===!0}),k="POP",j=!1,r2=!1,i2=!1,Z=!1,p2==null||p2.resolve(),p2=null}async function N0(L,H){if(typeof L=="number"){t.history.go(L);return}let $=Nc(E.location,E.matches,C,L,H==null?void 0:H.fromRouteId,H==null?void 0:H.relative),{path:a2,submission:A2,error:g2}=Ap(!1,$,H),S2=E.location,d2=ri(E.location,a2,H&&H.state);d2={...d2,...t.history.encodeLocation(d2)};let v2=H&&H.replace!=null?H.replace:void 0,x2="PUSH";v2===!0?x2="REPLACE":v2===!1||A2!=null&&ae(A2.formMethod)&&A2.formAction===E.location.pathname+E.location.search&&(x2="REPLACE");let R2=H&&"preventScrollReset"in H?H.preventScrollReset===!0:void 0,h2=(H&&H.flushSync)===!0,w2=yi({currentLocation:S2,nextLocation:d2,historyAction:x2});if(w2){Ue(w2,{state:"blocked",location:d2,proceed(){Ue(w2,{state:"proceeding",proceed:void 0,reset:void 0,location:d2}),N0(L,H)},reset(){let W2=new Map(E.blockers);W2.set(w2,Yo),z2({blockers:W2})}});return}await W0(x2,d2,{submission:A2,pendingError:g2,preventScrollReset:R2,replace:H&&H.replace,enableViewTransition:H&&H.viewTransition,flushSync:h2})}function be(){p2||(p2=pB()),Vn(),z2({revalidation:"loading"});let L=p2.promise;return E.navigation.state==="submitting"?L:E.navigation.state==="idle"?(W0(E.historyAction,E.location,{startUninterruptedRevalidation:!0}),L):(W0(k||E.historyAction,E.navigation.location,{overrideNavigation:E.navigation,enableViewTransition:r2===!0}),L)}async function W0(L,H,$){z&&z.abort(),z=null,k=L,i2=($&&$.startUninterruptedRevalidation)===!0,lr(E.location,E.matches),j=($&&$.preventScrollReset)===!0,r2=($&&$.enableViewTransition)===!0;let a2=f||u,A2=$&&$.overrideNavigation,g2=$!=null&&$.initialHydration&&E.matches&&E.matches.length>0&&!w?E.matches:ht(a2,H,C),S2=($&&$.flushSync)===!0;if(g2&&E.initialized&&!Z&&AB(E.location,H)&&!($&&$.submission&&ae($.submission.formMethod))){f0(H,{matches:g2},{flushSync:S2});return}let d2=Ar(g2,a2,H.pathname);if(d2.active&&d2.matches&&(g2=d2.matches),!g2){let{error:c0,notFoundMatches:V2,route:H2}=Hr(H.pathname);f0(H,{matches:V2,loaderData:{},errors:{[H2.id]:c0}},{flushSync:S2});return}z=new AbortController;let v2=Rn(t.history,H,z.signal,$&&$.submission),x2=new sp(t.unstable_getContext?await t.unstable_getContext():void 0),R2;if($&&$.pendingError)R2=[br(g2).route.id,{type:"error",error:$.pendingError}];else if($&&$.submission&&ae($.submission.formMethod)){let c0=await zn(v2,H,$.submission,g2,x2,d2.active,$&&$.initialHydration===!0,{replace:$.replace,flushSync:S2});if(c0.shortCircuited)return;if(c0.pendingActionResult){let[V2,H2]=c0.pendingActionResult;if(ie(H2)&&ni(H2.error)&&H2.error.status===404){z=null,f0(H,{matches:c0.matches,loaderData:{},errors:{[V2]:H2.error}});return}}g2=c0.matches||g2,R2=c0.pendingActionResult,A2=nc(H,$.submission),S2=!1,d2.active=!1,v2=Rn(t.history,v2.url,v2.signal)}let{shortCircuited:h2,matches:w2,loaderData:W2,errors:a0}=await Wn(v2,H,g2,x2,d2.active,A2,$&&$.submission,$&&$.fetcherSubmission,$&&$.replace,$&&$.initialHydration===!0,S2,R2);h2||(z=null,f0(H,{matches:w2||g2,...Dp(R2),loaderData:W2,errors:a0}))}async function zn(L,H,$,a2,A2,g2,S2,d2={}){Vn();let v2=fB(H,$);if(z2({navigation:v2},{flushSync:d2.flushSync===!0}),g2){let h2=await cr(a2,H.pathname,L.signal);if(h2.type==="aborted")return{shortCircuited:!0};if(h2.type==="error"){let w2=br(h2.partialMatches).route.id;return{matches:h2.partialMatches,pendingActionResult:[w2,{type:"error",error:h2.error}]}}else if(h2.matches)a2=h2.matches;else{let{notFoundMatches:w2,error:W2,route:a0}=Hr(H.pathname);return{matches:w2,pendingActionResult:[a0.id,{type:"error",error:W2}]}}}let x2,R2=Qo(a2,H);if(!R2.route.action&&!R2.route.lazy)x2={type:"error",error:ve(405,{method:L.method,pathname:H.pathname,routeId:R2.route.id})};else{let h2=wn(l,A,L,a2,R2,S2?[]:a,A2),w2=await Bt(L,h2,A2,null);if(x2=w2[R2.route.id],!x2){for(let W2 of a2)if(w2[W2.route.id]){x2=w2[W2.route.id];break}}if(L.signal.aborted)return{shortCircuited:!0}}if(wr(x2)){let h2;return d2&&d2.replace!=null?h2=d2.replace:h2=Cp(x2.response.headers.get("Location"),new URL(L.url),C)===E.location.pathname+E.location.search,await tt(L,x2,!0,{submission:$,replace:h2}),{shortCircuited:!0}}if(ie(x2)){let h2=br(a2,R2.route.id);return(d2&&d2.replace)!==!0&&(k="PUSH"),{matches:a2,pendingActionResult:[h2.route.id,x2,R2.route.id]}}return{matches:a2,pendingActionResult:[R2.route.id,x2]}}async function Wn(L,H,$,a2,A2,g2,S2,d2,v2,x2,R2,h2){let w2=g2||nc(H,S2),W2=S2||d2||yp(w2),a0=!i2&&!x2;if(A2){if(a0){let _0=O0(h2);z2({navigation:w2,..._0!==void 0?{actionData:_0}:{}},{flushSync:R2})}let I2=await cr($,H.pathname,L.signal);if(I2.type==="aborted")return{shortCircuited:!0};if(I2.type==="error"){let _0=br(I2.partialMatches).route.id;return{matches:I2.partialMatches,loaderData:{},errors:{[_0]:I2.error}}}else if(I2.matches)$=I2.matches;else{let{error:_0,notFoundMatches:Ee,route:Me}=Hr(H.pathname);return{matches:Ee,loaderData:{},errors:{[Me.id]:_0}}}}let c0=f||u,{dsMatches:V2,revalidatingFetchers:H2}=cp(L,a2,l,A,t.history,E,$,W2,H,x2?[]:a,x2===!0,Z,u2,o2,X,P,c0,C,h2);if(Q=++V,!t.dataStrategy&&!V2.some(I2=>I2.shouldLoad)&&H2.length===0){let I2=ir();return f0(H,{matches:$,loaderData:{},errors:h2&&ie(h2[1])?{[h2[0]]:h2[1].error}:null,...Dp(h2),...I2?{fetchers:new Map(E.fetchers)}:{}},{flushSync:R2}),{shortCircuited:!0}}if(a0){let I2={};if(!A2){I2.navigation=w2;let _0=O0(h2);_0!==void 0&&(I2.actionData=_0)}H2.length>0&&(I2.fetchers=Gn(H2)),z2(I2,{flushSync:R2})}H2.forEach(I2=>{He(I2.key),I2.controller&&I.set(I2.key,I2.controller)});let St=()=>H2.forEach(I2=>He(I2.key));z&&z.signal.addEventListener("abort",St);let{loaderResults:j0,fetcherResults:ce}=await vi(V2,H2,L,a2);if(L.signal.aborted)return{shortCircuited:!0};z&&z.signal.removeEventListener("abort",St),H2.forEach(I2=>I.delete(I2.key));let V0=Na(j0);if(V0)return await tt(L,V0.result,!0,{replace:v2}),{shortCircuited:!0};if(V0=Na(ce),V0)return P.add(V0.key),await tt(L,V0.result,!0,{replace:v2}),{shortCircuited:!0};let{loaderData:Ft,errors:Tt}=gp(E,$,j0,h2,H2,ce);x2&&E.errors&&(Tt={...E.errors,...Tt});let Kn=ir(),ue=ar(Q),nt=Kn||ue||H2.length>0;return{matches:$,loaderData:Ft,errors:Tt,...nt?{fetchers:new Map(E.fetchers)}:{}}}function O0(L){if(L&&!ie(L[1]))return{[L[0]]:L[1].data};if(E.actionData)return Object.keys(E.actionData).length===0?null:E.actionData}function Gn(L){return L.forEach(H=>{let $=E.fetchers.get(H.key),a2=$o(void 0,$?$.data:void 0);E.fetchers.set(H.key,a2)}),new Map(E.fetchers)}async function et(L,H,$,a2){He(L);let A2=(a2&&a2.flushSync)===!0,g2=f||u,S2=Nc(E.location,E.matches,C,$,H,a2==null?void 0:a2.relative),d2=ht(g2,S2,C),v2=Ar(d2,g2,S2);if(v2.active&&v2.matches&&(d2=v2.matches),!d2){A0(L,H,ve(404,{pathname:S2}),{flushSync:A2});return}let{path:x2,submission:R2,error:h2}=Ap(!0,S2,a2);if(h2){A0(L,H,h2,{flushSync:A2});return}let w2=Qo(d2,x2),W2=new sp(t.unstable_getContext?await t.unstable_getContext():void 0),a0=(a2&&a2.preventScrollReset)===!0;if(R2&&ae(R2.formMethod)){await Di(L,H,x2,w2,d2,W2,v2.active,A2,a0,R2);return}X.set(L,{routeId:H,path:x2}),await jr(L,H,x2,w2,d2,W2,v2.active,A2,a0,R2)}async function Di(L,H,$,a2,A2,g2,S2,d2,v2,x2){Vn(),X.delete(L);function R2(s0){if(!s0.route.action&&!s0.route.lazy){let Rt=ve(405,{method:x2.formMethod,pathname:$,routeId:H});return A0(L,H,Rt,{flushSync:d2}),!0}return!1}if(!S2&&R2(a2))return;let h2=E.fetchers.get(L);G0(L,dB(x2,h2),{flushSync:d2});let w2=new AbortController,W2=Rn(t.history,$,w2.signal,x2);if(S2){let s0=await cr(A2,$,W2.signal,L);if(s0.type==="aborted")return;if(s0.type==="error"){A0(L,H,s0.error,{flushSync:d2});return}else if(s0.matches){if(A2=s0.matches,a2=Qo(A2,$),R2(a2))return}else{A0(L,H,ve(404,{pathname:$}),{flushSync:d2});return}}I.set(L,w2);let a0=V,c0=wn(l,A,W2,A2,a2,a,g2),H2=(await Bt(W2,c0,g2,L))[a2.route.id];if(W2.signal.aborted){I.get(L)===w2&&I.delete(L);return}if(o2.has(L)){if(wr(H2)||ie(H2)){G0(L,Zt(void 0));return}}else{if(wr(H2))if(I.delete(L),Q>a0){G0(L,Zt(void 0));return}else return P.add(L),G0(L,$o(x2)),tt(W2,H2,!1,{fetcherSubmission:x2,preventScrollReset:v2});if(ie(H2)){A0(L,H,H2.error);return}}let St=E.navigation.location||E.location,j0=Rn(t.history,St,w2.signal),ce=f||u,V0=E.navigation.state!=="idle"?ht(ce,E.navigation.location,C):E.matches;k2(V0,"Didn't find any matches after fetcher action");let Ft=++V;K.set(L,Ft);let Tt=$o(x2,H2.data);E.fetchers.set(L,Tt);let{dsMatches:Kn,revalidatingFetchers:ue}=cp(j0,g2,l,A,t.history,E,V0,x2,St,a,!1,Z,u2,o2,X,P,ce,C,[a2.route.id,H2]);ue.filter(s0=>s0.key!==L).forEach(s0=>{let Rt=s0.key,Zn=E.fetchers.get(Rt),Y0=$o(void 0,Zn?Zn.data:void 0);E.fetchers.set(Rt,Y0),He(Rt),s0.controller&&I.set(Rt,s0.controller)}),z2({fetchers:new Map(E.fetchers)});let nt=()=>ue.forEach(s0=>He(s0.key));w2.signal.addEventListener("abort",nt);let{loaderResults:I2,fetcherResults:_0}=await vi(Kn,ue,j0,g2);if(w2.signal.aborted)return;if(w2.signal.removeEventListener("abort",nt),K.delete(L),I.delete(L),ue.forEach(s0=>I.delete(s0.key)),E.fetchers.has(L)){let s0=Zt(H2.data);E.fetchers.set(L,s0)}let Ee=Na(I2);if(Ee)return tt(j0,Ee.result,!1,{preventScrollReset:v2});if(Ee=Na(_0),Ee)return P.add(Ee.key),tt(j0,Ee.result,!1,{preventScrollReset:v2});let{loaderData:Me,errors:ur}=gp(E,V0,I2,void 0,ue,_0);ar(Ft),E.navigation.state==="loading"&&Ft>Q?(k2(k,"Expected pending action"),z&&z.abort(),f0(E.navigation.location,{matches:V0,loaderData:Me,errors:ur,fetchers:new Map(E.fetchers)})):(z2({errors:ur,loaderData:hp(E.loaderData,Me,V0,ur),fetchers:new Map(E.fetchers)}),Z=!1)}async function jr(L,H,$,a2,A2,g2,S2,d2,v2,x2){let R2=E.fetchers.get(L);G0(L,$o(x2,R2?R2.data:void 0),{flushSync:d2});let h2=new AbortController,w2=Rn(t.history,$,h2.signal);if(S2){let H2=await cr(A2,$,w2.signal,L);if(H2.type==="aborted")return;if(H2.type==="error"){A0(L,H,H2.error,{flushSync:d2});return}else if(H2.matches)A2=H2.matches,a2=Qo(A2,$);else{A0(L,H,ve(404,{pathname:$}),{flushSync:d2});return}}I.set(L,h2);let W2=V,a0=wn(l,A,w2,A2,a2,a,g2),V2=(await Bt(w2,a0,g2,L))[a2.route.id];if(I.get(L)===h2&&I.delete(L),!w2.signal.aborted){if(o2.has(L)){G0(L,Zt(void 0));return}if(wr(V2))if(Q>W2){G0(L,Zt(void 0));return}else{P.add(L),await tt(w2,V2,!1,{preventScrollReset:v2});return}if(ie(V2)){A0(L,H,V2.error);return}G0(L,Zt(V2.data))}}async function tt(L,H,$,{submission:a2,fetcherSubmission:A2,preventScrollReset:g2,replace:S2}={}){H.response.headers.has("X-Remix-Revalidate")&&(Z=!0);let d2=H.response.headers.get("Location");k2(d2,"Expected a Location header on the redirect Response"),d2=Cp(d2,new URL(L.url),C);let v2=ri(E.location,d2,{_isRedirect:!0});if(i){let a0=!1;if(H.response.headers.has("X-Remix-Reload-Document"))a0=!0;else if(Cu.test(d2)){const c0=j3(d2,!0);a0=c0.origin!==n.location.origin||Ae(c0.pathname,C)==null}if(a0){S2?n.location.replace(d2):n.location.assign(d2);return}}z=null;let x2=S2===!0||H.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:R2,formAction:h2,formEncType:w2}=E.navigation;!a2&&!A2&&R2&&h2&&w2&&(a2=yp(E.navigation));let W2=a2||A2;if(Ky.has(H.response.status)&&W2&&ae(W2.formMethod))await W0(x2,v2,{submission:{...W2,formAction:d2},preventScrollReset:g2||j,enableViewTransition:$?r2:void 0});else{let a0=nc(v2,a2);await W0(x2,v2,{overrideNavigation:a0,fetcherSubmission:A2,preventScrollReset:g2||j,enableViewTransition:$?r2:void 0})}}async function Bt(L,H,$,a2){let A2,g2={};try{A2=await oB(m,L,H,a2,$,!1)}catch(S2){return H.filter(d2=>d2.shouldLoad).forEach(d2=>{g2[d2.route.id]={type:"error",error:S2}}),g2}if(L.signal.aborted)return g2;for(let[S2,d2]of Object.entries(A2))if(cB(d2)){let v2=d2.result;g2[S2]={type:"redirect",response:sB(v2,L,S2,H,C)}}else g2[S2]=await aB(d2);return g2}async function vi(L,H,$,a2){let A2=Bt($,L,a2,null),g2=Promise.all(H.map(async v2=>{if(v2.matches&&v2.match&&v2.request&&v2.controller){let R2=(await Bt(v2.request,v2.matches,a2,v2.key))[v2.match.route.id];return{[v2.key]:R2}}else return Promise.resolve({[v2.key]:{type:"error",error:ve(404,{pathname:v2.path})}})})),S2=await A2,d2=(await g2).reduce((v2,x2)=>Object.assign(v2,x2),{});return{loaderResults:S2,fetcherResults:d2}}function Vn(){Z=!0,X.forEach((L,H)=>{I.has(H)&&u2.add(H),He(H)})}function G0(L,H,$={}){E.fetchers.set(L,H),z2({fetchers:new Map(E.fetchers)},{flushSync:($&&$.flushSync)===!0})}function A0(L,H,$,a2={}){let A2=br(E.matches,H);b0(L),z2({errors:{[A2.route.id]:$},fetchers:new Map(E.fetchers)},{flushSync:(a2&&a2.flushSync)===!0})}function we(L){return e2.set(L,(e2.get(L)||0)+1),o2.has(L)&&o2.delete(L),E.fetchers.get(L)||Zy}function b0(L){let H=E.fetchers.get(L);I.has(L)&&!(H&&H.state==="loading"&&K.has(L))&&He(L),X.delete(L),K.delete(L),P.delete(L),o2.delete(L),u2.delete(L),E.fetchers.delete(L)}function Ws(L){let H=(e2.get(L)||0)-1;H<=0?(e2.delete(L),o2.add(L)):e2.set(L,H),z2({fetchers:new Map(E.fetchers)})}function He(L){let H=I.get(L);H&&(H.abort(),I.delete(L))}function xi(L){for(let H of L){let $=we(H),a2=Zt($.data);E.fetchers.set(H,a2)}}function ir(){let L=[],H=!1;for(let $ of P){let a2=E.fetchers.get($);k2(a2,`Expected fetcher: ${$}`),a2.state==="loading"&&(P.delete($),L.push($),H=!0)}return xi(L),H}function ar(L){let H=[];for(let[$,a2]of K)if(a2<L){let A2=E.fetchers.get($);k2(A2,`Expected fetcher: ${$}`),A2.state==="loading"&&(He($),K.delete($),H.push($))}return xi(H),H.length>0}function rt(L,H){let $=E.blockers.get(L)||Yo;return f2.get(L)!==H&&f2.set(L,H),$}function sr(L){E.blockers.delete(L),f2.delete(L)}function Ue(L,H){let $=E.blockers.get(L)||Yo;k2($.state==="unblocked"&&H.state==="blocked"||$.state==="blocked"&&H.state==="blocked"||$.state==="blocked"&&H.state==="proceeding"||$.state==="blocked"&&H.state==="unblocked"||$.state==="proceeding"&&H.state==="unblocked",`Invalid blocker state transition: ${$.state} -> ${H.state}`);let a2=new Map(E.blockers);a2.set(L,H),z2({blockers:a2})}function yi({currentLocation:L,nextLocation:H,historyAction:$}){if(f2.size===0)return;f2.size>1&&D0(!1,"A router only supports one blocker at a time");let a2=Array.from(f2.entries()),[A2,g2]=a2[a2.length-1],S2=E.blockers.get(A2);if(!(S2&&S2.state==="proceeding")&&g2({currentLocation:L,nextLocation:H,historyAction:$}))return A2}function Hr(L){let H=ve(404,{pathname:L}),$=f||u,{matches:a2,route:A2}=vp($);return{notFoundMatches:a2,route:A2,error:H}}function Bi(L,H,$){if(x=L,B=H,y=$||null,!F&&E.navigation===rc){F=!0;let a2=Si(E.location,E.matches);a2!=null&&z2({restoreScrollPosition:a2})}return()=>{x=null,B=null,y=null}}function Ur(L,H){return y&&y(L,H.map(a2=>H3(a2,E.loaderData)))||L.key}function lr(L,H){if(x&&B){let $=Ur(L,H);x[$]=B()}}function Si(L,H){if(x){let $=Ur(L,H),a2=x[$];if(typeof a2=="number")return a2}return null}function Ar(L,H,$){if(t.patchRoutesOnNavigation)if(L){if(Object.keys(L[0].params).length>0)return{active:!0,matches:Ka(H,$,C,!0)}}else return{active:!0,matches:Ka(H,$,C,!0)||[]};return{active:!1,matches:null}}async function cr(L,H,$,a2){if(!t.patchRoutesOnNavigation)return{type:"success",matches:L};let A2=L;for(;;){let g2=f==null,S2=f||u,d2=A;try{await t.patchRoutesOnNavigation({signal:$,path:H,matches:A2,fetcherKey:a2,patch:(R2,h2)=>{$.aborted||up(R2,h2,S2,d2,l)}})}catch(R2){return{type:"error",error:R2,partialMatches:A2}}finally{g2&&!$.aborted&&(u=[...u])}if($.aborted)return{type:"aborted"};let v2=ht(S2,H,C);if(v2)return{type:"success",matches:v2};let x2=Ka(S2,H,C,!0);if(!x2||A2.length===x2.length&&A2.every((R2,h2)=>R2.route.id===x2[h2].route.id))return{type:"success",matches:null};A2=x2}}function Yn(L){A={},f=os(L,l,void 0,A)}function $n(L,H){let $=f==null;up(L,H,f||u,A,l),$&&(u=[...u],z2({}))}return N={get basename(){return C},get future(){return h},get state(){return E},get routes(){return u},get window(){return n},initialize:G2,subscribe:N2,enableScrollRestoration:Bi,navigate:N0,fetch:et,revalidate:be,createHref:L=>t.history.createHref(L),encodeLocation:L=>t.history.encodeLocation(L),getFetcher:we,deleteFetcher:Ws,dispose:y2,getBlocker:rt,deleteBlocker:sr,patchRoutes:$n,_internalFetchControllers:I,_internalSetRoutes:Yn},N}function Jy(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Nc(t,n,i,a,l,A){let u,f;if(l){u=[];for(let m of n)if(u.push(m),m.route.id===l){f=m;break}}else u=n,f=n[n.length-1];let C=mu(a||".",du(u),Ae(t.pathname,i)||t.pathname,A==="path");if(a==null&&(C.search=t.search,C.hash=t.hash),(a==null||a===""||a===".")&&f){let m=pu(C.search);if(f.route.index&&!m)C.search=C.search?C.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&m){let h=new URLSearchParams(C.search),p=h.getAll("index");h.delete("index"),p.filter(x=>x).forEach(x=>h.append("index",x));let v=h.toString();C.search=v?`?${v}`:""}}return i!=="/"&&(C.pathname=C.pathname==="/"?i:Ke([i,C.pathname])),Qt(C)}function Ap(t,n,i){if(!i||!Jy(i))return{path:n};if(i.formMethod&&!uB(i.formMethod))return{path:n,error:ve(405,{method:i.formMethod})};let a=()=>({path:n,error:ve(400,{type:"invalid-body"})}),A=(i.formMethod||"get").toUpperCase(),u=eg(n);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!ae(A))return a();let p=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((v,[x,y])=>`${v}${x}=${y}
`,""):String(i.body);return{path:n,submission:{formMethod:A,formAction:u,formEncType:i.formEncType,formData:void 0,json:void 0,text:p}}}else if(i.formEncType==="application/json"){if(!ae(A))return a();try{let p=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:n,submission:{formMethod:A,formAction:u,formEncType:i.formEncType,formData:void 0,json:p,text:void 0}}}catch{return a()}}}k2(typeof FormData=="function","FormData is not available in this environment");let f,C;if(i.formData)f=kc(i.formData),C=i.formData;else if(i.body instanceof FormData)f=kc(i.body),C=i.body;else if(i.body instanceof URLSearchParams)f=i.body,C=pp(f);else if(i.body==null)f=new URLSearchParams,C=new FormData;else try{f=new URLSearchParams(i.body),C=pp(f)}catch{return a()}let m={formMethod:A,formAction:u,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:C,json:void 0,text:void 0};if(ae(m.formMethod))return{path:n,submission:m};let h=tr(n);return t&&h.search&&pu(h.search)&&f.append("index",""),h.search=`?${f}`,{path:Qt(h),submission:m}}function cp(t,n,i,a,l,A,u,f,C,m,h,p,v,x,y,B,F,T,w){var s2;let R=w?ie(w[1])?w[1].error:w[1].data:void 0,M=l.createURL(A.location),N=l.createURL(C),E;if(h&&A.errors){let i2=Object.keys(A.errors)[0];E=u.findIndex(Z=>Z.route.id===i2)}else if(w&&ie(w[1])){let i2=w[0];E=u.findIndex(Z=>Z.route.id===i2)-1}let k=w?w[1].statusCode:void 0,j=k&&k>=400,z={currentUrl:M,currentParams:((s2=A.matches[0])==null?void 0:s2.params)||{},nextUrl:N,nextParams:u[0].params,...f,actionResult:R,actionStatus:k},r2=u.map((i2,Z)=>{let{route:u2}=i2,I=null;if(E!=null&&Z>E?I=!1:u2.lazy?I=!0:u2.loader==null?I=!1:h?I=_c(u2,A.loaderData,A.errors):eB(A.loaderData,A.matches[Z],i2)&&(I=!0),I!==null)return Lc(i,a,t,i2,m,n,I);let V=j?!1:p||M.pathname+M.search===N.pathname+N.search||M.search!==N.search||tB(A.matches[Z],i2),Q={...z,defaultShouldRevalidate:V},K=as(i2,Q);return Lc(i,a,t,i2,m,n,K,Q)}),c2=[];return y.forEach((i2,Z)=>{if(h||!u.some(X=>X.route.id===i2.routeId)||x.has(Z))return;let u2=ht(F,i2.path,T);if(!u2){c2.push({key:Z,routeId:i2.routeId,path:i2.path,matches:null,match:null,request:null,controller:null});return}if(B.has(Z))return;let I=A.fetchers.get(Z),V=Qo(u2,i2.path),Q=new AbortController,K=Rn(l,i2.path,Q.signal),P=null;if(v.has(Z))v.delete(Z),P=wn(i,a,K,u2,V,m,n);else if(I&&I.state!=="idle"&&I.data===void 0)p&&(P=wn(i,a,K,u2,V,m,n));else{let X={...z,defaultShouldRevalidate:j?!1:p};as(V,X)&&(P=wn(i,a,K,u2,V,m,n,X))}P&&c2.push({key:Z,routeId:i2.routeId,path:i2.path,matches:P,match:V,request:K,controller:Q})}),{dsMatches:r2,revalidatingFetchers:c2}}function _c(t,n,i){if(t.lazy)return!0;if(!t.loader)return!1;let a=n!=null&&t.id in n,l=i!=null&&i[t.id]!==void 0;return!a&&l?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!a&&!l}function eB(t,n,i){let a=!n||i.route.id!==n.route.id,l=!t.hasOwnProperty(i.route.id);return a||l}function tB(t,n){let i=t.route.path;return t.pathname!==n.pathname||i!=null&&i.endsWith("*")&&t.params["*"]!==n.params["*"]}function as(t,n){if(t.route.shouldRevalidate){let i=t.route.shouldRevalidate(n);if(typeof i=="boolean")return i}return n.defaultShouldRevalidate}function up(t,n,i,a,l){let A;if(t){let C=a[t];k2(C,`No route found to patch children into: routeId = ${t}`),C.children||(C.children=[]),A=C.children}else A=i;let u=n.filter(C=>!A.some(m=>K3(C,m))),f=os(u,l,[t||"_","patch",String((A==null?void 0:A.length)||"0")],a);A.push(...f)}function K3(t,n){return"id"in t&&"id"in n&&t.id===n.id?!0:t.index===n.index&&t.path===n.path&&t.caseSensitive===n.caseSensitive?(!t.children||t.children.length===0)&&(!n.children||n.children.length===0)?!0:t.children.every((i,a)=>{var l;return(l=n.children)==null?void 0:l.some(A=>K3(i,A))}):!1}var fp=new WeakMap,Z3=({key:t,route:n,manifest:i,mapRouteProperties:a})=>{let l=i[n.id];if(k2(l,"No route found in manifest"),!l.lazy||typeof l.lazy!="object")return;let A=l.lazy[t];if(!A)return;let u=fp.get(l);u||(u={},fp.set(l,u));let f=u[t];if(f)return f;let C=(async()=>{let m=Fy(t),p=l[t]!==void 0&&t!=="hasErrorBoundary";if(m)D0(!m,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),u[t]=Promise.resolve();else if(p)D0(!1,`Route "${l.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let v=await A();v!=null&&(Object.assign(l,{[t]:v}),Object.assign(l,a(l)))}typeof l.lazy=="object"&&(l.lazy[t]=void 0,Object.values(l.lazy).every(v=>v===void 0)&&(l.lazy=void 0))})();return u[t]=C,C},dp=new WeakMap;function rB(t,n,i,a,l){let A=i[t.id];if(k2(A,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let h=dp.get(A);if(h)return{lazyRoutePromise:h,lazyHandlerPromise:h};let p=(async()=>{k2(typeof t.lazy=="function","No lazy route function found");let v=await t.lazy(),x={};for(let y in v){let B=v[y];if(B===void 0)continue;let F=Ry(y),w=A[y]!==void 0&&y!=="hasErrorBoundary";F?D0(!F,"Route property "+y+" is not a supported property to be returned from a lazy route function. This property will be ignored."):w?D0(!w,`Route "${A.id}" has a static property "${y}" defined but its lazy function is also returning a value for this property. The lazy route property "${y}" will be ignored.`):x[y]=B}Object.assign(A,x),Object.assign(A,{...a(A),lazy:void 0})})();return dp.set(A,p),p.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:p}}let u=Object.keys(t.lazy),f=[],C;for(let h of u){if(l&&l.includes(h))continue;let p=Z3({key:h,route:t,manifest:i,mapRouteProperties:a});p&&(f.push(p),h===n&&(C=p))}let m=f.length>0?Promise.all(f).then(()=>{}):void 0;return m==null||m.catch(()=>{}),C==null||C.catch(()=>{}),{lazyRoutePromise:m,lazyHandlerPromise:C}}async function mp(t){let n=t.matches.filter(l=>l.shouldLoad),i={};return(await Promise.all(n.map(l=>l.resolve()))).forEach((l,A)=>{i[n[A].route.id]=l}),i}async function nB(t){return t.matches.some(n=>n.route.unstable_middleware)?X3(t,!1,()=>mp(t),(n,i)=>({[i]:{type:"error",result:n}})):mp(t)}async function X3(t,n,i,a){let{matches:l,request:A,params:u,context:f}=t,C={handlerResult:void 0};try{let m=l.flatMap(p=>p.route.unstable_middleware?p.route.unstable_middleware.map(v=>[p.route.id,v]):[]),h=await Q3({request:A,params:u,context:f},m,n,C,i);return n?h:C.handlerResult}catch(m){if(!C.middlewareError)throw m;let h=await a(C.middlewareError.error,C.middlewareError.routeId);return C.handlerResult?Object.assign(C.handlerResult,h):h}}async function Q3(t,n,i,a,l,A=0){let{request:u}=t;if(u.signal.aborted)throw u.signal.reason?u.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${u.method} ${u.url}`);let f=n[A];if(!f)return a.handlerResult=await l(),a.handlerResult;let[C,m]=f,h=!1,p,v=async()=>{if(h)throw new Error("You may only call `next()` once per middleware");h=!0,await Q3(t,n,i,a,l,A+1)};try{let x=await m({request:t.request,params:t.params,context:t.context},v);return h?x===void 0?p:x:v()}catch(x){throw a.middlewareError?a.middlewareError.error!==x&&(a.middlewareError={routeId:C,error:x}):a.middlewareError={routeId:C,error:x},x}}function J3(t,n,i,a,l){let A=Z3({key:"unstable_middleware",route:a.route,manifest:n,mapRouteProperties:t}),u=rB(a.route,ae(i.method)?"action":"loader",n,t,l);return{middleware:A,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function Lc(t,n,i,a,l,A,u,f=null){let C=!1,m=J3(t,n,i,a,l);return{...a,_lazyPromises:m,shouldLoad:u,unstable_shouldRevalidateArgs:f,unstable_shouldCallHandler(h){return C=!0,f?typeof h=="boolean"?as(a,{...f,defaultShouldRevalidate:h}):as(a,f):u},resolve(h){return C||u||h&&i.method==="GET"&&(a.route.lazy||a.route.loader)?iB({request:i,match:a,lazyHandlerPromise:m==null?void 0:m.handler,lazyRoutePromise:m==null?void 0:m.route,handlerOverride:h,scopedContext:A}):Promise.resolve({type:"data",result:void 0})}}}function wn(t,n,i,a,l,A,u,f=null){return a.map(C=>C.route.id!==l.route.id?{...C,shouldLoad:!1,unstable_shouldRevalidateArgs:f,unstable_shouldCallHandler:()=>!1,_lazyPromises:J3(t,n,i,C,A),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Lc(t,n,i,C,A,u,!0,f))}async function oB(t,n,i,a,l,A){i.some(m=>{var h;return(h=m._lazyPromises)==null?void 0:h.middleware})&&await Promise.all(i.map(m=>{var h;return(h=m._lazyPromises)==null?void 0:h.middleware}));let u={request:n,params:i[0].params,context:l,matches:i},C=await t({...u,fetcherKey:a,unstable_runClientMiddleware:m=>{let h=u;return X3(h,!1,()=>m({...h,fetcherKey:a,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(p,v)=>({[v]:{type:"error",result:p}}))}});try{await Promise.all(i.flatMap(m=>{var h,p;return[(h=m._lazyPromises)==null?void 0:h.handler,(p=m._lazyPromises)==null?void 0:p.route]}))}catch{}return C}async function iB({request:t,match:n,lazyHandlerPromise:i,lazyRoutePromise:a,handlerOverride:l,scopedContext:A}){let u,f,C=ae(t.method),m=C?"action":"loader",h=p=>{let v,x=new Promise((F,T)=>v=T);f=()=>v(),t.signal.addEventListener("abort",f);let y=F=>typeof p!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${m}" [routeId: ${n.route.id}]`)):p({request:t,params:n.params,context:A},...F!==void 0?[F]:[]),B=(async()=>{try{return{type:"data",result:await(l?l(T=>y(T)):y())}}catch(F){return{type:"error",result:F}}})();return Promise.race([B,x])};try{let p=C?n.route.action:n.route.loader;if(i||a)if(p){let v,[x]=await Promise.all([h(p).catch(y=>{v=y}),i,a]);if(v!==void 0)throw v;u=x}else{await i;let v=C?n.route.action:n.route.loader;if(v)[u]=await Promise.all([h(v),a]);else if(m==="action"){let x=new URL(t.url),y=x.pathname+x.search;throw ve(405,{method:t.method,pathname:y,routeId:n.route.id})}else return{type:"data",result:void 0}}else if(p)u=await h(p);else{let v=new URL(t.url),x=v.pathname+v.search;throw ve(404,{pathname:x})}}catch(p){return{type:"error",result:p}}finally{f&&t.signal.removeEventListener("abort",f)}return u}async function aB(t){var a,l,A,u,f,C;let{result:n,type:i}=t;if(tg(n)){let m;try{let h=n.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?n.body==null?m=null:m=await n.json():m=await n.text()}catch(h){return{type:"error",error:h}}return i==="error"?{type:"error",error:new is(n.status,n.statusText,m),statusCode:n.status,headers:n.headers}:{type:"data",data:m,statusCode:n.status,headers:n.headers}}return i==="error"?xp(n)?n.data instanceof Error?{type:"error",error:n.data,statusCode:(a=n.init)==null?void 0:a.status,headers:(l=n.init)!=null&&l.headers?new Headers(n.init.headers):void 0}:{type:"error",error:new is(((A=n.init)==null?void 0:A.status)||500,void 0,n.data),statusCode:ni(n)?n.status:void 0,headers:(u=n.init)!=null&&u.headers?new Headers(n.init.headers):void 0}:{type:"error",error:n,statusCode:ni(n)?n.status:void 0}:xp(n)?{type:"data",data:n.data,statusCode:(f=n.init)==null?void 0:f.status,headers:(C=n.init)!=null&&C.headers?new Headers(n.init.headers):void 0}:{type:"data",data:n}}function sB(t,n,i,a,l){let A=t.headers.get("Location");if(k2(A,"Redirects returned/thrown from loaders/actions must have a Location header"),!Cu.test(A)){let u=a.slice(0,a.findIndex(f=>f.route.id===i)+1);A=Nc(new URL(n.url),u,l,A),t.headers.set("Location",A)}return t}function Cp(t,n,i){if(Cu.test(t)){let a=t,l=a.startsWith("//")?new URL(n.protocol+a):new URL(a),A=Ae(l.pathname,i)!=null;if(l.origin===n.origin&&A)return l.pathname+l.search+l.hash}return t}function Rn(t,n,i,a){let l=t.createURL(eg(n)).toString(),A={signal:i};if(a&&ae(a.formMethod)){let{formMethod:u,formEncType:f}=a;A.method=u.toUpperCase(),f==="application/json"?(A.headers=new Headers({"Content-Type":f}),A.body=JSON.stringify(a.json)):f==="text/plain"?A.body=a.text:f==="application/x-www-form-urlencoded"&&a.formData?A.body=kc(a.formData):A.body=a.formData}return new Request(l,A)}function kc(t){let n=new URLSearchParams;for(let[i,a]of t.entries())n.append(i,typeof a=="string"?a:a.name);return n}function pp(t){let n=new FormData;for(let[i,a]of t.entries())n.append(i,a);return n}function lB(t,n,i,a=!1,l=!1){let A={},u=null,f,C=!1,m={},h=i&&ie(i[1])?i[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in n))return;let v=p.route.id,x=n[v];if(k2(!wr(x),"Cannot handle redirect results in processLoaderData"),ie(x)){let y=x.error;if(h!==void 0&&(y=h,h=void 0),u=u||{},l)u[v]=y;else{let B=br(t,v);u[B.route.id]==null&&(u[B.route.id]=y)}a||(A[v]=$3),C||(C=!0,f=ni(x.error)?x.error.status:500),x.headers&&(m[v]=x.headers)}else A[v]=x.data,x.statusCode&&x.statusCode!==200&&!C&&(f=x.statusCode),x.headers&&(m[v]=x.headers)}),h!==void 0&&i&&(u={[i[0]]:h},i[2]&&(A[i[2]]=void 0)),{loaderData:A,errors:u,statusCode:f||200,loaderHeaders:m}}function gp(t,n,i,a,l,A){let{loaderData:u,errors:f}=lB(n,i,a);return l.filter(C=>!C.matches||C.matches.some(m=>m.shouldLoad)).forEach(C=>{let{key:m,match:h,controller:p}=C,v=A[m];if(k2(v,"Did not find corresponding fetcher result"),!(p&&p.signal.aborted))if(ie(v)){let x=br(t.matches,h==null?void 0:h.route.id);f&&f[x.route.id]||(f={...f,[x.route.id]:v.error}),t.fetchers.delete(m)}else if(wr(v))k2(!1,"Unhandled fetcher revalidation redirect");else{let x=Zt(v.data);t.fetchers.set(m,x)}}),{loaderData:u,errors:f}}function hp(t,n,i,a){let l=Object.entries(n).filter(([,A])=>A!==$3).reduce((A,[u,f])=>(A[u]=f,A),{});for(let A of i){let u=A.route.id;if(!n.hasOwnProperty(u)&&t.hasOwnProperty(u)&&A.route.loader&&(l[u]=t[u]),a&&a.hasOwnProperty(u))break}return l}function Dp(t){return t?ie(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function br(t,n){return(n?t.slice(0,t.findIndex(a=>a.route.id===n)+1):[...t]).reverse().find(a=>a.route.hasErrorBoundary===!0)||t[0]}function vp(t){let n=t.length===1?t[0]:t.find(i=>i.index||!i.path||i.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:n}],route:n}}function ve(t,{pathname:n,routeId:i,method:a,type:l,message:A}={}){let u="Unknown Server Error",f="Unknown @remix-run/router error";return t===400?(u="Bad Request",a&&n&&i?f=`You made a ${a} request to "${n}" but did not provide a \`loader\` for route "${i}", so there is no way to handle the request.`:l==="invalid-body"&&(f="Unable to encode submission body")):t===403?(u="Forbidden",f=`Route "${i}" does not match URL "${n}"`):t===404?(u="Not Found",f=`No route matches URL "${n}"`):t===405&&(u="Method Not Allowed",a&&n&&i?f=`You made a ${a.toUpperCase()} request to "${n}" but did not provide an \`action\` for route "${i}", so there is no way to handle the request.`:a&&(f=`Invalid request method "${a.toUpperCase()}"`)),new is(t||500,u,new Error(f),!0)}function Na(t){let n=Object.entries(t);for(let i=n.length-1;i>=0;i--){let[a,l]=n[i];if(wr(l))return{key:a,result:l}}}function eg(t){let n=typeof t=="string"?tr(t):t;return Qt({...n,hash:""})}function AB(t,n){return t.pathname!==n.pathname||t.search!==n.search?!1:t.hash===""?n.hash!=="":t.hash===n.hash?!0:n.hash!==""}function cB(t){return tg(t.result)&&$y.has(t.result.status)}function ie(t){return t.type==="error"}function wr(t){return(t&&t.type)==="redirect"}function xp(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function tg(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function uB(t){return Yy.has(t.toUpperCase())}function ae(t){return Gy.has(t.toUpperCase())}function pu(t){return new URLSearchParams(t).getAll("index").some(n=>n==="")}function Qo(t,n){let i=typeof n=="string"?tr(n).search:n.search;if(t[t.length-1].route.index&&pu(i||""))return t[t.length-1];let a=G3(t);return a[a.length-1]}function yp(t){let{formMethod:n,formAction:i,formEncType:a,text:l,formData:A,json:u}=t;if(!(!n||!i||!a)){if(l!=null)return{formMethod:n,formAction:i,formEncType:a,formData:void 0,json:void 0,text:l};if(A!=null)return{formMethod:n,formAction:i,formEncType:a,formData:A,json:void 0,text:void 0};if(u!==void 0)return{formMethod:n,formAction:i,formEncType:a,formData:void 0,json:u,text:void 0}}}function nc(t,n){return n?{state:"loading",location:t,formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function fB(t,n){return{state:"submitting",location:t,formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text}}function $o(t,n){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:n}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function dB(t,n){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:n?n.data:void 0}}function Zt(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function mB(t,n){try{let i=t.sessionStorage.getItem(Y3);if(i){let a=JSON.parse(i);for(let[l,A]of Object.entries(a||{}))A&&Array.isArray(A)&&n.set(l,new Set(A||[]))}}catch{}}function CB(t,n){if(n.size>0){let i={};for(let[a,l]of n)i[a]=[...l];try{t.sessionStorage.setItem(Y3,JSON.stringify(i))}catch(a){D0(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function pB(){let t,n,i=new Promise((a,l)=>{t=async A=>{a(A);try{await i}catch{}},n=async A=>{l(A);try{await i}catch{}}});return{promise:i,resolve:t,reject:n}}var Lr=D.createContext(null);Lr.displayName="DataRouter";var In=D.createContext(null);In.displayName="DataRouterState";var gu=D.createContext({isTransitioning:!1});gu.displayName="ViewTransition";var rg=D.createContext(new Map);rg.displayName="Fetchers";var gB=D.createContext(null);gB.displayName="Await";var Te=D.createContext(null);Te.displayName="Navigation";var xs=D.createContext(null);xs.displayName="Location";var yt=D.createContext({outlet:null,matches:[],isDataRoute:!1});yt.displayName="Route";var hu=D.createContext(null);hu.displayName="RouteError";function hB(t,{relative:n}={}){k2(qn(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=D.useContext(Te),{hash:l,pathname:A,search:u}=li(t,{relative:n}),f=A;return i!=="/"&&(f=A==="/"?i:Ke([i,A])),a.createHref({pathname:f,search:u,hash:l})}function qn(){return D.useContext(xs)!=null}function i0(){return k2(qn(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(xs).location}function DB(t){k2(qn(),"useMatch() may be used only in the context of a <Router> component.");let{pathname:n}=i0();return D.useMemo(()=>Er(t,W3(n)),[n,t])}var ng="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function og(t){D.useContext(Te).static||D.useLayoutEffect(t)}function Du(){let{isDataRoute:t}=D.useContext(yt);return t?PB():vB()}function vB(){k2(qn(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(Lr),{basename:n,navigator:i}=D.useContext(Te),{matches:a}=D.useContext(yt),{pathname:l}=i0(),A=JSON.stringify(du(a)),u=D.useRef(!1);return og(()=>{u.current=!0}),D.useCallback((C,m={})=>{if(D0(u.current,ng),!u.current)return;if(typeof C=="number"){i.go(C);return}let h=mu(C,JSON.parse(A),l,m.relative==="path");t==null&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Ke([n,h.pathname])),(m.replace?i.replace:i.push)(h,m.state,m)},[n,i,A,l,t])}D.createContext(null);function li(t,{relative:n}={}){let{matches:i}=D.useContext(yt),{pathname:a}=i0(),l=JSON.stringify(du(i));return D.useMemo(()=>mu(t,JSON.parse(l),a,n==="path"),[t,l,a,n])}function xB(t,n,i,a){k2(qn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l,static:A}=D.useContext(Te),{matches:u}=D.useContext(yt),f=u[u.length-1],C=f?f.params:{},m=f?f.pathname:"/",h=f?f.pathnameBase:"/",p=f&&f.route;{let w=p&&p.path||"";ag(m,!p||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let v=i0(),x;x=v;let y=x.pathname||"/",B=y;if(h!=="/"){let w=h.replace(/^\//,"").split("/");B="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let F=!A&&i&&i.matches&&i.matches.length>0?i.matches:ht(t,{pathname:B});return D0(p||F!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),D0(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),TB(F&&F.map(w=>Object.assign({},w,{params:Object.assign({},C,w.params),pathname:Ke([h,l.encodeLocation?l.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?h:Ke([h,l.encodeLocation?l.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),u,i,a)}function yB(){let t=MB(),n=ni(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},A={padding:"2px 4px",backgroundColor:a},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=D.createElement(D.Fragment,null,D.createElement("p",null,"💿 Hey developer 👋"),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:A},"ErrorBoundary")," or"," ",D.createElement("code",{style:A},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},n),i?D.createElement("pre",{style:l},i):null,u)}var BB=D.createElement(yB,null),SB=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?D.createElement(yt.Provider,{value:this.props.routeContext},D.createElement(hu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FB({routeContext:t,match:n,children:i}){let a=D.useContext(Lr);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(yt.Provider,{value:t},i)}function TB(t,n=[],i=null,a=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(n.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let l=t,A=i==null?void 0:i.errors;if(A!=null){let C=l.findIndex(m=>m.route.id&&(A==null?void 0:A[m.route.id])!==void 0);k2(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(A).join(",")}`),l=l.slice(0,Math.min(l.length,C+1))}let u=!1,f=-1;if(i)for(let C=0;C<l.length;C++){let m=l[C];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=C),m.route.id){let{loaderData:h,errors:p}=i,v=m.route.loader&&!h.hasOwnProperty(m.route.id)&&(!p||p[m.route.id]===void 0);if(m.route.lazy||v){u=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((C,m,h)=>{let p,v=!1,x=null,y=null;i&&(p=A&&m.route.id?A[m.route.id]:void 0,x=m.route.errorElement||BB,u&&(f<0&&h===0?(ag("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,y=null):f===h&&(v=!0,y=m.route.hydrateFallbackElement||null)));let B=n.concat(l.slice(0,h+1)),F=()=>{let T;return p?T=x:v?T=y:m.route.Component?T=D.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=C,D.createElement(FB,{match:m,routeContext:{outlet:C,matches:B,isDataRoute:i!=null},children:T})};return i&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?D.createElement(SB,{location:i.location,revalidation:i.revalidation,component:x,error:p,children:F(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):F()},null)}function vu(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RB(t){let n=D.useContext(Lr);return k2(n,vu(t)),n}function xu(t){let n=D.useContext(In);return k2(n,vu(t)),n}function bB(t){let n=D.useContext(yt);return k2(n,vu(t)),n}function yu(t){let n=bB(t),i=n.matches[n.matches.length-1];return k2(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function wB(){return yu("useRouteId")}function EB(){return xu("useNavigation").navigation}function ig(){let{matches:t,loaderData:n}=xu("useMatches");return D.useMemo(()=>t.map(i=>H3(i,n)),[t,n])}function MB(){var a;let t=D.useContext(hu),n=xu("useRouteError"),i=yu("useRouteError");return t!==void 0?t:(a=n.errors)==null?void 0:a[i]}function PB(){let{router:t}=RB("useNavigate"),n=yu("useNavigate"),i=D.useRef(!1);return og(()=>{i.current=!0}),D.useCallback(async(l,A={})=>{D0(i.current,ng),i.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:n,...A}))},[t,n])}var Bp={};function ag(t,n,i){!n&&!Bp[t]&&(Bp[t]=!0,D0(!1,i))}var Sp={};function Fp(t,n){!t&&!Sp[n]&&(Sp[n]=!0,console.warn(n))}function NB(t){let n={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&D0(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(n,{element:D.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&D0(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(n,{hydrateFallbackElement:D.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&D0(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(n,{errorElement:D.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),n}var _B=["HydrateFallback","hydrateFallbackElement"],LB=class{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",t(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",n(i))}})}};function kB({router:t,flushSync:n}){let[i,a]=D.useState(t.state),[l,A]=D.useState(),[u,f]=D.useState({isTransitioning:!1}),[C,m]=D.useState(),[h,p]=D.useState(),[v,x]=D.useState(),y=D.useRef(new Map),B=D.useCallback((R,{deletedFetchers:M,flushSync:N,viewTransitionOpts:E})=>{R.fetchers.forEach((j,z)=>{j.data!==void 0&&y.current.set(z,j.data)}),M.forEach(j=>y.current.delete(j)),Fp(N===!1||n!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let k=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(Fp(E==null||k,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!E||!k){n&&N?n(()=>a(R)):D.startTransition(()=>a(R));return}if(n&&N){n(()=>{h&&(C&&C.resolve(),h.skipTransition()),f({isTransitioning:!0,flushSync:!0,currentLocation:E.currentLocation,nextLocation:E.nextLocation})});let j=t.window.document.startViewTransition(()=>{n(()=>a(R))});j.finished.finally(()=>{n(()=>{m(void 0),p(void 0),A(void 0),f({isTransitioning:!1})})}),n(()=>p(j));return}h?(C&&C.resolve(),h.skipTransition(),x({state:R,currentLocation:E.currentLocation,nextLocation:E.nextLocation})):(A(R),f({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}))},[t.window,n,h,C]);D.useLayoutEffect(()=>t.subscribe(B),[t,B]),D.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new LB)},[u]),D.useEffect(()=>{if(C&&l&&t.window){let R=l,M=C.promise,N=t.window.document.startViewTransition(async()=>{D.startTransition(()=>a(R)),await M});N.finished.finally(()=>{m(void 0),p(void 0),A(void 0),f({isTransitioning:!1})}),p(N)}},[l,C,t.window]),D.useEffect(()=>{C&&l&&i.location.key===l.location.key&&C.resolve()},[C,h,i.location,l]),D.useEffect(()=>{!u.isTransitioning&&v&&(A(v.state),f({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),x(void 0))},[u.isTransitioning,v]);let F=D.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:R=>t.navigate(R),push:(R,M,N)=>t.navigate(R,{state:M,preventScrollReset:N==null?void 0:N.preventScrollReset}),replace:(R,M,N)=>t.navigate(R,{replace:!0,state:M,preventScrollReset:N==null?void 0:N.preventScrollReset})}),[t]),T=t.basename||"/",w=D.useMemo(()=>({router:t,navigator:F,static:!1,basename:T}),[t,F,T]);return D.createElement(D.Fragment,null,D.createElement(Lr.Provider,{value:w},D.createElement(In.Provider,{value:i},D.createElement(rg.Provider,{value:y.current},D.createElement(gu.Provider,{value:u},D.createElement(OB,{basename:T,location:i.location,navigationType:i.historyAction,navigator:F},D.createElement(IB,{routes:t.routes,future:t.future,state:i})))))),null)}var IB=D.memo(qB);function qB({routes:t,future:n,state:i}){return xB(t,void 0,i,n)}function OB({basename:t="/",children:n=null,location:i,navigationType:a="POP",navigator:l,static:A=!1}){k2(!qn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),f=D.useMemo(()=>({basename:u,navigator:l,static:A,future:{}}),[u,l,A]);typeof i=="string"&&(i=tr(i));let{pathname:C="/",search:m="",hash:h="",state:p=null,key:v="default"}=i,x=D.useMemo(()=>{let y=Ae(C,u);return y==null?null:{location:{pathname:y,search:m,hash:h,state:p,key:v},navigationType:a}},[u,C,m,h,p,v,a]);return D0(x!=null,`<Router basename="${u}"> is not able to match the URL "${C}${m}${h}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:D.createElement(Te.Provider,{value:f},D.createElement(xs.Provider,{children:n,value:x}))}var Za="get",Xa="application/x-www-form-urlencoded";function ys(t){return t!=null&&typeof t.tagName=="string"}function jB(t){return ys(t)&&t.tagName.toLowerCase()==="button"}function HB(t){return ys(t)&&t.tagName.toLowerCase()==="form"}function UB(t){return ys(t)&&t.tagName.toLowerCase()==="input"}function zB(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function WB(t,n){return t.button===0&&(!n||n==="_self")&&!zB(t)}var _a=null;function GB(){if(_a===null)try{new FormData(document.createElement("form"),0),_a=!1}catch{_a=!0}return _a}var VB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function oc(t){return t!=null&&!VB.has(t)?(D0(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xa}"`),null):t}function YB(t,n){let i,a,l,A,u;if(HB(t)){let f=t.getAttribute("action");a=f?Ae(f,n):null,i=t.getAttribute("method")||Za,l=oc(t.getAttribute("enctype"))||Xa,A=new FormData(t)}else if(jB(t)||UB(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let C=t.getAttribute("formaction")||f.getAttribute("action");if(a=C?Ae(C,n):null,i=t.getAttribute("formmethod")||f.getAttribute("method")||Za,l=oc(t.getAttribute("formenctype"))||oc(f.getAttribute("enctype"))||Xa,A=new FormData(f,t),!GB()){let{name:m,type:h,value:p}=t;if(h==="image"){let v=m?`${m}.`:"";A.append(`${v}x`,"0"),A.append(`${v}y`,"0")}else m&&A.append(m,p)}}else{if(ys(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Za,a=null,l=Xa,u=t}return A&&l==="text/plain"&&(u=A,A=void 0),{action:a,method:i.toLowerCase(),encType:l,formData:A,body:u}}function Bu(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}async function $B(t,n){if(t.id in n)return n[t.id];try{let i=await import(t.module);return n[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KB(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ZB(t,n,i){let a=await Promise.all(t.map(async l=>{let A=n.routes[l.route.id];if(A){let u=await $B(A,i);return u.links?u.links():[]}return[]}));return e5(a.flat(1).filter(KB).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Tp(t,n,i,a,l,A){let u=(C,m)=>i[m]?C.route.id!==i[m].route.id:!0,f=(C,m)=>{var h;return i[m].pathname!==C.pathname||((h=i[m].route.path)==null?void 0:h.endsWith("*"))&&i[m].params["*"]!==C.params["*"]};return A==="assets"?n.filter((C,m)=>u(C,m)||f(C,m)):A==="data"?n.filter((C,m)=>{var p;let h=a.routes[C.route.id];if(!h||!h.hasLoader)return!1;if(u(C,m)||f(C,m))return!0;if(C.route.shouldRevalidate){let v=C.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((p=i[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:C.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function XB(t,n,{includeHydrateFallback:i}={}){return QB(t.map(a=>{let l=n.routes[a.route.id];if(!l)return[];let A=[l.module];return l.clientActionModule&&(A=A.concat(l.clientActionModule)),l.clientLoaderModule&&(A=A.concat(l.clientLoaderModule)),i&&l.hydrateFallbackModule&&(A=A.concat(l.hydrateFallbackModule)),l.imports&&(A=A.concat(l.imports)),A}).flat(1))}function QB(t){return[...new Set(t)]}function JB(t){let n={},i=Object.keys(t).sort();for(let a of i)n[a]=t[a];return n}function e5(t,n){let i=new Set;return new Set(n),t.reduce((a,l)=>{let A=JSON.stringify(JB(l));return i.has(A)||(i.add(A),a.push({key:A,link:l})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var t5=new Set([100,101,204,205]);function r5(t,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname="_root.data":n&&Ae(i.pathname,n)==="/"?i.pathname=`${n.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function sg(){let t=D.useContext(Lr);return Bu(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function n5(){let t=D.useContext(In);return Bu(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Bs=D.createContext(void 0);Bs.displayName="FrameworkContext";function lg(){let t=D.useContext(Bs);return Bu(t,"You must render this element inside a <HydratedRouter> element"),t}function o5(t,n){let i=D.useContext(Bs),[a,l]=D.useState(!1),[A,u]=D.useState(!1),{onFocus:f,onBlur:C,onMouseEnter:m,onMouseLeave:h,onTouchStart:p}=n,v=D.useRef(null);D.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let B=T=>{T.forEach(w=>{u(w.isIntersecting)})},F=new IntersectionObserver(B,{threshold:.5});return v.current&&F.observe(v.current),()=>{F.disconnect()}}},[t]),D.useEffect(()=>{if(a){let B=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(B)}}},[a]);let x=()=>{l(!0)},y=()=>{l(!1),u(!1)};return i?t!=="intent"?[A,v,{}]:[A,v,{onFocus:Ko(f,x),onBlur:Ko(C,y),onMouseEnter:Ko(m,x),onMouseLeave:Ko(h,y),onTouchStart:Ko(p,x)}]:[!1,v,{}]}function Ko(t,n){return i=>{t&&t(i),i.defaultPrevented||n(i)}}function i5({page:t,...n}){let{router:i}=sg(),a=D.useMemo(()=>ht(i.routes,t,i.basename),[i.routes,t,i.basename]);return a?D.createElement(s5,{page:t,matches:a,...n}):null}function a5(t){let{manifest:n,routeModules:i}=lg(),[a,l]=D.useState([]);return D.useEffect(()=>{let A=!1;return ZB(t,n,i).then(u=>{A||l(u)}),()=>{A=!0}},[t,n,i]),a}function s5({page:t,matches:n,...i}){let a=i0(),{manifest:l,routeModules:A}=lg(),{basename:u}=sg(),{loaderData:f,matches:C}=n5(),m=D.useMemo(()=>Tp(t,n,C,l,a,"data"),[t,n,C,l,a]),h=D.useMemo(()=>Tp(t,n,C,l,a,"assets"),[t,n,C,l,a]),p=D.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let y=new Set,B=!1;if(n.forEach(T=>{var R;let w=l.routes[T.route.id];!w||!w.hasLoader||(!m.some(M=>M.route.id===T.route.id)&&T.route.id in f&&((R=A[T.route.id])!=null&&R.shouldRevalidate)||w.hasClientLoader?B=!0:y.add(T.route.id))}),y.size===0)return[];let F=r5(t,u);return B&&y.size>0&&F.searchParams.set("_routes",n.filter(T=>y.has(T.route.id)).map(T=>T.route.id).join(",")),[F.pathname+F.search]},[u,f,a,l,m,n,t,A]),v=D.useMemo(()=>XB(h,l),[h,l]),x=a5(h);return D.createElement(D.Fragment,null,p.map(y=>D.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...i})),v.map(y=>D.createElement("link",{key:y,rel:"modulepreload",href:y,...i})),x.map(({key:y,link:B})=>D.createElement("link",{key:y,...B})))}function l5(...t){return n=>{t.forEach(i=>{typeof i=="function"?i(n):i!=null&&(i.current=n)})}}var Ag=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ag&&(window.__reactRouterVersion="7.6.0")}catch{}function A5(t,n){return Qy({basename:n==null?void 0:n.basename,unstable_getContext:n==null?void 0:n.unstable_getContext,future:n==null?void 0:n.future,history:xy({window:n==null?void 0:n.window}),hydrationData:(n==null?void 0:n.hydrationData)||c5(),routes:t,mapRouteProperties:NB,hydrationRouteProperties:_B,dataStrategy:n==null?void 0:n.dataStrategy,patchRoutesOnNavigation:n==null?void 0:n.patchRoutesOnNavigation,window:n==null?void 0:n.window}).initialize()}function c5(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:u5(t.errors)}),t}function u5(t){if(!t)return null;let n=Object.entries(t),i={};for(let[a,l]of n)if(l&&l.__type==="RouteErrorResponse")i[a]=new is(l.status,l.statusText,l.data,l.internal===!0);else if(l&&l.__type==="Error"){if(l.__subType){let A=window[l.__subType];if(typeof A=="function")try{let u=new A(l.message);u.stack="",i[a]=u}catch{}}if(i[a]==null){let A=new Error(l.message);A.stack="",i[a]=A}}else i[a]=l;return i}var cg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,On=D.forwardRef(function({onClick:n,discover:i="render",prefetch:a="none",relative:l,reloadDocument:A,replace:u,state:f,target:C,to:m,preventScrollReset:h,viewTransition:p,...v},x){let{basename:y}=D.useContext(Te),B=typeof m=="string"&&cg.test(m),F,T=!1;if(typeof m=="string"&&B&&(F=m,Ag))try{let z=new URL(window.location.href),r2=m.startsWith("//")?new URL(z.protocol+m):new URL(m),c2=Ae(r2.pathname,y);r2.origin===z.origin&&c2!=null?m=c2+r2.search+r2.hash:T=!0}catch{D0(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=hB(m,{relative:l}),[R,M,N]=o5(a,v),E=C5(m,{replace:u,state:f,target:C,preventScrollReset:h,relative:l,viewTransition:p});function k(z){n&&n(z),z.defaultPrevented||E(z)}let j=D.createElement("a",{...v,...N,href:F||w,onClick:T||A?n:k,ref:l5(x,M),target:C,"data-discover":!B&&i==="render"?"true":void 0});return R&&!B?D.createElement(D.Fragment,null,j,D.createElement(i5,{page:w})):j});On.displayName="Link";var f5=D.forwardRef(function({"aria-current":n="page",caseSensitive:i=!1,className:a="",end:l=!1,style:A,to:u,viewTransition:f,children:C,...m},h){let p=li(u,{relative:m.relative}),v=i0(),x=D.useContext(In),{navigator:y,basename:B}=D.useContext(Te),F=x!=null&&y5(p)&&f===!0,T=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,w=v.pathname,R=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;i||(w=w.toLowerCase(),R=R?R.toLowerCase():null,T=T.toLowerCase()),R&&B&&(R=Ae(R,B)||R);const M=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let N=w===T||!l&&w.startsWith(T)&&w.charAt(M)==="/",E=R!=null&&(R===T||!l&&R.startsWith(T)&&R.charAt(T.length)==="/"),k={isActive:N,isPending:E,isTransitioning:F},j=N?n:void 0,z;typeof a=="function"?z=a(k):z=[a,N?"active":null,E?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let r2=typeof A=="function"?A(k):A;return D.createElement(On,{...m,"aria-current":j,className:z,ref:h,style:r2,to:u,viewTransition:f},typeof C=="function"?C(k):C)});f5.displayName="NavLink";var d5=D.forwardRef(({discover:t="render",fetcherKey:n,navigate:i,reloadDocument:a,replace:l,state:A,method:u=Za,action:f,onSubmit:C,relative:m,preventScrollReset:h,viewTransition:p,...v},x)=>{let y=h5(),B=D5(f,{relative:m}),F=u.toLowerCase()==="get"?"get":"post",T=typeof f=="string"&&cg.test(f),w=R=>{if(C&&C(R),R.defaultPrevented)return;R.preventDefault();let M=R.nativeEvent.submitter,N=(M==null?void 0:M.getAttribute("formmethod"))||u;y(M||R.currentTarget,{fetcherKey:n,method:N,navigate:i,replace:l,state:A,relative:m,preventScrollReset:h,viewTransition:p})};return D.createElement("form",{ref:x,method:F,action:B,onSubmit:a?C:w,...v,"data-discover":!T&&t==="render"?"true":void 0})});d5.displayName="Form";function ug({getKey:t,storageKey:n,...i}){let a=D.useContext(Bs),{basename:l}=D.useContext(Te),A=i0(),u=ig();v5({getKey:t,storageKey:n});let f=D.useMemo(()=>{if(!a||!t)return null;let m=qc(A,u,l,t);return m!==A.key?m:null},[]);if(!a||a.isSpaMode)return null;let C=((m,h)=>{if(!window.history.state||!window.history.state.key){let p=Math.random().toString(32).slice(2);window.history.replaceState({key:p},"")}try{let v=JSON.parse(sessionStorage.getItem(m)||"{}")[h||window.history.state.key];typeof v=="number"&&window.scrollTo(0,v)}catch(p){console.error(p),sessionStorage.removeItem(m)}}).toString();return D.createElement("script",{...i,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${C})(${JSON.stringify(n||Ic)}, ${JSON.stringify(f)})`}})}ug.displayName="ScrollRestoration";function fg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Su(t){let n=D.useContext(Lr);return k2(n,fg(t)),n}function m5(t){let n=D.useContext(In);return k2(n,fg(t)),n}function C5(t,{target:n,replace:i,state:a,preventScrollReset:l,relative:A,viewTransition:u}={}){let f=Du(),C=i0(),m=li(t,{relative:A});return D.useCallback(h=>{if(WB(h,n)){h.preventDefault();let p=i!==void 0?i:Qt(C)===Qt(m);f(t,{replace:p,state:a,preventScrollReset:l,relative:A,viewTransition:u})}},[C,f,m,i,a,n,t,l,A,u])}var p5=0,g5=()=>`__${String(++p5)}__`;function h5(){let{router:t}=Su("useSubmit"),{basename:n}=D.useContext(Te),i=wB();return D.useCallback(async(a,l={})=>{let{action:A,method:u,encType:f,formData:C,body:m}=YB(a,n);if(l.navigate===!1){let h=l.fetcherKey||g5();await t.fetch(h,i,l.action||A,{preventScrollReset:l.preventScrollReset,formData:C,body:m,formMethod:l.method||u,formEncType:l.encType||f,flushSync:l.flushSync})}else await t.navigate(l.action||A,{preventScrollReset:l.preventScrollReset,formData:C,body:m,formMethod:l.method||u,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:i,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,n,i])}function D5(t,{relative:n}={}){let{basename:i}=D.useContext(Te),a=D.useContext(yt);k2(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),A={...li(t||".",{relative:n})},u=i0();if(t==null){A.search=u.search;let f=new URLSearchParams(A.search),C=f.getAll("index");if(C.some(h=>h==="")){f.delete("index"),C.filter(p=>p).forEach(p=>f.append("index",p));let h=f.toString();A.search=h?`?${h}`:""}}return(!t||t===".")&&l.route.index&&(A.search=A.search?A.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(A.pathname=A.pathname==="/"?i:Ke([i,A.pathname])),Qt(A)}var Ic="react-router-scroll-positions",La={};function qc(t,n,i,a){let l=null;return a&&(i!=="/"?l=a({...t,pathname:Ae(t.pathname,i)||t.pathname},n):l=a(t,n)),l==null&&(l=t.key),l}function v5({getKey:t,storageKey:n}={}){let{router:i}=Su("useScrollRestoration"),{restoreScrollPosition:a,preventScrollReset:l}=m5("useScrollRestoration"),{basename:A}=D.useContext(Te),u=i0(),f=ig(),C=EB();D.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),x5(D.useCallback(()=>{if(C.state==="idle"){let m=qc(u,f,A,t);La[m]=window.scrollY}try{sessionStorage.setItem(n||Ic,JSON.stringify(La))}catch(m){D0(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${m}).`)}window.history.scrollRestoration="auto"},[C.state,t,A,u,f,n])),typeof document<"u"&&(D.useLayoutEffect(()=>{try{let m=sessionStorage.getItem(n||Ic);m&&(La=JSON.parse(m))}catch{}},[n]),D.useLayoutEffect(()=>{let m=i==null?void 0:i.enableScrollRestoration(La,()=>window.scrollY,t?(h,p)=>qc(h,p,A,t):void 0);return()=>m&&m()},[i,A,t]),D.useLayoutEffect(()=>{if(a!==!1){if(typeof a=="number"){window.scrollTo(0,a);return}if(u.hash){let m=document.getElementById(decodeURIComponent(u.hash.slice(1)));if(m){m.scrollIntoView();return}}l!==!0&&window.scrollTo(0,0)}},[u,a,l]))}function x5(t,n){let{capture:i}={};D.useEffect(()=>{let a=i!=null?{capture:i}:void 0;return window.addEventListener("pagehide",t,a),()=>{window.removeEventListener("pagehide",t,a)}},[t,i])}function y5(t,n={}){let i=D.useContext(gu);k2(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Su("useViewTransitionState"),l=li(t,{relative:n.relative});if(!i.isTransitioning)return!1;let A=Ae(i.currentLocation.pathname,a)||i.currentLocation.pathname,u=Ae(i.nextLocation.pathname,a)||i.nextLocation.pathname;return Er(l.pathname,u)!=null||Er(l.pathname,A)!=null}[...t5];function Oc(t){return Array.isArray(t)?t.map(Oc):typeof t=="object"&&t!==null?Object.keys(t).reduce((n,i)=>(n[i]=Oc(t[i]),n),{}):typeof t=="string"&&t.includes("_vocs-fn_")?new Function(`return ${t.slice(9)}`)():t}const dg=Oc({aiCta:!0,blogDir:"./pages/blog",rootDir:"docs",title:"MCP-Go",titleTemplate:"%s – MCP-Go",search:{fuzzy:!0},baseUrl:"https://mcp-go.dev",basePath:"",logoUrl:"/logo.png",description:"A Go implementation of the Model Context Protocol (MCP), enabling seamless integration between LLM applications and external data sources and tools.",sidebar:[{text:"Getting Started",link:"/getting-started"},{text:"Quick Start",link:"/quick-start"},{text:"Core Concepts",link:"/core-concepts"},{text:"Building MCP Servers",collapsed:!1,items:[{text:"Overview",link:"/servers"},{text:"Server Basics",link:"/servers/basics"},{text:"Resources",link:"/servers/resources"},{text:"Tools",link:"/servers/tools"},{text:"Prompts",link:"/servers/prompts"},{text:"Advanced Features",link:"/servers/advanced"}]},{text:"Transport Options",collapsed:!1,items:[{text:"Overview",link:"/transports"},{text:"STDIO Transport",link:"/transports/stdio"},{text:"SSE Transport",link:"/transports/sse"},{text:"HTTP Transport",link:"/transports/http"},{text:"In-Process Transport",link:"/transports/inprocess"}]},{text:"Building MCP Clients",collapsed:!1,items:[{text:"Overview",link:"/clients"},{text:"Client Basics",link:"/clients/basics"},{text:"Client Operations",link:"/clients/operations"},{text:"Client Transports",link:"/clients/transports"}]},{text:"Advanced",collapsed:!0,items:[{text:"Server Sampling",link:"/servers/advanced-sampling"},{text:"Client Sampling",link:"/clients/advanced-sampling"}]}],socials:[{icon:"github",link:"https://github.com/mark3labs/mcp-go",label:"GitHub",type:"github"}],font:{},markdown:{code:{themes:{dark:"github-dark-dimmed",light:"github-light"}}},topNav:[],theme:{},vite:{}}),B5="modulepreload",S5=function(t){return"/"+t},Rp={},P2=function(n,i,a){let l=Promise.resolve();if(i&&i.length>0){let u=function(m){return Promise.all(m.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),C=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));l=u(i.map(m=>{if(m=S5(m),m in Rp)return;Rp[m]=!0;const h=m.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${p}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":B5,h||(v.as="script"),v.crossOrigin="",v.href=m,C&&v.setAttribute("nonce",C),document.head.appendChild(v),h)return new Promise((x,y)=>{v.addEventListener("load",x),v.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${m}`)))})}))}function A(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return l.then(u=>{for(const f of u||[])f.status==="rejected"&&A(f.reason);return n().catch(A)})},mg=D.createContext(dg);function Cg(){return dg}function F5({children:t,config:n}){const[i,a]=D.useState(()=>n||Cg());return D.useEffect(()=>{},[]),D.useEffect(()=>{},[i]),g.jsx(mg.Provider,{value:i,children:t})}function C0(){return D.useContext(mg)}const Fu=[{lazy:()=>P2(()=>import("./core-concepts-C5mfJHcs.js"),[]),path:"/core-concepts",type:"mdx",filePath:"core-concepts.mdx",content:"%23%20Core%20Concepts%0A%0AUnderstanding%20the%20fundamental%20concepts%20of%20MCP%20and%20how%20MCP-Go%20implements%20them%20is%20essential%20for%20building%20effective%20MCP%20servers%20and%20clients.%0A%0A%23%23%20MCP%20Protocol%20Fundamentals%0A%0AThe%20Model%20Context%20Protocol%20defines%20four%20core%20concepts%20that%20enable%20LLMs%20to%20interact%20with%20external%20systems%20safely%20and%20effectively.%0A%0A%23%23%23%20Resources%0A%0AResources%20are%20like%20GET%20endpoints%20-%20they%20expose%20data%20to%20LLMs%20in%20a%20read-only%20manner.%20Think%20of%20them%20as%20files%2C%20database%20records%2C%20or%20API%20responses%20that%20an%20LLM%20can%20access.%0A%0A**Key%20characteristics%3A**%0A-%20**Read-only**%3A%20LLMs%20can%20fetch%20but%20not%20modify%20resources%0A-%20**URI-based**%3A%20Each%20resource%20has%20a%20unique%20identifier%0A-%20**Typed%20content**%3A%20Resources%20specify%20their%20MIME%20type%20(text%2C%20JSON%2C%20binary%2C%20etc.)%0A-%20**Dynamic%20or%20static**%3A%20Can%20be%20pre-defined%20or%20generated%20on-demand%0A%0A**Example%20use%20cases%3A**%0A-%20File%20system%20access%20(%60file%3A%2F%2F%2Fpath%2Fto%2Fdocument.txt%60)%0A-%20Database%20records%20(%60db%3A%2F%2Fusers%2F123%60)%0A-%20API%20data%20(%60api%3A%2F%2Fweather%2Fcurrent%60)%0A-%20Configuration%20files%20(%60config%3A%2F%2Fapp.json%60)%0A%0A%60%60%60go%0A%2F%2F%20Static%20resource%0Aresource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22docs%3A%2F%2Freadme%22%2C%0A%20%20%20%20%22Project%20README%22%2C%0A%20%20%20%20mcp.WithResourceDescription(%22The%20project's%20main%20documentation%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A)%0A%0A%2F%2F%20Dynamic%20resource%20with%20template%0AuserResource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22users%3A%2F%2F%7Buser_id%7D%22%2C%0A%20%20%20%20%22User%20Profile%22%2C%0A%20%20%20%20mcp.WithResourceDescription(%22User%20profile%20information%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Tools%0A%0ATools%20are%20like%20POST%20endpoints%20-%20they%20provide%20functionality%20that%20LLMs%20can%20invoke%20to%20take%20actions%20or%20perform%20computations.%0A%0A**Key%20characteristics%3A**%0A-%20**Action-oriented**%3A%20Tools%20do%20things%20rather%20than%20just%20return%20data%0A-%20**Parameterized**%3A%20Accept%20structured%20input%20arguments%0A-%20**Typed%20schemas**%3A%20Define%20expected%20parameter%20types%20and%20constraints%0A-%20**Return%20results**%3A%20Provide%20structured%20output%20back%20to%20the%20LLM%0A%0A**Example%20use%20cases%3A**%0A-%20Calculations%20(%60calculate%60%2C%20%60convert_units%60)%0A-%20File%20operations%20(%60create_file%60%2C%20%60search_files%60)%0A-%20API%20calls%20(%60send_email%60%2C%20%60create_ticket%60)%0A-%20System%20commands%20(%60run_command%60%2C%20%60check_status%60)%0A%0A%60%60%60go%0A%2F%2F%20Simple%20calculation%20tool%0AcalcTool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20mcp.WithDescription(%22Perform%20arithmetic%20operations%22)%2C%0A%20%20%20%20mcp.WithString(%22operation%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Enum(%22add%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22divide%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required())%2C%0A)%0A%0A%2F%2F%20File%20creation%20tool%0AfileTool%20%3A%3D%20mcp.NewTool(%22create_file%22%2C%0A%20%20%20%20mcp.WithDescription(%22Create%20a%20new%20file%20with%20content%22)%2C%0A%20%20%20%20mcp.WithString(%22path%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithString(%22content%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithString(%22encoding%22%2C%20mcp.Default(%22utf-8%22))%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Prompts%0A%0APrompts%20are%20reusable%20interaction%20templates%20that%20help%20structure%20conversations%20between%20users%20and%20LLMs.%0A%0A**Key%20characteristics%3A**%0A-%20**Template-based**%3A%20Use%20placeholders%20for%20dynamic%20content%0A-%20**Reusable**%3A%20Can%20be%20invoked%20multiple%20times%20with%20different%20arguments%0A-%20**Structured**%3A%20Define%20clear%20input%20parameters%20and%20expected%20outputs%0A-%20**Context-aware**%3A%20Can%20include%20relevant%20resources%20or%20tool%20suggestions%0A%0A**Example%20use%20cases%3A**%0A-%20Code%20review%20templates%0A-%20Documentation%20generation%0A-%20Data%20analysis%20workflows%0A-%20Creative%20writing%20prompts%0A%0A%60%60%60go%0A%2F%2F%20Code%20review%20prompt%0AreviewPrompt%20%3A%3D%20mcp.NewPrompt(%22code_review%22%2C%0A%20%20%20%20mcp.WithPromptDescription(%22Review%20code%20for%20best%20practices%20and%20issues%22)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22code%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22The%20code%20to%20review%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22language%22%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Programming%20language%22)%2C%0A%20%20%20%20)%2C%0A)%0A%0A%2F%2F%20Data%20analysis%20prompt%0AanalysisPrompt%20%3A%3D%20mcp.NewPrompt(%22analyze_data%22%2C%0A%20%20%20%20mcp.WithPromptDescription(%22Analyze%20dataset%20and%20provide%20insights%22)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22dataset_uri%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithPromptArgument(%22focus_areas%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Description(%22Specific%20areas%20to%20focus%20analysis%20on%22)%2C%0A%20%20%20%20)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Transports%0A%0ATransports%20define%20how%20MCP%20clients%20and%20servers%20communicate.%20MCP-Go%20supports%20multiple%20transport%20methods%20to%20fit%20different%20deployment%20scenarios.%0A%0A**Available%20transports%3A**%0A%0A1.%20**Stdio**%20-%20Standard%20input%2Foutput%20(most%20common)%0A%20%20%20-%20Best%20for%3A%20Local%20tools%2C%20CLI%20integration%2C%20desktop%20applications%0A%20%20%20-%20Pros%3A%20Simple%2C%20secure%2C%20no%20network%20setup%0A%20%20%20-%20Cons%3A%20Local%20only%2C%20single%20client%0A%0A2.%20**Server-Sent%20Events%20(SSE)**%20-%20HTTP-based%20streaming%0A%20%20%20-%20Best%20for%3A%20Web%20applications%2C%20real-time%20updates%0A%20%20%20-%20Pros%3A%20Web-friendly%2C%20real-time%2C%20multiple%20clients%0A%20%20%20-%20Cons%3A%20HTTP%20overhead%2C%20one-way%20streaming%0A%0A3.%20**HTTP**%20-%20Traditional%20request%2Fresponse%0A%20%20%20-%20Best%20for%3A%20Web%20services%2C%20REST-like%20APIs%0A%20%20%20-%20Pros%3A%20Standard%20protocol%2C%20caching%2C%20load%20balancing%0A%20%20%20-%20Cons%3A%20No%20real-time%20updates%2C%20more%20complex%0A%0A%60%60%60go%0A%2F%2F%20Stdio%20transport%20(most%20common)%0Aserver.ServeStdio(s)%0A%0A%2F%2F%20HTTP%20transport%0Aserver.ServeHTTP(s%2C%20%22%3A8080%22)%0A%0A%2F%2F%20SSE%20transport%0Aserver.ServeSSE(s%2C%20%22%3A8080%22)%0A%60%60%60%0A%0A%23%23%20SDK%20Architecture%0A%0AMCP-Go%20provides%20a%20clean%20architecture%20that%20abstracts%20the%20complexity%20of%20the%20MCP%20protocol%20while%20giving%20you%20full%20control%20when%20needed.%0A%0A%23%23%23%20Server%20vs%20Client%0A%0AUnderstanding%20when%20to%20build%20servers%20versus%20clients%20is%20crucial%20for%20effective%20MCP%20integration.%0A%0A**MCP%20Servers%3A**%0A-%20**Purpose**%3A%20Expose%20tools%2C%20resources%2C%20and%20prompts%20to%20LLMs%0A-%20**Use%20cases**%3A%20%0A%20%20-%20Database%20access%20layers%0A%20%20-%20File%20system%20tools%0A%20%20-%20API%20integrations%0A%20%20-%20Custom%20business%20logic%0A-%20**Characteristics**%3A%20Passive%2C%20respond%20to%20requests%2C%20stateful%0A%0A%60%60%60go%0A%2F%2F%20Server%20example%20-%20exposes%20functionality%0As%20%3A%3D%20server.NewMCPServer(%22Database%20Tools%22%2C%20%221.0.0%22)%0As.AddTool(queryTool%2C%20handleQuery)%0As.AddResource(tableResource%2C%20handleTableAccess)%0Aserver.ServeStdio(s)%0A%60%60%60%0A%0A**MCP%20Clients%3A**%0A-%20**Purpose**%3A%20Connect%20to%20and%20use%20MCP%20servers%0A-%20**Use%20cases**%3A%0A%20%20-%20LLM%20applications%0A%20%20-%20Orchestration%20tools%0A%20%20-%20Testing%20and%20debugging%0A%20%20-%20Server%20composition%0A-%20**Characteristics**%3A%20Active%2C%20make%20requests%2C%20coordinate%20multiple%20servers%0A%0A%60%60%60go%0A%2F%2F%20Client%20example%20-%20uses%20functionality%0Aclient%20%3A%3D%20client.NewStdioClient(%22database-server%22)%0Atools%2C%20_%20%3A%3D%20client.ListTools(ctx)%0Aresult%2C%20_%20%3A%3D%20client.CallTool(ctx%2C%20queryRequest)%0A%60%60%60%0A%0A%23%23%23%20Transport%20Layer%0A%0AThe%20transport%20layer%20abstracts%20communication%20protocols%2C%20allowing%20you%20to%20focus%20on%20business%20logic%20rather%20than%20protocol%20details.%0A%0A**Key%20benefits%3A**%0A-%20**Protocol%20agnostic**%3A%20Same%20server%20code%20works%20with%20any%20transport%0A-%20**Automatic%20serialization**%3A%20JSON%20marshaling%2Funmarshaling%20handled%20automatically%0A-%20**Error%20handling**%3A%20Transport-specific%20errors%20are%20normalized%0A-%20**Connection%20management**%3A%20Automatic%20reconnection%20and%20cleanup%0A%0A%60%60%60go%0A%2F%2F%20Same%20server%20works%20with%20any%20transport%0As%20%3A%3D%20server.NewMCPServer(%22My%20Server%22%2C%20%221.0.0%22)%0A%0A%2F%2F%20Choose%20transport%20at%20runtime%0Aswitch%20transport%20%7B%0Acase%20%22stdio%22%3A%0A%20%20%20%20server.ServeStdio(s)%0Acase%20%22http%22%3A%0A%20%20%20%20server.ServeHTTP(s%2C%20%22%3A8080%22)%0Acase%20%22sse%22%3A%0A%20%20%20%20server.ServeSSE(s%2C%20%22%3A8080%22)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Session%20Management%0A%0AMCP-Go%20handles%20session%20management%20automatically%2C%20supporting%20multiple%20concurrent%20clients%20with%20proper%20isolation.%0A%0A**Features%3A**%0A-%20**Multi-client%20support**%3A%20Multiple%20LLMs%20can%20connect%20simultaneously%0A-%20**Session%20isolation**%3A%20Each%20client%20has%20independent%20state%0A-%20**Resource%20cleanup**%3A%20Automatic%20cleanup%20when%20clients%20disconnect%0A-%20**Concurrent%20safety**%3A%20Thread-safe%20operations%20across%20all%20sessions%0A%0A**Session%20lifecycle%3A**%0A1.%20**Initialize**%3A%20Client%20connects%20and%20exchanges%20capabilities%0A2.%20**Active**%3A%20Client%20makes%20requests%2C%20server%20responds%0A3.%20**Cleanup**%3A%20Connection%20closes%2C%20resources%20are%20freed%0A%0A%60%60%60go%0A%2F%2F%20Server%20automatically%20handles%20multiple%20sessions%0As%20%3A%3D%20server.NewMCPServer(%22Multi-Client%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20server.WithHooks(%26server.Hooks%7B%0A%20%20%20%20%20%20%20%20OnSessionStart%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20connected%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20OnSessionEnd%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20disconnected%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%2C%0A)%0A%60%60%60%0A%0A**State%20management%20patterns%3A**%0A%0A%60%60%60go%0A%2F%2F%20Per-session%20state%0Atype%20SessionState%20struct%20%7B%0A%20%20%20%20UserID%20%20%20string%0A%20%20%20%20Settings%20map%5Bstring%5Dinterface%7B%7D%0A%7D%0A%0Avar%20sessions%20%3D%20make(map%5Bstring%5D*SessionState)%0A%0Afunc%20toolHandler(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20state%20%3A%3D%20sessions%5BsessionID%5D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20session-specific%20state%0A%20%20%20%20return%20processWithState(state%2C%20req)%0A%7D%0A%60%60%60",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./core-concepts-C5mfJHcs.js"),[]),path:"/core-concepts.html",type:"mdx",filePath:"core-concepts.mdx",content:"%23%20Core%20Concepts%0A%0AUnderstanding%20the%20fundamental%20concepts%20of%20MCP%20and%20how%20MCP-Go%20implements%20them%20is%20essential%20for%20building%20effective%20MCP%20servers%20and%20clients.%0A%0A%23%23%20MCP%20Protocol%20Fundamentals%0A%0AThe%20Model%20Context%20Protocol%20defines%20four%20core%20concepts%20that%20enable%20LLMs%20to%20interact%20with%20external%20systems%20safely%20and%20effectively.%0A%0A%23%23%23%20Resources%0A%0AResources%20are%20like%20GET%20endpoints%20-%20they%20expose%20data%20to%20LLMs%20in%20a%20read-only%20manner.%20Think%20of%20them%20as%20files%2C%20database%20records%2C%20or%20API%20responses%20that%20an%20LLM%20can%20access.%0A%0A**Key%20characteristics%3A**%0A-%20**Read-only**%3A%20LLMs%20can%20fetch%20but%20not%20modify%20resources%0A-%20**URI-based**%3A%20Each%20resource%20has%20a%20unique%20identifier%0A-%20**Typed%20content**%3A%20Resources%20specify%20their%20MIME%20type%20(text%2C%20JSON%2C%20binary%2C%20etc.)%0A-%20**Dynamic%20or%20static**%3A%20Can%20be%20pre-defined%20or%20generated%20on-demand%0A%0A**Example%20use%20cases%3A**%0A-%20File%20system%20access%20(%60file%3A%2F%2F%2Fpath%2Fto%2Fdocument.txt%60)%0A-%20Database%20records%20(%60db%3A%2F%2Fusers%2F123%60)%0A-%20API%20data%20(%60api%3A%2F%2Fweather%2Fcurrent%60)%0A-%20Configuration%20files%20(%60config%3A%2F%2Fapp.json%60)%0A%0A%60%60%60go%0A%2F%2F%20Static%20resource%0Aresource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22docs%3A%2F%2Freadme%22%2C%0A%20%20%20%20%22Project%20README%22%2C%0A%20%20%20%20mcp.WithResourceDescription(%22The%20project's%20main%20documentation%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A)%0A%0A%2F%2F%20Dynamic%20resource%20with%20template%0AuserResource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22users%3A%2F%2F%7Buser_id%7D%22%2C%0A%20%20%20%20%22User%20Profile%22%2C%0A%20%20%20%20mcp.WithResourceDescription(%22User%20profile%20information%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Tools%0A%0ATools%20are%20like%20POST%20endpoints%20-%20they%20provide%20functionality%20that%20LLMs%20can%20invoke%20to%20take%20actions%20or%20perform%20computations.%0A%0A**Key%20characteristics%3A**%0A-%20**Action-oriented**%3A%20Tools%20do%20things%20rather%20than%20just%20return%20data%0A-%20**Parameterized**%3A%20Accept%20structured%20input%20arguments%0A-%20**Typed%20schemas**%3A%20Define%20expected%20parameter%20types%20and%20constraints%0A-%20**Return%20results**%3A%20Provide%20structured%20output%20back%20to%20the%20LLM%0A%0A**Example%20use%20cases%3A**%0A-%20Calculations%20(%60calculate%60%2C%20%60convert_units%60)%0A-%20File%20operations%20(%60create_file%60%2C%20%60search_files%60)%0A-%20API%20calls%20(%60send_email%60%2C%20%60create_ticket%60)%0A-%20System%20commands%20(%60run_command%60%2C%20%60check_status%60)%0A%0A%60%60%60go%0A%2F%2F%20Simple%20calculation%20tool%0AcalcTool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20mcp.WithDescription(%22Perform%20arithmetic%20operations%22)%2C%0A%20%20%20%20mcp.WithString(%22operation%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Enum(%22add%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22divide%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required())%2C%0A)%0A%0A%2F%2F%20File%20creation%20tool%0AfileTool%20%3A%3D%20mcp.NewTool(%22create_file%22%2C%0A%20%20%20%20mcp.WithDescription(%22Create%20a%20new%20file%20with%20content%22)%2C%0A%20%20%20%20mcp.WithString(%22path%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithString(%22content%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithString(%22encoding%22%2C%20mcp.Default(%22utf-8%22))%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Prompts%0A%0APrompts%20are%20reusable%20interaction%20templates%20that%20help%20structure%20conversations%20between%20users%20and%20LLMs.%0A%0A**Key%20characteristics%3A**%0A-%20**Template-based**%3A%20Use%20placeholders%20for%20dynamic%20content%0A-%20**Reusable**%3A%20Can%20be%20invoked%20multiple%20times%20with%20different%20arguments%0A-%20**Structured**%3A%20Define%20clear%20input%20parameters%20and%20expected%20outputs%0A-%20**Context-aware**%3A%20Can%20include%20relevant%20resources%20or%20tool%20suggestions%0A%0A**Example%20use%20cases%3A**%0A-%20Code%20review%20templates%0A-%20Documentation%20generation%0A-%20Data%20analysis%20workflows%0A-%20Creative%20writing%20prompts%0A%0A%60%60%60go%0A%2F%2F%20Code%20review%20prompt%0AreviewPrompt%20%3A%3D%20mcp.NewPrompt(%22code_review%22%2C%0A%20%20%20%20mcp.WithPromptDescription(%22Review%20code%20for%20best%20practices%20and%20issues%22)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22code%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22The%20code%20to%20review%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22language%22%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Programming%20language%22)%2C%0A%20%20%20%20)%2C%0A)%0A%0A%2F%2F%20Data%20analysis%20prompt%0AanalysisPrompt%20%3A%3D%20mcp.NewPrompt(%22analyze_data%22%2C%0A%20%20%20%20mcp.WithPromptDescription(%22Analyze%20dataset%20and%20provide%20insights%22)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22dataset_uri%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithPromptArgument(%22focus_areas%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Description(%22Specific%20areas%20to%20focus%20analysis%20on%22)%2C%0A%20%20%20%20)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Transports%0A%0ATransports%20define%20how%20MCP%20clients%20and%20servers%20communicate.%20MCP-Go%20supports%20multiple%20transport%20methods%20to%20fit%20different%20deployment%20scenarios.%0A%0A**Available%20transports%3A**%0A%0A1.%20**Stdio**%20-%20Standard%20input%2Foutput%20(most%20common)%0A%20%20%20-%20Best%20for%3A%20Local%20tools%2C%20CLI%20integration%2C%20desktop%20applications%0A%20%20%20-%20Pros%3A%20Simple%2C%20secure%2C%20no%20network%20setup%0A%20%20%20-%20Cons%3A%20Local%20only%2C%20single%20client%0A%0A2.%20**Server-Sent%20Events%20(SSE)**%20-%20HTTP-based%20streaming%0A%20%20%20-%20Best%20for%3A%20Web%20applications%2C%20real-time%20updates%0A%20%20%20-%20Pros%3A%20Web-friendly%2C%20real-time%2C%20multiple%20clients%0A%20%20%20-%20Cons%3A%20HTTP%20overhead%2C%20one-way%20streaming%0A%0A3.%20**HTTP**%20-%20Traditional%20request%2Fresponse%0A%20%20%20-%20Best%20for%3A%20Web%20services%2C%20REST-like%20APIs%0A%20%20%20-%20Pros%3A%20Standard%20protocol%2C%20caching%2C%20load%20balancing%0A%20%20%20-%20Cons%3A%20No%20real-time%20updates%2C%20more%20complex%0A%0A%60%60%60go%0A%2F%2F%20Stdio%20transport%20(most%20common)%0Aserver.ServeStdio(s)%0A%0A%2F%2F%20HTTP%20transport%0Aserver.ServeHTTP(s%2C%20%22%3A8080%22)%0A%0A%2F%2F%20SSE%20transport%0Aserver.ServeSSE(s%2C%20%22%3A8080%22)%0A%60%60%60%0A%0A%23%23%20SDK%20Architecture%0A%0AMCP-Go%20provides%20a%20clean%20architecture%20that%20abstracts%20the%20complexity%20of%20the%20MCP%20protocol%20while%20giving%20you%20full%20control%20when%20needed.%0A%0A%23%23%23%20Server%20vs%20Client%0A%0AUnderstanding%20when%20to%20build%20servers%20versus%20clients%20is%20crucial%20for%20effective%20MCP%20integration.%0A%0A**MCP%20Servers%3A**%0A-%20**Purpose**%3A%20Expose%20tools%2C%20resources%2C%20and%20prompts%20to%20LLMs%0A-%20**Use%20cases**%3A%20%0A%20%20-%20Database%20access%20layers%0A%20%20-%20File%20system%20tools%0A%20%20-%20API%20integrations%0A%20%20-%20Custom%20business%20logic%0A-%20**Characteristics**%3A%20Passive%2C%20respond%20to%20requests%2C%20stateful%0A%0A%60%60%60go%0A%2F%2F%20Server%20example%20-%20exposes%20functionality%0As%20%3A%3D%20server.NewMCPServer(%22Database%20Tools%22%2C%20%221.0.0%22)%0As.AddTool(queryTool%2C%20handleQuery)%0As.AddResource(tableResource%2C%20handleTableAccess)%0Aserver.ServeStdio(s)%0A%60%60%60%0A%0A**MCP%20Clients%3A**%0A-%20**Purpose**%3A%20Connect%20to%20and%20use%20MCP%20servers%0A-%20**Use%20cases**%3A%0A%20%20-%20LLM%20applications%0A%20%20-%20Orchestration%20tools%0A%20%20-%20Testing%20and%20debugging%0A%20%20-%20Server%20composition%0A-%20**Characteristics**%3A%20Active%2C%20make%20requests%2C%20coordinate%20multiple%20servers%0A%0A%60%60%60go%0A%2F%2F%20Client%20example%20-%20uses%20functionality%0Aclient%20%3A%3D%20client.NewStdioClient(%22database-server%22)%0Atools%2C%20_%20%3A%3D%20client.ListTools(ctx)%0Aresult%2C%20_%20%3A%3D%20client.CallTool(ctx%2C%20queryRequest)%0A%60%60%60%0A%0A%23%23%23%20Transport%20Layer%0A%0AThe%20transport%20layer%20abstracts%20communication%20protocols%2C%20allowing%20you%20to%20focus%20on%20business%20logic%20rather%20than%20protocol%20details.%0A%0A**Key%20benefits%3A**%0A-%20**Protocol%20agnostic**%3A%20Same%20server%20code%20works%20with%20any%20transport%0A-%20**Automatic%20serialization**%3A%20JSON%20marshaling%2Funmarshaling%20handled%20automatically%0A-%20**Error%20handling**%3A%20Transport-specific%20errors%20are%20normalized%0A-%20**Connection%20management**%3A%20Automatic%20reconnection%20and%20cleanup%0A%0A%60%60%60go%0A%2F%2F%20Same%20server%20works%20with%20any%20transport%0As%20%3A%3D%20server.NewMCPServer(%22My%20Server%22%2C%20%221.0.0%22)%0A%0A%2F%2F%20Choose%20transport%20at%20runtime%0Aswitch%20transport%20%7B%0Acase%20%22stdio%22%3A%0A%20%20%20%20server.ServeStdio(s)%0Acase%20%22http%22%3A%0A%20%20%20%20server.ServeHTTP(s%2C%20%22%3A8080%22)%0Acase%20%22sse%22%3A%0A%20%20%20%20server.ServeSSE(s%2C%20%22%3A8080%22)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Session%20Management%0A%0AMCP-Go%20handles%20session%20management%20automatically%2C%20supporting%20multiple%20concurrent%20clients%20with%20proper%20isolation.%0A%0A**Features%3A**%0A-%20**Multi-client%20support**%3A%20Multiple%20LLMs%20can%20connect%20simultaneously%0A-%20**Session%20isolation**%3A%20Each%20client%20has%20independent%20state%0A-%20**Resource%20cleanup**%3A%20Automatic%20cleanup%20when%20clients%20disconnect%0A-%20**Concurrent%20safety**%3A%20Thread-safe%20operations%20across%20all%20sessions%0A%0A**Session%20lifecycle%3A**%0A1.%20**Initialize**%3A%20Client%20connects%20and%20exchanges%20capabilities%0A2.%20**Active**%3A%20Client%20makes%20requests%2C%20server%20responds%0A3.%20**Cleanup**%3A%20Connection%20closes%2C%20resources%20are%20freed%0A%0A%60%60%60go%0A%2F%2F%20Server%20automatically%20handles%20multiple%20sessions%0As%20%3A%3D%20server.NewMCPServer(%22Multi-Client%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20server.WithHooks(%26server.Hooks%7B%0A%20%20%20%20%20%20%20%20OnSessionStart%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20connected%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20OnSessionEnd%3A%20func(sessionID%20string)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20disconnected%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%2C%0A)%0A%60%60%60%0A%0A**State%20management%20patterns%3A**%0A%0A%60%60%60go%0A%2F%2F%20Per-session%20state%0Atype%20SessionState%20struct%20%7B%0A%20%20%20%20UserID%20%20%20string%0A%20%20%20%20Settings%20map%5Bstring%5Dinterface%7B%7D%0A%7D%0A%0Avar%20sessions%20%3D%20make(map%5Bstring%5D*SessionState)%0A%0Afunc%20toolHandler(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20state%20%3A%3D%20sessions%5BsessionID%5D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20session-specific%20state%0A%20%20%20%20return%20processWithState(state%2C%20req)%0A%7D%0A%60%60%60",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./getting-started-CVLlfLwQ.js"),[]),path:"/getting-started",type:"mdx",filePath:"getting-started.mdx",content:"%23%20Getting%20Started%0A%0A%23%23%20Introduction%0A%0A%23%23%23%20What%20is%20MCP%3F%0A%0AThe%20Model%20Context%20Protocol%20(MCP)%20is%20an%20open%20standard%20that%20enables%20secure%2C%20controlled%20connections%20between%20AI%20applications%20and%20external%20data%20sources%20and%20tools.%20It%20provides%20a%20standardized%20way%20for%20Large%20Language%20Models%20(LLMs)%20to%20access%20and%20interact%20with%20external%20systems%20while%20maintaining%20security%20and%20user%20control.%0A%0A%23%23%23%20Why%20MCP%20Go%3F%0A%0AMCP-Go%20is%20designed%20to%20make%20building%20MCP%20servers%20in%20Go%20fast%2C%20simple%2C%20and%20complete%3A%0A%0A-%20**Fast**%3A%20Minimal%20overhead%20with%20efficient%20Go%20implementation%0A-%20**Simple**%3A%20Clean%2C%20intuitive%20API%20with%20minimal%20boilerplate%0A-%20**Complete**%3A%20Full%20support%20for%20the%20MCP%20specification%20including%20tools%2C%20resources%2C%20and%20prompts%0A%0A%23%23%23%20Key%20Features%0A%0A-%20**High-level%20interface**%3A%20Focus%20on%20your%20business%20logic%2C%20not%20protocol%20details%0A-%20**Minimal%20boilerplate**%3A%20Get%20started%20with%20just%20a%20few%20lines%20of%20code%0A-%20**Full%20MCP%20spec%20support**%3A%20Tools%2C%20resources%2C%20prompts%2C%20and%20all%20transport%20methods%0A-%20**Type%20safety**%3A%20Leverage%20Go's%20type%20system%20for%20robust%20MCP%20servers%0A-%20**Multiple%20transports**%3A%20Stdio%2C%20StreamableHTTP%2C%20Server-Sent%20Events%20and%20In-Process%20support%0A%0A%23%23%23%20Installation%0A%0AAdd%20MCP-Go%20to%20your%20Go%20project%3A%0A%0A%60%60%60bash%0Ago%20get%20github.com%2Fmark3labs%2Fmcp-go%0A%60%60%60%0A%0AMCP-Go%20makes%20it%20easy%20to%20build%20Model%20Context%20Protocol%20(MCP)%20servers%20in%20Go.%20This%20guide%20will%20help%20you%20create%20your%20first%20MCP%20server%20in%20just%20a%20few%20minutes.%0A%0A%23%23%20Your%20First%20MCP%20Server%0A%0ALet's%20create%20a%20simple%20MCP%20server%20with%20a%20%22hello%20world%22%20tool%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20new%20MCP%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22Demo%20%F0%9F%9A%80%22%2C%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(false)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tool%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(%22hello_world%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Say%20hello%20to%20someone%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22name%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Name%20of%20the%20person%20to%20greet%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tool%20handler%0A%20%20%20%20s.AddTool(tool%2C%20helloHandler)%0A%0A%20%20%20%20%2F%2F%20Start%20the%20stdio%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20helloHandler(ctx%20context.Context%2C%20request%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20name%2C%20err%20%3A%3D%20request.RequireString(%22name%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Hello%2C%20%25s!%22%2C%20name))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Running%20Your%20Server%0A%0A1.%20Save%20the%20code%20above%20to%20a%20file%20(e.g.%2C%20%60main.go%60)%0A2.%20Run%20it%20with%3A%0A%20%20%20%60%60%60bash%0A%20%20%20go%20run%20main.go%0A%20%20%20%60%60%60%0A%0AYour%20MCP%20server%20is%20now%20running%20and%20ready%20to%20accept%20connections%20via%20stdio!%0A%0A%23%23%20What's%20Next%3F%0A%0ANow%20that%20you%20have%20a%20basic%20server%20running%2C%20you%20can%3A%0A%0A-%20**Add%20more%20tools**%20-%20Create%20tools%20for%20calculations%2C%20file%20operations%2C%20API%20calls%2C%20etc.%0A-%20**Add%20resources**%20-%20Expose%20data%20sources%20like%20files%2C%20databases%2C%20or%20APIs%0A-%20**Add%20prompts**%20-%20Create%20reusable%20prompt%20templates%20for%20better%20LLM%20interactions%0A-%20**Explore%20examples**%20-%20Check%20out%20the%20%60examples%2F%60%20directory%20for%20more%20complex%20use%20cases%0A%0A%23%23%20Key%20Concepts%0A%0A%23%23%23%20Tools%0ATools%20let%20LLMs%20take%20actions%20through%20your%20server.%20They're%20like%20functions%20that%20the%20LLM%20can%20call%3A%0A%0A%60%60%60go%0AcalculatorTool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20mcp.WithDescription(%22Perform%20basic%20arithmetic%20operations%22)%2C%0A%20%20%20%20mcp.WithString(%22operation%22%2C%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Enum(%22add%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22divide%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required())%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Resources%0AResources%20expose%20data%20to%20LLMs.%20They%20can%20be%20static%20files%20or%20dynamic%20data%3A%0A%0A%60%60%60go%0Aresource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22docs%3A%2F%2Freadme%22%2C%0A%20%20%20%20%22Project%20README%22%2C%0A%20%20%20%20mcp.WithResourceDescription(%22The%20project's%20README%20file%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Server%20Options%0ACustomize%20your%20server%20with%20various%20options%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22My%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20server.WithHooks(myHooks)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Transport%20Options%0A%0AMCP-Go%20supports%20multiple%20transport%20methods%3A%0A%0A-%20**Stdio**%20(most%20common)%3A%20%60server.ServeStdio(s)%60%0A-%20**StreamableHTTP**%3A%20%60server.NewStreamableHTTPServer(s).Start(%22%3A8080%22)%60%0A-%20**Server-Sent%20Events**%3A%20%60server.ServeSSE(s%2C%20%22%3A8080%22)%60%0A-%20**In-Process**%3A%20%60client.NewInProcessClient(server)%60%0A%0A%23%23%20Need%20Help%3F%0A%0A-%20Check%20out%20the%20%5Bexamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fmcp-go%2Ftree%2Fmain%2Fexamples)%20for%20more%20complex%20use%20cases%0A-%20Join%20the%20discussion%20on%20%5BDiscord%5D(https%3A%2F%2Fdiscord.gg%2FRqSS2NQVsY)%0A-%20Read%20the%20full%20documentation%20in%20the%20%5BREADME%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fmcp-go%2Fblob%2Fmain%2FREADME.md)",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./getting-started-CVLlfLwQ.js"),[]),path:"/getting-started.html",type:"mdx",filePath:"getting-started.mdx",content:"%23%20Getting%20Started%0A%0A%23%23%20Introduction%0A%0A%23%23%23%20What%20is%20MCP%3F%0A%0AThe%20Model%20Context%20Protocol%20(MCP)%20is%20an%20open%20standard%20that%20enables%20secure%2C%20controlled%20connections%20between%20AI%20applications%20and%20external%20data%20sources%20and%20tools.%20It%20provides%20a%20standardized%20way%20for%20Large%20Language%20Models%20(LLMs)%20to%20access%20and%20interact%20with%20external%20systems%20while%20maintaining%20security%20and%20user%20control.%0A%0A%23%23%23%20Why%20MCP%20Go%3F%0A%0AMCP-Go%20is%20designed%20to%20make%20building%20MCP%20servers%20in%20Go%20fast%2C%20simple%2C%20and%20complete%3A%0A%0A-%20**Fast**%3A%20Minimal%20overhead%20with%20efficient%20Go%20implementation%0A-%20**Simple**%3A%20Clean%2C%20intuitive%20API%20with%20minimal%20boilerplate%0A-%20**Complete**%3A%20Full%20support%20for%20the%20MCP%20specification%20including%20tools%2C%20resources%2C%20and%20prompts%0A%0A%23%23%23%20Key%20Features%0A%0A-%20**High-level%20interface**%3A%20Focus%20on%20your%20business%20logic%2C%20not%20protocol%20details%0A-%20**Minimal%20boilerplate**%3A%20Get%20started%20with%20just%20a%20few%20lines%20of%20code%0A-%20**Full%20MCP%20spec%20support**%3A%20Tools%2C%20resources%2C%20prompts%2C%20and%20all%20transport%20methods%0A-%20**Type%20safety**%3A%20Leverage%20Go's%20type%20system%20for%20robust%20MCP%20servers%0A-%20**Multiple%20transports**%3A%20Stdio%2C%20StreamableHTTP%2C%20Server-Sent%20Events%20and%20In-Process%20support%0A%0A%23%23%23%20Installation%0A%0AAdd%20MCP-Go%20to%20your%20Go%20project%3A%0A%0A%60%60%60bash%0Ago%20get%20github.com%2Fmark3labs%2Fmcp-go%0A%60%60%60%0A%0AMCP-Go%20makes%20it%20easy%20to%20build%20Model%20Context%20Protocol%20(MCP)%20servers%20in%20Go.%20This%20guide%20will%20help%20you%20create%20your%20first%20MCP%20server%20in%20just%20a%20few%20minutes.%0A%0A%23%23%20Your%20First%20MCP%20Server%0A%0ALet's%20create%20a%20simple%20MCP%20server%20with%20a%20%22hello%20world%22%20tool%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20new%20MCP%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22Demo%20%F0%9F%9A%80%22%2C%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(false)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tool%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(%22hello_world%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Say%20hello%20to%20someone%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22name%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Name%20of%20the%20person%20to%20greet%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tool%20handler%0A%20%20%20%20s.AddTool(tool%2C%20helloHandler)%0A%0A%20%20%20%20%2F%2F%20Start%20the%20stdio%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20helloHandler(ctx%20context.Context%2C%20request%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20name%2C%20err%20%3A%3D%20request.RequireString(%22name%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Hello%2C%20%25s!%22%2C%20name))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Running%20Your%20Server%0A%0A1.%20Save%20the%20code%20above%20to%20a%20file%20(e.g.%2C%20%60main.go%60)%0A2.%20Run%20it%20with%3A%0A%20%20%20%60%60%60bash%0A%20%20%20go%20run%20main.go%0A%20%20%20%60%60%60%0A%0AYour%20MCP%20server%20is%20now%20running%20and%20ready%20to%20accept%20connections%20via%20stdio!%0A%0A%23%23%20What's%20Next%3F%0A%0ANow%20that%20you%20have%20a%20basic%20server%20running%2C%20you%20can%3A%0A%0A-%20**Add%20more%20tools**%20-%20Create%20tools%20for%20calculations%2C%20file%20operations%2C%20API%20calls%2C%20etc.%0A-%20**Add%20resources**%20-%20Expose%20data%20sources%20like%20files%2C%20databases%2C%20or%20APIs%0A-%20**Add%20prompts**%20-%20Create%20reusable%20prompt%20templates%20for%20better%20LLM%20interactions%0A-%20**Explore%20examples**%20-%20Check%20out%20the%20%60examples%2F%60%20directory%20for%20more%20complex%20use%20cases%0A%0A%23%23%20Key%20Concepts%0A%0A%23%23%23%20Tools%0ATools%20let%20LLMs%20take%20actions%20through%20your%20server.%20They're%20like%20functions%20that%20the%20LLM%20can%20call%3A%0A%0A%60%60%60go%0AcalculatorTool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20mcp.WithDescription(%22Perform%20basic%20arithmetic%20operations%22)%2C%0A%20%20%20%20mcp.WithString(%22operation%22%2C%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Enum(%22add%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22divide%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required())%2C%0A%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required())%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Resources%0AResources%20expose%20data%20to%20LLMs.%20They%20can%20be%20static%20files%20or%20dynamic%20data%3A%0A%0A%60%60%60go%0Aresource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22docs%3A%2F%2Freadme%22%2C%0A%20%20%20%20%22Project%20README%22%2C%0A%20%20%20%20mcp.WithResourceDescription(%22The%20project's%20README%20file%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Server%20Options%0ACustomize%20your%20server%20with%20various%20options%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22My%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20server.WithHooks(myHooks)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Transport%20Options%0A%0AMCP-Go%20supports%20multiple%20transport%20methods%3A%0A%0A-%20**Stdio**%20(most%20common)%3A%20%60server.ServeStdio(s)%60%0A-%20**StreamableHTTP**%3A%20%60server.NewStreamableHTTPServer(s).Start(%22%3A8080%22)%60%0A-%20**Server-Sent%20Events**%3A%20%60server.ServeSSE(s%2C%20%22%3A8080%22)%60%0A-%20**In-Process**%3A%20%60client.NewInProcessClient(server)%60%0A%0A%23%23%20Need%20Help%3F%0A%0A-%20Check%20out%20the%20%5Bexamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fmcp-go%2Ftree%2Fmain%2Fexamples)%20for%20more%20complex%20use%20cases%0A-%20Join%20the%20discussion%20on%20%5BDiscord%5D(https%3A%2F%2Fdiscord.gg%2FRqSS2NQVsY)%0A-%20Read%20the%20full%20documentation%20in%20the%20%5BREADME%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fmcp-go%2Fblob%2Fmain%2FREADME.md)",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./index-BJPQ8PA0.js"),[]),path:"/",type:"mdx",filePath:"index.mdx",content:"---%0Alayout%3A%20landing%0A---%0A%0Aimport%20%7B%20HomePage%20%7D%20from%20'vocs%2Fcomponents'%0A%0A%3CHomePage.Root%3E%0A%20%20%3CHomePage.Logo%20%2F%3E%0A%20%20%3CHomePage.Tagline%3EMCP-Go%3C%2FHomePage.Tagline%3E%0A%20%20%3CHomePage.Description%3E%0A%20%20%20%20A%20Go%20implementation%20of%20the%20Model%20Context%20Protocol%20(MCP)%2C%20enabling%20seamless%20integration%20between%20LLM%20applications%20and%20external%20data%20sources%20and%20tools.%20Build%20powerful%20MCP%20servers%20with%20minimal%20boilerplate%20and%20focus%20on%20creating%20great%20tools.%0A%20%20%3C%2FHomePage.Description%3E%0A%20%20%3CHomePage.Buttons%3E%0A%20%20%20%20%3CHomePage.Button%20href%3D%22%2Fgetting-started%22%20variant%3D%22accent%22%3EGet%20started%3C%2FHomePage.Button%3E%0A%20%20%20%20%3CHomePage.Button%20href%3D%22https%3A%2F%2Fgithub.com%2Fmark3labs%2Fmcp-go%22%3EGitHub%3C%2FHomePage.Button%3E%0A%20%20%3C%2FHomePage.Buttons%3E%0A%3C%2FHomePage.Root%3E",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./quick-start-DYssl1OG.js"),[]),path:"/quick-start",type:"mdx",filePath:"quick-start.mdx",content:"%23%20Quick%20Start%0A%0AGet%20up%20and%20running%20with%20MCP-Go%20in%20minutes.%20This%20guide%20walks%20you%20through%20creating%20your%20first%20MCP%20server%20and%20client.%0A%0A%23%23%20Hello%20World%20Server%0A%0ALet's%20start%20with%20the%20simplest%20possible%20MCP%20server%20-%20a%20%22hello%20world%22%20tool%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20new%20MCP%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22Hello%20World%20Server%22%2C%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Define%20a%20simple%20tool%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(%22hello_world%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Say%20hello%20to%20someone%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22name%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Name%20of%20the%20person%20to%20greet%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tool%20handler%0A%20%20%20%20s.AddTool(tool%2C%20helloHandler)%0A%0A%20%20%20%20%2F%2F%20Start%20the%20stdio%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20helloHandler(ctx%20context.Context%2C%20request%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20arguments%20%3A%3D%20request.GetArguments()%0A%20%20%20%20name%2C%20ok%20%3A%3D%20arguments%5B%22name%22%5D.(string)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22Error%3A%20name%20parameter%20is%20required%20and%20must%20be%20a%20string%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20IsError%3A%20true%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22Hello%2C%20%25s!%20%F0%9F%91%8B%22%2C%20name)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0ASave%20this%20as%20%60hello-server%2Fmain.go%60%20and%20run%3A%0A%0A%60%60%60bash%0Acd%20hello-server%0Ago%20mod%20init%20hello-server%0Ago%20get%20github.com%2Fmark3labs%2Fmcp-go%0Ago%20run%20main.go%0A%60%60%60%0A%0A%23%23%20Running%20Your%20First%20Server%0A%0A%23%23%23%20Testing%20with%20Claude%20Desktop%0A%0A1.%20**Install%20Claude%20Desktop**%20from%20%5BAnthropic's%20website%5D(https%3A%2F%2Fclaude.ai%2Fdownload)%0A%0A2.%20**Configure%20your%20server**%20by%20editing%20Claude's%20config%20file%3A%0A%0A%20%20%20**macOS**%3A%20%60~%2FLibrary%2FApplication%20Support%2FClaude%2Fclaude_desktop_config.json%60%0A%20%20%20**Windows**%3A%20%60%25APPDATA%25%5CClaude%5Cclaude_desktop_config.json%60%0A%0A%20%20%20%60%60%60json%0A%20%20%20%7B%0A%20%20%20%20%20%22mcpServers%22%3A%20%7B%0A%20%20%20%20%20%20%20%22hello-world%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%22command%22%3A%20%22go%22%2C%0A%20%20%20%20%20%20%20%20%20%22args%22%3A%20%5B%22run%22%2C%20%22%2Fpath%2Fto%2Fyour%2Fhello-server%2Fmain.go%22%5D%0A%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%7D%0A%20%20%20%7D%0A%20%20%20%60%60%60%0A%0A3.%20**Restart%20Claude%20Desktop**%20and%20look%20for%20the%20%F0%9F%94%8C%20icon%20indicating%20MCP%20connection%0A%0A4.%20**Test%20your%20tool**%20by%20asking%20Claude%3A%20%22Use%20the%20hello_world%20tool%20to%20greet%20Alice%22%0A%0A%23%23%23%20Testing%20with%20MCP%20Inspector%0A%0AFor%20debugging%20and%20development%2C%20use%20the%20MCP%20Inspector%3A%0A%0A%60%60%60bash%0A%23%20Install%20the%20MCP%20Inspector%0Anpm%20install%20-g%20%40modelcontextprotocol%2Finspector%0A%0A%23%20Run%20your%20server%20with%20the%20inspector%0Amcp-inspector%20go%20run%20main.go%0A%60%60%60%0A%0AThis%20opens%20a%20web%20interface%20where%20you%20can%20test%20your%20tools%20interactively.%0A%0A%23%23%20Basic%20Client%20Example%0A%0AYou%20can%20also%20create%20MCP%20clients%20to%20connect%20to%20other%20servers%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%2Ftransport%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20%2F%2F%20Create%20stdio%20transport%0A%20%20%20%20stdioTransport%20%3A%3D%20transport.NewStdio(%22go%22%2C%20nil%2C%20%22run%22%2C%20%22path%2Fto%2Fserver%2Fmain.go%22)%0A%0A%20%20%20%20%2F%2F%20Create%20client%20with%20the%20transport%0A%20%20%20%20c%20%3A%3D%20client.NewClient(stdioTransport)%0A%0A%20%20%20%20%2F%2F%20Start%20the%20client%0A%20%20%20%20if%20err%20%3A%3D%20c.Start(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20start%20client%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20%2F%2F%20Initialize%20the%20client%0A%20%20%20%20initRequest%20%3A%3D%20mcp.InitializeRequest%7B%7D%0A%20%20%20%20initRequest.Params.ProtocolVersion%20%3D%20mcp.LATEST_PROTOCOL_VERSION%0A%20%20%20%20initRequest.Params.ClientInfo%20%3D%20mcp.Implementation%7B%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%22Hello%20World%20Client%22%2C%0A%20%20%20%20%20%20%20%20Version%3A%20%221.0.0%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20initRequest.Params.Capabilities%20%3D%20mcp.ClientCapabilities%7B%7D%0A%0A%20%20%20%20serverInfo%2C%20err%20%3A%3D%20c.Initialize(ctx%2C%20initRequest)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20initialize%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Connected%20to%20server%3A%20%25s%20(version%20%25s)%5Cn%22%2C%0A%20%20%20%20%20%20%20%20serverInfo.ServerInfo.Name%2C%0A%20%20%20%20%20%20%20%20serverInfo.ServerInfo.Version)%0A%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20if%20serverInfo.Capabilities.Tools%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20toolsRequest%20%3A%3D%20mcp.ListToolsRequest%7B%7D%0A%20%20%20%20%20%20%20%20toolsResult%2C%20err%20%3A%3D%20c.ListTools(ctx%2C%20toolsRequest)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20list%20tools%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Available%20tools%3A%20%25d%5Cn%22%2C%20len(toolsResult.Tools))%0A%20%20%20%20%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20toolsResult.Tools%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Call%20a%20tool%0A%20%20%20%20%20%20%20%20callRequest%20%3A%3D%20mcp.CallToolRequest%7B%7D%0A%20%20%20%20%20%20%20%20callRequest.Params.Name%20%3D%20%22hello_world%22%0A%20%20%20%20%20%20%20%20callRequest.Params.Arguments%20%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22name%22%3A%20%22World%22%2C%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20callRequest)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20call%20tool%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Print%20the%20result%0A%20%20%20%20%20%20%20%20for%20_%2C%20content%20%3A%3D%20range%20result.Content%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20textContent%2C%20ok%20%3A%3D%20content.(mcp.TextContent)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Result%3A%20%25s%5Cn%22%2C%20textContent.Text)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20StreamableHTTP%20Client%20Example%0A%0AFor%20StreamableHTTP-based%20servers%2C%20use%20the%20StreamableHTTP%20client%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%2Ftransport%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20%2F%2F%20Create%20HTTP%20transport%0A%20%20%20%20httpTransport%2C%20err%20%3A%3D%20transport.NewStreamableHTTP(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20create%20HTTP%20transport%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20client%20with%20the%20transport%0A%20%20%20%20c%20%3A%3D%20client.NewClient(httpTransport)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20%2F%2F%20Initialize%20the%20client%0A%20%20%20%20initRequest%20%3A%3D%20mcp.InitializeRequest%7B%7D%0A%20%20%20%20initRequest.Params.ProtocolVersion%20%3D%20mcp.LATEST_PROTOCOL_VERSION%0A%20%20%20%20initRequest.Params.ClientInfo%20%3D%20mcp.Implementation%7B%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%22StreamableHTTP%20Client%22%2C%0A%20%20%20%20%20%20%20%20Version%3A%20%221.0.0%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20initRequest.Params.Capabilities%20%3D%20mcp.ClientCapabilities%7B%7D%0A%0A%20%20%20%20serverInfo%2C%20err%20%3A%3D%20c.Initialize(ctx%2C%20initRequest)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20initialize%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Connected%20to%20server%3A%20%25s%20(version%20%25s)%5Cn%22%2C%0A%20%20%20%20%20%20%20%20serverInfo.ServerInfo.Name%2C%0A%20%20%20%20%20%20%20%20serverInfo.ServerInfo.Version)%0A%0A%20%20%20%20%2F%2F%20Call%20a%20tool%0A%20%20%20%20if%20serverInfo.Capabilities.Tools%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20callRequest%20%3A%3D%20mcp.CallToolRequest%7B%7D%0A%20%20%20%20%20%20%20%20callRequest.Params.Name%20%3D%20%22hello_world%22%0A%20%20%20%20%20%20%20%20callRequest.Params.Arguments%20%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22name%22%3A%20%22StreamableHTTP%20World%22%2C%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20callRequest)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20call%20tool%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Tool%20result%3A%20%25%2Bv%5Cn%22%2C%20result)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20What's%20Next%3F%0A%0ANow%20that%20you%20have%20a%20working%20MCP%20server%20and%20client%3A%0A%0A-%20**Learn%20about%20%5BTools%5D(%2Fservers%2Ftools)**%20-%20Create%20powerful%20tool%20interfaces%0A-%20**Add%20%5BResources%5D(%2Fservers%2Fresources)**%20-%20Expose%20data%20sources%20to%20LLMs%0A-%20**Create%20%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Build%20reusable%20prompt%20templates%0A-%20**Explore%20%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Production-ready%20features%0A%0A%23%23%20Common%20Issues%0A%0A%23%23%23%20Server%20Won't%20Start%0A-%20Check%20that%20the%20port%20isn't%20already%20in%20use%0A-%20Verify%20Go%20module%20dependencies%20are%20installed%0A-%20Ensure%20proper%20file%20permissions%0A%0A%23%23%23%20Client%20Connection%20Failed%0A-%20Verify%20the%20server%20is%20running%20and%20accessible%0A-%20Check%20network%20connectivity%20for%20StreamableHTTP%20clients%0A-%20Validate%20stdio%20command%20paths%20for%20stdio%20clients%0A%0A%23%23%23%20Tool%20Calls%20Failing%0A-%20Verify%20tool%20parameter%20types%20match%20the%20schema%0A-%20Check%20error%20handling%20in%20your%20tool%20functions%0A-%20Use%20the%20MCP%20Inspector%20for%20debugging",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./quick-start-DYssl1OG.js"),[]),path:"/quick-start.html",type:"mdx",filePath:"quick-start.mdx",content:"%23%20Quick%20Start%0A%0AGet%20up%20and%20running%20with%20MCP-Go%20in%20minutes.%20This%20guide%20walks%20you%20through%20creating%20your%20first%20MCP%20server%20and%20client.%0A%0A%23%23%20Hello%20World%20Server%0A%0ALet's%20start%20with%20the%20simplest%20possible%20MCP%20server%20-%20a%20%22hello%20world%22%20tool%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20new%20MCP%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22Hello%20World%20Server%22%2C%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Define%20a%20simple%20tool%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(%22hello_world%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Say%20hello%20to%20someone%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22name%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Name%20of%20the%20person%20to%20greet%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tool%20handler%0A%20%20%20%20s.AddTool(tool%2C%20helloHandler)%0A%0A%20%20%20%20%2F%2F%20Start%20the%20stdio%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20helloHandler(ctx%20context.Context%2C%20request%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20arguments%20%3A%3D%20request.GetArguments()%0A%20%20%20%20name%2C%20ok%20%3A%3D%20arguments%5B%22name%22%5D.(string)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22Error%3A%20name%20parameter%20is%20required%20and%20must%20be%20a%20string%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20IsError%3A%20true%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22Hello%2C%20%25s!%20%F0%9F%91%8B%22%2C%20name)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0ASave%20this%20as%20%60hello-server%2Fmain.go%60%20and%20run%3A%0A%0A%60%60%60bash%0Acd%20hello-server%0Ago%20mod%20init%20hello-server%0Ago%20get%20github.com%2Fmark3labs%2Fmcp-go%0Ago%20run%20main.go%0A%60%60%60%0A%0A%23%23%20Running%20Your%20First%20Server%0A%0A%23%23%23%20Testing%20with%20Claude%20Desktop%0A%0A1.%20**Install%20Claude%20Desktop**%20from%20%5BAnthropic's%20website%5D(https%3A%2F%2Fclaude.ai%2Fdownload)%0A%0A2.%20**Configure%20your%20server**%20by%20editing%20Claude's%20config%20file%3A%0A%0A%20%20%20**macOS**%3A%20%60~%2FLibrary%2FApplication%20Support%2FClaude%2Fclaude_desktop_config.json%60%0A%20%20%20**Windows**%3A%20%60%25APPDATA%25%5CClaude%5Cclaude_desktop_config.json%60%0A%0A%20%20%20%60%60%60json%0A%20%20%20%7B%0A%20%20%20%20%20%22mcpServers%22%3A%20%7B%0A%20%20%20%20%20%20%20%22hello-world%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%22command%22%3A%20%22go%22%2C%0A%20%20%20%20%20%20%20%20%20%22args%22%3A%20%5B%22run%22%2C%20%22%2Fpath%2Fto%2Fyour%2Fhello-server%2Fmain.go%22%5D%0A%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%7D%0A%20%20%20%7D%0A%20%20%20%60%60%60%0A%0A3.%20**Restart%20Claude%20Desktop**%20and%20look%20for%20the%20%F0%9F%94%8C%20icon%20indicating%20MCP%20connection%0A%0A4.%20**Test%20your%20tool**%20by%20asking%20Claude%3A%20%22Use%20the%20hello_world%20tool%20to%20greet%20Alice%22%0A%0A%23%23%23%20Testing%20with%20MCP%20Inspector%0A%0AFor%20debugging%20and%20development%2C%20use%20the%20MCP%20Inspector%3A%0A%0A%60%60%60bash%0A%23%20Install%20the%20MCP%20Inspector%0Anpm%20install%20-g%20%40modelcontextprotocol%2Finspector%0A%0A%23%20Run%20your%20server%20with%20the%20inspector%0Amcp-inspector%20go%20run%20main.go%0A%60%60%60%0A%0AThis%20opens%20a%20web%20interface%20where%20you%20can%20test%20your%20tools%20interactively.%0A%0A%23%23%20Basic%20Client%20Example%0A%0AYou%20can%20also%20create%20MCP%20clients%20to%20connect%20to%20other%20servers%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%2Ftransport%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20%2F%2F%20Create%20stdio%20transport%0A%20%20%20%20stdioTransport%20%3A%3D%20transport.NewStdio(%22go%22%2C%20nil%2C%20%22run%22%2C%20%22path%2Fto%2Fserver%2Fmain.go%22)%0A%0A%20%20%20%20%2F%2F%20Create%20client%20with%20the%20transport%0A%20%20%20%20c%20%3A%3D%20client.NewClient(stdioTransport)%0A%0A%20%20%20%20%2F%2F%20Start%20the%20client%0A%20%20%20%20if%20err%20%3A%3D%20c.Start(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20start%20client%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20%2F%2F%20Initialize%20the%20client%0A%20%20%20%20initRequest%20%3A%3D%20mcp.InitializeRequest%7B%7D%0A%20%20%20%20initRequest.Params.ProtocolVersion%20%3D%20mcp.LATEST_PROTOCOL_VERSION%0A%20%20%20%20initRequest.Params.ClientInfo%20%3D%20mcp.Implementation%7B%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%22Hello%20World%20Client%22%2C%0A%20%20%20%20%20%20%20%20Version%3A%20%221.0.0%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20initRequest.Params.Capabilities%20%3D%20mcp.ClientCapabilities%7B%7D%0A%0A%20%20%20%20serverInfo%2C%20err%20%3A%3D%20c.Initialize(ctx%2C%20initRequest)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20initialize%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Connected%20to%20server%3A%20%25s%20(version%20%25s)%5Cn%22%2C%0A%20%20%20%20%20%20%20%20serverInfo.ServerInfo.Name%2C%0A%20%20%20%20%20%20%20%20serverInfo.ServerInfo.Version)%0A%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20if%20serverInfo.Capabilities.Tools%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20toolsRequest%20%3A%3D%20mcp.ListToolsRequest%7B%7D%0A%20%20%20%20%20%20%20%20toolsResult%2C%20err%20%3A%3D%20c.ListTools(ctx%2C%20toolsRequest)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20list%20tools%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Available%20tools%3A%20%25d%5Cn%22%2C%20len(toolsResult.Tools))%0A%20%20%20%20%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20toolsResult.Tools%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Call%20a%20tool%0A%20%20%20%20%20%20%20%20callRequest%20%3A%3D%20mcp.CallToolRequest%7B%7D%0A%20%20%20%20%20%20%20%20callRequest.Params.Name%20%3D%20%22hello_world%22%0A%20%20%20%20%20%20%20%20callRequest.Params.Arguments%20%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22name%22%3A%20%22World%22%2C%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20callRequest)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20call%20tool%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Print%20the%20result%0A%20%20%20%20%20%20%20%20for%20_%2C%20content%20%3A%3D%20range%20result.Content%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20textContent%2C%20ok%20%3A%3D%20content.(mcp.TextContent)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Result%3A%20%25s%5Cn%22%2C%20textContent.Text)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20StreamableHTTP%20Client%20Example%0A%0AFor%20StreamableHTTP-based%20servers%2C%20use%20the%20StreamableHTTP%20client%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%2Ftransport%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20%2F%2F%20Create%20HTTP%20transport%0A%20%20%20%20httpTransport%2C%20err%20%3A%3D%20transport.NewStreamableHTTP(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20create%20HTTP%20transport%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20client%20with%20the%20transport%0A%20%20%20%20c%20%3A%3D%20client.NewClient(httpTransport)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20%2F%2F%20Initialize%20the%20client%0A%20%20%20%20initRequest%20%3A%3D%20mcp.InitializeRequest%7B%7D%0A%20%20%20%20initRequest.Params.ProtocolVersion%20%3D%20mcp.LATEST_PROTOCOL_VERSION%0A%20%20%20%20initRequest.Params.ClientInfo%20%3D%20mcp.Implementation%7B%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%22StreamableHTTP%20Client%22%2C%0A%20%20%20%20%20%20%20%20Version%3A%20%221.0.0%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20initRequest.Params.Capabilities%20%3D%20mcp.ClientCapabilities%7B%7D%0A%0A%20%20%20%20serverInfo%2C%20err%20%3A%3D%20c.Initialize(ctx%2C%20initRequest)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20initialize%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Connected%20to%20server%3A%20%25s%20(version%20%25s)%5Cn%22%2C%0A%20%20%20%20%20%20%20%20serverInfo.ServerInfo.Name%2C%0A%20%20%20%20%20%20%20%20serverInfo.ServerInfo.Version)%0A%0A%20%20%20%20%2F%2F%20Call%20a%20tool%0A%20%20%20%20if%20serverInfo.Capabilities.Tools%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20callRequest%20%3A%3D%20mcp.CallToolRequest%7B%7D%0A%20%20%20%20%20%20%20%20callRequest.Params.Name%20%3D%20%22hello_world%22%0A%20%20%20%20%20%20%20%20callRequest.Params.Arguments%20%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22name%22%3A%20%22StreamableHTTP%20World%22%2C%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20callRequest)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20call%20tool%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Tool%20result%3A%20%25%2Bv%5Cn%22%2C%20result)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20What's%20Next%3F%0A%0ANow%20that%20you%20have%20a%20working%20MCP%20server%20and%20client%3A%0A%0A-%20**Learn%20about%20%5BTools%5D(%2Fservers%2Ftools)**%20-%20Create%20powerful%20tool%20interfaces%0A-%20**Add%20%5BResources%5D(%2Fservers%2Fresources)**%20-%20Expose%20data%20sources%20to%20LLMs%0A-%20**Create%20%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Build%20reusable%20prompt%20templates%0A-%20**Explore%20%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Production-ready%20features%0A%0A%23%23%20Common%20Issues%0A%0A%23%23%23%20Server%20Won't%20Start%0A-%20Check%20that%20the%20port%20isn't%20already%20in%20use%0A-%20Verify%20Go%20module%20dependencies%20are%20installed%0A-%20Ensure%20proper%20file%20permissions%0A%0A%23%23%23%20Client%20Connection%20Failed%0A-%20Verify%20the%20server%20is%20running%20and%20accessible%0A-%20Check%20network%20connectivity%20for%20StreamableHTTP%20clients%0A-%20Validate%20stdio%20command%20paths%20for%20stdio%20clients%0A%0A%23%23%23%20Tool%20Calls%20Failing%0A-%20Verify%20tool%20parameter%20types%20match%20the%20schema%0A-%20Check%20error%20handling%20in%20your%20tool%20functions%0A-%20Use%20the%20MCP%20Inspector%20for%20debugging",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./advanced-sampling-BAvIYTqa.js"),[]),path:"/clients/advanced-sampling",type:"mdx",filePath:"clients/advanced-sampling.mdx",content:"%23%20Sampling%0A%0ALearn%20how%20to%20implement%20MCP%20clients%20that%20can%20handle%20sampling%20requests%20from%20servers%2C%20enabling%20bidirectional%20communication%20where%20clients%20provide%20LLM%20capabilities%20to%20servers.%0A%0A%23%23%20Overview%0A%0ASampling%20allows%20MCP%20clients%20to%20respond%20to%20LLM%20completion%20requests%20from%20servers.%20When%20a%20server%20needs%20to%20generate%20content%2C%20answer%20questions%2C%20or%20perform%20reasoning%20tasks%2C%20it%20can%20send%20a%20sampling%20request%20to%20the%20client%2C%20which%20then%20processes%20it%20using%20an%20LLM%20and%20returns%20the%20result.%0A%0A%23%23%20Implementing%20a%20Sampling%20Handler%0A%0ACreate%20a%20sampling%20handler%20by%20implementing%20the%20%60SamplingHandler%60%20interface%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Atype%20MySamplingHandler%20struct%20%7B%0A%20%20%20%20%2F%2F%20Add%20fields%20for%20your%20LLM%20client%20(OpenAI%2C%20Anthropic%2C%20etc.)%0A%7D%0A%0Afunc%20(h%20*MySamplingHandler)%20CreateMessage(ctx%20context.Context%2C%20request%20mcp.CreateMessageRequest)%20(*mcp.CreateMessageResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20request%20parameters%0A%20%20%20%20messages%20%3A%3D%20request.Messages%0A%20%20%20%20systemPrompt%20%3A%3D%20request.SystemPrompt%0A%20%20%20%20maxTokens%20%3A%3D%20request.MaxTokens%0A%20%20%20%20temperature%20%3A%3D%20request.Temperature%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20with%20your%20LLM%0A%20%20%20%20response%2C%20err%20%3A%3D%20h.callLLM(ctx%2C%20messages%2C%20systemPrompt%2C%20maxTokens%2C%20temperature)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22LLM%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20MCP-formatted%20result%0A%20%20%20%20return%20%26mcp.CreateMessageResult%7B%0A%20%20%20%20%20%20%20%20Model%3A%20%22your-model-name%22%2C%0A%20%20%20%20%20%20%20%20Role%3A%20%20mcp.RoleAssistant%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20response%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20StopReason%3A%20%22endTurn%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(h%20*MySamplingHandler)%20callLLM(ctx%20context.Context%2C%20messages%20%5B%5Dmcp.SamplingMessage%2C%20systemPrompt%20string%2C%20maxTokens%20int%2C%20temperature%20float64)%20(string%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Implement%20your%20LLM%20integration%20here%0A%20%20%20%20%2F%2F%20This%20is%20where%20you'd%20call%20OpenAI%2C%20Anthropic%2C%20or%20other%20LLM%20APIs%0A%20%20%20%20return%20%22Your%20LLM%20response%20here%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Configuring%20the%20Client%0A%0AEnable%20sampling%20by%20providing%20a%20handler%20when%20creating%20the%20client%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20sampling%20handler%0A%20%20%20%20samplingHandler%20%3A%3D%20%26MySamplingHandler%7B%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20client%20with%20sampling%20support%0A%20%20%20%20mcpClient%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20%22%2Fpath%2Fto%2Fmcp%2Fserver%22%2C%0A%20%20%20%20%20%20%20%20client.WithSamplingHandler(samplingHandler)%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20create%20client%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20mcpClient.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20to%20server%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20mcpClient.Connect(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20connect%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20The%20client%20will%20now%20automatically%20handle%20sampling%20requests%0A%20%20%20%20%2F%2F%20from%20the%20server%20using%20your%20handler%0A%7D%0A%60%60%60%0A%0A%23%23%20Mock%20Implementation%20Example%0A%0AHere's%20a%20complete%20mock%20implementation%20for%20testing%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22strings%22%0A%20%20%20%20%22os%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0Atype%20MockSamplingHandler%20struct%7B%7D%0A%0Afunc%20(h%20*MockSamplingHandler)%20CreateMessage(ctx%20context.Context%2C%20request%20mcp.CreateMessageRequest)%20(*mcp.CreateMessageResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Log%20the%20request%20for%20debugging%0A%20%20%20%20log.Printf(%22Mock%20LLM%20received%20sampling%20request%3A%22)%0A%20%20%20%20log.Printf(%22%20%20System%20prompt%3A%20%25s%22%2C%20request.SystemPrompt)%0A%20%20%20%20log.Printf(%22%20%20Max%20tokens%3A%20%25d%22%2C%20request.MaxTokens)%0A%20%20%20%20log.Printf(%22%20%20Temperature%3A%20%25f%22%2C%20request.Temperature)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Extract%20the%20user's%20message%0A%20%20%20%20var%20userMessage%20string%0A%20%20%20%20for%20_%2C%20msg%20%3A%3D%20range%20request.Messages%20%7B%0A%20%20%20%20%20%20%20%20if%20msg.Role%20%3D%3D%20mcp.RoleUser%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20textContent%2C%20ok%20%3A%3D%20msg.Content.(mcp.TextContent)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20userMessage%20%3D%20textContent.Text%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%20%20User%20message%3A%20%25s%22%2C%20userMessage)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Generate%20a%20mock%20response%0A%20%20%20%20mockResponse%20%3A%3D%20fmt.Sprintf(%0A%20%20%20%20%20%20%20%20%22Mock%20LLM%20response%20to%3A%20'%25s'.%20This%20is%20a%20simulated%20response%20from%20a%20mock%20LLM%20handler.%22%2C%0A%20%20%20%20%20%20%20%20userMessage%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.CreateMessageResult%7B%0A%20%20%20%20%20%20%20%20Model%3A%20%22mock-llm-v1%22%2C%0A%20%20%20%20%20%20%20%20Role%3A%20%20mcp.RoleAssistant%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20mockResponse%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20StopReason%3A%20%22endTurn%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20main()%20%7B%0A%20%20%20%20if%20len(os.Args)%20%3C%202%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(%22Usage%3A%20sampling_client%20%3Cserver_path%3E%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20serverPath%20%3A%3D%20os.Args%5B1%5D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20client%20with%20mock%20sampling%20handler%0A%20%20%20%20mcpClient%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20serverPath%2C%0A%20%20%20%20%20%20%20%20client.WithSamplingHandler(%26MockSamplingHandler%7B%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20create%20client%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20mcpClient.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20and%20test%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20mcpClient.Connect(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20connect%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20server%20tools%20that%20use%20sampling%0A%20%20%20%20result%2C%20err%20%3A%3D%20mcpClient.CallTool(ctx%2C%20%22ask_llm%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22question%22%3A%20%22What%20is%20the%20capital%20of%20France%3F%22%2C%0A%20%20%20%20%20%20%20%20%22system_prompt%22%3A%20%22You%20are%20a%20helpful%20geography%20assistant.%22%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20fmt.Printf(%22Tool%20result%3A%20%25%2Bv%5C%5Cn%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%20Real%20LLM%20Integration%0A%0A%23%23%23%20OpenAI%20Integration%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22github.com%2Fsashabaranov%2Fgo-openai%22%0A)%0A%0Atype%20OpenAISamplingHandler%20struct%20%7B%0A%20%20%20%20client%20*openai.Client%0A%7D%0A%0Afunc%20NewOpenAISamplingHandler(apiKey%20string)%20*OpenAISamplingHandler%20%7B%0A%20%20%20%20return%20%26OpenAISamplingHandler%7B%0A%20%20%20%20%20%20%20%20client%3A%20openai.NewClient(apiKey)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*OpenAISamplingHandler)%20CreateMessage(ctx%20context.Context%2C%20request%20mcp.CreateMessageRequest)%20(*mcp.CreateMessageResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Convert%20MCP%20messages%20to%20OpenAI%20format%0A%20%20%20%20var%20messages%20%5B%5Dopenai.ChatCompletionMessage%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20system%20message%20if%20provided%0A%20%20%20%20if%20request.SystemPrompt%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20messages%20%3D%20append(messages%2C%20openai.ChatCompletionMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%20%20%20openai.ChatMessageRoleSystem%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20request.SystemPrompt%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Convert%20MCP%20messages%0A%20%20%20%20for%20_%2C%20msg%20%3A%3D%20range%20request.Messages%20%7B%0A%20%20%20%20%20%20%20%20var%20role%20string%0A%20%20%20%20%20%20%20%20switch%20msg.Role%20%7B%0A%20%20%20%20%20%20%20%20case%20mcp.RoleUser%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20role%20%3D%20openai.ChatMessageRoleUser%0A%20%20%20%20%20%20%20%20case%20mcp.RoleAssistant%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20role%20%3D%20openai.ChatMessageRoleAssistant%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20textContent%2C%20ok%20%3A%3D%20msg.Content.(mcp.TextContent)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20messages%20%3D%20append(messages%2C%20openai.ChatCompletionMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%20%20%20role%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20textContent.Text%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20OpenAI%20request%0A%20%20%20%20req%20%3A%3D%20openai.ChatCompletionRequest%7B%0A%20%20%20%20%20%20%20%20Model%3A%20%20%20%20%20%20%20openai.GPT3Dot5Turbo%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%20%20%20messages%2C%0A%20%20%20%20%20%20%20%20MaxTokens%3A%20%20%20request.MaxTokens%2C%0A%20%20%20%20%20%20%20%20Temperature%3A%20float32(request.Temperature)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Call%20OpenAI%20API%0A%20%20%20%20resp%2C%20err%20%3A%3D%20h.client.CreateChatCompletion(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22OpenAI%20API%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(resp.Choices)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20response%20from%20OpenAI%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20choice%20%3A%3D%20resp.Choices%5B0%5D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Convert%20stop%20reason%0A%20%20%20%20var%20stopReason%20string%0A%20%20%20%20switch%20choice.FinishReason%20%7B%0A%20%20%20%20case%20%22stop%22%3A%0A%20%20%20%20%20%20%20%20stopReason%20%3D%20%22endTurn%22%0A%20%20%20%20case%20%22length%22%3A%0A%20%20%20%20%20%20%20%20stopReason%20%3D%20%22maxTokens%22%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20stopReason%20%3D%20%22other%22%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.CreateMessageResult%7B%0A%20%20%20%20%20%20%20%20Model%3A%20resp.Model%2C%0A%20%20%20%20%20%20%20%20Role%3A%20%20mcp.RoleAssistant%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20choice.Message.Content%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20StopReason%3A%20stopReason%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Anthropic%20Integration%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22bytes%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22net%2Fhttp%22%0A)%0A%0Atype%20AnthropicSamplingHandler%20struct%20%7B%0A%20%20%20%20apiKey%20string%0A%20%20%20%20client%20*http.Client%0A%7D%0A%0Afunc%20NewAnthropicSamplingHandler(apiKey%20string)%20*AnthropicSamplingHandler%20%7B%0A%20%20%20%20return%20%26AnthropicSamplingHandler%7B%0A%20%20%20%20%20%20%20%20apiKey%3A%20apiKey%2C%0A%20%20%20%20%20%20%20%20client%3A%20%26http.Client%7B%7D%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*AnthropicSamplingHandler)%20CreateMessage(ctx%20context.Context%2C%20request%20mcp.CreateMessageRequest)%20(*mcp.CreateMessageResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Convert%20to%20Anthropic%20format%0A%20%20%20%20anthropicReq%20%3A%3D%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22model%22%3A%20%20%20%20%20%20%22claude-3-sonnet-20240229%22%2C%0A%20%20%20%20%20%20%20%20%22max_tokens%22%3A%20request.MaxTokens%2C%0A%20%20%20%20%20%20%20%20%22messages%22%3A%20%20%20h.convertMessages(request.Messages)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20request.SystemPrompt%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20anthropicReq%5B%22system%22%5D%20%3D%20request.SystemPrompt%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20request.Temperature%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20anthropicReq%5B%22temperature%22%5D%20%3D%20request.Temperature%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Make%20API%20call%0A%20%20%20%20reqBody%2C%20_%20%3A%3D%20json.Marshal(anthropicReq)%0A%20%20%20%20httpReq%2C%20_%20%3A%3D%20http.NewRequestWithContext(ctx%2C%20%22POST%22%2C%20%0A%20%20%20%20%20%20%20%20%22https%3A%2F%2Fapi.anthropic.com%2Fv1%2Fmessages%22%2C%20bytes.NewBuffer(reqBody))%0A%20%20%20%20%0A%20%20%20%20httpReq.Header.Set(%22Content-Type%22%2C%20%22application%2Fjson%22)%0A%20%20%20%20httpReq.Header.Set(%22x-api-key%22%2C%20h.apiKey)%0A%20%20%20%20httpReq.Header.Set(%22anthropic-version%22%2C%20%222023-06-01%22)%0A%20%20%20%20%0A%20%20%20%20resp%2C%20err%20%3A%3D%20h.client.Do(httpReq)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22Anthropic%20API%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20resp.Body.Close()%0A%20%20%20%20%0A%20%20%20%20var%20anthropicResp%20struct%20%7B%0A%20%20%20%20%20%20%20%20Content%20%5B%5Dstruct%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%20string%20%60json%3A%22text%22%60%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%20string%20%60json%3A%22type%22%60%0A%20%20%20%20%20%20%20%20%7D%20%60json%3A%22content%22%60%0A%20%20%20%20%20%20%20%20Model%20%20%20%20%20%20string%20%60json%3A%22model%22%60%0A%20%20%20%20%20%20%20%20StopReason%20string%20%60json%3A%22stop_reason%22%60%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20err%20%3A%3D%20json.NewDecoder(resp.Body).Decode(%26anthropicResp)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20decode%20Anthropic%20response%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Extract%20text%20content%0A%20%20%20%20var%20text%20string%0A%20%20%20%20for%20_%2C%20content%20%3A%3D%20range%20anthropicResp.Content%20%7B%0A%20%20%20%20%20%20%20%20if%20content.Type%20%3D%3D%20%22text%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%20%2B%3D%20content.Text%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.CreateMessageResult%7B%0A%20%20%20%20%20%20%20%20Model%3A%20anthropicResp.Model%2C%0A%20%20%20%20%20%20%20%20Role%3A%20%20mcp.RoleAssistant%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20text%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20StopReason%3A%20anthropicResp.StopReason%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(h%20*AnthropicSamplingHandler)%20convertMessages(messages%20%5B%5Dmcp.SamplingMessage)%20%5B%5Dmap%5Bstring%5Dany%20%7B%0A%20%20%20%20var%20result%20%5B%5Dmap%5Bstring%5Dany%0A%20%20%20%20for%20_%2C%20msg%20%3A%3D%20range%20messages%20%7B%0A%20%20%20%20%20%20%20%20if%20textContent%2C%20ok%20%3A%3D%20msg.Content.(mcp.TextContent)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20append(result%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22role%22%3A%20%20%20%20string(msg.Role)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22content%22%3A%20textContent.Text%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%0A%7D%0A%60%60%60%0A%0A%23%23%20Automatic%20Capability%20Declaration%0A%0AWhen%20you%20provide%20a%20sampling%20handler%2C%20the%20client%20automatically%20declares%20the%20sampling%20capability%20during%20initialization%3A%0A%0A%60%60%60go%0A%2F%2F%20This%20automatically%20adds%20sampling%20capability%0AmcpClient%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20serverPath%2C%0A%20%20%20%20client.WithSamplingHandler(handler)%2C%20%2F%2F%20Enables%20sampling%20capability%0A)%0A%60%60%60%0A%0AThe%20client%20will%20include%20this%20in%20the%20initialization%20request%3A%0A%0A%60%60%60json%0A%7B%0A%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%22id%22%3A%201%2C%0A%20%20%22method%22%3A%20%22initialize%22%2C%0A%20%20%22params%22%3A%20%7B%0A%20%20%20%20%22protocolVersion%22%3A%20%222024-11-05%22%2C%0A%20%20%20%20%22capabilities%22%3A%20%7B%0A%20%20%20%20%20%20%22sampling%22%3A%20%7B%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22clientInfo%22%3A%20%7B%0A%20%20%20%20%20%20%22name%22%3A%20%22your-client%22%2C%0A%20%20%20%20%20%20%22version%22%3A%20%221.0.0%22%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AHandle%20errors%20gracefully%20in%20your%20sampling%20handler%3A%0A%0A%60%60%60go%0Afunc%20(h%20*MySamplingHandler)%20CreateMessage(ctx%20context.Context%2C%20request%20mcp.CreateMessageRequest)%20(*mcp.CreateMessageResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Validate%20request%0A%20%20%20%20if%20len(request.Messages)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20messages%20provided%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20for%20context%20cancellation%0A%20%20%20%20if%20err%20%3A%3D%20ctx.Err()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22request%20cancelled%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Call%20LLM%20with%20error%20handling%0A%20%20%20%20response%2C%20err%20%3A%3D%20h.callLLM(ctx%2C%20request)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Log%20error%20for%20debugging%0A%20%20%20%20%20%20%20%20log.Printf(%22LLM%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20appropriate%20error%0A%20%20%20%20%20%20%20%20if%20strings.Contains(err.Error()%2C%20%22rate%20limit%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22rate%20limit%20exceeded%2C%20please%20try%20again%20later%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22LLM%20service%20unavailable%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20response%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Implement%20Proper%20Error%20Handling**%3A%20Always%20handle%20LLM%20API%20errors%20gracefully%0A2.%20**Respect%20Rate%20Limits**%3A%20Implement%20rate%20limiting%20and%20backoff%20strategies%0A3.%20**Validate%20Inputs**%3A%20Check%20message%20content%20and%20parameters%20before%20processing%0A4.%20**Use%20Context**%3A%20Respect%20context%20cancellation%20and%20timeouts%0A5.%20**Log%20Appropriately**%3A%20Log%20requests%20for%20debugging%20but%20avoid%20logging%20sensitive%20data%0A6.%20**Model%20Selection**%3A%20Allow%20configuration%20of%20which%20LLM%20model%20to%20use%0A7.%20**Content%20Filtering**%3A%20Implement%20content%20filtering%20if%20required%20by%20your%20use%20case%0A%0A%23%23%20Testing%20Your%20Implementation%0A%0ATest%20your%20sampling%20handler%20with%20the%20sampling%20server%20example%3A%0A%0A%60%60%60bash%0A%23%20Build%20the%20sampling%20server%0Acd%20examples%2Fsampling_server%0Ago%20build%20-o%20sampling_server%0A%0A%23%20Build%20your%20client%0Ago%20build%20-o%20my_client%0A%0A%23%20Test%20the%20integration%0A.%2Fmy_client%20.%2Fsampling_server%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20Learn%20about%20%5Bserver-side%20sampling%20implementation%5D(%2Fservers%2Fadvanced-sampling)%0A-%20Explore%20%5Bclient%20operations%5D(%2Fclients%2Foperations)%0A-%20Check%20out%20the%20%5Bsampling%20examples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fmcp-go%2Ftree%2Fmain%2Fexamples%2Fsampling_client)",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./advanced-sampling-BAvIYTqa.js"),[]),path:"/clients/advanced-sampling.html",type:"mdx",filePath:"clients/advanced-sampling.mdx",content:"%23%20Sampling%0A%0ALearn%20how%20to%20implement%20MCP%20clients%20that%20can%20handle%20sampling%20requests%20from%20servers%2C%20enabling%20bidirectional%20communication%20where%20clients%20provide%20LLM%20capabilities%20to%20servers.%0A%0A%23%23%20Overview%0A%0ASampling%20allows%20MCP%20clients%20to%20respond%20to%20LLM%20completion%20requests%20from%20servers.%20When%20a%20server%20needs%20to%20generate%20content%2C%20answer%20questions%2C%20or%20perform%20reasoning%20tasks%2C%20it%20can%20send%20a%20sampling%20request%20to%20the%20client%2C%20which%20then%20processes%20it%20using%20an%20LLM%20and%20returns%20the%20result.%0A%0A%23%23%20Implementing%20a%20Sampling%20Handler%0A%0ACreate%20a%20sampling%20handler%20by%20implementing%20the%20%60SamplingHandler%60%20interface%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Atype%20MySamplingHandler%20struct%20%7B%0A%20%20%20%20%2F%2F%20Add%20fields%20for%20your%20LLM%20client%20(OpenAI%2C%20Anthropic%2C%20etc.)%0A%7D%0A%0Afunc%20(h%20*MySamplingHandler)%20CreateMessage(ctx%20context.Context%2C%20request%20mcp.CreateMessageRequest)%20(*mcp.CreateMessageResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20request%20parameters%0A%20%20%20%20messages%20%3A%3D%20request.Messages%0A%20%20%20%20systemPrompt%20%3A%3D%20request.SystemPrompt%0A%20%20%20%20maxTokens%20%3A%3D%20request.MaxTokens%0A%20%20%20%20temperature%20%3A%3D%20request.Temperature%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20with%20your%20LLM%0A%20%20%20%20response%2C%20err%20%3A%3D%20h.callLLM(ctx%2C%20messages%2C%20systemPrompt%2C%20maxTokens%2C%20temperature)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22LLM%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20MCP-formatted%20result%0A%20%20%20%20return%20%26mcp.CreateMessageResult%7B%0A%20%20%20%20%20%20%20%20Model%3A%20%22your-model-name%22%2C%0A%20%20%20%20%20%20%20%20Role%3A%20%20mcp.RoleAssistant%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20response%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20StopReason%3A%20%22endTurn%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(h%20*MySamplingHandler)%20callLLM(ctx%20context.Context%2C%20messages%20%5B%5Dmcp.SamplingMessage%2C%20systemPrompt%20string%2C%20maxTokens%20int%2C%20temperature%20float64)%20(string%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Implement%20your%20LLM%20integration%20here%0A%20%20%20%20%2F%2F%20This%20is%20where%20you'd%20call%20OpenAI%2C%20Anthropic%2C%20or%20other%20LLM%20APIs%0A%20%20%20%20return%20%22Your%20LLM%20response%20here%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Configuring%20the%20Client%0A%0AEnable%20sampling%20by%20providing%20a%20handler%20when%20creating%20the%20client%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20sampling%20handler%0A%20%20%20%20samplingHandler%20%3A%3D%20%26MySamplingHandler%7B%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20client%20with%20sampling%20support%0A%20%20%20%20mcpClient%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20%22%2Fpath%2Fto%2Fmcp%2Fserver%22%2C%0A%20%20%20%20%20%20%20%20client.WithSamplingHandler(samplingHandler)%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20create%20client%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20mcpClient.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20to%20server%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20mcpClient.Connect(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20connect%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20The%20client%20will%20now%20automatically%20handle%20sampling%20requests%0A%20%20%20%20%2F%2F%20from%20the%20server%20using%20your%20handler%0A%7D%0A%60%60%60%0A%0A%23%23%20Mock%20Implementation%20Example%0A%0AHere's%20a%20complete%20mock%20implementation%20for%20testing%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22strings%22%0A%20%20%20%20%22os%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0Atype%20MockSamplingHandler%20struct%7B%7D%0A%0Afunc%20(h%20*MockSamplingHandler)%20CreateMessage(ctx%20context.Context%2C%20request%20mcp.CreateMessageRequest)%20(*mcp.CreateMessageResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Log%20the%20request%20for%20debugging%0A%20%20%20%20log.Printf(%22Mock%20LLM%20received%20sampling%20request%3A%22)%0A%20%20%20%20log.Printf(%22%20%20System%20prompt%3A%20%25s%22%2C%20request.SystemPrompt)%0A%20%20%20%20log.Printf(%22%20%20Max%20tokens%3A%20%25d%22%2C%20request.MaxTokens)%0A%20%20%20%20log.Printf(%22%20%20Temperature%3A%20%25f%22%2C%20request.Temperature)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Extract%20the%20user's%20message%0A%20%20%20%20var%20userMessage%20string%0A%20%20%20%20for%20_%2C%20msg%20%3A%3D%20range%20request.Messages%20%7B%0A%20%20%20%20%20%20%20%20if%20msg.Role%20%3D%3D%20mcp.RoleUser%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20textContent%2C%20ok%20%3A%3D%20msg.Content.(mcp.TextContent)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20userMessage%20%3D%20textContent.Text%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%20%20User%20message%3A%20%25s%22%2C%20userMessage)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Generate%20a%20mock%20response%0A%20%20%20%20mockResponse%20%3A%3D%20fmt.Sprintf(%0A%20%20%20%20%20%20%20%20%22Mock%20LLM%20response%20to%3A%20'%25s'.%20This%20is%20a%20simulated%20response%20from%20a%20mock%20LLM%20handler.%22%2C%0A%20%20%20%20%20%20%20%20userMessage%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.CreateMessageResult%7B%0A%20%20%20%20%20%20%20%20Model%3A%20%22mock-llm-v1%22%2C%0A%20%20%20%20%20%20%20%20Role%3A%20%20mcp.RoleAssistant%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20mockResponse%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20StopReason%3A%20%22endTurn%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20main()%20%7B%0A%20%20%20%20if%20len(os.Args)%20%3C%202%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(%22Usage%3A%20sampling_client%20%3Cserver_path%3E%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20serverPath%20%3A%3D%20os.Args%5B1%5D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20client%20with%20mock%20sampling%20handler%0A%20%20%20%20mcpClient%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20serverPath%2C%0A%20%20%20%20%20%20%20%20client.WithSamplingHandler(%26MockSamplingHandler%7B%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20create%20client%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20mcpClient.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20and%20test%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20mcpClient.Connect(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20connect%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20server%20tools%20that%20use%20sampling%0A%20%20%20%20result%2C%20err%20%3A%3D%20mcpClient.CallTool(ctx%2C%20%22ask_llm%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22question%22%3A%20%22What%20is%20the%20capital%20of%20France%3F%22%2C%0A%20%20%20%20%20%20%20%20%22system_prompt%22%3A%20%22You%20are%20a%20helpful%20geography%20assistant.%22%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20fmt.Printf(%22Tool%20result%3A%20%25%2Bv%5C%5Cn%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%20Real%20LLM%20Integration%0A%0A%23%23%23%20OpenAI%20Integration%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22github.com%2Fsashabaranov%2Fgo-openai%22%0A)%0A%0Atype%20OpenAISamplingHandler%20struct%20%7B%0A%20%20%20%20client%20*openai.Client%0A%7D%0A%0Afunc%20NewOpenAISamplingHandler(apiKey%20string)%20*OpenAISamplingHandler%20%7B%0A%20%20%20%20return%20%26OpenAISamplingHandler%7B%0A%20%20%20%20%20%20%20%20client%3A%20openai.NewClient(apiKey)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*OpenAISamplingHandler)%20CreateMessage(ctx%20context.Context%2C%20request%20mcp.CreateMessageRequest)%20(*mcp.CreateMessageResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Convert%20MCP%20messages%20to%20OpenAI%20format%0A%20%20%20%20var%20messages%20%5B%5Dopenai.ChatCompletionMessage%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20system%20message%20if%20provided%0A%20%20%20%20if%20request.SystemPrompt%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20messages%20%3D%20append(messages%2C%20openai.ChatCompletionMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%20%20%20openai.ChatMessageRoleSystem%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20request.SystemPrompt%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Convert%20MCP%20messages%0A%20%20%20%20for%20_%2C%20msg%20%3A%3D%20range%20request.Messages%20%7B%0A%20%20%20%20%20%20%20%20var%20role%20string%0A%20%20%20%20%20%20%20%20switch%20msg.Role%20%7B%0A%20%20%20%20%20%20%20%20case%20mcp.RoleUser%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20role%20%3D%20openai.ChatMessageRoleUser%0A%20%20%20%20%20%20%20%20case%20mcp.RoleAssistant%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20role%20%3D%20openai.ChatMessageRoleAssistant%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20textContent%2C%20ok%20%3A%3D%20msg.Content.(mcp.TextContent)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20messages%20%3D%20append(messages%2C%20openai.ChatCompletionMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%20%20%20role%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20textContent.Text%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20OpenAI%20request%0A%20%20%20%20req%20%3A%3D%20openai.ChatCompletionRequest%7B%0A%20%20%20%20%20%20%20%20Model%3A%20%20%20%20%20%20%20openai.GPT3Dot5Turbo%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%20%20%20messages%2C%0A%20%20%20%20%20%20%20%20MaxTokens%3A%20%20%20request.MaxTokens%2C%0A%20%20%20%20%20%20%20%20Temperature%3A%20float32(request.Temperature)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Call%20OpenAI%20API%0A%20%20%20%20resp%2C%20err%20%3A%3D%20h.client.CreateChatCompletion(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22OpenAI%20API%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(resp.Choices)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20response%20from%20OpenAI%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20choice%20%3A%3D%20resp.Choices%5B0%5D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Convert%20stop%20reason%0A%20%20%20%20var%20stopReason%20string%0A%20%20%20%20switch%20choice.FinishReason%20%7B%0A%20%20%20%20case%20%22stop%22%3A%0A%20%20%20%20%20%20%20%20stopReason%20%3D%20%22endTurn%22%0A%20%20%20%20case%20%22length%22%3A%0A%20%20%20%20%20%20%20%20stopReason%20%3D%20%22maxTokens%22%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20stopReason%20%3D%20%22other%22%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.CreateMessageResult%7B%0A%20%20%20%20%20%20%20%20Model%3A%20resp.Model%2C%0A%20%20%20%20%20%20%20%20Role%3A%20%20mcp.RoleAssistant%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20choice.Message.Content%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20StopReason%3A%20stopReason%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Anthropic%20Integration%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22bytes%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22net%2Fhttp%22%0A)%0A%0Atype%20AnthropicSamplingHandler%20struct%20%7B%0A%20%20%20%20apiKey%20string%0A%20%20%20%20client%20*http.Client%0A%7D%0A%0Afunc%20NewAnthropicSamplingHandler(apiKey%20string)%20*AnthropicSamplingHandler%20%7B%0A%20%20%20%20return%20%26AnthropicSamplingHandler%7B%0A%20%20%20%20%20%20%20%20apiKey%3A%20apiKey%2C%0A%20%20%20%20%20%20%20%20client%3A%20%26http.Client%7B%7D%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*AnthropicSamplingHandler)%20CreateMessage(ctx%20context.Context%2C%20request%20mcp.CreateMessageRequest)%20(*mcp.CreateMessageResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Convert%20to%20Anthropic%20format%0A%20%20%20%20anthropicReq%20%3A%3D%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22model%22%3A%20%20%20%20%20%20%22claude-3-sonnet-20240229%22%2C%0A%20%20%20%20%20%20%20%20%22max_tokens%22%3A%20request.MaxTokens%2C%0A%20%20%20%20%20%20%20%20%22messages%22%3A%20%20%20h.convertMessages(request.Messages)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20request.SystemPrompt%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20anthropicReq%5B%22system%22%5D%20%3D%20request.SystemPrompt%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20request.Temperature%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20anthropicReq%5B%22temperature%22%5D%20%3D%20request.Temperature%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Make%20API%20call%0A%20%20%20%20reqBody%2C%20_%20%3A%3D%20json.Marshal(anthropicReq)%0A%20%20%20%20httpReq%2C%20_%20%3A%3D%20http.NewRequestWithContext(ctx%2C%20%22POST%22%2C%20%0A%20%20%20%20%20%20%20%20%22https%3A%2F%2Fapi.anthropic.com%2Fv1%2Fmessages%22%2C%20bytes.NewBuffer(reqBody))%0A%20%20%20%20%0A%20%20%20%20httpReq.Header.Set(%22Content-Type%22%2C%20%22application%2Fjson%22)%0A%20%20%20%20httpReq.Header.Set(%22x-api-key%22%2C%20h.apiKey)%0A%20%20%20%20httpReq.Header.Set(%22anthropic-version%22%2C%20%222023-06-01%22)%0A%20%20%20%20%0A%20%20%20%20resp%2C%20err%20%3A%3D%20h.client.Do(httpReq)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22Anthropic%20API%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20resp.Body.Close()%0A%20%20%20%20%0A%20%20%20%20var%20anthropicResp%20struct%20%7B%0A%20%20%20%20%20%20%20%20Content%20%5B%5Dstruct%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%20string%20%60json%3A%22text%22%60%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%20string%20%60json%3A%22type%22%60%0A%20%20%20%20%20%20%20%20%7D%20%60json%3A%22content%22%60%0A%20%20%20%20%20%20%20%20Model%20%20%20%20%20%20string%20%60json%3A%22model%22%60%0A%20%20%20%20%20%20%20%20StopReason%20string%20%60json%3A%22stop_reason%22%60%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20err%20%3A%3D%20json.NewDecoder(resp.Body).Decode(%26anthropicResp)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20decode%20Anthropic%20response%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Extract%20text%20content%0A%20%20%20%20var%20text%20string%0A%20%20%20%20for%20_%2C%20content%20%3A%3D%20range%20anthropicResp.Content%20%7B%0A%20%20%20%20%20%20%20%20if%20content.Type%20%3D%3D%20%22text%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%20%2B%3D%20content.Text%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.CreateMessageResult%7B%0A%20%20%20%20%20%20%20%20Model%3A%20anthropicResp.Model%2C%0A%20%20%20%20%20%20%20%20Role%3A%20%20mcp.RoleAssistant%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20text%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20StopReason%3A%20anthropicResp.StopReason%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(h%20*AnthropicSamplingHandler)%20convertMessages(messages%20%5B%5Dmcp.SamplingMessage)%20%5B%5Dmap%5Bstring%5Dany%20%7B%0A%20%20%20%20var%20result%20%5B%5Dmap%5Bstring%5Dany%0A%20%20%20%20for%20_%2C%20msg%20%3A%3D%20range%20messages%20%7B%0A%20%20%20%20%20%20%20%20if%20textContent%2C%20ok%20%3A%3D%20msg.Content.(mcp.TextContent)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20append(result%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22role%22%3A%20%20%20%20string(msg.Role)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22content%22%3A%20textContent.Text%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%0A%7D%0A%60%60%60%0A%0A%23%23%20Automatic%20Capability%20Declaration%0A%0AWhen%20you%20provide%20a%20sampling%20handler%2C%20the%20client%20automatically%20declares%20the%20sampling%20capability%20during%20initialization%3A%0A%0A%60%60%60go%0A%2F%2F%20This%20automatically%20adds%20sampling%20capability%0AmcpClient%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20serverPath%2C%0A%20%20%20%20client.WithSamplingHandler(handler)%2C%20%2F%2F%20Enables%20sampling%20capability%0A)%0A%60%60%60%0A%0AThe%20client%20will%20include%20this%20in%20the%20initialization%20request%3A%0A%0A%60%60%60json%0A%7B%0A%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%22id%22%3A%201%2C%0A%20%20%22method%22%3A%20%22initialize%22%2C%0A%20%20%22params%22%3A%20%7B%0A%20%20%20%20%22protocolVersion%22%3A%20%222024-11-05%22%2C%0A%20%20%20%20%22capabilities%22%3A%20%7B%0A%20%20%20%20%20%20%22sampling%22%3A%20%7B%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22clientInfo%22%3A%20%7B%0A%20%20%20%20%20%20%22name%22%3A%20%22your-client%22%2C%0A%20%20%20%20%20%20%22version%22%3A%20%221.0.0%22%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AHandle%20errors%20gracefully%20in%20your%20sampling%20handler%3A%0A%0A%60%60%60go%0Afunc%20(h%20*MySamplingHandler)%20CreateMessage(ctx%20context.Context%2C%20request%20mcp.CreateMessageRequest)%20(*mcp.CreateMessageResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Validate%20request%0A%20%20%20%20if%20len(request.Messages)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20messages%20provided%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20for%20context%20cancellation%0A%20%20%20%20if%20err%20%3A%3D%20ctx.Err()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22request%20cancelled%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Call%20LLM%20with%20error%20handling%0A%20%20%20%20response%2C%20err%20%3A%3D%20h.callLLM(ctx%2C%20request)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Log%20error%20for%20debugging%0A%20%20%20%20%20%20%20%20log.Printf(%22LLM%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20appropriate%20error%0A%20%20%20%20%20%20%20%20if%20strings.Contains(err.Error()%2C%20%22rate%20limit%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22rate%20limit%20exceeded%2C%20please%20try%20again%20later%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22LLM%20service%20unavailable%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20response%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Implement%20Proper%20Error%20Handling**%3A%20Always%20handle%20LLM%20API%20errors%20gracefully%0A2.%20**Respect%20Rate%20Limits**%3A%20Implement%20rate%20limiting%20and%20backoff%20strategies%0A3.%20**Validate%20Inputs**%3A%20Check%20message%20content%20and%20parameters%20before%20processing%0A4.%20**Use%20Context**%3A%20Respect%20context%20cancellation%20and%20timeouts%0A5.%20**Log%20Appropriately**%3A%20Log%20requests%20for%20debugging%20but%20avoid%20logging%20sensitive%20data%0A6.%20**Model%20Selection**%3A%20Allow%20configuration%20of%20which%20LLM%20model%20to%20use%0A7.%20**Content%20Filtering**%3A%20Implement%20content%20filtering%20if%20required%20by%20your%20use%20case%0A%0A%23%23%20Testing%20Your%20Implementation%0A%0ATest%20your%20sampling%20handler%20with%20the%20sampling%20server%20example%3A%0A%0A%60%60%60bash%0A%23%20Build%20the%20sampling%20server%0Acd%20examples%2Fsampling_server%0Ago%20build%20-o%20sampling_server%0A%0A%23%20Build%20your%20client%0Ago%20build%20-o%20my_client%0A%0A%23%20Test%20the%20integration%0A.%2Fmy_client%20.%2Fsampling_server%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20Learn%20about%20%5Bserver-side%20sampling%20implementation%5D(%2Fservers%2Fadvanced-sampling)%0A-%20Explore%20%5Bclient%20operations%5D(%2Fclients%2Foperations)%0A-%20Check%20out%20the%20%5Bsampling%20examples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fmcp-go%2Ftree%2Fmain%2Fexamples%2Fsampling_client)",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./basics-DsLZ_3Eb.js"),[]),path:"/clients/basics",type:"mdx",filePath:"clients/basics.mdx",content:"%23%20Client%20Basics%0A%0ALearn%20the%20fundamentals%20of%20creating%20and%20managing%20MCP%20clients%2C%20including%20lifecycle%20management%2C%20initialization%2C%20and%20error%20handling.%0A%0A%23%23%20Creating%20Clients%0A%0AMCP-Go%20provides%20client%20constructors%20for%20each%20supported%20transport.%20The%20choice%20of%20transport%20determines%20how%20your%20client%20communicates%20with%20the%20server.%0A%0A%23%23%23%20Client%20Constructor%20Patterns%0A%0A%60%60%60go%0A%2F%2F%20STDIO%20client%20-%20for%20command-line%20tools%0Aclient%2C%20err%20%3A%3D%20client.NewStdioMCPClient(%22command%22%2C%20%22arg1%22%2C%20%22arg2%22)%0A%0A%2F%2F%20StreamableHTTP%20client%20-%20for%20web%20services%0Aclient%20%3A%3D%20client.NewStreamableHttpClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%0A%2F%2F%20SSE%20client%20-%20for%20real-time%20web%20applications%0Aclient%20%3A%3D%20client.NewSSEMCPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22)%0A%0A%2F%2F%20In-process%20client%20-%20for%20testing%20and%20embedded%20scenarios%0Aclient%20%3A%3D%20client.NewInProcessClient(server)%0A%60%60%60%0A%0A%23%23%23%20STDIO%20Client%20Creation%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22errors%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22math%22%0A%20%20%20%20%22net%2Fhttp%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20createStdioClient()%20(client.Client%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20client%20that%20spawns%20a%20subprocess%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioMCPClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%5B%5Dstring%7B%7D%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20STDIO%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20c%2C%20nil%0A%7D%0A%0A%2F%2F%20With%20custom%20environment%20variables%0Afunc%20createStdioClientWithEnv()%20(client.Client%2C%20error)%20%7B%0A%20%20%20%20env%20%3A%3D%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22LOG_LEVEL%3Ddebug%22%2C%0A%20%20%20%20%20%20%20%20%22DATABASE_URL%3Dsqlite%3A%2F%2Ftest.db%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioMCPClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20env%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20STDIO%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20c%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20StreamableHTTP%20Client%20Creation%0A%0A%60%60%60go%0Afunc%20createStreamableHTTPClient()%20client.Client%20%7B%0A%20%20%20%20%2F%2F%20Basic%20StreamableHTTP%20client%0A%09httpTransport%2C%20err%20%3A%3D%20transport.NewStreamableHTTP(server.URL%2C%0A%09%09%2F%2F%20Set%20timeout%0A%09%09transport.WithHTTPTimeout(30*time.Second)%2C%0A%09%09%2F%2F%20Set%20custom%20headers%0A%09%09transport.WithHTTPHeaders(map%5Bstring%5Dstring%7B%0A%09%09%09%22X-Custom-Header%22%3A%20%22custom-value%22%2C%0A%09%09%09%22Y-Another-Header%22%3A%20%22another-value%22%2C%0A%09%09%7D)%2C%0A%09%09%2F%2F%20With%20custom%20HTTP%20client%0A%09%09transport.WithHTTPBasicClient(%26http.Client%7B%7D)%2C%0A%09)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20create%20StreamableHTTP%20transport%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20c%20%3A%3D%20client.NewClient(httpTransport)%0A%20%20%20%20return%20c%0A%7D%0A%60%60%60%0A%0A%23%23%23%20SSE%20Client%20Creation%0A%0A%60%60%60go%0Afunc%20createSSEClient()%20client.Client%20%7B%0A%20%20%20%20%2F%2F%20Basic%20SSE%20client%0A%09c%2C%20err%20%3A%3D%20NewSSEMCPClient(testServer.URL%2B%22%2Fsse%22%2C%0A%09%09%2F%2F%20Set%20custom%20headers%0A%09%09WithHeaders(map%5Bstring%5Dstring%7B%0A%09%09%09%22X-Custom-Header%22%3A%20%22custom-value%22%2C%0A%09%09%09%22Y-Another-Header%22%3A%20%22another-value%22%2C%0A%09%09%7D)%2C%0A%09)%0A%20%20%20%20return%20c%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Lifecycle%0A%0AUnderstanding%20the%20client%20lifecycle%20is%20crucial%20for%20proper%20resource%20management%20and%20error%20handling.%0A%0A%23%23%23%20Lifecycle%20Stages%0A%0A1.%20**Creation**%20-%20Instantiate%20the%20client%0A2.%20**Initialization**%20-%20Establish%20connection%20and%20exchange%20capabilities%0A3.%20**Operation**%20-%20Use%20tools%2C%20resources%2C%20and%20prompts%0A4.%20**Cleanup**%20-%20Close%20connections%20and%20free%20resources%0A%0A%23%23%23%20Complete%20Lifecycle%20Example%0A%0A%60%60%60go%0Afunc%20demonstrateClientLifecycle()%20error%20%7B%0A%20%20%20%20%2F%2F%201.%20Creation%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewSSEMCPClient(%22server-command%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20creation%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Ensure%20cleanup%20happens%0A%20%20%20%20defer%20func()%20%7B%0A%20%20%20%20%20%20%20%20if%20closeErr%20%3A%3D%20c.Close()%3B%20closeErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Error%20closing%20client%3A%20%25v%22%2C%20closeErr)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%202.%20Initialization%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20initialization%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%203.%20Operation%0A%20%20%20%20if%20err%20%3A%3D%20performClientOperations(ctx%2C%20c)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20operations%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%204.%20Cleanup%20(handled%20by%20defer)%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20performClientOperations(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Found%20%25d%20tools%22%2C%20len(tools.Tools))%0A%0A%20%20%20%20%2F%2F%20Use%20the%20tools%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20tool.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22example%20input%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22format%22%3A%20%22json%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20failed%3A%20%25v%22%2C%20tool.Name%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20result%3A%20%25%2Bv%22%2C%20tool.Name%2C%20result)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Initialization%20Process%0A%0AThe%20initialization%20process%20establishes%20the%20MCP%20connection%20and%20exchanges%20capabilities%3A%0A%0A%60%60%60go%0Afunc%20initializeClientWithDetails(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20Initialize%20with%20custom%20client%20info%0A%20%20%20%20initReq%20%3A%3D%20mcp.InitializeRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.InitializeRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ProtocolVersion%3A%20%222024-11-05%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Capabilities%3A%20mcp.ClientCapabilities%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Tools%3A%20%20%20%20%20%26mcp.ToolsCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Resources%3A%20%26mcp.ResourcesCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Prompts%3A%20%20%20%26mcp.PromptsCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ClientInfo%3A%20mcp.ClientInfo%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%22My%20Application%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Version%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.InitializeWithRequest(ctx%2C%20initReq)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22initialization%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Connected%20to%20server%3A%20%25s%20v%25s%22%2C%20%0A%20%20%20%20%20%20%20%20result.ServerInfo.Name%2C%20%0A%20%20%20%20%20%20%20%20result.ServerInfo.Version)%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22Server%20capabilities%3A%20%25%2Bv%22%2C%20result.Capabilities)%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Graceful%20Shutdown%0A%0A%60%60%60go%0Atype%20ManagedClient%20struct%20%7B%0A%20%20%20%20client%20client.Client%0A%20%20%20%20ctx%20%20%20%20context.Context%0A%20%20%20%20cancel%20context.CancelFunc%0A%20%20%20%20done%20%20%20chan%20struct%7B%7D%0A%7D%0A%0Afunc%20NewManagedClient(clientType%2C%20address%20string)%20(*ManagedClient%2C%20error)%20%7B%0A%20%20%20%20var%20c%20client.Client%0A%20%20%20%20var%20err%20error%0A%0A%20%20%20%20switch%20clientType%20%7B%0A%20%20%20%20case%20%22stdio%22%3A%0A%20%20%20%20%20%20%20%20c%2C%20err%20%3D%20client.NewSSEMCPClient(%22server-command%22)%0A%20%20%20%20case%20%22streamablehttp%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewStreamableHttpClient(address)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewSSEMCPClient(address)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20client%20type%3A%20%25s%22%2C%20clientType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20mc%20%3A%3D%20%26ManagedClient%7B%0A%20%20%20%20%20%20%20%20client%3A%20c%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20cancel%2C%0A%20%20%20%20%20%20%20%20done%3A%20%20%20make(chan%20struct%7B%7D)%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Initialize%20in%20background%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20defer%20close(mc.done)%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Client%20initialization%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20return%20mc%2C%20nil%0A%7D%0A%0Afunc%20(mc%20*ManagedClient)%20WaitForReady(timeout%20time.Duration)%20error%20%7B%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-mc.done%3A%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20case%20%3C-time.After(timeout)%3A%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20initialization%20timeout%22)%0A%20%20%20%20case%20%3C-mc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20mc.ctx.Err()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(mc%20*ManagedClient)%20Close()%20error%20%7B%0A%20%20%20%20mc.cancel()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20initialization%20to%20complete%20or%20timeout%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-mc.done%3A%0A%20%20%20%20case%20%3C-time.After(5%20*%20time.Second)%3A%0A%20%20%20%20%20%20%20%20log.Println(%22Timeout%20waiting%20for%20client%20shutdown%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mc.client.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AProper%20error%20handling%20is%20essential%20for%20robust%20client%20applications.%0A%0A%23%23%23%20Error%20Types%0A%0A%60%60%60go%0A%2F%2F%20Connection%20errors%0Avar%20(%0A%20%20%20%20ErrConnectionFailed%20%3D%20errors.New(%22connection%20failed%22)%0A%20%20%20%20ErrConnectionLost%20%20%20%3D%20errors.New(%22connection%20lost%22)%0A%20%20%20%20ErrTimeout%20%20%20%20%20%20%20%20%20%20%3D%20errors.New(%22operation%20timeout%22)%0A)%0A%0A%2F%2F%20Protocol%20errors%0Avar%20(%0A%20%20%20%20ErrInvalidResponse%20%20%20%20%3D%20errors.New(%22invalid%20response%22)%0A%20%20%20%20ErrProtocolViolation%20%20%3D%20errors.New(%22protocol%20violation%22)%0A%20%20%20%20ErrUnsupportedVersion%20%3D%20errors.New(%22unsupported%20protocol%20version%22)%0A)%0A%0A%2F%2F%20Operation%20errors%0Avar%20(%0A%20%20%20%20ErrToolNotFound%20%20%20%20%20%20%20%3D%20errors.New(%22tool%20not%20found%22)%0A%20%20%20%20ErrResourceNotFound%20%20%20%3D%20errors.New(%22resource%20not%20found%22)%0A%20%20%20%20ErrInvalidArguments%20%20%20%3D%20errors.New(%22invalid%20arguments%22)%0A%20%20%20%20ErrPermissionDenied%20%20%20%3D%20errors.New(%22permission%20denied%22)%0A)%0A%60%60%60%0A%0A%23%23%23%20Comprehensive%20Error%20Handling%0A%0A%60%60%60go%0Afunc%20handleClientErrors(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22example_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22param%22%3A%20%22value%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Connection%20errors%20-%20may%20be%20recoverable%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrConnectionLost)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Connection%20lost%2C%20attempting%20reconnect...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20reconnectErr%20%3A%3D%20reconnectClient(c)%3B%20reconnectErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Reconnection%20failed%3A%20%25v%22%2C%20reconnectErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Retry%20the%20operation%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20handleClientErrors(ctx%2C%20c)%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrTimeout)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Operation%20timed%20out%2C%20retrying%20with%20longer%20timeout...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2060*time.Second)%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20cancel()%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20handleClientErrors(ctx%2C%20c)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Protocol%20errors%20-%20usually%20not%20recoverable%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrProtocolViolation)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Protocol%20violation%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrUnsupportedVersion)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unsupported%20protocol%20version%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Operation%20errors%20-%20check%20and%20fix%20request%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrToolNotFound)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20not%20found%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Maybe%20list%20available%20tools%20and%20suggest%20alternatives%0A%20%20%20%20%20%20%20%20%20%20%20%20suggestAlternativeTools(ctx%2C%20c)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrInvalidArguments)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Invalid%20arguments%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Maybe%20get%20tool%20schema%20and%20show%20required%20parameters%0A%20%20%20%20%20%20%20%20%20%20%20%20showToolSchema(ctx%2C%20c%2C%20%22example_tool%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrPermissionDenied)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Permission%20denied%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Maybe%20prompt%20for%20authentication%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Unknown%20errors%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unexpected%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Process%20successful%20result%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%0Afunc%20reconnectClient(c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20Close%20existing%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Close()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20closing%20client%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Wait%20before%20reconnecting%0A%20%20%20%20time.Sleep(1%20*%20time.Second)%0A%0A%20%20%20%20%2F%2F%20Reinitialize%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20return%20c.Initialize(ctx)%0A%7D%0A%0Afunc%20suggestAlternativeTools(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20tools%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Println(%22Available%20tools%3A%22)%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22-%20%25s%3A%20%25s%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20showToolSchema(ctx%20context.Context%2C%20c%20client.Client%2C%20toolName%20string)%20%7B%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20tools%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20if%20tool.Name%20%3D%3D%20toolName%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20schema%20for%20%25s%3A%22%2C%20toolName)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Description%3A%20%25s%22%2C%20tool.Description)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Input%20schema%3A%20%25%2Bv%22%2C%20tool.InputSchema)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20%25s%20not%20found%22%2C%20toolName)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Retry%20Logic%20with%20Exponential%20Backoff%0A%0A%60%60%60go%0Atype%20RetryConfig%20struct%20%7B%0A%20%20%20%20MaxRetries%20%20%20%20%20%20int%0A%20%20%20%20InitialDelay%20%20%20%20time.Duration%0A%20%20%20%20MaxDelay%20%20%20%20%20%20%20%20time.Duration%0A%20%20%20%20BackoffFactor%20%20%20float64%0A%20%20%20%20RetryableErrors%20%5B%5Derror%0A%7D%0A%0Afunc%20DefaultRetryConfig()%20RetryConfig%20%7B%0A%20%20%20%20return%20RetryConfig%7B%0A%20%20%20%20%20%20%20%20MaxRetries%3A%20%20%20%203%2C%0A%20%20%20%20%20%20%20%20InitialDelay%3A%20%201%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20MaxDelay%3A%20%20%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20BackoffFactor%3A%202.0%2C%0A%20%20%20%20%20%20%20%20RetryableErrors%3A%20%5B%5Derror%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20client.ErrConnectionLost%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20client.ErrTimeout%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20client.ErrConnectionFailed%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20RetryConfig)%20IsRetryable(err%20error)%20bool%20%7B%0A%20%20%20%20for%20_%2C%20retryableErr%20%3A%3D%20range%20rc.RetryableErrors%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20retryableErr)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20false%0A%7D%0A%0Afunc%20WithRetry%5BT%20any%5D(ctx%20context.Context%2C%20config%20RetryConfig%2C%20operation%20func()%20(T%2C%20error))%20(T%2C%20error)%20%7B%0A%20%20%20%20var%20lastErr%20error%0A%20%20%20%20var%20zero%20T%0A%0A%20%20%20%20for%20attempt%20%3A%3D%200%3B%20attempt%20%3C%3D%20config.MaxRetries%3B%20attempt%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20operation()%0A%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20lastErr%20%3D%20err%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20non-retryable%20errors%0A%20%20%20%20%20%20%20%20if%20!config.IsRetryable(err)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20on%20last%20attempt%0A%20%20%20%20%20%20%20%20if%20attempt%20%3D%3D%20config.MaxRetries%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Calculate%20delay%20with%20exponential%20backoff%0A%20%20%20%20%20%20%20%20delay%20%3A%3D%20time.Duration(float64(config.InitialDelay)%20*%20math.Pow(config.BackoffFactor%2C%20float64(attempt)))%0A%20%20%20%20%20%20%20%20if%20delay%20%3E%20config.MaxDelay%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delay%20%3D%20config.MaxDelay%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20log.Printf(%22Attempt%20%25d%20failed%2C%20retrying%20in%20%25v%3A%20%25v%22%2C%20attempt%2B1%2C%20delay%2C%20err)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Wait%20with%20context%20cancellation%20support%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-time.After(delay)%3A%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20zero%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20zero%2C%20fmt.Errorf(%22failed%20after%20%25d%20attempts%3A%20%25w%22%2C%20config.MaxRetries%2B1%2C%20lastErr)%0A%7D%0A%0A%2F%2F%20Usage%20example%0Afunc%20callToolWithRetry(ctx%20context.Context%2C%20c%20client.Client%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20config%20%3A%3D%20DefaultRetryConfig()%0A%20%20%20%20%0A%20%20%20%20return%20WithRetry(ctx%2C%20config%2C%20func()%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20c.CallTool(ctx%2C%20req)%0A%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Context%20and%20Timeout%20Management%0A%0A%60%60%60go%0Afunc%20demonstrateContextUsage(c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Operation%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22long_running_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22duration%22%3A%2060%2C%20%2F%2F%20seconds%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.DeadlineExceeded)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Tool%20call%20timed%20out%22)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20completed%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%0Afunc%20demonstrateCancellation(c%20client.Client)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20%2F%2F%20Start%20operation%20in%20goroutine%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22long_running_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.Canceled)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Tool%20call%20was%20cancelled%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20completed%3A%20%25%2Bv%22%2C%20result)%0A%20%20%20%20%7D()%0A%0A%20%20%20%20%2F%2F%20Cancel%20after%205%20seconds%0A%20%20%20%20time.Sleep(5%20*%20time.Second)%0A%20%20%20%20cancel()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20a%20bit%20to%20see%20the%20cancellation%0A%20%20%20%20time.Sleep(1%20*%20time.Second)%0A%7D%0A%60%60%60%0A%0A%23%23%20Connection%20Monitoring%0A%0A%23%23%23%20Health%20Checks%0A%0A%60%60%60go%0Atype%20ClientHealthMonitor%20struct%20%7B%0A%20%20%20%20client%20%20%20client.Client%0A%20%20%20%20interval%20time.Duration%0A%20%20%20%20timeout%20%20time.Duration%0A%20%20%20%20healthy%20%20bool%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewClientHealthMonitor(c%20client.Client%2C%20interval%2C%20timeout%20time.Duration)%20*ClientHealthMonitor%20%7B%0A%20%20%20%20return%20%26ClientHealthMonitor%7B%0A%20%20%20%20%20%20%20%20client%3A%20%20%20c%2C%0A%20%20%20%20%20%20%20%20interval%3A%20interval%2C%0A%20%20%20%20%20%20%20%20timeout%3A%20%20timeout%2C%0A%20%20%20%20%20%20%20%20healthy%3A%20%20false%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(chm%20*ClientHealthMonitor)%20Start(ctx%20context.Context)%20%7B%0A%20%20%20%20ticker%20%3A%3D%20time.NewTicker(chm.interval)%0A%20%20%20%20defer%20ticker.Stop()%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20case%20%3C-ticker.C%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20chm.checkHealth(ctx)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(chm%20*ClientHealthMonitor)%20checkHealth(ctx%20context.Context)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%20chm.timeout)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20%2F%2F%20Try%20to%20list%20tools%20as%20a%20health%20check%0A%20%20%20%20_%2C%20err%20%3A%3D%20chm.client.ListTools(ctx)%0A%20%20%20%20%0A%20%20%20%20chm.mutex.Lock()%0A%20%20%20%20chm.healthy%20%3D%20(err%20%3D%3D%20nil)%0A%20%20%20%20chm.mutex.Unlock()%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Health%20check%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(chm%20*ClientHealthMonitor)%20IsHealthy()%20bool%20%7B%0A%20%20%20%20chm.mutex.RLock()%0A%20%20%20%20defer%20chm.mutex.RUnlock()%0A%20%20%20%20return%20chm.healthy%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Connection%20Recovery%0A%0A%60%60%60go%0Atype%20ResilientClient%20struct%20%7B%0A%20%20%20%20factory%20%20%20%20func()%20(client.Client%2C%20error)%0A%20%20%20%20client%20%20%20%20%20client.Client%0A%20%20%20%20mutex%20%20%20%20%20%20sync.RWMutex%0A%20%20%20%20recovering%20bool%0A%7D%0A%0Afunc%20NewResilientClient(factory%20func()%20(client.Client%2C%20error))%20*ResilientClient%20%7B%0A%20%20%20%20return%20%26ResilientClient%7B%0A%20%20%20%20%20%20%20%20factory%3A%20factory%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20*ResilientClient)%20ensureConnected(ctx%20context.Context)%20error%20%7B%0A%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20if%20rc.client%20!%3D%20nil%20%26%26%20!rc.recovering%20%7B%0A%20%20%20%20%20%20%20%20rc.mutex.RUnlock()%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D%0A%20%20%20%20rc.mutex.RUnlock()%0A%0A%20%20%20%20rc.mutex.Lock()%0A%20%20%20%20defer%20rc.mutex.Unlock()%0A%0A%20%20%20%20%2F%2F%20Double-check%20after%20acquiring%20write%20lock%0A%20%20%20%20if%20rc.client%20!%3D%20nil%20%26%26%20!rc.recovering%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20rc.recovering%20%3D%20true%0A%20%20%20%20defer%20func()%20%7B%20rc.recovering%20%3D%20false%20%7D()%0A%0A%20%20%20%20%2F%2F%20Close%20existing%20client%20if%20any%0A%20%20%20%20if%20rc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20rc.client.Close()%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20new%20client%0A%20%20%20%20newClient%2C%20err%20%3A%3D%20rc.factory()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20create%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Initialize%20new%20client%0A%20%20%20%20if%20err%20%3A%3D%20newClient.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20newClient.Close()%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20initialize%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20rc.client%20%3D%20newClient%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(rc%20*ResilientClient)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20rc.ensureConnected(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20client%20%3A%3D%20rc.client%0A%20%20%20%20rc.mutex.RUnlock()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20client.CallTool(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20isConnectionError(err)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Mark%20for%20recovery%20and%20retry%20once%0A%20%20%20%20%20%20%20%20rc.mutex.Lock()%0A%20%20%20%20%20%20%20%20rc.recovering%20%3D%20true%0A%20%20%20%20%20%20%20%20rc.mutex.Unlock()%0A%0A%20%20%20%20%20%20%20%20if%20retryErr%20%3A%3D%20rc.ensureConnected(ctx)%3B%20retryErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22recovery%20failed%3A%20%25w%22%2C%20retryErr)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20%20%20%20%20client%20%3D%20rc.client%0A%20%20%20%20%20%20%20%20rc.mutex.RUnlock()%0A%0A%20%20%20%20%20%20%20%20return%20client.CallTool(ctx%2C%20req)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20isConnectionError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20client.ErrConnectionLost)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20client.ErrConnectionFailed)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Operations%5D(%2Fclients%2Foperations)**%20-%20Learn%20to%20use%20tools%2C%20resources%2C%20and%20prompts%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Explore%20transport-specific%20features",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./basics-DsLZ_3Eb.js"),[]),path:"/clients/basics.html",type:"mdx",filePath:"clients/basics.mdx",content:"%23%20Client%20Basics%0A%0ALearn%20the%20fundamentals%20of%20creating%20and%20managing%20MCP%20clients%2C%20including%20lifecycle%20management%2C%20initialization%2C%20and%20error%20handling.%0A%0A%23%23%20Creating%20Clients%0A%0AMCP-Go%20provides%20client%20constructors%20for%20each%20supported%20transport.%20The%20choice%20of%20transport%20determines%20how%20your%20client%20communicates%20with%20the%20server.%0A%0A%23%23%23%20Client%20Constructor%20Patterns%0A%0A%60%60%60go%0A%2F%2F%20STDIO%20client%20-%20for%20command-line%20tools%0Aclient%2C%20err%20%3A%3D%20client.NewStdioMCPClient(%22command%22%2C%20%22arg1%22%2C%20%22arg2%22)%0A%0A%2F%2F%20StreamableHTTP%20client%20-%20for%20web%20services%0Aclient%20%3A%3D%20client.NewStreamableHttpClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%0A%2F%2F%20SSE%20client%20-%20for%20real-time%20web%20applications%0Aclient%20%3A%3D%20client.NewSSEMCPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22)%0A%0A%2F%2F%20In-process%20client%20-%20for%20testing%20and%20embedded%20scenarios%0Aclient%20%3A%3D%20client.NewInProcessClient(server)%0A%60%60%60%0A%0A%23%23%23%20STDIO%20Client%20Creation%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22errors%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22math%22%0A%20%20%20%20%22net%2Fhttp%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20createStdioClient()%20(client.Client%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20client%20that%20spawns%20a%20subprocess%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioMCPClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%5B%5Dstring%7B%7D%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20STDIO%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20c%2C%20nil%0A%7D%0A%0A%2F%2F%20With%20custom%20environment%20variables%0Afunc%20createStdioClientWithEnv()%20(client.Client%2C%20error)%20%7B%0A%20%20%20%20env%20%3A%3D%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22LOG_LEVEL%3Ddebug%22%2C%0A%20%20%20%20%20%20%20%20%22DATABASE_URL%3Dsqlite%3A%2F%2Ftest.db%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioMCPClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20env%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20STDIO%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20c%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20StreamableHTTP%20Client%20Creation%0A%0A%60%60%60go%0Afunc%20createStreamableHTTPClient()%20client.Client%20%7B%0A%20%20%20%20%2F%2F%20Basic%20StreamableHTTP%20client%0A%09httpTransport%2C%20err%20%3A%3D%20transport.NewStreamableHTTP(server.URL%2C%0A%09%09%2F%2F%20Set%20timeout%0A%09%09transport.WithHTTPTimeout(30*time.Second)%2C%0A%09%09%2F%2F%20Set%20custom%20headers%0A%09%09transport.WithHTTPHeaders(map%5Bstring%5Dstring%7B%0A%09%09%09%22X-Custom-Header%22%3A%20%22custom-value%22%2C%0A%09%09%09%22Y-Another-Header%22%3A%20%22another-value%22%2C%0A%09%09%7D)%2C%0A%09%09%2F%2F%20With%20custom%20HTTP%20client%0A%09%09transport.WithHTTPBasicClient(%26http.Client%7B%7D)%2C%0A%09)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Failed%20to%20create%20StreamableHTTP%20transport%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20c%20%3A%3D%20client.NewClient(httpTransport)%0A%20%20%20%20return%20c%0A%7D%0A%60%60%60%0A%0A%23%23%23%20SSE%20Client%20Creation%0A%0A%60%60%60go%0Afunc%20createSSEClient()%20client.Client%20%7B%0A%20%20%20%20%2F%2F%20Basic%20SSE%20client%0A%09c%2C%20err%20%3A%3D%20NewSSEMCPClient(testServer.URL%2B%22%2Fsse%22%2C%0A%09%09%2F%2F%20Set%20custom%20headers%0A%09%09WithHeaders(map%5Bstring%5Dstring%7B%0A%09%09%09%22X-Custom-Header%22%3A%20%22custom-value%22%2C%0A%09%09%09%22Y-Another-Header%22%3A%20%22another-value%22%2C%0A%09%09%7D)%2C%0A%09)%0A%20%20%20%20return%20c%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Lifecycle%0A%0AUnderstanding%20the%20client%20lifecycle%20is%20crucial%20for%20proper%20resource%20management%20and%20error%20handling.%0A%0A%23%23%23%20Lifecycle%20Stages%0A%0A1.%20**Creation**%20-%20Instantiate%20the%20client%0A2.%20**Initialization**%20-%20Establish%20connection%20and%20exchange%20capabilities%0A3.%20**Operation**%20-%20Use%20tools%2C%20resources%2C%20and%20prompts%0A4.%20**Cleanup**%20-%20Close%20connections%20and%20free%20resources%0A%0A%23%23%23%20Complete%20Lifecycle%20Example%0A%0A%60%60%60go%0Afunc%20demonstrateClientLifecycle()%20error%20%7B%0A%20%20%20%20%2F%2F%201.%20Creation%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewSSEMCPClient(%22server-command%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20creation%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Ensure%20cleanup%20happens%0A%20%20%20%20defer%20func()%20%7B%0A%20%20%20%20%20%20%20%20if%20closeErr%20%3A%3D%20c.Close()%3B%20closeErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Error%20closing%20client%3A%20%25v%22%2C%20closeErr)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%202.%20Initialization%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20initialization%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%203.%20Operation%0A%20%20%20%20if%20err%20%3A%3D%20performClientOperations(ctx%2C%20c)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20operations%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%204.%20Cleanup%20(handled%20by%20defer)%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20performClientOperations(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Found%20%25d%20tools%22%2C%20len(tools.Tools))%0A%0A%20%20%20%20%2F%2F%20Use%20the%20tools%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20tool.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22example%20input%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22format%22%3A%20%22json%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20failed%3A%20%25v%22%2C%20tool.Name%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20result%3A%20%25%2Bv%22%2C%20tool.Name%2C%20result)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Initialization%20Process%0A%0AThe%20initialization%20process%20establishes%20the%20MCP%20connection%20and%20exchanges%20capabilities%3A%0A%0A%60%60%60go%0Afunc%20initializeClientWithDetails(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20Initialize%20with%20custom%20client%20info%0A%20%20%20%20initReq%20%3A%3D%20mcp.InitializeRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.InitializeRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ProtocolVersion%3A%20%222024-11-05%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Capabilities%3A%20mcp.ClientCapabilities%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Tools%3A%20%20%20%20%20%26mcp.ToolsCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Resources%3A%20%26mcp.ResourcesCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Prompts%3A%20%20%20%26mcp.PromptsCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ClientInfo%3A%20mcp.ClientInfo%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%22My%20Application%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Version%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.InitializeWithRequest(ctx%2C%20initReq)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22initialization%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Connected%20to%20server%3A%20%25s%20v%25s%22%2C%20%0A%20%20%20%20%20%20%20%20result.ServerInfo.Name%2C%20%0A%20%20%20%20%20%20%20%20result.ServerInfo.Version)%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22Server%20capabilities%3A%20%25%2Bv%22%2C%20result.Capabilities)%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Graceful%20Shutdown%0A%0A%60%60%60go%0Atype%20ManagedClient%20struct%20%7B%0A%20%20%20%20client%20client.Client%0A%20%20%20%20ctx%20%20%20%20context.Context%0A%20%20%20%20cancel%20context.CancelFunc%0A%20%20%20%20done%20%20%20chan%20struct%7B%7D%0A%7D%0A%0Afunc%20NewManagedClient(clientType%2C%20address%20string)%20(*ManagedClient%2C%20error)%20%7B%0A%20%20%20%20var%20c%20client.Client%0A%20%20%20%20var%20err%20error%0A%0A%20%20%20%20switch%20clientType%20%7B%0A%20%20%20%20case%20%22stdio%22%3A%0A%20%20%20%20%20%20%20%20c%2C%20err%20%3D%20client.NewSSEMCPClient(%22server-command%22)%0A%20%20%20%20case%20%22streamablehttp%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewStreamableHttpClient(address)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewSSEMCPClient(address)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20client%20type%3A%20%25s%22%2C%20clientType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20mc%20%3A%3D%20%26ManagedClient%7B%0A%20%20%20%20%20%20%20%20client%3A%20c%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20cancel%2C%0A%20%20%20%20%20%20%20%20done%3A%20%20%20make(chan%20struct%7B%7D)%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Initialize%20in%20background%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20defer%20close(mc.done)%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Client%20initialization%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20return%20mc%2C%20nil%0A%7D%0A%0Afunc%20(mc%20*ManagedClient)%20WaitForReady(timeout%20time.Duration)%20error%20%7B%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-mc.done%3A%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20case%20%3C-time.After(timeout)%3A%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22client%20initialization%20timeout%22)%0A%20%20%20%20case%20%3C-mc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20mc.ctx.Err()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(mc%20*ManagedClient)%20Close()%20error%20%7B%0A%20%20%20%20mc.cancel()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20initialization%20to%20complete%20or%20timeout%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-mc.done%3A%0A%20%20%20%20case%20%3C-time.After(5%20*%20time.Second)%3A%0A%20%20%20%20%20%20%20%20log.Println(%22Timeout%20waiting%20for%20client%20shutdown%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mc.client.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AProper%20error%20handling%20is%20essential%20for%20robust%20client%20applications.%0A%0A%23%23%23%20Error%20Types%0A%0A%60%60%60go%0A%2F%2F%20Connection%20errors%0Avar%20(%0A%20%20%20%20ErrConnectionFailed%20%3D%20errors.New(%22connection%20failed%22)%0A%20%20%20%20ErrConnectionLost%20%20%20%3D%20errors.New(%22connection%20lost%22)%0A%20%20%20%20ErrTimeout%20%20%20%20%20%20%20%20%20%20%3D%20errors.New(%22operation%20timeout%22)%0A)%0A%0A%2F%2F%20Protocol%20errors%0Avar%20(%0A%20%20%20%20ErrInvalidResponse%20%20%20%20%3D%20errors.New(%22invalid%20response%22)%0A%20%20%20%20ErrProtocolViolation%20%20%3D%20errors.New(%22protocol%20violation%22)%0A%20%20%20%20ErrUnsupportedVersion%20%3D%20errors.New(%22unsupported%20protocol%20version%22)%0A)%0A%0A%2F%2F%20Operation%20errors%0Avar%20(%0A%20%20%20%20ErrToolNotFound%20%20%20%20%20%20%20%3D%20errors.New(%22tool%20not%20found%22)%0A%20%20%20%20ErrResourceNotFound%20%20%20%3D%20errors.New(%22resource%20not%20found%22)%0A%20%20%20%20ErrInvalidArguments%20%20%20%3D%20errors.New(%22invalid%20arguments%22)%0A%20%20%20%20ErrPermissionDenied%20%20%20%3D%20errors.New(%22permission%20denied%22)%0A)%0A%60%60%60%0A%0A%23%23%23%20Comprehensive%20Error%20Handling%0A%0A%60%60%60go%0Afunc%20handleClientErrors(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22example_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22param%22%3A%20%22value%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Connection%20errors%20-%20may%20be%20recoverable%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrConnectionLost)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Connection%20lost%2C%20attempting%20reconnect...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20reconnectErr%20%3A%3D%20reconnectClient(c)%3B%20reconnectErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Reconnection%20failed%3A%20%25v%22%2C%20reconnectErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Retry%20the%20operation%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20handleClientErrors(ctx%2C%20c)%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrTimeout)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Operation%20timed%20out%2C%20retrying%20with%20longer%20timeout...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2060*time.Second)%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20cancel()%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20handleClientErrors(ctx%2C%20c)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Protocol%20errors%20-%20usually%20not%20recoverable%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrProtocolViolation)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Protocol%20violation%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrUnsupportedVersion)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unsupported%20protocol%20version%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Operation%20errors%20-%20check%20and%20fix%20request%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrToolNotFound)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20not%20found%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Maybe%20list%20available%20tools%20and%20suggest%20alternatives%0A%20%20%20%20%20%20%20%20%20%20%20%20suggestAlternativeTools(ctx%2C%20c)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrInvalidArguments)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Invalid%20arguments%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Maybe%20get%20tool%20schema%20and%20show%20required%20parameters%0A%20%20%20%20%20%20%20%20%20%20%20%20showToolSchema(ctx%2C%20c%2C%20%22example_tool%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrPermissionDenied)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Permission%20denied%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Maybe%20prompt%20for%20authentication%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Unknown%20errors%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unexpected%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Process%20successful%20result%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%0Afunc%20reconnectClient(c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20Close%20existing%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Close()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20closing%20client%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Wait%20before%20reconnecting%0A%20%20%20%20time.Sleep(1%20*%20time.Second)%0A%0A%20%20%20%20%2F%2F%20Reinitialize%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20return%20c.Initialize(ctx)%0A%7D%0A%0Afunc%20suggestAlternativeTools(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20tools%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Println(%22Available%20tools%3A%22)%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22-%20%25s%3A%20%25s%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20showToolSchema(ctx%20context.Context%2C%20c%20client.Client%2C%20toolName%20string)%20%7B%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20tools%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20if%20tool.Name%20%3D%3D%20toolName%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20schema%20for%20%25s%3A%22%2C%20toolName)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Description%3A%20%25s%22%2C%20tool.Description)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Input%20schema%3A%20%25%2Bv%22%2C%20tool.InputSchema)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20%25s%20not%20found%22%2C%20toolName)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Retry%20Logic%20with%20Exponential%20Backoff%0A%0A%60%60%60go%0Atype%20RetryConfig%20struct%20%7B%0A%20%20%20%20MaxRetries%20%20%20%20%20%20int%0A%20%20%20%20InitialDelay%20%20%20%20time.Duration%0A%20%20%20%20MaxDelay%20%20%20%20%20%20%20%20time.Duration%0A%20%20%20%20BackoffFactor%20%20%20float64%0A%20%20%20%20RetryableErrors%20%5B%5Derror%0A%7D%0A%0Afunc%20DefaultRetryConfig()%20RetryConfig%20%7B%0A%20%20%20%20return%20RetryConfig%7B%0A%20%20%20%20%20%20%20%20MaxRetries%3A%20%20%20%203%2C%0A%20%20%20%20%20%20%20%20InitialDelay%3A%20%201%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20MaxDelay%3A%20%20%20%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20BackoffFactor%3A%202.0%2C%0A%20%20%20%20%20%20%20%20RetryableErrors%3A%20%5B%5Derror%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20client.ErrConnectionLost%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20client.ErrTimeout%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20client.ErrConnectionFailed%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20RetryConfig)%20IsRetryable(err%20error)%20bool%20%7B%0A%20%20%20%20for%20_%2C%20retryableErr%20%3A%3D%20range%20rc.RetryableErrors%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20retryableErr)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20false%0A%7D%0A%0Afunc%20WithRetry%5BT%20any%5D(ctx%20context.Context%2C%20config%20RetryConfig%2C%20operation%20func()%20(T%2C%20error))%20(T%2C%20error)%20%7B%0A%20%20%20%20var%20lastErr%20error%0A%20%20%20%20var%20zero%20T%0A%0A%20%20%20%20for%20attempt%20%3A%3D%200%3B%20attempt%20%3C%3D%20config.MaxRetries%3B%20attempt%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20operation()%0A%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20lastErr%20%3D%20err%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20non-retryable%20errors%0A%20%20%20%20%20%20%20%20if%20!config.IsRetryable(err)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20on%20last%20attempt%0A%20%20%20%20%20%20%20%20if%20attempt%20%3D%3D%20config.MaxRetries%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Calculate%20delay%20with%20exponential%20backoff%0A%20%20%20%20%20%20%20%20delay%20%3A%3D%20time.Duration(float64(config.InitialDelay)%20*%20math.Pow(config.BackoffFactor%2C%20float64(attempt)))%0A%20%20%20%20%20%20%20%20if%20delay%20%3E%20config.MaxDelay%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delay%20%3D%20config.MaxDelay%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20log.Printf(%22Attempt%20%25d%20failed%2C%20retrying%20in%20%25v%3A%20%25v%22%2C%20attempt%2B1%2C%20delay%2C%20err)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Wait%20with%20context%20cancellation%20support%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-time.After(delay)%3A%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20zero%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20zero%2C%20fmt.Errorf(%22failed%20after%20%25d%20attempts%3A%20%25w%22%2C%20config.MaxRetries%2B1%2C%20lastErr)%0A%7D%0A%0A%2F%2F%20Usage%20example%0Afunc%20callToolWithRetry(ctx%20context.Context%2C%20c%20client.Client%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20config%20%3A%3D%20DefaultRetryConfig()%0A%20%20%20%20%0A%20%20%20%20return%20WithRetry(ctx%2C%20config%2C%20func()%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20c.CallTool(ctx%2C%20req)%0A%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Context%20and%20Timeout%20Management%0A%0A%60%60%60go%0Afunc%20demonstrateContextUsage(c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Operation%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22long_running_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22duration%22%3A%2060%2C%20%2F%2F%20seconds%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.DeadlineExceeded)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Tool%20call%20timed%20out%22)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20completed%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%0Afunc%20demonstrateCancellation(c%20client.Client)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20%2F%2F%20Start%20operation%20in%20goroutine%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22long_running_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.Canceled)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Tool%20call%20was%20cancelled%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20completed%3A%20%25%2Bv%22%2C%20result)%0A%20%20%20%20%7D()%0A%0A%20%20%20%20%2F%2F%20Cancel%20after%205%20seconds%0A%20%20%20%20time.Sleep(5%20*%20time.Second)%0A%20%20%20%20cancel()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20a%20bit%20to%20see%20the%20cancellation%0A%20%20%20%20time.Sleep(1%20*%20time.Second)%0A%7D%0A%60%60%60%0A%0A%23%23%20Connection%20Monitoring%0A%0A%23%23%23%20Health%20Checks%0A%0A%60%60%60go%0Atype%20ClientHealthMonitor%20struct%20%7B%0A%20%20%20%20client%20%20%20client.Client%0A%20%20%20%20interval%20time.Duration%0A%20%20%20%20timeout%20%20time.Duration%0A%20%20%20%20healthy%20%20bool%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewClientHealthMonitor(c%20client.Client%2C%20interval%2C%20timeout%20time.Duration)%20*ClientHealthMonitor%20%7B%0A%20%20%20%20return%20%26ClientHealthMonitor%7B%0A%20%20%20%20%20%20%20%20client%3A%20%20%20c%2C%0A%20%20%20%20%20%20%20%20interval%3A%20interval%2C%0A%20%20%20%20%20%20%20%20timeout%3A%20%20timeout%2C%0A%20%20%20%20%20%20%20%20healthy%3A%20%20false%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(chm%20*ClientHealthMonitor)%20Start(ctx%20context.Context)%20%7B%0A%20%20%20%20ticker%20%3A%3D%20time.NewTicker(chm.interval)%0A%20%20%20%20defer%20ticker.Stop()%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20case%20%3C-ticker.C%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20chm.checkHealth(ctx)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(chm%20*ClientHealthMonitor)%20checkHealth(ctx%20context.Context)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%20chm.timeout)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20%2F%2F%20Try%20to%20list%20tools%20as%20a%20health%20check%0A%20%20%20%20_%2C%20err%20%3A%3D%20chm.client.ListTools(ctx)%0A%20%20%20%20%0A%20%20%20%20chm.mutex.Lock()%0A%20%20%20%20chm.healthy%20%3D%20(err%20%3D%3D%20nil)%0A%20%20%20%20chm.mutex.Unlock()%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Health%20check%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(chm%20*ClientHealthMonitor)%20IsHealthy()%20bool%20%7B%0A%20%20%20%20chm.mutex.RLock()%0A%20%20%20%20defer%20chm.mutex.RUnlock()%0A%20%20%20%20return%20chm.healthy%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Connection%20Recovery%0A%0A%60%60%60go%0Atype%20ResilientClient%20struct%20%7B%0A%20%20%20%20factory%20%20%20%20func()%20(client.Client%2C%20error)%0A%20%20%20%20client%20%20%20%20%20client.Client%0A%20%20%20%20mutex%20%20%20%20%20%20sync.RWMutex%0A%20%20%20%20recovering%20bool%0A%7D%0A%0Afunc%20NewResilientClient(factory%20func()%20(client.Client%2C%20error))%20*ResilientClient%20%7B%0A%20%20%20%20return%20%26ResilientClient%7B%0A%20%20%20%20%20%20%20%20factory%3A%20factory%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20*ResilientClient)%20ensureConnected(ctx%20context.Context)%20error%20%7B%0A%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20if%20rc.client%20!%3D%20nil%20%26%26%20!rc.recovering%20%7B%0A%20%20%20%20%20%20%20%20rc.mutex.RUnlock()%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D%0A%20%20%20%20rc.mutex.RUnlock()%0A%0A%20%20%20%20rc.mutex.Lock()%0A%20%20%20%20defer%20rc.mutex.Unlock()%0A%0A%20%20%20%20%2F%2F%20Double-check%20after%20acquiring%20write%20lock%0A%20%20%20%20if%20rc.client%20!%3D%20nil%20%26%26%20!rc.recovering%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20rc.recovering%20%3D%20true%0A%20%20%20%20defer%20func()%20%7B%20rc.recovering%20%3D%20false%20%7D()%0A%0A%20%20%20%20%2F%2F%20Close%20existing%20client%20if%20any%0A%20%20%20%20if%20rc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20rc.client.Close()%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20new%20client%0A%20%20%20%20newClient%2C%20err%20%3A%3D%20rc.factory()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20create%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Initialize%20new%20client%0A%20%20%20%20if%20err%20%3A%3D%20newClient.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20newClient.Close()%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20initialize%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20rc.client%20%3D%20newClient%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(rc%20*ResilientClient)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20rc.ensureConnected(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20client%20%3A%3D%20rc.client%0A%20%20%20%20rc.mutex.RUnlock()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20client.CallTool(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20isConnectionError(err)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Mark%20for%20recovery%20and%20retry%20once%0A%20%20%20%20%20%20%20%20rc.mutex.Lock()%0A%20%20%20%20%20%20%20%20rc.recovering%20%3D%20true%0A%20%20%20%20%20%20%20%20rc.mutex.Unlock()%0A%0A%20%20%20%20%20%20%20%20if%20retryErr%20%3A%3D%20rc.ensureConnected(ctx)%3B%20retryErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22recovery%20failed%3A%20%25w%22%2C%20retryErr)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20%20%20%20%20client%20%3D%20rc.client%0A%20%20%20%20%20%20%20%20rc.mutex.RUnlock()%0A%0A%20%20%20%20%20%20%20%20return%20client.CallTool(ctx%2C%20req)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20isConnectionError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20client.ErrConnectionLost)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20client.ErrConnectionFailed)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Operations%5D(%2Fclients%2Foperations)**%20-%20Learn%20to%20use%20tools%2C%20resources%2C%20and%20prompts%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Explore%20transport-specific%20features",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./index-Ctn9PyYt.js"),[]),path:"/clients",type:"mdx",filePath:"clients/index.mdx",content:"%23%20Building%20MCP%20Clients%0A%0ALearn%20how%20to%20build%20MCP%20clients%20that%20connect%20to%20and%20interact%20with%20MCP%20servers.%20This%20section%20covers%20client%20creation%2C%20operations%2C%20and%20transport-specific%20implementations.%0A%0A%23%23%20Overview%0A%0AMCP%20clients%20connect%20to%20servers%20to%20access%20tools%2C%20resources%2C%20and%20prompts.%20MCP-Go%20provides%20client%20implementations%20for%20all%20supported%20transports%2C%20making%20it%20easy%20to%20integrate%20MCP%20functionality%20into%20your%20applications.%0A%0A%23%23%20What%20You'll%20Learn%0A%0A-%20**%5BClient%20Basics%5D(%2Fclients%2Fbasics)**%20-%20Creating%20and%20managing%20client%20lifecycle%0A-%20**%5BClient%20Operations%5D(%2Fclients%2Foperations)**%20-%20Using%20tools%2C%20resources%2C%20and%20prompts%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Transport-specific%20client%20implementations%0A%0A%23%23%20Quick%20Example%0A%0AHere's%20a%20complete%20example%20showing%20how%20to%20create%20and%20use%20an%20MCP%20client%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20STDIO%20client%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioMCPClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%5B%5Dstring%7B%7D%20%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20the%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx%2C%20initRequest)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Discover%20available%20capabilities%0A%20%20%20%20if%20err%20%3A%3D%20demonstrateClientOperations(ctx%2C%20c)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20demonstrateClientOperations(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20list%20tools%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20tools%3A%20%25d%5Cn%22%2C%20len(tools.Tools))%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20List%20available%20resources%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20list%20resources%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22%5CnAvailable%20resources%3A%20%25d%5Cn%22%2C%20len(resources.Resources))%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20resource.URI%2C%20resource.Name)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20tool%20if%20available%0A%20%20%20%20if%20len(tools.Tools)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20tool%20%3A%3D%20tools.Tools%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnCalling%20tool%3A%20%25s%5Cn%22%2C%20tool.Name)%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20tool.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22example%20input%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22format%22%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22tool%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Tool%20result%3A%20%25%2Bv%5Cn%22%2C%20result)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Read%20a%20resource%20if%20available%0A%20%20%20%20if%20len(resources.Resources)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20resource%20%3A%3D%20resources.Resources%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnReading%20resource%3A%20%25s%5Cn%22%2C%20resource.URI)%0A%0A%20%20%20%20%20%20%20%20content%2C%20err%20%3A%3D%20c.ReadResource(ctx%2C%20mcp.ReadResourceRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.ReadResourceRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20resource.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22resource%20read%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Resource%20content%3A%20%25%2Bv%5Cn%22%2C%20content)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Types%20by%20Transport%0A%0A%23%23%23%20STDIO%20Client%0A**Best%20for%3A**%0A-%20Command-line%20applications%0A-%20Desktop%20software%20integration%0A-%20Local%20development%20and%20testing%0A-%20Single-server%20connections%0A%0A%60%60%60go%0A%2F%2F%20Create%20STDIO%20client%0Aclient%2C%20err%20%3A%3D%20client.NewStdioMCPClient(%22server-command%22%2C%20%22arg1%22%2C%20%22arg2%22)%0A%60%60%60%0A%0A%23%23%23%20StreamableHTTP%20Client%0A**Best%20for%3A**%0A-%20Web%20applications%0A-%20Microservice%20architectures%0A-%20Load-balanced%20deployments%0A-%20REST-like%20interactions%0A%0A%60%60%60go%0A%2F%2F%20Create%20StreamableHTTP%20client%0Aclient%20%3A%3D%20client.NewStreamableHttpClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%60%60%60%0A%0A%23%23%23%20SSE%20Client%0A**Best%20for%3A**%0A-%20Real-time%20web%20applications%0A-%20Browser-based%20interfaces%0A-%20Streaming%20data%20scenarios%0A-%20Multi-client%20environments%0A%0A%60%60%60go%0A%2F%2F%20Create%20SSE%20client%0Aclient%20%3A%3D%20client.NewSSEMCPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22)%0A%60%60%60%0A%0A%23%23%23%20In-Process%20Client%0A**Best%20for%3A**%0A-%20Testing%20and%20development%0A-%20Embedded%20scenarios%0A-%20High-performance%20applications%0A-%20Library%20integrations%0A%0A%60%60%60go%0A%2F%2F%20Create%20in-process%20client%0Aclient%20%3A%3D%20client.NewInProcessClient(server)%0A%60%60%60%0A%0A%23%23%20Common%20Client%20Patterns%0A%0A%23%23%23%20Connection%20Management%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22errors%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Atype%20MCPClientManager%20struct%20%7B%0A%20%20%20%20client%20client.Client%0A%20%20%20%20ctx%20%20%20%20context.Context%0A%20%20%20%20cancel%20context.CancelFunc%0A%7D%0A%0Afunc%20NewMCPClientManager(clientType%2C%20address%20string)%20(*MCPClientManager%2C%20error)%20%7B%0A%20%20%20%20var%20c%20client.Client%0A%20%20%20%20var%20err%20error%0A%0A%20%20%20%20switch%20clientType%20%7B%0A%20%20%20%20case%20%22stdio%22%3A%0A%20%20%20%20%20%20%20%20c%2C%20err%20%3D%20client.NewStdioMCPClient(%22server-command%22)%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewStreamableHttpClient(address)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewSSEMCPClient(address)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20client%20type%3A%20%25s%22%2C%20clientType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20manager%20%3A%3D%20%26MCPClientManager%7B%0A%20%20%20%20%20%20%20%20client%3A%20c%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20cancel%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Initialize%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20cancel()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20initialize%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20manager%2C%20nil%0A%7D%0A%0Afunc%20(m%20*MCPClientManager)%20Close()%20error%20%7B%0A%20%20%20%20m.cancel()%0A%20%20%20%20return%20m.client.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Handling%0A%0A%60%60%60go%0Afunc%20handleClientErrors(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Tool%20call%20with%20error%20handling%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22example_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22param%22%3A%20%22value%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrConnectionLost)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Connection%20lost%2C%20attempting%20reconnect...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Implement%20reconnection%20logic%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrToolNotFound)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20not%20found%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrInvalidArguments)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Invalid%20arguments%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unexpected%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Process%20successful%20result%0A%20%20%20%20processToolResult(result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Retry%20Logic%0A%0A%60%60%60go%0Afunc%20callToolWithRetry(ctx%20context.Context%2C%20c%20client.Client%2C%20req%20mcp.CallToolRequest%2C%20maxRetries%20int)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20var%20lastErr%20error%0A%0A%20%20%20%20for%20attempt%20%3A%3D%200%3B%20attempt%20%3C%3D%20maxRetries%3B%20attempt%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20lastErr%20%3D%20err%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20certain%20errors%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20client.ErrInvalidArguments)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20client.ErrToolNotFound)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Exponential%20backoff%0A%20%20%20%20%20%20%20%20if%20attempt%20%3C%20maxRetries%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20backoff%20%3A%3D%20time.Duration(1%3C%3Cattempt)%20*%20time.Second%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Attempt%20%25d%20failed%2C%20retrying%20in%20%25v%3A%20%25v%22%2C%20attempt%2B1%2C%20backoff%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-time.After(backoff)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20after%20%25d%20attempts%3A%20%25w%22%2C%20maxRetries%2B1%2C%20lastErr)%0A%7D%0A%60%60%60%0A%0A%23%23%20Integration%20Patterns%0A%0A%23%23%23%20LLM%20Application%20Integration%0A%0A%60%60%60go%0Atype%20LLMApplication%20struct%20%7B%0A%20%20%20%20mcpClient%20client.Client%0A%20%20%20%20llmClient%20LLMClient%0A%7D%0A%0Afunc%20NewLLMApplication(mcpAddress%20string)%20(*LLMApplication%2C%20error)%20%7B%0A%20%20%20%20mcpClient%20%3A%3D%20client.NewStreamableHttpClient(mcpAddress)%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20mcpClient.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26LLMApplication%7B%0A%20%20%20%20%20%20%20%20mcpClient%3A%20mcpClient%2C%0A%20%20%20%20%20%20%20%20llmClient%3A%20NewLLMClient()%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(app%20*LLMApplication)%20ProcessUserQuery(ctx%20context.Context%2C%20query%20string)%20(string%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20available%20tools%20for%20the%20LLM%0A%20%20%20%20tools%2C%20err%20%3A%3D%20app.mcpClient.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Send%20query%20to%20LLM%20with%20available%20tools%0A%20%20%20%20response%2C%20toolCalls%2C%20err%20%3A%3D%20app.llmClient.Chat(ctx%2C%20query%2C%20tools.Tools)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Execute%20any%20tool%20calls%0A%20%20%20%20for%20_%2C%20toolCall%20%3A%3D%20range%20toolCalls%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20app.mcpClient.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20toolCall.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20toolCall.Arguments%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22%22%2C%20fmt.Errorf(%22tool%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Send%20tool%20result%20back%20to%20LLM%0A%20%20%20%20%20%20%20%20response%2C%20err%20%3D%20app.llmClient.ContinueWithToolResult(ctx%2C%20toolCall.ID%2C%20result)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20response%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multi-Server%20Client%0A%0A%60%60%60go%0Atype%20MultiServerClient%20struct%20%7B%0A%20%20%20%20clients%20map%5Bstring%5Dclient.Client%0A%20%20%20%20mutex%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewMultiServerClient()%20*MultiServerClient%20%7B%0A%20%20%20%20return%20%26MultiServerClient%7B%0A%20%20%20%20%20%20%20%20clients%3A%20make(map%5Bstring%5Dclient.Client)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(msc%20*MultiServerClient)%20AddServer(name%2C%20address%20string%2C%20clientType%20string)%20error%20%7B%0A%20%20%20%20msc.mutex.Lock()%0A%20%20%20%20defer%20msc.mutex.Unlock()%0A%0A%20%20%20%20var%20c%20client.Client%0A%20%20%20%20var%20err%20error%0A%0A%20%20%20%20switch%20clientType%20%7B%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewStreamableHttpClient(address)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewSSEMCPClient(address)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22unsupported%20client%20type%3A%20%25s%22%2C%20clientType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20initialize%20client%20for%20%25s%3A%20%25w%22%2C%20name%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20msc.clients%5Bname%5D%20%3D%20c%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(msc%20*MultiServerClient)%20CallTool(ctx%20context.Context%2C%20serverName%2C%20toolName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20msc.mutex.RLock()%0A%20%20%20%20c%2C%20exists%20%3A%3D%20msc.clients%5BserverName%5D%0A%20%20%20%20msc.mutex.RUnlock()%0A%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22server%20not%20found%3A%20%25s%22%2C%20serverName)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20toolName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(msc%20*MultiServerClient)%20GetAllTools(ctx%20context.Context)%20(map%5Bstring%5D%5B%5Dmcp.Tool%2C%20error)%20%7B%0A%20%20%20%20msc.mutex.RLock()%0A%20%20%20%20defer%20msc.mutex.RUnlock()%0A%0A%20%20%20%20allTools%20%3A%3D%20make(map%5Bstring%5D%5B%5Dmcp.Tool)%0A%0A%20%20%20%20for%20serverName%2C%20c%20%3A%3D%20range%20msc.clients%20%7B%0A%20%20%20%20%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20get%20tools%20from%20%25s%3A%20%25w%22%2C%20serverName%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20allTools%5BserverName%5D%20%3D%20tools.Tools%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20allTools%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0AExplore%20each%20client%20topic%20in%20detail%3A%0A%0A-%20**%5BClient%20Basics%5D(%2Fclients%2Fbasics)**%20-%20Client%20lifecycle%20and%20error%20handling%0A-%20**%5BClient%20Operations%5D(%2Fclients%2Foperations)**%20-%20Tools%2C%20resources%2C%20and%20prompts%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Transport-specific%20implementations",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./index-Ctn9PyYt.js"),[]),path:"/clients.html",type:"mdx",filePath:"clients/index.mdx",content:"%23%20Building%20MCP%20Clients%0A%0ALearn%20how%20to%20build%20MCP%20clients%20that%20connect%20to%20and%20interact%20with%20MCP%20servers.%20This%20section%20covers%20client%20creation%2C%20operations%2C%20and%20transport-specific%20implementations.%0A%0A%23%23%20Overview%0A%0AMCP%20clients%20connect%20to%20servers%20to%20access%20tools%2C%20resources%2C%20and%20prompts.%20MCP-Go%20provides%20client%20implementations%20for%20all%20supported%20transports%2C%20making%20it%20easy%20to%20integrate%20MCP%20functionality%20into%20your%20applications.%0A%0A%23%23%20What%20You'll%20Learn%0A%0A-%20**%5BClient%20Basics%5D(%2Fclients%2Fbasics)**%20-%20Creating%20and%20managing%20client%20lifecycle%0A-%20**%5BClient%20Operations%5D(%2Fclients%2Foperations)**%20-%20Using%20tools%2C%20resources%2C%20and%20prompts%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Transport-specific%20client%20implementations%0A%0A%23%23%20Quick%20Example%0A%0AHere's%20a%20complete%20example%20showing%20how%20to%20create%20and%20use%20an%20MCP%20client%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20STDIO%20client%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioMCPClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%5B%5Dstring%7B%7D%20%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20the%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx%2C%20initRequest)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Discover%20available%20capabilities%0A%20%20%20%20if%20err%20%3A%3D%20demonstrateClientOperations(ctx%2C%20c)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20demonstrateClientOperations(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20list%20tools%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20tools%3A%20%25d%5Cn%22%2C%20len(tools.Tools))%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20List%20available%20resources%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20list%20resources%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22%5CnAvailable%20resources%3A%20%25d%5Cn%22%2C%20len(resources.Resources))%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20resource.URI%2C%20resource.Name)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20tool%20if%20available%0A%20%20%20%20if%20len(tools.Tools)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20tool%20%3A%3D%20tools.Tools%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnCalling%20tool%3A%20%25s%5Cn%22%2C%20tool.Name)%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20tool.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22example%20input%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22format%22%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22tool%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Tool%20result%3A%20%25%2Bv%5Cn%22%2C%20result)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Read%20a%20resource%20if%20available%0A%20%20%20%20if%20len(resources.Resources)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20resource%20%3A%3D%20resources.Resources%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnReading%20resource%3A%20%25s%5Cn%22%2C%20resource.URI)%0A%0A%20%20%20%20%20%20%20%20content%2C%20err%20%3A%3D%20c.ReadResource(ctx%2C%20mcp.ReadResourceRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.ReadResourceRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20resource.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22resource%20read%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Resource%20content%3A%20%25%2Bv%5Cn%22%2C%20content)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Types%20by%20Transport%0A%0A%23%23%23%20STDIO%20Client%0A**Best%20for%3A**%0A-%20Command-line%20applications%0A-%20Desktop%20software%20integration%0A-%20Local%20development%20and%20testing%0A-%20Single-server%20connections%0A%0A%60%60%60go%0A%2F%2F%20Create%20STDIO%20client%0Aclient%2C%20err%20%3A%3D%20client.NewStdioMCPClient(%22server-command%22%2C%20%22arg1%22%2C%20%22arg2%22)%0A%60%60%60%0A%0A%23%23%23%20StreamableHTTP%20Client%0A**Best%20for%3A**%0A-%20Web%20applications%0A-%20Microservice%20architectures%0A-%20Load-balanced%20deployments%0A-%20REST-like%20interactions%0A%0A%60%60%60go%0A%2F%2F%20Create%20StreamableHTTP%20client%0Aclient%20%3A%3D%20client.NewStreamableHttpClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%60%60%60%0A%0A%23%23%23%20SSE%20Client%0A**Best%20for%3A**%0A-%20Real-time%20web%20applications%0A-%20Browser-based%20interfaces%0A-%20Streaming%20data%20scenarios%0A-%20Multi-client%20environments%0A%0A%60%60%60go%0A%2F%2F%20Create%20SSE%20client%0Aclient%20%3A%3D%20client.NewSSEMCPClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22)%0A%60%60%60%0A%0A%23%23%23%20In-Process%20Client%0A**Best%20for%3A**%0A-%20Testing%20and%20development%0A-%20Embedded%20scenarios%0A-%20High-performance%20applications%0A-%20Library%20integrations%0A%0A%60%60%60go%0A%2F%2F%20Create%20in-process%20client%0Aclient%20%3A%3D%20client.NewInProcessClient(server)%0A%60%60%60%0A%0A%23%23%20Common%20Client%20Patterns%0A%0A%23%23%23%20Connection%20Management%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22errors%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Atype%20MCPClientManager%20struct%20%7B%0A%20%20%20%20client%20client.Client%0A%20%20%20%20ctx%20%20%20%20context.Context%0A%20%20%20%20cancel%20context.CancelFunc%0A%7D%0A%0Afunc%20NewMCPClientManager(clientType%2C%20address%20string)%20(*MCPClientManager%2C%20error)%20%7B%0A%20%20%20%20var%20c%20client.Client%0A%20%20%20%20var%20err%20error%0A%0A%20%20%20%20switch%20clientType%20%7B%0A%20%20%20%20case%20%22stdio%22%3A%0A%20%20%20%20%20%20%20%20c%2C%20err%20%3D%20client.NewStdioMCPClient(%22server-command%22)%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewStreamableHttpClient(address)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewSSEMCPClient(address)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20client%20type%3A%20%25s%22%2C%20clientType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20manager%20%3A%3D%20%26MCPClientManager%7B%0A%20%20%20%20%20%20%20%20client%3A%20c%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20cancel%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Initialize%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20cancel()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20initialize%20client%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20manager%2C%20nil%0A%7D%0A%0Afunc%20(m%20*MCPClientManager)%20Close()%20error%20%7B%0A%20%20%20%20m.cancel()%0A%20%20%20%20return%20m.client.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Handling%0A%0A%60%60%60go%0Afunc%20handleClientErrors(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Tool%20call%20with%20error%20handling%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22example_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22param%22%3A%20%22value%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrConnectionLost)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Connection%20lost%2C%20attempting%20reconnect...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Implement%20reconnection%20logic%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrToolNotFound)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20not%20found%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20client.ErrInvalidArguments)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Invalid%20arguments%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unexpected%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Process%20successful%20result%0A%20%20%20%20processToolResult(result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Retry%20Logic%0A%0A%60%60%60go%0Afunc%20callToolWithRetry(ctx%20context.Context%2C%20c%20client.Client%2C%20req%20mcp.CallToolRequest%2C%20maxRetries%20int)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20var%20lastErr%20error%0A%0A%20%20%20%20for%20attempt%20%3A%3D%200%3B%20attempt%20%3C%3D%20maxRetries%3B%20attempt%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20lastErr%20%3D%20err%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20certain%20errors%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20client.ErrInvalidArguments)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20client.ErrToolNotFound)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Exponential%20backoff%0A%20%20%20%20%20%20%20%20if%20attempt%20%3C%20maxRetries%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20backoff%20%3A%3D%20time.Duration(1%3C%3Cattempt)%20*%20time.Second%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Attempt%20%25d%20failed%2C%20retrying%20in%20%25v%3A%20%25v%22%2C%20attempt%2B1%2C%20backoff%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-time.After(backoff)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20after%20%25d%20attempts%3A%20%25w%22%2C%20maxRetries%2B1%2C%20lastErr)%0A%7D%0A%60%60%60%0A%0A%23%23%20Integration%20Patterns%0A%0A%23%23%23%20LLM%20Application%20Integration%0A%0A%60%60%60go%0Atype%20LLMApplication%20struct%20%7B%0A%20%20%20%20mcpClient%20client.Client%0A%20%20%20%20llmClient%20LLMClient%0A%7D%0A%0Afunc%20NewLLMApplication(mcpAddress%20string)%20(*LLMApplication%2C%20error)%20%7B%0A%20%20%20%20mcpClient%20%3A%3D%20client.NewStreamableHttpClient(mcpAddress)%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20mcpClient.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26LLMApplication%7B%0A%20%20%20%20%20%20%20%20mcpClient%3A%20mcpClient%2C%0A%20%20%20%20%20%20%20%20llmClient%3A%20NewLLMClient()%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(app%20*LLMApplication)%20ProcessUserQuery(ctx%20context.Context%2C%20query%20string)%20(string%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20available%20tools%20for%20the%20LLM%0A%20%20%20%20tools%2C%20err%20%3A%3D%20app.mcpClient.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Send%20query%20to%20LLM%20with%20available%20tools%0A%20%20%20%20response%2C%20toolCalls%2C%20err%20%3A%3D%20app.llmClient.Chat(ctx%2C%20query%2C%20tools.Tools)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Execute%20any%20tool%20calls%0A%20%20%20%20for%20_%2C%20toolCall%20%3A%3D%20range%20toolCalls%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20app.mcpClient.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20toolCall.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20toolCall.Arguments%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22%22%2C%20fmt.Errorf(%22tool%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Send%20tool%20result%20back%20to%20LLM%0A%20%20%20%20%20%20%20%20response%2C%20err%20%3D%20app.llmClient.ContinueWithToolResult(ctx%2C%20toolCall.ID%2C%20result)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20response%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multi-Server%20Client%0A%0A%60%60%60go%0Atype%20MultiServerClient%20struct%20%7B%0A%20%20%20%20clients%20map%5Bstring%5Dclient.Client%0A%20%20%20%20mutex%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewMultiServerClient()%20*MultiServerClient%20%7B%0A%20%20%20%20return%20%26MultiServerClient%7B%0A%20%20%20%20%20%20%20%20clients%3A%20make(map%5Bstring%5Dclient.Client)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(msc%20*MultiServerClient)%20AddServer(name%2C%20address%20string%2C%20clientType%20string)%20error%20%7B%0A%20%20%20%20msc.mutex.Lock()%0A%20%20%20%20defer%20msc.mutex.Unlock()%0A%0A%20%20%20%20var%20c%20client.Client%0A%20%20%20%20var%20err%20error%0A%0A%20%20%20%20switch%20clientType%20%7B%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewStreamableHttpClient(address)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20client.NewSSEMCPClient(address)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22unsupported%20client%20type%3A%20%25s%22%2C%20clientType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20initialize%20client%20for%20%25s%3A%20%25w%22%2C%20name%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20msc.clients%5Bname%5D%20%3D%20c%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(msc%20*MultiServerClient)%20CallTool(ctx%20context.Context%2C%20serverName%2C%20toolName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20msc.mutex.RLock()%0A%20%20%20%20c%2C%20exists%20%3A%3D%20msc.clients%5BserverName%5D%0A%20%20%20%20msc.mutex.RUnlock()%0A%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22server%20not%20found%3A%20%25s%22%2C%20serverName)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20toolName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(msc%20*MultiServerClient)%20GetAllTools(ctx%20context.Context)%20(map%5Bstring%5D%5B%5Dmcp.Tool%2C%20error)%20%7B%0A%20%20%20%20msc.mutex.RLock()%0A%20%20%20%20defer%20msc.mutex.RUnlock()%0A%0A%20%20%20%20allTools%20%3A%3D%20make(map%5Bstring%5D%5B%5Dmcp.Tool)%0A%0A%20%20%20%20for%20serverName%2C%20c%20%3A%3D%20range%20msc.clients%20%7B%0A%20%20%20%20%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20get%20tools%20from%20%25s%3A%20%25w%22%2C%20serverName%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20allTools%5BserverName%5D%20%3D%20tools.Tools%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20allTools%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0AExplore%20each%20client%20topic%20in%20detail%3A%0A%0A-%20**%5BClient%20Basics%5D(%2Fclients%2Fbasics)**%20-%20Client%20lifecycle%20and%20error%20handling%0A-%20**%5BClient%20Operations%5D(%2Fclients%2Foperations)**%20-%20Tools%2C%20resources%2C%20and%20prompts%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Transport-specific%20implementations",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./operations-CBTLg1hU.js"),[]),path:"/clients/operations",type:"mdx",filePath:"clients/operations.mdx",content:"%23%20Client%20Operations%0A%0ALearn%20how%20to%20use%20MCP%20clients%20to%20interact%20with%20servers%20through%20tools%2C%20resources%2C%20prompts%2C%20and%20subscriptions.%0A%0A%23%23%20Listing%20Resources%0A%0AResources%20provide%20read-only%20access%20to%20data.%20Before%20reading%20resources%2C%20you%20typically%20need%20to%20discover%20what's%20available.%0A%0A%23%23%23%20Basic%20Resource%20Listing%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22base64%22%0A%20%20%20%20%22context%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22reflect%22%0A%20%20%20%20%22regexp%22%0A%20%20%20%20%22strings%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20listResources(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20List%20all%20available%20resources%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20list%20resources%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20resources%3A%20%25d%5Cn%22%2C%20len(resources.Resources))%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%20(%25s)%3A%20%25s%5Cn%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20resource.URI%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20resource.MIMEType%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20resource.Name)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20resource.Description%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Description%3A%20%25s%5Cn%22%2C%20resource.Description)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Filtered%20Resource%20Listing%0A%0A%60%60%60go%0Afunc%20listResourcesByType(ctx%20context.Context%2C%20c%20client.Client%2C%20mimeType%20string)%20(%5B%5Dmcp.Resource%2C%20error)%20%7B%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Resource%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20if%20resource.MIMEType%20%3D%3D%20mimeType%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20resource)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20filtered%2C%20nil%0A%7D%0A%0Afunc%20listResourcesByPattern(ctx%20context.Context%2C%20c%20client.Client%2C%20pattern%20string)%20(%5B%5Dmcp.Resource%2C%20error)%20%7B%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20regex%2C%20err%20%3A%3D%20regexp.Compile(pattern)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20pattern%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Resource%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20if%20regex.MatchString(resource.URI)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20resource)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20filtered%2C%20nil%0A%7D%0A%0A%2F%2F%20Usage%20examples%0Afunc%20demonstrateResourceFiltering(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Find%20all%20JSON%20resources%0A%20%20%20%20jsonResources%2C%20err%20%3A%3D%20listResourcesByType(ctx%2C%20c%2C%20%22application%2Fjson%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20listing%20JSON%20resources%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Found%20%25d%20JSON%20resources%5Cn%22%2C%20len(jsonResources))%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Find%20all%20user-related%20resources%0A%20%20%20%20userResources%2C%20err%20%3A%3D%20listResourcesByPattern(ctx%2C%20c%2C%20%60users%3F%3A%2F%2F.*%60)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20listing%20user%20resources%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Found%20%25d%20user%20resources%5Cn%22%2C%20len(userResources))%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Reading%20Resources%0A%0AOnce%20you%20know%20what%20resources%20are%20available%2C%20you%20can%20read%20their%20content.%0A%0A%23%23%23%20Basic%20Resource%20Reading%0A%0A%60%60%60go%0Afunc%20readResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.ReadResource(ctx%2C%20mcp.ReadResourceRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.ReadResourceRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20uri%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20resource%20%25s%3A%20%25w%22%2C%20uri%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20demonstrateResourceReading(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20List%20resources%20first%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20resources%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Read%20each%20resource%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnReading%20resource%3A%20%25s%5Cn%22%2C%20resource.URI)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20resource.URI)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20read%20resource%20%25s%3A%20%25v%22%2C%20resource.URI%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20resource%20contents%0A%20%20%20%20%20%20%20%20for%20i%2C%20content%20%3A%3D%20range%20result.Contents%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Content%20%25d%3A%5Cn%22%2C%20i%2B1)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20URI%3A%20%25s%5Cn%22%2C%20content.URI)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20MIME%20Type%3A%20%25s%5Cn%22%2C%20content.MIMEType)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20content.Text%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Text%3A%20%25s%5Cn%22%2C%20truncateString(content.Text%2C%20100))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20content.Blob%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Blob%3A%20%25d%20bytes%5Cn%22%2C%20len(content.Blob))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20truncateString(s%20string%2C%20maxLen%20int)%20string%20%7B%0A%20%20%20%20if%20len(s)%20%3C%3D%20maxLen%20%7B%0A%20%20%20%20%20%20%20%20return%20s%0A%20%20%20%20%7D%0A%20%20%20%20return%20s%5B%3AmaxLen%5D%20%2B%20%22...%22%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Typed%20Resource%20Reading%0A%0A%60%60%60go%0A%2F%2F%20Helper%20functions%20for%20common%20resource%20types%0Afunc%20readJSONResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(map%5Bstring%5Dinterface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(result.Contents)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20content%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%20%3A%3D%20result.Contents%5B0%5D%0A%20%20%20%20if%20content.MIMEType%20!%3D%20%22application%2Fjson%22%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22expected%20JSON%2C%20got%20%25s%22%2C%20content.MIMEType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20data%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20err%20%3A%3D%20json.Unmarshal(%5B%5Dbyte(content.Text)%2C%20%26data)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20parse%20JSON%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20data%2C%20nil%0A%7D%0A%0Afunc%20readTextResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(string%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(result.Contents)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20fmt.Errorf(%22no%20content%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%20%3A%3D%20result.Contents%5B0%5D%0A%20%20%20%20if%20!strings.HasPrefix(content.MIMEType%2C%20%22text%2F%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20fmt.Errorf(%22expected%20text%2C%20got%20%25s%22%2C%20content.MIMEType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20content.Text%2C%20nil%0A%7D%0A%0Afunc%20readBinaryResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(%5B%5Dbyte%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(result.Contents)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20content%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%20%3A%3D%20result.Contents%5B0%5D%0A%20%20%20%20if%20content.Blob%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20binary%20data%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20data%2C%20err%20%3A%3D%20base64.StdEncoding.DecodeString(content.Blob)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20decode%20binary%20data%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20data%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Resource%20Caching%0A%0A%60%60%60go%0Atype%20ResourceCache%20struct%20%7B%0A%20%20%20%20cache%20map%5Bstring%5DcacheEntry%0A%20%20%20%20mutex%20sync.RWMutex%0A%20%20%20%20ttl%20%20%20time.Duration%0A%7D%0A%0Atype%20cacheEntry%20struct%20%7B%0A%20%20%20%20result%20%20%20%20*mcp.ReadResourceResult%0A%20%20%20%20timestamp%20time.Time%0A%7D%0A%0Afunc%20NewResourceCache(ttl%20time.Duration)%20*ResourceCache%20%7B%0A%20%20%20%20return%20%26ResourceCache%7B%0A%20%20%20%20%20%20%20%20cache%3A%20make(map%5Bstring%5DcacheEntry)%2C%0A%20%20%20%20%20%20%20%20ttl%3A%20%20%20ttl%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20*ResourceCache)%20Get(uri%20string)%20(*mcp.ReadResourceResult%2C%20bool)%20%7B%0A%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20defer%20rc.mutex.RUnlock()%0A%0A%20%20%20%20entry%2C%20exists%20%3A%3D%20rc.cache%5Buri%5D%0A%20%20%20%20if%20!exists%20%7C%7C%20time.Since(entry.timestamp)%20%3E%20rc.ttl%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20false%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20entry.result%2C%20true%0A%7D%0A%0Afunc%20(rc%20*ResourceCache)%20Set(uri%20string%2C%20result%20*mcp.ReadResourceResult)%20%7B%0A%20%20%20%20rc.mutex.Lock()%0A%20%20%20%20defer%20rc.mutex.Unlock()%0A%0A%20%20%20%20rc.cache%5Buri%5D%20%3D%20cacheEntry%7B%0A%20%20%20%20%20%20%20%20result%3A%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20timestamp%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20*ResourceCache)%20ReadResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Check%20cache%20first%0A%20%20%20%20if%20cached%2C%20found%20%3A%3D%20rc.Get(uri)%3B%20found%20%7B%0A%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Read%20from%20server%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Cache%20the%20result%0A%20%20%20%20rc.Set(uri%2C%20result)%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Calling%20Tools%0A%0ATools%20provide%20functionality%20that%20can%20be%20invoked%20with%20parameters.%0A%0A%23%23%23%20Basic%20Tool%20Calling%0A%0A%60%60%60go%0Afunc%20callTool(ctx%20context.Context%2C%20c%20client.Client%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22tool%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20demonstrateToolCalling(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20tools%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20tools%3A%20%25d%5Cn%22%2C%20len(tools.Tools))%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20specific%20tool%0A%20%20%20%20if%20len(tools.Tools)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20tool%20%3A%3D%20tools.Tools%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnCalling%20tool%3A%20%25s%5Cn%22%2C%20tool.Name)%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20callTool(ctx%2C%20c%2C%20tool.Name%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22example%20input%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22format%22%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Tool%20result%3A%5Cn%22)%0A%20%20%20%20%20%20%20%20for%20i%2C%20content%20%3A%3D%20range%20result.Content%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Content%20%25d%20(%25s)%3A%20%25s%5Cn%22%2C%20i%2B1%2C%20content.Type%2C%20content.Text)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Tool%20Schema%20Validation%0A%0A%60%60%60go%0Afunc%20validateToolArguments(tool%20mcp.Tool%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20error%20%7B%0A%20%20%20%20schema%20%3A%3D%20tool.InputSchema%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20required%20properties%0A%20%20%20%20if%20schema.Required%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20for%20_%2C%20required%20%3A%3D%20range%20schema.Required%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20_%2C%20exists%20%3A%3D%20args%5Brequired%5D%3B%20!exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22missing%20required%20argument%3A%20%25s%22%2C%20required)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Validate%20argument%20types%0A%20%20%20%20if%20schema.Properties%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20for%20name%2C%20value%20%3A%3D%20range%20args%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20propSchema%2C%20exists%20%3A%3D%20schema.Properties%5Bname%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22unknown%20argument%3A%20%25s%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20validateValue(value%2C%20propSchema)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22invalid%20argument%20%25s%3A%20%25w%22%2C%20name%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20validateValue(value%20interface%7B%7D%2C%20schema%20map%5Bstring%5Dany)%20error%20%7B%0A%20%20%20%20schemaType%2C%20ok%20%3A%3D%20schema%5B%22type%22%5D.(string)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22schema%20missing%20type%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20switch%20schemaType%20%7B%0A%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(string)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20string%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(float64)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20number%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22integer%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(float64)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20integer%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(bool)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20boolean%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22array%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(%5B%5Dinterface%7B%7D)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20array%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22object%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(map%5Bstring%5Dinterface%7B%7D)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20object%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20callToolWithValidation(ctx%20context.Context%2C%20c%20client.Client%2C%20toolName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20tool%20schema%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20list%20tools%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20tool%20*mcp.Tool%0A%20%20%20%20for%20_%2C%20t%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20if%20t.Name%20%3D%3D%20toolName%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tool%20%3D%20%26t%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20tool%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22tool%20not%20found%3A%20%25s%22%2C%20toolName)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Validate%20arguments%0A%20%20%20%20if%20err%20%3A%3D%20validateToolArguments(*tool%2C%20args)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22argument%20validation%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20tool%0A%20%20%20%20return%20callTool(ctx%2C%20c%2C%20toolName%2C%20args)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Batch%20Tool%20Operations%0A%0A%60%60%60go%0Atype%20ToolCall%20struct%20%7B%0A%20%20%20%20Name%20%20%20%20%20%20string%0A%20%20%20%20Arguments%20map%5Bstring%5Dinterface%7B%7D%0A%7D%0A%0Atype%20ToolResult%20struct%20%7B%0A%20%20%20%20Call%20%20%20ToolCall%0A%20%20%20%20Result%20*mcp.CallToolResult%0A%20%20%20%20Error%20%20error%0A%7D%0A%0Afunc%20callToolsBatch(ctx%20context.Context%2C%20c%20client.Client%2C%20calls%20%5B%5DToolCall)%20%5B%5DToolResult%20%7B%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DToolResult%2C%20len(calls))%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20goroutines%20for%20concurrent%20calls%0A%20%20%20%20var%20wg%20sync.WaitGroup%0A%20%20%20%20for%20i%2C%20call%20%3A%3D%20range%20calls%20%7B%0A%20%20%20%20%20%20%20%20wg.Add(1)%0A%20%20%20%20%20%20%20%20go%20func(index%20int%2C%20toolCall%20ToolCall)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20callTool(ctx%2C%20c%2C%20toolCall.Name%2C%20toolCall.Arguments)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bindex%5D%20%3D%20ToolResult%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Call%3A%20%20%20toolCall%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Result%3A%20result%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Error%3A%20%20err%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D(i%2C%20call)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20wg.Wait()%0A%20%20%20%20return%20results%0A%7D%0A%0Afunc%20demonstrateBatchToolCalls(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20calls%20%3A%3D%20%5B%5DToolCall%7B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22get_weather%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22location%22%3A%20%22New%20York%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22get_weather%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22location%22%3A%20%22London%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22calculate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22operation%22%3A%20%22add%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22x%22%3A%20%20%20%20%20%20%20%20%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22y%22%3A%20%20%20%20%20%20%20%20%2020%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20results%20%3A%3D%20callToolsBatch(ctx%2C%20c%2C%20calls)%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Call%20%25d%20(%25s)%3A%5Cn%22%2C%20i%2B1%2C%20result.Call.Name)%0A%20%20%20%20%20%20%20%20if%20result.Error%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Error%3A%20%25v%5Cn%22%2C%20result.Error)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Success%3A%20%25%2Bv%5Cn%22%2C%20result.Result)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Using%20Prompts%0A%0APrompts%20provide%20reusable%20templates%20for%20LLM%20interactions.%0A%0A%23%23%23%20Basic%20Prompt%20Usage%0A%0A%60%60%60go%0Afunc%20getPrompt(ctx%20context.Context%2C%20c%20client.Client%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.GetPrompt(ctx%2C%20mcp.GetPromptRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.GetPromptRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20get%20prompt%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20demonstratePromptUsage(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20prompts%0A%20%20%20%20prompts%2C%20err%20%3A%3D%20c.ListPrompts(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20prompts%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20prompts%3A%20%25d%5Cn%22%2C%20len(prompts.Prompts))%0A%20%20%20%20for%20_%2C%20prompt%20%3A%3D%20range%20prompts.Prompts%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20prompt.Name%2C%20prompt.Description)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20len(prompt.Arguments)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Arguments%3A%5Cn%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20_%2C%20arg%20%3A%3D%20range%20prompt.Arguments%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20%20%20-%20%25s%3A%20%25s%5Cn%22%2C%20arg.Name%2C%20arg.Description)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20a%20specific%20prompt%0A%20%20%20%20if%20len(prompts.Prompts)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20prompt%20%3A%3D%20prompts.Prompts%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnUsing%20prompt%3A%20%25s%5Cn%22%2C%20prompt.Name)%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20getPrompt(ctx%2C%20c%2C%20prompt.Name%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20appropriate%20arguments%20based%20on%20prompt%20schema%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20get%20prompt%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Prompt%20result%3A%5Cn%22)%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Description%3A%20%25s%5Cn%22%2C%20result.Description)%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Messages%3A%20%25d%5Cn%22%2C%20len(result.Messages))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20message%20%3A%3D%20range%20result.Messages%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Message%20%25d%20(%25s)%3A%20%25s%5Cn%22%2C%20i%2B1%2C%20message.Role%2C%20message.Content.Text)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Prompt%20Template%20Processing%0A%0A%60%60%60go%0Atype%20PromptProcessor%20struct%20%7B%0A%20%20%20%20client%20client.Client%0A%7D%0A%0Afunc%20NewPromptProcessor(c%20client.Client)%20*PromptProcessor%20%7B%0A%20%20%20%20return%20%26PromptProcessor%7Bclient%3A%20c%7D%0A%7D%0A%0Afunc%20(pp%20*PromptProcessor)%20ProcessPrompt(ctx%20context.Context%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20pp.client.GetPrompt(ctx%2C%20mcp.GetPromptRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.GetPromptRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result.Messages%2C%20nil%0A%7D%0A%0Afunc%20(pp%20*PromptProcessor)%20BuildConversation(ctx%20context.Context%2C%20promptName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D%2C%20userMessage%20string)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20prompt%20template%0A%20%20%20%20messages%2C%20err%20%3A%3D%20pp.ProcessPrompt(ctx%2C%20promptName%2C%20args)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20user%20message%0A%20%20%20%20messages%20%3D%20append(messages%2C%20mcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent(userMessage)%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20return%20messages%2C%20nil%0A%7D%0A%0Afunc%20(pp%20*PromptProcessor)%20FormatForLLM(messages%20%5B%5Dmcp.PromptMessage)%20%5B%5Dmap%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20formatted%20%3A%3D%20make(%5B%5Dmap%5Bstring%5Dinterface%7B%7D%2C%20len(messages))%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20message%20%3A%3D%20range%20messages%20%7B%0A%20%20%20%20%20%20%20%20formatted%5Bi%5D%20%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22role%22%3A%20%20%20%20message.Role%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22content%22%3A%20message.Content.Text%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20formatted%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Dynamic%20Prompt%20Generation%0A%0A%60%60%60go%0Afunc%20generateCodeReviewPrompt(ctx%20context.Context%2C%20c%20client.Client%2C%20code%2C%20language%20string)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20processor%20%3A%3D%20NewPromptProcessor(c)%0A%20%20%20%20%0A%20%20%20%20return%20processor.ProcessPrompt(ctx%2C%20%22code_review%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22code%22%3A%20%20%20%20%20code%2C%0A%20%20%20%20%20%20%20%20%22language%22%3A%20language%2C%0A%20%20%20%20%20%20%20%20%22focus%22%3A%20%20%20%20%22best-practices%22%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20generateDataAnalysisPrompt(ctx%20context.Context%2C%20c%20client.Client%2C%20datasetURI%20string%2C%20analysisType%20string)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20processor%20%3A%3D%20NewPromptProcessor(c)%0A%20%20%20%20%0A%20%20%20%20return%20processor.ProcessPrompt(ctx%2C%20%22analyze_data%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22dataset_uri%22%3A%20%20%20datasetURI%2C%0A%20%20%20%20%20%20%20%20%22analysis_type%22%3A%20analysisType%2C%0A%20%20%20%20%20%20%20%20%22focus_areas%22%3A%20%20%20%5B%5Dstring%7B%22trends%22%2C%20%22outliers%22%2C%20%22correlations%22%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20demonstrateDynamicPrompts(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Generate%20code%20review%20prompt%0A%20%20%20%20codeReviewMessages%2C%20err%20%3A%3D%20generateCodeReviewPrompt(ctx%2C%20c%2C%20%0A%20%20%20%20%20%20%20%20%22func%20main()%20%7B%20fmt.Println(%5C%22Hello%5C%22)%20%7D%22%2C%20%0A%20%20%20%20%20%20%20%20%22go%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20generate%20code%20review%20prompt%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Code%20review%20prompt%3A%20%25d%20messages%5Cn%22%2C%20len(codeReviewMessages))%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Generate%20data%20analysis%20prompt%0A%20%20%20%20analysisMessages%2C%20err%20%3A%3D%20generateDataAnalysisPrompt(ctx%2C%20c%2C%20%0A%20%20%20%20%20%20%20%20%22dataset%3A%2F%2Fsales_data%22%2C%20%0A%20%20%20%20%20%20%20%20%22exploratory%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20generate%20analysis%20prompt%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Data%20analysis%20prompt%3A%20%25d%20messages%5Cn%22%2C%20len(analysisMessages))%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Subscriptions%0A%0ASome%20transports%20support%20subscriptions%20for%20receiving%20real-time%20notifications.%0A%0A%23%23%23%20Basic%20Subscription%20Handling%0A%0A%60%60%60go%0Afunc%20handleSubscriptions(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Check%20if%20client%20supports%20subscriptions%0A%20%20%20%20subscriber%2C%20ok%20%3A%3D%20c.(client.Subscriber)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20log.Println(%22Client%20does%20not%20support%20subscriptions%22)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Subscribe%20to%20notifications%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20subscriber.Subscribe(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20subscribe%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Handle%20notifications%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20notification%20%3A%3D%20%3C-notifications%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20handleNotification(notification)%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Subscription%20cancelled%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20switch%20notification.Method%20%7B%0A%20%20%20%20case%20%22notifications%2Fprogress%22%3A%0A%20%20%20%20%20%20%20%20handleProgressNotification(notification)%0A%20%20%20%20case%20%22notifications%2Fmessage%22%3A%0A%20%20%20%20%20%20%20%20handleMessageNotification(notification)%0A%20%20%20%20case%20%22notifications%2Fresources%2Fupdated%22%3A%0A%20%20%20%20%20%20%20%20handleResourceUpdateNotification(notification)%0A%20%20%20%20case%20%22notifications%2Ftools%2Fupdated%22%3A%0A%20%20%20%20%20%20%20%20handleToolUpdateNotification(notification)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20log.Printf(%22Unknown%20notification%3A%20%25s%22%2C%20notification.Method)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleProgressNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20var%20progress%20mcp.ProgressNotification%0A%20%20%20%20if%20err%20%3A%3D%20json.Unmarshal(notification.Params%2C%20%26progress)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20parse%20progress%20notification%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Progress%3A%20%25d%2F%25d%20-%20%25s%5Cn%22%2C%20%0A%20%20%20%20%20%20%20%20progress.Progress%2C%20%0A%20%20%20%20%20%20%20%20progress.Total%2C%20%0A%20%20%20%20%20%20%20%20progress.Message)%0A%7D%0A%0Afunc%20handleMessageNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20var%20message%20mcp.MessageNotification%0A%20%20%20%20if%20err%20%3A%3D%20json.Unmarshal(notification.Params%2C%20%26message)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20parse%20message%20notification%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Server%20message%3A%20%25s%5Cn%22%2C%20message.Text)%0A%7D%0A%0Afunc%20handleResourceUpdateNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20log.Println(%22Resources%20updated%2C%20refreshing%20cache...%22)%0A%20%20%20%20%2F%2F%20Invalidate%20resource%20cache%20or%20refresh%20resource%20list%0A%7D%0A%0Afunc%20handleToolUpdateNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20log.Println(%22Tools%20updated%2C%20refreshing%20tool%20list...%22)%0A%20%20%20%20%2F%2F%20Refresh%20tool%20list%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20Subscription%20Management%0A%0A%60%60%60go%0Atype%20SubscriptionManager%20struct%20%7B%0A%20%20%20%20client%20%20%20%20%20%20%20%20client.Client%0A%20%20%20%20subscriber%20%20%20%20client.Subscriber%0A%20%20%20%20notifications%20chan%20mcp.Notification%0A%20%20%20%20handlers%20%20%20%20%20%20map%5Bstring%5D%5B%5DNotificationHandler%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20wg%20%20%20%20%20%20%20%20%20%20%20%20sync.WaitGroup%0A%20%20%20%20mutex%20%20%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Atype%20NotificationHandler%20func(mcp.Notification)%20error%0A%0Afunc%20NewSubscriptionManager(c%20client.Client)%20(*SubscriptionManager%2C%20error)%20%7B%0A%20%20%20%20subscriber%2C%20ok%20%3A%3D%20c.(client.Subscriber)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20does%20not%20support%20subscriptions%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20sm%20%3A%3D%20%26SubscriptionManager%7B%0A%20%20%20%20%20%20%20%20client%3A%20%20%20%20%20c%2C%0A%20%20%20%20%20%20%20%20subscriber%3A%20subscriber%2C%0A%20%20%20%20%20%20%20%20handlers%3A%20%20%20make(map%5Bstring%5D%5B%5DNotificationHandler)%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20%20%20cancel%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20sm%2C%20nil%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20Start()%20error%20%7B%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20sm.subscriber.Subscribe(sm.ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20subscribe%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20sm.notifications%20%3D%20notifications%0A%0A%20%20%20%20sm.wg.Add(1)%0A%20%20%20%20go%20sm.handleNotifications()%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20Stop()%20%7B%0A%20%20%20%20sm.cancel()%0A%20%20%20%20sm.wg.Wait()%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20AddHandler(method%20string%2C%20handler%20NotificationHandler)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%0A%20%20%20%20sm.handlers%5Bmethod%5D%20%3D%20append(sm.handlers%5Bmethod%5D%2C%20handler)%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20RemoveHandler(method%20string%2C%20handler%20NotificationHandler)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%0A%20%20%20%20handlers%20%3A%3D%20sm.handlers%5Bmethod%5D%0A%20%20%20%20for%20i%2C%20h%20%3A%3D%20range%20handlers%20%7B%0A%20%20%20%20%20%20%20%20if%20reflect.ValueOf(h).Pointer()%20%3D%3D%20reflect.ValueOf(handler).Pointer()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sm.handlers%5Bmethod%5D%20%3D%20append(handlers%5B%3Ai%5D%2C%20handlers%5Bi%2B1%3A%5D...)%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20handleNotifications()%20%7B%0A%20%20%20%20defer%20sm.wg.Done()%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20notification%20%3A%3D%20%3C-sm.notifications%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20sm.processNotification(notification)%0A%20%20%20%20%20%20%20%20case%20%3C-sm.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20processNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20sm.mutex.RLock()%0A%20%20%20%20handlers%20%3A%3D%20sm.handlers%5Bnotification.Method%5D%0A%20%20%20%20sm.mutex.RUnlock()%0A%0A%20%20%20%20for%20_%2C%20handler%20%3A%3D%20range%20handlers%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20handler(notification)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Handler%20error%20for%20%25s%3A%20%25v%22%2C%20notification.Method%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%20example%0Afunc%20demonstrateSubscriptionManager(c%20client.Client)%20%7B%0A%20%20%20%20sm%2C%20err%20%3A%3D%20NewSubscriptionManager(c)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20create%20subscription%20manager%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20handlers%0A%20%20%20%20sm.AddHandler(%22notifications%2Fprogress%22%2C%20func(n%20mcp.Notification)%20error%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Progress%20notification%3A%20%25%2Bv%22%2C%20n)%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D)%0A%0A%20%20%20%20sm.AddHandler(%22notifications%2Fmessage%22%2C%20func(n%20mcp.Notification)%20error%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Message%20notification%3A%20%25%2Bv%22%2C%20n)%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Start%20handling%0A%20%20%20%20if%20err%20%3A%3D%20sm.Start()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20start%20subscription%20manager%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Let%20it%20run%20for%20a%20while%0A%20%20%20%20time.Sleep(30%20*%20time.Second)%0A%0A%20%20%20%20%2F%2F%20Stop%0A%20%20%20%20sm.Stop()%0A%7D%0A%60%60%60%0A%0A%23%23%20Advanced%3A%20Sampling%20Support%0A%0ASampling%20is%20an%20advanced%20feature%20that%20allows%20clients%20to%20respond%20to%20LLM%20completion%20requests%20from%20servers.%20This%20enables%20servers%20to%20leverage%20client-side%20LLM%20capabilities%20for%20content%20generation%20and%20reasoning.%0A%0A%3E%20**Note**%3A%20Sampling%20is%20an%20advanced%20feature%20that%20most%20clients%20don't%20need.%20Only%20implement%20sampling%20if%20you're%20building%20a%20client%20that%20provides%20LLM%20capabilities%20to%20servers.%0A%0A%23%23%23%20When%20to%20Implement%20Sampling%0A%0AConsider%20implementing%20sampling%20when%20your%20client%3A%0A-%20Has%20access%20to%20LLM%20APIs%20(OpenAI%2C%20Anthropic%2C%20etc.)%0A-%20Wants%20to%20provide%20LLM%20capabilities%20to%20servers%0A-%20Needs%20to%20support%20servers%20that%20generate%20dynamic%20content%0A%0A%23%23%23%20Basic%20Implementation%0A%0A%60%60%60go%0Aimport%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%0A%2F%2F%20Implement%20the%20SamplingHandler%20interface%0Atype%20MySamplingHandler%20struct%20%7B%0A%20%20%20%20%2F%2F%20Add%20your%20LLM%20client%20here%0A%7D%0A%0Afunc%20(h%20*MySamplingHandler)%20CreateMessage(ctx%20context.Context%2C%20request%20mcp.CreateMessageRequest)%20(*mcp.CreateMessageResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Process%20the%20request%20with%20your%20LLM%0A%20%20%20%20%2F%2F%20Return%20the%20result%20in%20MCP%20format%0A%20%20%20%20return%20%26mcp.CreateMessageResult%7B%0A%20%20%20%20%20%20%20%20Model%3A%20%22your-model%22%2C%0A%20%20%20%20%20%20%20%20Role%3A%20%20mcp.RoleAssistant%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22Your%20LLM%20response%20here%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20StopReason%3A%20%22endTurn%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0A%2F%2F%20Create%20client%20with%20sampling%20support%0AmcpClient%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%22%2Fpath%2Fto%2Fserver%22%2C%0A%20%20%20%20client.WithSamplingHandler(%26MySamplingHandler%7B%7D)%2C%0A)%0A%60%60%60%0A%0AFor%20complete%20sampling%20documentation%2C%20see%20**%5BClient%20Sampling%20Guide%5D(%2Fclients%2Fadvanced-sampling)**.%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Learn%20transport-specific%20client%20features%0A-%20**%5BClient%20Basics%5D(%2Fclients%2Fbasics)**%20-%20Review%20fundamental%20concepts",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./operations-CBTLg1hU.js"),[]),path:"/clients/operations.html",type:"mdx",filePath:"clients/operations.mdx",content:"%23%20Client%20Operations%0A%0ALearn%20how%20to%20use%20MCP%20clients%20to%20interact%20with%20servers%20through%20tools%2C%20resources%2C%20prompts%2C%20and%20subscriptions.%0A%0A%23%23%20Listing%20Resources%0A%0AResources%20provide%20read-only%20access%20to%20data.%20Before%20reading%20resources%2C%20you%20typically%20need%20to%20discover%20what's%20available.%0A%0A%23%23%23%20Basic%20Resource%20Listing%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22base64%22%0A%20%20%20%20%22context%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22reflect%22%0A%20%20%20%20%22regexp%22%0A%20%20%20%20%22strings%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20listResources(ctx%20context.Context%2C%20c%20client.Client)%20error%20%7B%0A%20%20%20%20%2F%2F%20List%20all%20available%20resources%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20list%20resources%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20resources%3A%20%25d%5Cn%22%2C%20len(resources.Resources))%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%20(%25s)%3A%20%25s%5Cn%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20resource.URI%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20resource.MIMEType%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20resource.Name)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20resource.Description%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Description%3A%20%25s%5Cn%22%2C%20resource.Description)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Filtered%20Resource%20Listing%0A%0A%60%60%60go%0Afunc%20listResourcesByType(ctx%20context.Context%2C%20c%20client.Client%2C%20mimeType%20string)%20(%5B%5Dmcp.Resource%2C%20error)%20%7B%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Resource%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20if%20resource.MIMEType%20%3D%3D%20mimeType%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20resource)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20filtered%2C%20nil%0A%7D%0A%0Afunc%20listResourcesByPattern(ctx%20context.Context%2C%20c%20client.Client%2C%20pattern%20string)%20(%5B%5Dmcp.Resource%2C%20error)%20%7B%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20regex%2C%20err%20%3A%3D%20regexp.Compile(pattern)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20pattern%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Resource%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20if%20regex.MatchString(resource.URI)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20resource)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20filtered%2C%20nil%0A%7D%0A%0A%2F%2F%20Usage%20examples%0Afunc%20demonstrateResourceFiltering(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Find%20all%20JSON%20resources%0A%20%20%20%20jsonResources%2C%20err%20%3A%3D%20listResourcesByType(ctx%2C%20c%2C%20%22application%2Fjson%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20listing%20JSON%20resources%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Found%20%25d%20JSON%20resources%5Cn%22%2C%20len(jsonResources))%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Find%20all%20user-related%20resources%0A%20%20%20%20userResources%2C%20err%20%3A%3D%20listResourcesByPattern(ctx%2C%20c%2C%20%60users%3F%3A%2F%2F.*%60)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20listing%20user%20resources%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Found%20%25d%20user%20resources%5Cn%22%2C%20len(userResources))%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Reading%20Resources%0A%0AOnce%20you%20know%20what%20resources%20are%20available%2C%20you%20can%20read%20their%20content.%0A%0A%23%23%23%20Basic%20Resource%20Reading%0A%0A%60%60%60go%0Afunc%20readResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.ReadResource(ctx%2C%20mcp.ReadResourceRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.ReadResourceRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20uri%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20resource%20%25s%3A%20%25w%22%2C%20uri%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20demonstrateResourceReading(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20List%20resources%20first%0A%20%20%20%20resources%2C%20err%20%3A%3D%20c.ListResources(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20resources%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Read%20each%20resource%0A%20%20%20%20for%20_%2C%20resource%20%3A%3D%20range%20resources.Resources%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnReading%20resource%3A%20%25s%5Cn%22%2C%20resource.URI)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20resource.URI)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20read%20resource%20%25s%3A%20%25v%22%2C%20resource.URI%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20resource%20contents%0A%20%20%20%20%20%20%20%20for%20i%2C%20content%20%3A%3D%20range%20result.Contents%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Content%20%25d%3A%5Cn%22%2C%20i%2B1)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20URI%3A%20%25s%5Cn%22%2C%20content.URI)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20MIME%20Type%3A%20%25s%5Cn%22%2C%20content.MIMEType)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20content.Text%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Text%3A%20%25s%5Cn%22%2C%20truncateString(content.Text%2C%20100))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20content.Blob%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Blob%3A%20%25d%20bytes%5Cn%22%2C%20len(content.Blob))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20truncateString(s%20string%2C%20maxLen%20int)%20string%20%7B%0A%20%20%20%20if%20len(s)%20%3C%3D%20maxLen%20%7B%0A%20%20%20%20%20%20%20%20return%20s%0A%20%20%20%20%7D%0A%20%20%20%20return%20s%5B%3AmaxLen%5D%20%2B%20%22...%22%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Typed%20Resource%20Reading%0A%0A%60%60%60go%0A%2F%2F%20Helper%20functions%20for%20common%20resource%20types%0Afunc%20readJSONResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(map%5Bstring%5Dinterface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(result.Contents)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20content%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%20%3A%3D%20result.Contents%5B0%5D%0A%20%20%20%20if%20content.MIMEType%20!%3D%20%22application%2Fjson%22%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22expected%20JSON%2C%20got%20%25s%22%2C%20content.MIMEType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20data%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20err%20%3A%3D%20json.Unmarshal(%5B%5Dbyte(content.Text)%2C%20%26data)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20parse%20JSON%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20data%2C%20nil%0A%7D%0A%0Afunc%20readTextResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(string%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(result.Contents)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20fmt.Errorf(%22no%20content%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%20%3A%3D%20result.Contents%5B0%5D%0A%20%20%20%20if%20!strings.HasPrefix(content.MIMEType%2C%20%22text%2F%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20fmt.Errorf(%22expected%20text%2C%20got%20%25s%22%2C%20content.MIMEType)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20content.Text%2C%20nil%0A%7D%0A%0Afunc%20readBinaryResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(%5B%5Dbyte%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(result.Contents)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20content%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%20%3A%3D%20result.Contents%5B0%5D%0A%20%20%20%20if%20content.Blob%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20binary%20data%20in%20resource%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20data%2C%20err%20%3A%3D%20base64.StdEncoding.DecodeString(content.Blob)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20decode%20binary%20data%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20data%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Resource%20Caching%0A%0A%60%60%60go%0Atype%20ResourceCache%20struct%20%7B%0A%20%20%20%20cache%20map%5Bstring%5DcacheEntry%0A%20%20%20%20mutex%20sync.RWMutex%0A%20%20%20%20ttl%20%20%20time.Duration%0A%7D%0A%0Atype%20cacheEntry%20struct%20%7B%0A%20%20%20%20result%20%20%20%20*mcp.ReadResourceResult%0A%20%20%20%20timestamp%20time.Time%0A%7D%0A%0Afunc%20NewResourceCache(ttl%20time.Duration)%20*ResourceCache%20%7B%0A%20%20%20%20return%20%26ResourceCache%7B%0A%20%20%20%20%20%20%20%20cache%3A%20make(map%5Bstring%5DcacheEntry)%2C%0A%20%20%20%20%20%20%20%20ttl%3A%20%20%20ttl%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20*ResourceCache)%20Get(uri%20string)%20(*mcp.ReadResourceResult%2C%20bool)%20%7B%0A%20%20%20%20rc.mutex.RLock()%0A%20%20%20%20defer%20rc.mutex.RUnlock()%0A%0A%20%20%20%20entry%2C%20exists%20%3A%3D%20rc.cache%5Buri%5D%0A%20%20%20%20if%20!exists%20%7C%7C%20time.Since(entry.timestamp)%20%3E%20rc.ttl%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20false%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20entry.result%2C%20true%0A%7D%0A%0Afunc%20(rc%20*ResourceCache)%20Set(uri%20string%2C%20result%20*mcp.ReadResourceResult)%20%7B%0A%20%20%20%20rc.mutex.Lock()%0A%20%20%20%20defer%20rc.mutex.Unlock()%0A%0A%20%20%20%20rc.cache%5Buri%5D%20%3D%20cacheEntry%7B%0A%20%20%20%20%20%20%20%20result%3A%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20timestamp%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rc%20*ResourceCache)%20ReadResource(ctx%20context.Context%2C%20c%20client.Client%2C%20uri%20string)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Check%20cache%20first%0A%20%20%20%20if%20cached%2C%20found%20%3A%3D%20rc.Get(uri)%3B%20found%20%7B%0A%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Read%20from%20server%0A%20%20%20%20result%2C%20err%20%3A%3D%20readResource(ctx%2C%20c%2C%20uri)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Cache%20the%20result%0A%20%20%20%20rc.Set(uri%2C%20result)%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Calling%20Tools%0A%0ATools%20provide%20functionality%20that%20can%20be%20invoked%20with%20parameters.%0A%0A%23%23%23%20Basic%20Tool%20Calling%0A%0A%60%60%60go%0Afunc%20callTool(ctx%20context.Context%2C%20c%20client.Client%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22tool%20call%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20demonstrateToolCalling(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20tools%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20tools%3A%20%25d%5Cn%22%2C%20len(tools.Tools))%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20specific%20tool%0A%20%20%20%20if%20len(tools.Tools)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20tool%20%3A%3D%20tools.Tools%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnCalling%20tool%3A%20%25s%5Cn%22%2C%20tool.Name)%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20callTool(ctx%2C%20c%2C%20tool.Name%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22example%20input%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22format%22%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Tool%20call%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Tool%20result%3A%5Cn%22)%0A%20%20%20%20%20%20%20%20for%20i%2C%20content%20%3A%3D%20range%20result.Content%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Content%20%25d%20(%25s)%3A%20%25s%5Cn%22%2C%20i%2B1%2C%20content.Type%2C%20content.Text)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Tool%20Schema%20Validation%0A%0A%60%60%60go%0Afunc%20validateToolArguments(tool%20mcp.Tool%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20error%20%7B%0A%20%20%20%20schema%20%3A%3D%20tool.InputSchema%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20required%20properties%0A%20%20%20%20if%20schema.Required%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20for%20_%2C%20required%20%3A%3D%20range%20schema.Required%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20_%2C%20exists%20%3A%3D%20args%5Brequired%5D%3B%20!exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22missing%20required%20argument%3A%20%25s%22%2C%20required)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Validate%20argument%20types%0A%20%20%20%20if%20schema.Properties%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20for%20name%2C%20value%20%3A%3D%20range%20args%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20propSchema%2C%20exists%20%3A%3D%20schema.Properties%5Bname%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22unknown%20argument%3A%20%25s%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20validateValue(value%2C%20propSchema)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22invalid%20argument%20%25s%3A%20%25w%22%2C%20name%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20validateValue(value%20interface%7B%7D%2C%20schema%20map%5Bstring%5Dany)%20error%20%7B%0A%20%20%20%20schemaType%2C%20ok%20%3A%3D%20schema%5B%22type%22%5D.(string)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22schema%20missing%20type%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20switch%20schemaType%20%7B%0A%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(string)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20string%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(float64)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20number%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22integer%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(float64)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20integer%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(bool)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20boolean%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22array%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(%5B%5Dinterface%7B%7D)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20array%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20case%20%22object%22%3A%0A%20%20%20%20%20%20%20%20if%20_%2C%20ok%20%3A%3D%20value.(map%5Bstring%5Dinterface%7B%7D)%3B%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22expected%20object%2C%20got%20%25T%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20callToolWithValidation(ctx%20context.Context%2C%20c%20client.Client%2C%20toolName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20tool%20schema%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20list%20tools%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20tool%20*mcp.Tool%0A%20%20%20%20for%20_%2C%20t%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20if%20t.Name%20%3D%3D%20toolName%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tool%20%3D%20%26t%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20tool%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22tool%20not%20found%3A%20%25s%22%2C%20toolName)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Validate%20arguments%0A%20%20%20%20if%20err%20%3A%3D%20validateToolArguments(*tool%2C%20args)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22argument%20validation%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20tool%0A%20%20%20%20return%20callTool(ctx%2C%20c%2C%20toolName%2C%20args)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Batch%20Tool%20Operations%0A%0A%60%60%60go%0Atype%20ToolCall%20struct%20%7B%0A%20%20%20%20Name%20%20%20%20%20%20string%0A%20%20%20%20Arguments%20map%5Bstring%5Dinterface%7B%7D%0A%7D%0A%0Atype%20ToolResult%20struct%20%7B%0A%20%20%20%20Call%20%20%20ToolCall%0A%20%20%20%20Result%20*mcp.CallToolResult%0A%20%20%20%20Error%20%20error%0A%7D%0A%0Afunc%20callToolsBatch(ctx%20context.Context%2C%20c%20client.Client%2C%20calls%20%5B%5DToolCall)%20%5B%5DToolResult%20%7B%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DToolResult%2C%20len(calls))%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20goroutines%20for%20concurrent%20calls%0A%20%20%20%20var%20wg%20sync.WaitGroup%0A%20%20%20%20for%20i%2C%20call%20%3A%3D%20range%20calls%20%7B%0A%20%20%20%20%20%20%20%20wg.Add(1)%0A%20%20%20%20%20%20%20%20go%20func(index%20int%2C%20toolCall%20ToolCall)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20callTool(ctx%2C%20c%2C%20toolCall.Name%2C%20toolCall.Arguments)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bindex%5D%20%3D%20ToolResult%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Call%3A%20%20%20toolCall%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Result%3A%20result%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Error%3A%20%20err%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D(i%2C%20call)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20wg.Wait()%0A%20%20%20%20return%20results%0A%7D%0A%0Afunc%20demonstrateBatchToolCalls(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20calls%20%3A%3D%20%5B%5DToolCall%7B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22get_weather%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22location%22%3A%20%22New%20York%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22get_weather%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22location%22%3A%20%22London%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22calculate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22operation%22%3A%20%22add%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22x%22%3A%20%20%20%20%20%20%20%20%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22y%22%3A%20%20%20%20%20%20%20%20%2020%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20results%20%3A%3D%20callToolsBatch(ctx%2C%20c%2C%20calls)%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Call%20%25d%20(%25s)%3A%5Cn%22%2C%20i%2B1%2C%20result.Call.Name)%0A%20%20%20%20%20%20%20%20if%20result.Error%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Error%3A%20%25v%5Cn%22%2C%20result.Error)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Success%3A%20%25%2Bv%5Cn%22%2C%20result.Result)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Using%20Prompts%0A%0APrompts%20provide%20reusable%20templates%20for%20LLM%20interactions.%0A%0A%23%23%23%20Basic%20Prompt%20Usage%0A%0A%60%60%60go%0Afunc%20getPrompt(ctx%20context.Context%2C%20c%20client.Client%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.GetPrompt(ctx%2C%20mcp.GetPromptRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.GetPromptRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20get%20prompt%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20demonstratePromptUsage(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20List%20available%20prompts%0A%20%20%20%20prompts%2C%20err%20%3A%3D%20c.ListPrompts(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20list%20prompts%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Available%20prompts%3A%20%25d%5Cn%22%2C%20len(prompts.Prompts))%0A%20%20%20%20for%20_%2C%20prompt%20%3A%3D%20range%20prompts.Prompts%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22-%20%25s%3A%20%25s%5Cn%22%2C%20prompt.Name%2C%20prompt.Description)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20len(prompt.Arguments)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20Arguments%3A%5Cn%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20_%2C%20arg%20%3A%3D%20range%20prompt.Arguments%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22%20%20%20%20-%20%25s%3A%20%25s%5Cn%22%2C%20arg.Name%2C%20arg.Description)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20a%20specific%20prompt%0A%20%20%20%20if%20len(prompts.Prompts)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20prompt%20%3A%3D%20prompts.Prompts%5B0%5D%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%5CnUsing%20prompt%3A%20%25s%5Cn%22%2C%20prompt.Name)%0A%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20getPrompt(ctx%2C%20c%2C%20prompt.Name%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20appropriate%20arguments%20based%20on%20prompt%20schema%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20get%20prompt%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Prompt%20result%3A%5Cn%22)%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Description%3A%20%25s%5Cn%22%2C%20result.Description)%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Messages%3A%20%25d%5Cn%22%2C%20len(result.Messages))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20message%20%3A%3D%20range%20result.Messages%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Message%20%25d%20(%25s)%3A%20%25s%5Cn%22%2C%20i%2B1%2C%20message.Role%2C%20message.Content.Text)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Prompt%20Template%20Processing%0A%0A%60%60%60go%0Atype%20PromptProcessor%20struct%20%7B%0A%20%20%20%20client%20client.Client%0A%7D%0A%0Afunc%20NewPromptProcessor(c%20client.Client)%20*PromptProcessor%20%7B%0A%20%20%20%20return%20%26PromptProcessor%7Bclient%3A%20c%7D%0A%7D%0A%0Afunc%20(pp%20*PromptProcessor)%20ProcessPrompt(ctx%20context.Context%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20pp.client.GetPrompt(ctx%2C%20mcp.GetPromptRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.GetPromptRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result.Messages%2C%20nil%0A%7D%0A%0Afunc%20(pp%20*PromptProcessor)%20BuildConversation(ctx%20context.Context%2C%20promptName%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D%2C%20userMessage%20string)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20prompt%20template%0A%20%20%20%20messages%2C%20err%20%3A%3D%20pp.ProcessPrompt(ctx%2C%20promptName%2C%20args)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20user%20message%0A%20%20%20%20messages%20%3D%20append(messages%2C%20mcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent(userMessage)%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20return%20messages%2C%20nil%0A%7D%0A%0Afunc%20(pp%20*PromptProcessor)%20FormatForLLM(messages%20%5B%5Dmcp.PromptMessage)%20%5B%5Dmap%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20formatted%20%3A%3D%20make(%5B%5Dmap%5Bstring%5Dinterface%7B%7D%2C%20len(messages))%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20message%20%3A%3D%20range%20messages%20%7B%0A%20%20%20%20%20%20%20%20formatted%5Bi%5D%20%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22role%22%3A%20%20%20%20message.Role%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22content%22%3A%20message.Content.Text%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20formatted%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Dynamic%20Prompt%20Generation%0A%0A%60%60%60go%0Afunc%20generateCodeReviewPrompt(ctx%20context.Context%2C%20c%20client.Client%2C%20code%2C%20language%20string)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20processor%20%3A%3D%20NewPromptProcessor(c)%0A%20%20%20%20%0A%20%20%20%20return%20processor.ProcessPrompt(ctx%2C%20%22code_review%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22code%22%3A%20%20%20%20%20code%2C%0A%20%20%20%20%20%20%20%20%22language%22%3A%20language%2C%0A%20%20%20%20%20%20%20%20%22focus%22%3A%20%20%20%20%22best-practices%22%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20generateDataAnalysisPrompt(ctx%20context.Context%2C%20c%20client.Client%2C%20datasetURI%20string%2C%20analysisType%20string)%20(%5B%5Dmcp.PromptMessage%2C%20error)%20%7B%0A%20%20%20%20processor%20%3A%3D%20NewPromptProcessor(c)%0A%20%20%20%20%0A%20%20%20%20return%20processor.ProcessPrompt(ctx%2C%20%22analyze_data%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22dataset_uri%22%3A%20%20%20datasetURI%2C%0A%20%20%20%20%20%20%20%20%22analysis_type%22%3A%20analysisType%2C%0A%20%20%20%20%20%20%20%20%22focus_areas%22%3A%20%20%20%5B%5Dstring%7B%22trends%22%2C%20%22outliers%22%2C%20%22correlations%22%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20demonstrateDynamicPrompts(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Generate%20code%20review%20prompt%0A%20%20%20%20codeReviewMessages%2C%20err%20%3A%3D%20generateCodeReviewPrompt(ctx%2C%20c%2C%20%0A%20%20%20%20%20%20%20%20%22func%20main()%20%7B%20fmt.Println(%5C%22Hello%5C%22)%20%7D%22%2C%20%0A%20%20%20%20%20%20%20%20%22go%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20generate%20code%20review%20prompt%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Code%20review%20prompt%3A%20%25d%20messages%5Cn%22%2C%20len(codeReviewMessages))%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Generate%20data%20analysis%20prompt%0A%20%20%20%20analysisMessages%2C%20err%20%3A%3D%20generateDataAnalysisPrompt(ctx%2C%20c%2C%20%0A%20%20%20%20%20%20%20%20%22dataset%3A%2F%2Fsales_data%22%2C%20%0A%20%20%20%20%20%20%20%20%22exploratory%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20generate%20analysis%20prompt%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Data%20analysis%20prompt%3A%20%25d%20messages%5Cn%22%2C%20len(analysisMessages))%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Subscriptions%0A%0ASome%20transports%20support%20subscriptions%20for%20receiving%20real-time%20notifications.%0A%0A%23%23%23%20Basic%20Subscription%20Handling%0A%0A%60%60%60go%0Afunc%20handleSubscriptions(ctx%20context.Context%2C%20c%20client.Client)%20%7B%0A%20%20%20%20%2F%2F%20Check%20if%20client%20supports%20subscriptions%0A%20%20%20%20subscriber%2C%20ok%20%3A%3D%20c.(client.Subscriber)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20log.Println(%22Client%20does%20not%20support%20subscriptions%22)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Subscribe%20to%20notifications%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20subscriber.Subscribe(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20subscribe%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Handle%20notifications%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20notification%20%3A%3D%20%3C-notifications%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20handleNotification(notification)%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Subscription%20cancelled%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20switch%20notification.Method%20%7B%0A%20%20%20%20case%20%22notifications%2Fprogress%22%3A%0A%20%20%20%20%20%20%20%20handleProgressNotification(notification)%0A%20%20%20%20case%20%22notifications%2Fmessage%22%3A%0A%20%20%20%20%20%20%20%20handleMessageNotification(notification)%0A%20%20%20%20case%20%22notifications%2Fresources%2Fupdated%22%3A%0A%20%20%20%20%20%20%20%20handleResourceUpdateNotification(notification)%0A%20%20%20%20case%20%22notifications%2Ftools%2Fupdated%22%3A%0A%20%20%20%20%20%20%20%20handleToolUpdateNotification(notification)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20log.Printf(%22Unknown%20notification%3A%20%25s%22%2C%20notification.Method)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleProgressNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20var%20progress%20mcp.ProgressNotification%0A%20%20%20%20if%20err%20%3A%3D%20json.Unmarshal(notification.Params%2C%20%26progress)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20parse%20progress%20notification%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Progress%3A%20%25d%2F%25d%20-%20%25s%5Cn%22%2C%20%0A%20%20%20%20%20%20%20%20progress.Progress%2C%20%0A%20%20%20%20%20%20%20%20progress.Total%2C%20%0A%20%20%20%20%20%20%20%20progress.Message)%0A%7D%0A%0Afunc%20handleMessageNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20var%20message%20mcp.MessageNotification%0A%20%20%20%20if%20err%20%3A%3D%20json.Unmarshal(notification.Params%2C%20%26message)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20parse%20message%20notification%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Server%20message%3A%20%25s%5Cn%22%2C%20message.Text)%0A%7D%0A%0Afunc%20handleResourceUpdateNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20log.Println(%22Resources%20updated%2C%20refreshing%20cache...%22)%0A%20%20%20%20%2F%2F%20Invalidate%20resource%20cache%20or%20refresh%20resource%20list%0A%7D%0A%0Afunc%20handleToolUpdateNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20log.Println(%22Tools%20updated%2C%20refreshing%20tool%20list...%22)%0A%20%20%20%20%2F%2F%20Refresh%20tool%20list%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20Subscription%20Management%0A%0A%60%60%60go%0Atype%20SubscriptionManager%20struct%20%7B%0A%20%20%20%20client%20%20%20%20%20%20%20%20client.Client%0A%20%20%20%20subscriber%20%20%20%20client.Subscriber%0A%20%20%20%20notifications%20chan%20mcp.Notification%0A%20%20%20%20handlers%20%20%20%20%20%20map%5Bstring%5D%5B%5DNotificationHandler%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20wg%20%20%20%20%20%20%20%20%20%20%20%20sync.WaitGroup%0A%20%20%20%20mutex%20%20%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Atype%20NotificationHandler%20func(mcp.Notification)%20error%0A%0Afunc%20NewSubscriptionManager(c%20client.Client)%20(*SubscriptionManager%2C%20error)%20%7B%0A%20%20%20%20subscriber%2C%20ok%20%3A%3D%20c.(client.Subscriber)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20does%20not%20support%20subscriptions%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20sm%20%3A%3D%20%26SubscriptionManager%7B%0A%20%20%20%20%20%20%20%20client%3A%20%20%20%20%20c%2C%0A%20%20%20%20%20%20%20%20subscriber%3A%20subscriber%2C%0A%20%20%20%20%20%20%20%20handlers%3A%20%20%20make(map%5Bstring%5D%5B%5DNotificationHandler)%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20%20%20cancel%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20sm%2C%20nil%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20Start()%20error%20%7B%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20sm.subscriber.Subscribe(sm.ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22failed%20to%20subscribe%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20sm.notifications%20%3D%20notifications%0A%0A%20%20%20%20sm.wg.Add(1)%0A%20%20%20%20go%20sm.handleNotifications()%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20Stop()%20%7B%0A%20%20%20%20sm.cancel()%0A%20%20%20%20sm.wg.Wait()%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20AddHandler(method%20string%2C%20handler%20NotificationHandler)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%0A%20%20%20%20sm.handlers%5Bmethod%5D%20%3D%20append(sm.handlers%5Bmethod%5D%2C%20handler)%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20RemoveHandler(method%20string%2C%20handler%20NotificationHandler)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%0A%20%20%20%20handlers%20%3A%3D%20sm.handlers%5Bmethod%5D%0A%20%20%20%20for%20i%2C%20h%20%3A%3D%20range%20handlers%20%7B%0A%20%20%20%20%20%20%20%20if%20reflect.ValueOf(h).Pointer()%20%3D%3D%20reflect.ValueOf(handler).Pointer()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sm.handlers%5Bmethod%5D%20%3D%20append(handlers%5B%3Ai%5D%2C%20handlers%5Bi%2B1%3A%5D...)%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20handleNotifications()%20%7B%0A%20%20%20%20defer%20sm.wg.Done()%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20notification%20%3A%3D%20%3C-sm.notifications%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20sm.processNotification(notification)%0A%20%20%20%20%20%20%20%20case%20%3C-sm.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SubscriptionManager)%20processNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20sm.mutex.RLock()%0A%20%20%20%20handlers%20%3A%3D%20sm.handlers%5Bnotification.Method%5D%0A%20%20%20%20sm.mutex.RUnlock()%0A%0A%20%20%20%20for%20_%2C%20handler%20%3A%3D%20range%20handlers%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20handler(notification)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Handler%20error%20for%20%25s%3A%20%25v%22%2C%20notification.Method%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%20example%0Afunc%20demonstrateSubscriptionManager(c%20client.Client)%20%7B%0A%20%20%20%20sm%2C%20err%20%3A%3D%20NewSubscriptionManager(c)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20create%20subscription%20manager%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20handlers%0A%20%20%20%20sm.AddHandler(%22notifications%2Fprogress%22%2C%20func(n%20mcp.Notification)%20error%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Progress%20notification%3A%20%25%2Bv%22%2C%20n)%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D)%0A%0A%20%20%20%20sm.AddHandler(%22notifications%2Fmessage%22%2C%20func(n%20mcp.Notification)%20error%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Message%20notification%3A%20%25%2Bv%22%2C%20n)%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Start%20handling%0A%20%20%20%20if%20err%20%3A%3D%20sm.Start()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20start%20subscription%20manager%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Let%20it%20run%20for%20a%20while%0A%20%20%20%20time.Sleep(30%20*%20time.Second)%0A%0A%20%20%20%20%2F%2F%20Stop%0A%20%20%20%20sm.Stop()%0A%7D%0A%60%60%60%0A%0A%23%23%20Advanced%3A%20Sampling%20Support%0A%0ASampling%20is%20an%20advanced%20feature%20that%20allows%20clients%20to%20respond%20to%20LLM%20completion%20requests%20from%20servers.%20This%20enables%20servers%20to%20leverage%20client-side%20LLM%20capabilities%20for%20content%20generation%20and%20reasoning.%0A%0A%3E%20**Note**%3A%20Sampling%20is%20an%20advanced%20feature%20that%20most%20clients%20don't%20need.%20Only%20implement%20sampling%20if%20you're%20building%20a%20client%20that%20provides%20LLM%20capabilities%20to%20servers.%0A%0A%23%23%23%20When%20to%20Implement%20Sampling%0A%0AConsider%20implementing%20sampling%20when%20your%20client%3A%0A-%20Has%20access%20to%20LLM%20APIs%20(OpenAI%2C%20Anthropic%2C%20etc.)%0A-%20Wants%20to%20provide%20LLM%20capabilities%20to%20servers%0A-%20Needs%20to%20support%20servers%20that%20generate%20dynamic%20content%0A%0A%23%23%23%20Basic%20Implementation%0A%0A%60%60%60go%0Aimport%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%0A%2F%2F%20Implement%20the%20SamplingHandler%20interface%0Atype%20MySamplingHandler%20struct%20%7B%0A%20%20%20%20%2F%2F%20Add%20your%20LLM%20client%20here%0A%7D%0A%0Afunc%20(h%20*MySamplingHandler)%20CreateMessage(ctx%20context.Context%2C%20request%20mcp.CreateMessageRequest)%20(*mcp.CreateMessageResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Process%20the%20request%20with%20your%20LLM%0A%20%20%20%20%2F%2F%20Return%20the%20result%20in%20MCP%20format%0A%20%20%20%20return%20%26mcp.CreateMessageResult%7B%0A%20%20%20%20%20%20%20%20Model%3A%20%22your-model%22%2C%0A%20%20%20%20%20%20%20%20Role%3A%20%20mcp.RoleAssistant%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22Your%20LLM%20response%20here%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20StopReason%3A%20%22endTurn%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0A%2F%2F%20Create%20client%20with%20sampling%20support%0AmcpClient%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%22%2Fpath%2Fto%2Fserver%22%2C%0A%20%20%20%20client.WithSamplingHandler(%26MySamplingHandler%7B%7D)%2C%0A)%0A%60%60%60%0A%0AFor%20complete%20sampling%20documentation%2C%20see%20**%5BClient%20Sampling%20Guide%5D(%2Fclients%2Fadvanced-sampling)**.%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Transports%5D(%2Fclients%2Ftransports)**%20-%20Learn%20transport-specific%20client%20features%0A-%20**%5BClient%20Basics%5D(%2Fclients%2Fbasics)**%20-%20Review%20fundamental%20concepts",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./transports-Dz0RYOJN.js"),[]),path:"/clients/transports",type:"mdx",filePath:"clients/transports.mdx",content:"%23%20Client%20Transports%0A%0ALearn%20about%20transport-specific%20client%20implementations%20and%20how%20to%20choose%20the%20right%20transport%20for%20your%20use%20case.%0A%0A%23%23%20Transport%20Overview%0A%0AMCP-Go%20provides%20client%20implementations%20for%20all%20supported%20transports.%20Each%20transport%20has%20different%20characteristics%20and%20is%20optimized%20for%20specific%20scenarios.%0A%0A%7C%20Transport%20%7C%20Best%20For%20%7C%20Connection%20%7C%20Real-time%20%7C%20Multi-client%20%7C%0A%7C-----------%7C----------%7C------------%7C-----------%7C--------------%7C%0A%7C%20**STDIO**%20%7C%20CLI%20tools%2C%20desktop%20apps%20%7C%20Process%20pipes%20%7C%20No%20%7C%20No%20%7C%0A%7C%20**StreamableHTTP**%20%7C%20Web%20services%2C%20APIs%20%7C%20HTTP%20requests%20%7C%20No%20%7C%20Yes%20%7C%0A%7C%20**SSE**%20%7C%20Web%20apps%2C%20real-time%20%7C%20HTTP%20%2B%20EventSource%20%7C%20Yes%20%7C%20Yes%20%7C%0A%7C%20**In-Process**%20%7C%20Testing%2C%20embedded%20%7C%20Direct%20calls%20%7C%20Yes%20%7C%20No%20%7C%0A%0A%23%23%20STDIO%20Client%0A%0ASTDIO%20clients%20communicate%20with%20servers%20through%20standard%20input%2Foutput%2C%20typically%20by%20spawning%20a%20subprocess.%0A%0A%23%23%23%20Basic%20STDIO%20Client%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22crypto%2Ftls%22%0A%20%20%20%20%22errors%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22net%2Fhttp%22%0A%20%20%20%20%22os%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20createStdioClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20client%20that%20spawns%20a%20subprocess%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioMCPClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%5B%5Dstring%7B%7D%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx%2C%20initRequest)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20the%20client%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx%2C%20listToolsRequest)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20STDIO%20Error%20Handling%0A%0A%60%60%60go%0A%2F%2F%20Define%20error%20constants%20for%20STDIO%20client%20errors%0Avar%20(%0A%20%20%20%20ErrProcessExited%20%20%3D%20errors.New(%22process%20exited%22)%0A%20%20%20%20ErrProcessTimeout%20%3D%20errors.New(%22process%20timeout%22)%0A%20%20%20%20ErrBrokenPipe%20%20%20%20%20%3D%20errors.New(%22broken%20pipe%22)%0A)%0A%0Afunc%20handleStdioErrors(c%20*client.StdioClient)%20%7B%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22example_tool%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20ErrProcessExited)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Server%20process%20exited%20unexpectedly%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Attempt%20to%20restart%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20restartErr%20%3A%3D%20c.Restart()%3B%20restartErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%3A%20%25v%22%2C%20restartErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20ErrProcessTimeout)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Server%20process%20timed%20out%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Kill%20and%20restart%20process%0A%20%20%20%20%20%20%20%20%20%20%20%20c.Kill()%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20restartErr%20%3A%3D%20c.Restart()%3B%20restartErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%3A%20%25v%22%2C%20restartErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20ErrBrokenPipe)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Communication%20pipe%20broken%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20likely%20crashed%2C%20restart%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20restartErr%20%3A%3D%20c.Restart()%3B%20restartErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%3A%20%25v%22%2C%20restartErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unexpected%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20STDIO%20Process%20Management%0A%0A%60%60%60go%0Atype%20ManagedStdioClient%20struct%20%7B%0A%20%20%20%20client%20%20%20%20%20%20*client.StdioClient%0A%20%20%20%20options%20%20%20%20%20client.StdioOptions%0A%20%20%20%20restartChan%20chan%20struct%7B%7D%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20wg%20%20%20%20%20%20%20%20%20%20sync.WaitGroup%0A%7D%0A%0Afunc%20NewManagedStdioClient(options%20client.StdioOptions)%20(*ManagedStdioClient%2C%20error)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20msc%20%3A%3D%20%26ManagedStdioClient%7B%0A%20%20%20%20%20%20%20%20options%3A%20%20%20%20%20options%2C%0A%20%20%20%20%20%20%20%20restartChan%3A%20make(chan%20struct%7B%7D%2C%201)%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20%20%20%20cancel%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20msc.start()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20cancel()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20msc.wg.Add(1)%0A%20%20%20%20go%20msc.monitorProcess()%0A%0A%20%20%20%20return%20msc%2C%20nil%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20start()%20error%20%7B%0A%20%20%20%20client%2C%20err%20%3A%3D%20client.NewStdioClientWithOptions(msc.options)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20client.Initialize(msc.ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20client.Close()%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20msc.client%20%3D%20client%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20monitorProcess()%20%7B%0A%20%20%20%20defer%20msc.wg.Done()%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-msc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20case%20%3C-msc.restartChan%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Restarting%20STDIO%20client...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20msc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20msc.client.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wait%20before%20restarting%0A%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(1%20*%20time.Second)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20msc.start()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%20client%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Try%20again%20after%20delay%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(5%20*%20time.Second)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20msc.restartChan%20%3C-%20struct%7B%7D%7B%7D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Client%20restarted%20successfully%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20if%20msc.client%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20not%20available%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20msc.client.CallTool(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20isProcessError(err)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Trigger%20restart%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20msc.restartChan%20%3C-%20struct%7B%7D%7B%7D%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22process%20error%2C%20restarting%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20Close()%20error%20%7B%0A%20%20%20%20msc.cancel()%0A%20%20%20%20msc.wg.Wait()%0A%20%20%20%20%0A%20%20%20%20if%20msc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20msc.client.Close()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20isProcessError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20ErrProcessExited)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrBrokenPipe)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrProcessTimeout)%0A%7D%0A%60%60%60%0A%0A%60%60%60go%0A%2F%2F%20Define%20connection%20error%20constants%0Avar%20(%0A%20%20%20%20ErrConnectionLost%20%20%20%3D%20errors.New(%22connection%20lost%22)%0A%20%20%20%20ErrConnectionFailed%20%3D%20errors.New(%22connection%20failed%22)%0A%20%20%20%20ErrUnauthorized%20%20%20%20%20%3D%20errors.New(%22unauthorized%22)%0A%20%20%20%20ErrForbidden%20%20%20%20%20%20%20%20%3D%20errors.New(%22forbidden%22)%0A)%0A%60%60%60%0A%0A%23%23%20StreamableHTTP%20Client%0A%0AStreamableHTTP%20clients%20communicate%20with%20servers%20using%20traditional%20HTTP%20requests.%0A%0A%23%23%23%20Basic%20StreamableHTTP%20Client%0A%0A%60%60%60go%0Afunc%20createStreamableHTTPClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20StreamableHTTP%20client%0A%20%20%20%20c%20%3A%3D%20client.NewStreamableHttpClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20client%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20StreamableHTTP%20Client%20with%20Custom%20Configuration%0A%0A%60%60%60go%0Afunc%20createCustomStreamableHTTPClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20StreamableHTTP%20client%20with%20options%0A%20%20%20%20c%20%3A%3D%20client.NewStreamableHttpClient(%22https%3A%2F%2Fapi.example.com%2Fmcp%22%2C%0A%20%20%20%20%20%20%20%20transport.WithHTTPTimeout(30*time.Second)%2C%0A%20%20%20%20%20%20%20%20transport.WithHTTPHeaders(map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22User-Agent%22%3A%20%22MyApp%2F1.0%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Accept%22%3A%20%20%20%20%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20transport.WithHTTPBasicClient(%26http.Client%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Transport%3A%20%26http.Transport%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MaxIdleConns%3A%20%20%20%20%20%20%20%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MaxIdleConnsPerHost%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IdleConnTimeout%3A%20%20%20%20%2090%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20TLSClientConfig%3A%20%26tls.Config%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20InsecureSkipVerify%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20client...%0A%7D%0A%60%60%60%0A%0A%23%23%23%20StreamableHTTP%20Authentication%0A%0A%60%60%60go%0Afunc%20createAuthenticatedStreamableHTTPClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20StreamableHTTP%20client%20with%20OAuth%0A%20%20%20%20c%20%3A%3D%20client.NewStreamableHttpClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22%2C%0A%20%20%20%20%20%20%20%20transport.WithHTTPOAuth(transport.OAuthConfig%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ClientID%3A%20%20%20%20%20%22your-client-id%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ClientSecret%3A%20%22your-client-secret%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20TokenURL%3A%20%20%20%20%20%22https%3A%2F%2Fauth.example.com%2Ftoken%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Scopes%3A%20%20%20%20%20%20%20%5B%5Dstring%7B%22mcp%3Aread%22%2C%20%22mcp%3Awrite%22%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20client...%0A%7D%0A%0Afunc%20isAuthError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20ErrUnauthorized)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrForbidden)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20StreamableHTTP%20Connection%20Pooling%0A%0A%60%60%60go%0Atype%20StreamableHTTPClientPool%20struct%20%7B%0A%20%20%20%20clients%20chan%20*client.Client%0A%20%20%20%20factory%20func()%20*client.Client%0A%20%20%20%20maxSize%20int%0A%7D%0A%0Afunc%20NewStreamableHTTPClientPool(baseURL%20string%2C%20maxSize%20int)%20*StreamableHTTPClientPool%20%7B%0A%20%20%20%20pool%20%3A%3D%20%26StreamableHTTPClientPool%7B%0A%20%20%20%20%20%20%20%20clients%3A%20make(chan%20*client.Client%2C%20maxSize)%2C%0A%20%20%20%20%20%20%20%20maxSize%3A%20maxSize%2C%0A%20%20%20%20%20%20%20%20factory%3A%20func()%20*client.Client%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20client.NewStreamableHttpClient(baseURL)%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Pre-populate%20pool%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20maxSize%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20pool.clients%20%3C-%20pool.factory()%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20pool%0A%7D%0A%0Afunc%20(pool%20*StreamableHTTPClientPool)%20Get()%20*client.Client%20%7B%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20c%20%3A%3D%20%3C-pool.clients%3A%0A%20%20%20%20%20%20%20%20return%20c%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20pool.factory()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(pool%20*StreamableHTTPClientPool)%20Put(c%20*client.Client)%20%7B%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20pool.clients%20%3C-%20c%3A%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Pool%20full%2C%20close%20client%0A%20%20%20%20%20%20%20%20c.Close()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(pool%20*StreamableHTTPClientPool)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20c%20%3A%3D%20pool.Get()%0A%20%20%20%20defer%20pool.Put(c)%0A%0A%20%20%20%20return%20c.CallTool(ctx%2C%20req)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20StreamableHTTP%20With%20Preconfigured%20Session%0AYou%20can%20also%20create%20a%20StreamableHTTP%20client%20with%20a%20preconfigured%20session%2C%20which%20allows%20you%20to%20reuse%20the%20same%20session%20across%20multiple%20requests%0A%0A%60%60%60go%0Afunc%20createStreamableHTTPClientWithSession()%20%7B%0A%20%20%20%20%2F%2F%20Create%20StreamableHTTP%20client%20with%20options%0A%20%20%20%20sessionID%20%3A%3D%20%2F%2F%20fetch%20existing%20session%20ID%20%0A%20%20%20%20c%20%3A%3D%20client.NewStreamableHttpClient(%22https%3A%2F%2Fapi.example.com%2Fmcp%22%2C%0A%20%20%20%20%20%20%20%20transport.WithSession(sessionID)%2C%0A%20%20%20%20)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20%2F%2F%20Use%20client...%0A%20%20%20%20_%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20%2F%2F%20If%20the%20session%20is%20terminated%2C%20you%20must%20reinitialize%20the%20client%0A%20%20%20%20if%20errors.Is(err%2C%20transport.ErrSessionTerminated)%20%7B%20%0A%20%20%20%20%20%20%20%20c.Initialize(ctx)%20%2F%2F%20Reinitialize%20if%20session%20is%20terminated%0A%20%20%20%20%20%20%20%20%2F%2F%20The%20session%20ID%20should%20change%20after%20reinitialization%0A%20%20%20%20%20%20%20%20sessionID%20%3D%20c.GetSessionId()%20%2F%2F%20Update%20session%20ID%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20SSE%20Client%0A%0ASSE%20(Server-Sent%20Events)%20clients%20provide%20real-time%20communication%20with%20servers.%0A%0A%23%23%23%20Basic%20SSE%20Client%0A%0A%60%60%60go%0Afunc%20createSSEClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20SSE%20client%0A%20%20%20%20c%20%3A%3D%20client.NewSSEClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20%2F%2F%20Set%20authentication%0A%20%20%20%20c.SetHeader(%22Authorization%22%2C%20%22Bearer%20your-token%22)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Subscribe%20to%20notifications%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20c.Subscribe(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Handle%20notifications%20in%20background%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20for%20notification%20%3A%3D%20range%20notifications%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Notification%3A%20%25%2Bv%22%2C%20notification)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20%2F%2F%20Use%20client%20for%20regular%20operations%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20SSE%20Client%20with%20Reconnection%0A%0A%60%60%60go%0Atype%20ResilientSSEClient%20struct%20%7B%0A%20%20%20%20baseURL%20%20%20%20%20string%0A%20%20%20%20headers%20%20%20%20%20map%5Bstring%5Dstring%0A%20%20%20%20client%20%20%20%20%20%20*client.SSEClient%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20reconnectCh%20chan%20struct%7B%7D%0A%20%20%20%20mutex%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewResilientSSEClient(baseURL%20string)%20*ResilientSSEClient%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20rsc%20%3A%3D%20%26ResilientSSEClient%7B%0A%20%20%20%20%20%20%20%20baseURL%3A%20%20%20%20%20baseURL%2C%0A%20%20%20%20%20%20%20%20headers%3A%20%20%20%20%20make(map%5Bstring%5Dstring)%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20%20%20%20cancel%2C%0A%20%20%20%20%20%20%20%20reconnectCh%3A%20make(chan%20struct%7B%7D%2C%201)%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20go%20rsc.reconnectLoop()%0A%20%20%20%20return%20rsc%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20SetHeader(key%2C%20value%20string)%20%7B%0A%20%20%20%20rsc.mutex.Lock()%0A%20%20%20%20defer%20rsc.mutex.Unlock()%0A%20%20%20%20rsc.headers%5Bkey%5D%20%3D%20value%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20connect()%20error%20%7B%0A%20%20%20%20rsc.mutex.Lock()%0A%20%20%20%20defer%20rsc.mutex.Unlock()%0A%0A%20%20%20%20if%20rsc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20rsc.client.Close()%0A%20%20%20%20%7D%0A%0A%20%20%20%20client%20%3A%3D%20client.NewSSEClient(rsc.baseURL)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20headers%0A%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20rsc.headers%20%7B%0A%20%20%20%20%20%20%20%20client.SetHeader(key%2C%20value)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20client.Initialize(rsc.ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20rsc.client%20%3D%20client%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20reconnectLoop()%20%7B%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-rsc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20case%20%3C-rsc.reconnectCh%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Reconnecting%20SSE%20client...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20attempt%20%3A%3D%201%3B%20attempt%20%3C%3D%205%3B%20attempt%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20rsc.connect()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Reconnection%20attempt%20%25d%20failed%3A%20%25v%22%2C%20attempt%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20backoff%20%3A%3D%20time.Duration(attempt)%20*%20time.Second%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-time.After(backoff)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-rsc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Reconnected%20successfully%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20rsc.mutex.RLock()%0A%20%20%20%20client%20%3A%3D%20rsc.client%0A%20%20%20%20rsc.mutex.RUnlock()%0A%0A%20%20%20%20if%20client%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20not%20connected%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20client.CallTool(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20isConnectionError(err)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Trigger%20reconnection%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20rsc.reconnectCh%20%3C-%20struct%7B%7D%7B%7D%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22connection%20error%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20Subscribe(ctx%20context.Context)%20(%3C-chan%20mcp.Notification%2C%20error)%20%7B%0A%20%20%20%20rsc.mutex.RLock()%0A%20%20%20%20client%20%3A%3D%20rsc.client%0A%20%20%20%20rsc.mutex.RUnlock()%0A%0A%20%20%20%20if%20client%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20not%20connected%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20client.Subscribe(ctx)%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20Close()%20error%20%7B%0A%20%20%20%20rsc.cancel()%0A%20%20%20%20%0A%20%20%20%20rsc.mutex.Lock()%0A%20%20%20%20defer%20rsc.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20if%20rsc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20rsc.client.Close()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%0A%2F%2F%20Helper%20function%20to%20check%20if%20an%20error%20is%20a%20connection%20error%0Afunc%20isConnectionError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20ErrConnectionLost)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrConnectionFailed)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20SSE%20Event%20Handling%0A%0A%60%60%60go%0Atype%20SSEEventHandler%20struct%20%7B%0A%20%20%20%20client%20%20%20%20%20%20*client.SSEClient%0A%20%20%20%20handlers%20%20%20%20map%5Bstring%5D%5B%5Dfunc(mcp.Notification)%0A%20%20%20%20mutex%20%20%20%20%20%20%20sync.RWMutex%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20wg%20%20%20%20%20%20%20%20%20%20sync.WaitGroup%0A%7D%0A%0Afunc%20NewSSEEventHandler(c%20*client.SSEClient)%20*SSEEventHandler%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20return%20%26SSEEventHandler%7B%0A%20%20%20%20%20%20%20%20client%3A%20%20%20c%2C%0A%20%20%20%20%20%20%20%20handlers%3A%20make(map%5Bstring%5D%5B%5Dfunc(mcp.Notification))%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20cancel%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20Start()%20error%20%7B%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20seh.client.Subscribe(seh.ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20seh.wg.Add(1)%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20defer%20seh.wg.Done()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20notification%20%3A%3D%20%3C-notifications%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20seh.handleNotification(notification)%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-seh.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20Stop()%20%7B%0A%20%20%20%20seh.cancel()%0A%20%20%20%20seh.wg.Wait()%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnProgress(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Fprogress%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnMessage(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Fmessage%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnResourceUpdate(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Fresources%2Fupdated%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnToolUpdate(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Ftools%2Fupdated%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20addHandler(method%20string%2C%20handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.mutex.Lock()%0A%20%20%20%20defer%20seh.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20seh.handlers%5Bmethod%5D%20%3D%20append(seh.handlers%5Bmethod%5D%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20handleNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20seh.mutex.RLock()%0A%20%20%20%20handlers%20%3A%3D%20seh.handlers%5Bnotification.Method%5D%0A%20%20%20%20seh.mutex.RUnlock()%0A%0A%20%20%20%20for%20_%2C%20handler%20%3A%3D%20range%20handlers%20%7B%0A%20%20%20%20%20%20%20%20go%20handler(notification)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20In-Process%20Client%0A%0AIn-process%20clients%20provide%20direct%20communication%20with%20servers%20in%20the%20same%20process.%0A%0A%23%23%23%20Basic%20In-Process%20Client%0A%0A%60%60%60go%0Afunc%20createInProcessClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Test%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20tools%20to%20server%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22test_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Test%20tool%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22input%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20input%20%3A%3D%20req.Params.Arguments%5B%22input%22%5D.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(%22Processed%3A%20%22%20%2B%20input)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20in-process%20client%0A%20%20%20%20c%20%3A%3D%20client.NewInProcessClient(s)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20(no%20network%20overhead)%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20client%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22test_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22test%20data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20In-Process%20Client%20for%20Testing%0A%0A%60%60%60go%0Atype%20TestClient%20struct%20%7B%0A%20%20%20%20server%20*server.MCPServer%0A%20%20%20%20client%20*client.InProcessClient%0A%7D%0A%0Afunc%20NewTestClient()%20*TestClient%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Test%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithAllCapabilities()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20return%20%26TestClient%7B%0A%20%20%20%20%20%20%20%20server%3A%20s%2C%0A%20%20%20%20%20%20%20%20client%3A%20client.NewInProcessClient(s)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20AddTool(name%2C%20description%20string%2C%20handler%20server.ToolHandler)%20%7B%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(name%2C%20mcp.WithDescription(description))%0A%20%20%20%20tc.server.AddTool(tool%2C%20handler)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20AddResource(uri%2C%20name%20string%2C%20handler%20server.ResourceHandler)%20%7B%0A%20%20%20%20resource%20%3A%3D%20mcp.NewResource(uri%2C%20name)%0A%20%20%20%20tc.server.AddResource(resource%2C%20handler)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20Initialize(ctx%20context.Context)%20error%20%7B%0A%20%20%20%20return%20tc.client.Initialize(ctx)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20CallTool(ctx%20context.Context%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20return%20tc.client.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20ReadResource(ctx%20context.Context%2C%20uri%20string)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20return%20tc.client.ReadResource(ctx%2C%20mcp.ReadResourceRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.ReadResourceRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20uri%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20Close()%20error%20%7B%0A%20%20%20%20return%20tc.client.Close()%0A%7D%0A%0A%2F%2F%20Usage%20in%20tests%0Afunc%20TestWithInProcessClient(t%20*testing.T)%20%7B%0A%20%20%20%20tc%20%3A%3D%20NewTestClient()%0A%20%20%20%20defer%20tc.Close()%0A%0A%20%20%20%20%2F%2F%20Add%20test%20tool%0A%20%20%20%20tc.AddTool(%22echo%22%2C%20%22Echo%20input%22%2C%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20input%20%3A%3D%20req.Params.Arguments%5B%22input%22%5D.(string)%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(input)%2C%20nil%0A%20%20%20%20%7D)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20err%20%3A%3D%20tc.Initialize(ctx)%0A%20%20%20%20require.NoError(t%2C%20err)%0A%0A%20%20%20%20%2F%2F%20Test%20tool%20call%0A%20%20%20%20result%2C%20err%20%3A%3D%20tc.CallTool(ctx%2C%20%22echo%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22input%22%3A%20%22hello%20world%22%2C%0A%20%20%20%20%7D)%0A%20%20%20%20require.NoError(t%2C%20err)%0A%20%20%20%20assert.Equal(t%2C%20%22hello%20world%22%2C%20result.Content%5B0%5D.Text)%0A%7D%0A%60%60%60%0A%0A%23%23%20Transport%20Selection%0A%0A%23%23%23%20Decision%20Matrix%0A%0AChoose%20your%20transport%20based%20on%20these%20factors%3A%0A%0A%60%60%60go%0Atype%20TransportRequirements%20struct%20%7B%0A%20%20%20%20RealTime%20%20%20%20%20%20%20%20bool%0A%20%20%20%20MultiClient%20%20%20%20%20bool%0A%20%20%20%20NetworkRequired%20bool%0A%20%20%20%20Performance%20%20%20%20%20string%20%2F%2F%20%22high%22%2C%20%22medium%22%2C%20%22low%22%0A%20%20%20%20Complexity%20%20%20%20%20%20string%20%2F%2F%20%22low%22%2C%20%22medium%22%2C%20%22high%22%0A%7D%0A%0Afunc%20SelectTransport(req%20TransportRequirements)%20string%20%7B%0A%20%20%20%20switch%20%7B%0A%20%20%20%20case%20!req.NetworkRequired%20%26%26%20req.Performance%20%3D%3D%20%22high%22%3A%0A%20%20%20%20%20%20%20%20return%20%22inprocess%22%0A%20%20%20%20%0A%20%20%20%20case%20!req.NetworkRequired%20%26%26%20!req.MultiClient%3A%0A%20%20%20%20%20%20%20%20return%20%22stdio%22%0A%20%20%20%20%0A%20%20%20%20case%20req.RealTime%20%26%26%20req.MultiClient%3A%0A%20%20%20%20%20%20%20%20return%20%22sse%22%0A%20%20%20%20%0A%20%20%20%20case%20req.NetworkRequired%20%26%26%20req.MultiClient%3A%0A%20%20%20%20%20%20%20%20return%20%22streamablehttp%22%0A%20%20%20%20%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20%22stdio%22%20%2F%2F%20Default%20fallback%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%20examples%0Afunc%20demonstrateTransportSelection()%20%7B%0A%20%20%20%20%2F%2F%20High-performance%20testing%0A%20%20%20%20testReq%20%3A%3D%20TransportRequirements%7B%0A%20%20%20%20%20%20%20%20RealTime%3A%20%20%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20MultiClient%3A%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20NetworkRequired%3A%20false%2C%0A%20%20%20%20%20%20%20%20Performance%3A%20%20%20%20%20%22high%22%2C%0A%20%20%20%20%20%20%20%20Complexity%3A%20%20%20%20%20%20%22low%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Printf(%22Testing%3A%20%25s%5Cn%22%2C%20SelectTransport(testReq))%0A%0A%20%20%20%20%2F%2F%20Real-time%20web%20application%0A%20%20%20%20webReq%20%3A%3D%20TransportRequirements%7B%0A%20%20%20%20%20%20%20%20RealTime%3A%20%20%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20MultiClient%3A%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20NetworkRequired%3A%20true%2C%0A%20%20%20%20%20%20%20%20Performance%3A%20%20%20%20%20%22medium%22%2C%0A%20%20%20%20%20%20%20%20Complexity%3A%20%20%20%20%20%20%22medium%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Printf(%22Web%20app%3A%20%25s%5Cn%22%2C%20SelectTransport(webReq))%0A%0A%20%20%20%20%2F%2F%20CLI%20tool%0A%20%20%20%20cliReq%20%3A%3D%20TransportRequirements%7B%0A%20%20%20%20%20%20%20%20RealTime%3A%20%20%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20MultiClient%3A%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20NetworkRequired%3A%20false%2C%0A%20%20%20%20%20%20%20%20Performance%3A%20%20%20%20%20%22medium%22%2C%0A%20%20%20%20%20%20%20%20Complexity%3A%20%20%20%20%20%20%22low%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Printf(%22CLI%20tool%3A%20%25s%5Cn%22%2C%20SelectTransport(cliReq))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multi-Transport%20Client%20Factory%0A%0A%60%60%60go%0Atype%20ClientFactory%20struct%20%7B%0A%20%20%20%20configs%20map%5Bstring%5Dinterface%7B%7D%0A%7D%0A%0Afunc%20NewClientFactory()%20*ClientFactory%20%7B%0A%20%20%20%20return%20%26ClientFactory%7B%0A%20%20%20%20%20%20%20%20configs%3A%20make(map%5Bstring%5Dinterface%7B%7D)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20SetStdioConfig(command%20string%2C%20args%20...string)%20%7B%0A%20%20%20%20cf.configs%5B%22stdio%22%5D%20%3D%20client.StdioOptions%7B%0A%20%20%20%20%20%20%20%20Command%3A%20command%2C%0A%20%20%20%20%20%20%20%20Args%3A%20%20%20%20args%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20SetStreamableHTTPConfig(baseURL%20string%2C%20headers%20map%5Bstring%5Dstring)%20%7B%0A%20%20%20%20cf.configs%5B%22streamablehttp%22%5D%20%3D%20struct%20%7B%0A%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%7D%7B%0A%20%20%20%20%20%20%20%20BaseURL%3A%20baseURL%2C%0A%20%20%20%20%20%20%20%20Headers%3A%20headers%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20SetSSEConfig(baseURL%20string%2C%20headers%20map%5Bstring%5Dstring)%20%7B%0A%20%20%20%20cf.configs%5B%22sse%22%5D%20%3D%20struct%20%7B%0A%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%7D%7B%0A%20%20%20%20%20%20%20%20BaseURL%3A%20baseURL%2C%0A%20%20%20%20%20%20%20%20Headers%3A%20headers%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20CreateClient(transport%20string)%20(client.Client%2C%20error)%20%7B%0A%20%20%20%20switch%20transport%20%7B%0A%20%20%20%20case%20%22stdio%22%3A%0A%20%20%20%20%20%20%20%20config%2C%20ok%20%3A%3D%20cf.configs%5B%22stdio%22%5D.(client.StdioOptions)%0A%20%20%20%20%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22stdio%20config%20not%20set%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20client.NewStdioClientWithOptions(config)%0A%0A%20%20%20%20case%20%22streamablehttp%22%3A%0A%20%20%20%20%20%20%20%20config%2C%20ok%20%3A%3D%20cf.configs%5B%22streamablehttp%22%5D.(struct%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22streamablehttp%20config%20not%20set%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20options%20%3A%3D%20%5B%5Dtransport.StreamableHTTPCOption%7B%7D%0A%20%20%20%20%20%20%20%20if%20len(config.Headers)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20options%20%3D%20append(options%2C%20transport.WithHTTPHeaders(config.Headers))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20client.NewStreamableHttpClient(config.BaseURL%2C%20options...)%2C%20nil%0A%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20config%2C%20ok%20%3A%3D%20cf.configs%5B%22sse%22%5D.(struct%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22sse%20config%20not%20set%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20options%20%3A%3D%20%5B%5Dtransport.ClientOption%7B%7D%0A%20%20%20%20%20%20%20%20if%20len(config.Headers)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20options%20%3D%20append(options%2C%20transport.WithHeaders(config.Headers))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20client.NewSSEMCPClient(config.BaseURL%2C%20options...)%0A%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20transport%3A%20%25s%22%2C%20transport)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Afunc%20demonstrateClientFactory()%20%7B%0A%20%20%20%20factory%20%3A%3D%20NewClientFactory()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Configure%20transports%0A%20%20%20%20factory.SetStdioConfig(%22go%22%2C%20%22run%22%2C%20%22server.go%22)%0A%20%20%20%20factory.SetStreamableHTTPConfig(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22Authorization%22%3A%20%22Bearer%20token%22%2C%0A%20%20%20%20%7D)%0A%20%20%20%20factory.SetSSEConfig(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22Authorization%22%3A%20%22Bearer%20token%22%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Create%20client%20based%20on%20environment%0A%20%20%20%20transport%20%3A%3D%20os.Getenv(%22MCP_TRANSPORT%22)%0A%20%20%20%20if%20transport%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20transport%20%3D%20%22stdio%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20client%2C%20err%20%3A%3D%20factory.CreateClient(transport)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20client.Close()%0A%0A%20%20%20%20%2F%2F%20Use%20client...%0A%7D%0A%60%60%60%0A%0A",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./transports-Dz0RYOJN.js"),[]),path:"/clients/transports.html",type:"mdx",filePath:"clients/transports.mdx",content:"%23%20Client%20Transports%0A%0ALearn%20about%20transport-specific%20client%20implementations%20and%20how%20to%20choose%20the%20right%20transport%20for%20your%20use%20case.%0A%0A%23%23%20Transport%20Overview%0A%0AMCP-Go%20provides%20client%20implementations%20for%20all%20supported%20transports.%20Each%20transport%20has%20different%20characteristics%20and%20is%20optimized%20for%20specific%20scenarios.%0A%0A%7C%20Transport%20%7C%20Best%20For%20%7C%20Connection%20%7C%20Real-time%20%7C%20Multi-client%20%7C%0A%7C-----------%7C----------%7C------------%7C-----------%7C--------------%7C%0A%7C%20**STDIO**%20%7C%20CLI%20tools%2C%20desktop%20apps%20%7C%20Process%20pipes%20%7C%20No%20%7C%20No%20%7C%0A%7C%20**StreamableHTTP**%20%7C%20Web%20services%2C%20APIs%20%7C%20HTTP%20requests%20%7C%20No%20%7C%20Yes%20%7C%0A%7C%20**SSE**%20%7C%20Web%20apps%2C%20real-time%20%7C%20HTTP%20%2B%20EventSource%20%7C%20Yes%20%7C%20Yes%20%7C%0A%7C%20**In-Process**%20%7C%20Testing%2C%20embedded%20%7C%20Direct%20calls%20%7C%20Yes%20%7C%20No%20%7C%0A%0A%23%23%20STDIO%20Client%0A%0ASTDIO%20clients%20communicate%20with%20servers%20through%20standard%20input%2Foutput%2C%20typically%20by%20spawning%20a%20subprocess.%0A%0A%23%23%23%20Basic%20STDIO%20Client%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22crypto%2Ftls%22%0A%20%20%20%20%22errors%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22net%2Fhttp%22%0A%20%20%20%20%22os%22%0A%20%20%20%20%22sync%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20createStdioClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20client%20that%20spawns%20a%20subprocess%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioMCPClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20%5B%5Dstring%7B%7D%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20connection%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx%2C%20initRequest)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20the%20client%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx%2C%20listToolsRequest)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20STDIO%20Error%20Handling%0A%0A%60%60%60go%0A%2F%2F%20Define%20error%20constants%20for%20STDIO%20client%20errors%0Avar%20(%0A%20%20%20%20ErrProcessExited%20%20%3D%20errors.New(%22process%20exited%22)%0A%20%20%20%20ErrProcessTimeout%20%3D%20errors.New(%22process%20timeout%22)%0A%20%20%20%20ErrBrokenPipe%20%20%20%20%20%3D%20errors.New(%22broken%20pipe%22)%0A)%0A%0Afunc%20handleStdioErrors(c%20*client.StdioClient)%20%7B%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22example_tool%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20ErrProcessExited)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Server%20process%20exited%20unexpectedly%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Attempt%20to%20restart%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20restartErr%20%3A%3D%20c.Restart()%3B%20restartErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%3A%20%25v%22%2C%20restartErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20ErrProcessTimeout)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Server%20process%20timed%20out%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Kill%20and%20restart%20process%0A%20%20%20%20%20%20%20%20%20%20%20%20c.Kill()%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20restartErr%20%3A%3D%20c.Restart()%3B%20restartErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%3A%20%25v%22%2C%20restartErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20case%20errors.Is(err%2C%20ErrBrokenPipe)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Communication%20pipe%20broken%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20likely%20crashed%2C%20restart%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20restartErr%20%3A%3D%20c.Restart()%3B%20restartErr%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%3A%20%25v%22%2C%20restartErr)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Unexpected%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20STDIO%20Process%20Management%0A%0A%60%60%60go%0Atype%20ManagedStdioClient%20struct%20%7B%0A%20%20%20%20client%20%20%20%20%20%20*client.StdioClient%0A%20%20%20%20options%20%20%20%20%20client.StdioOptions%0A%20%20%20%20restartChan%20chan%20struct%7B%7D%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20wg%20%20%20%20%20%20%20%20%20%20sync.WaitGroup%0A%7D%0A%0Afunc%20NewManagedStdioClient(options%20client.StdioOptions)%20(*ManagedStdioClient%2C%20error)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20msc%20%3A%3D%20%26ManagedStdioClient%7B%0A%20%20%20%20%20%20%20%20options%3A%20%20%20%20%20options%2C%0A%20%20%20%20%20%20%20%20restartChan%3A%20make(chan%20struct%7B%7D%2C%201)%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20%20%20%20cancel%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20msc.start()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20cancel()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20msc.wg.Add(1)%0A%20%20%20%20go%20msc.monitorProcess()%0A%0A%20%20%20%20return%20msc%2C%20nil%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20start()%20error%20%7B%0A%20%20%20%20client%2C%20err%20%3A%3D%20client.NewStdioClientWithOptions(msc.options)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20client.Initialize(msc.ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20client.Close()%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20msc.client%20%3D%20client%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20monitorProcess()%20%7B%0A%20%20%20%20defer%20msc.wg.Done()%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-msc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20case%20%3C-msc.restartChan%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Restarting%20STDIO%20client...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20msc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20msc.client.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wait%20before%20restarting%0A%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(1%20*%20time.Second)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20msc.start()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20restart%20client%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Try%20again%20after%20delay%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(5%20*%20time.Second)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20msc.restartChan%20%3C-%20struct%7B%7D%7B%7D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Client%20restarted%20successfully%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20if%20msc.client%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20not%20available%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20msc.client.CallTool(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20isProcessError(err)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Trigger%20restart%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20msc.restartChan%20%3C-%20struct%7B%7D%7B%7D%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22process%20error%2C%20restarting%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20(msc%20*ManagedStdioClient)%20Close()%20error%20%7B%0A%20%20%20%20msc.cancel()%0A%20%20%20%20msc.wg.Wait()%0A%20%20%20%20%0A%20%20%20%20if%20msc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20msc.client.Close()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20isProcessError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20ErrProcessExited)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrBrokenPipe)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrProcessTimeout)%0A%7D%0A%60%60%60%0A%0A%60%60%60go%0A%2F%2F%20Define%20connection%20error%20constants%0Avar%20(%0A%20%20%20%20ErrConnectionLost%20%20%20%3D%20errors.New(%22connection%20lost%22)%0A%20%20%20%20ErrConnectionFailed%20%3D%20errors.New(%22connection%20failed%22)%0A%20%20%20%20ErrUnauthorized%20%20%20%20%20%3D%20errors.New(%22unauthorized%22)%0A%20%20%20%20ErrForbidden%20%20%20%20%20%20%20%20%3D%20errors.New(%22forbidden%22)%0A)%0A%60%60%60%0A%0A%23%23%20StreamableHTTP%20Client%0A%0AStreamableHTTP%20clients%20communicate%20with%20servers%20using%20traditional%20HTTP%20requests.%0A%0A%23%23%23%20Basic%20StreamableHTTP%20Client%0A%0A%60%60%60go%0Afunc%20createStreamableHTTPClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20StreamableHTTP%20client%0A%20%20%20%20c%20%3A%3D%20client.NewStreamableHttpClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20client%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20StreamableHTTP%20Client%20with%20Custom%20Configuration%0A%0A%60%60%60go%0Afunc%20createCustomStreamableHTTPClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20StreamableHTTP%20client%20with%20options%0A%20%20%20%20c%20%3A%3D%20client.NewStreamableHttpClient(%22https%3A%2F%2Fapi.example.com%2Fmcp%22%2C%0A%20%20%20%20%20%20%20%20transport.WithHTTPTimeout(30*time.Second)%2C%0A%20%20%20%20%20%20%20%20transport.WithHTTPHeaders(map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22User-Agent%22%3A%20%22MyApp%2F1.0%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Accept%22%3A%20%20%20%20%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20transport.WithHTTPBasicClient(%26http.Client%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Transport%3A%20%26http.Transport%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MaxIdleConns%3A%20%20%20%20%20%20%20%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MaxIdleConnsPerHost%3A%2010%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IdleConnTimeout%3A%20%20%20%20%2090%20*%20time.Second%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20TLSClientConfig%3A%20%26tls.Config%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20InsecureSkipVerify%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20client...%0A%7D%0A%60%60%60%0A%0A%23%23%23%20StreamableHTTP%20Authentication%0A%0A%60%60%60go%0Afunc%20createAuthenticatedStreamableHTTPClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20StreamableHTTP%20client%20with%20OAuth%0A%20%20%20%20c%20%3A%3D%20client.NewStreamableHttpClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22%2C%0A%20%20%20%20%20%20%20%20transport.WithHTTPOAuth(transport.OAuthConfig%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ClientID%3A%20%20%20%20%20%22your-client-id%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ClientSecret%3A%20%22your-client-secret%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20TokenURL%3A%20%20%20%20%20%22https%3A%2F%2Fauth.example.com%2Ftoken%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Scopes%3A%20%20%20%20%20%20%20%5B%5Dstring%7B%22mcp%3Aread%22%2C%20%22mcp%3Awrite%22%7D%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20client...%0A%7D%0A%0Afunc%20isAuthError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20ErrUnauthorized)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrForbidden)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20StreamableHTTP%20Connection%20Pooling%0A%0A%60%60%60go%0Atype%20StreamableHTTPClientPool%20struct%20%7B%0A%20%20%20%20clients%20chan%20*client.Client%0A%20%20%20%20factory%20func()%20*client.Client%0A%20%20%20%20maxSize%20int%0A%7D%0A%0Afunc%20NewStreamableHTTPClientPool(baseURL%20string%2C%20maxSize%20int)%20*StreamableHTTPClientPool%20%7B%0A%20%20%20%20pool%20%3A%3D%20%26StreamableHTTPClientPool%7B%0A%20%20%20%20%20%20%20%20clients%3A%20make(chan%20*client.Client%2C%20maxSize)%2C%0A%20%20%20%20%20%20%20%20maxSize%3A%20maxSize%2C%0A%20%20%20%20%20%20%20%20factory%3A%20func()%20*client.Client%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20client.NewStreamableHttpClient(baseURL)%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Pre-populate%20pool%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20maxSize%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20pool.clients%20%3C-%20pool.factory()%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20pool%0A%7D%0A%0Afunc%20(pool%20*StreamableHTTPClientPool)%20Get()%20*client.Client%20%7B%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20c%20%3A%3D%20%3C-pool.clients%3A%0A%20%20%20%20%20%20%20%20return%20c%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20pool.factory()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(pool%20*StreamableHTTPClientPool)%20Put(c%20*client.Client)%20%7B%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20pool.clients%20%3C-%20c%3A%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Pool%20full%2C%20close%20client%0A%20%20%20%20%20%20%20%20c.Close()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(pool%20*StreamableHTTPClientPool)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20c%20%3A%3D%20pool.Get()%0A%20%20%20%20defer%20pool.Put(c)%0A%0A%20%20%20%20return%20c.CallTool(ctx%2C%20req)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20StreamableHTTP%20With%20Preconfigured%20Session%0AYou%20can%20also%20create%20a%20StreamableHTTP%20client%20with%20a%20preconfigured%20session%2C%20which%20allows%20you%20to%20reuse%20the%20same%20session%20across%20multiple%20requests%0A%0A%60%60%60go%0Afunc%20createStreamableHTTPClientWithSession()%20%7B%0A%20%20%20%20%2F%2F%20Create%20StreamableHTTP%20client%20with%20options%0A%20%20%20%20sessionID%20%3A%3D%20%2F%2F%20fetch%20existing%20session%20ID%20%0A%20%20%20%20c%20%3A%3D%20client.NewStreamableHttpClient(%22https%3A%2F%2Fapi.example.com%2Fmcp%22%2C%0A%20%20%20%20%20%20%20%20transport.WithSession(sessionID)%2C%0A%20%20%20%20)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20%2F%2F%20Use%20client...%0A%20%20%20%20_%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20%2F%2F%20If%20the%20session%20is%20terminated%2C%20you%20must%20reinitialize%20the%20client%0A%20%20%20%20if%20errors.Is(err%2C%20transport.ErrSessionTerminated)%20%7B%20%0A%20%20%20%20%20%20%20%20c.Initialize(ctx)%20%2F%2F%20Reinitialize%20if%20session%20is%20terminated%0A%20%20%20%20%20%20%20%20%2F%2F%20The%20session%20ID%20should%20change%20after%20reinitialization%0A%20%20%20%20%20%20%20%20sessionID%20%3D%20c.GetSessionId()%20%2F%2F%20Update%20session%20ID%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20SSE%20Client%0A%0ASSE%20(Server-Sent%20Events)%20clients%20provide%20real-time%20communication%20with%20servers.%0A%0A%23%23%23%20Basic%20SSE%20Client%0A%0A%60%60%60go%0Afunc%20createSSEClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20SSE%20client%0A%20%20%20%20c%20%3A%3D%20client.NewSSEClient(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20%2F%2F%20Set%20authentication%0A%20%20%20%20c.SetHeader(%22Authorization%22%2C%20%22Bearer%20your-token%22)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Subscribe%20to%20notifications%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20c.Subscribe(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Handle%20notifications%20in%20background%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20for%20notification%20%3A%3D%20range%20notifications%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Notification%3A%20%25%2Bv%22%2C%20notification)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20%2F%2F%20Use%20client%20for%20regular%20operations%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20SSE%20Client%20with%20Reconnection%0A%0A%60%60%60go%0Atype%20ResilientSSEClient%20struct%20%7B%0A%20%20%20%20baseURL%20%20%20%20%20string%0A%20%20%20%20headers%20%20%20%20%20map%5Bstring%5Dstring%0A%20%20%20%20client%20%20%20%20%20%20*client.SSEClient%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20reconnectCh%20chan%20struct%7B%7D%0A%20%20%20%20mutex%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewResilientSSEClient(baseURL%20string)%20*ResilientSSEClient%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20rsc%20%3A%3D%20%26ResilientSSEClient%7B%0A%20%20%20%20%20%20%20%20baseURL%3A%20%20%20%20%20baseURL%2C%0A%20%20%20%20%20%20%20%20headers%3A%20%20%20%20%20make(map%5Bstring%5Dstring)%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20%20%20%20cancel%2C%0A%20%20%20%20%20%20%20%20reconnectCh%3A%20make(chan%20struct%7B%7D%2C%201)%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20go%20rsc.reconnectLoop()%0A%20%20%20%20return%20rsc%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20SetHeader(key%2C%20value%20string)%20%7B%0A%20%20%20%20rsc.mutex.Lock()%0A%20%20%20%20defer%20rsc.mutex.Unlock()%0A%20%20%20%20rsc.headers%5Bkey%5D%20%3D%20value%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20connect()%20error%20%7B%0A%20%20%20%20rsc.mutex.Lock()%0A%20%20%20%20defer%20rsc.mutex.Unlock()%0A%0A%20%20%20%20if%20rsc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20rsc.client.Close()%0A%20%20%20%20%7D%0A%0A%20%20%20%20client%20%3A%3D%20client.NewSSEClient(rsc.baseURL)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20headers%0A%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20rsc.headers%20%7B%0A%20%20%20%20%20%20%20%20client.SetHeader(key%2C%20value)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20client.Initialize(rsc.ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20rsc.client%20%3D%20client%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20reconnectLoop()%20%7B%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-rsc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20case%20%3C-rsc.reconnectCh%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Reconnecting%20SSE%20client...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20attempt%20%3A%3D%201%3B%20attempt%20%3C%3D%205%3B%20attempt%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20rsc.connect()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Reconnection%20attempt%20%25d%20failed%3A%20%25v%22%2C%20attempt%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20backoff%20%3A%3D%20time.Duration(attempt)%20*%20time.Second%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-time.After(backoff)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-rsc.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Reconnected%20successfully%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20CallTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20rsc.mutex.RLock()%0A%20%20%20%20client%20%3A%3D%20rsc.client%0A%20%20%20%20rsc.mutex.RUnlock()%0A%0A%20%20%20%20if%20client%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20not%20connected%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20client.CallTool(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20isConnectionError(err)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Trigger%20reconnection%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20rsc.reconnectCh%20%3C-%20struct%7B%7D%7B%7D%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22connection%20error%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20Subscribe(ctx%20context.Context)%20(%3C-chan%20mcp.Notification%2C%20error)%20%7B%0A%20%20%20%20rsc.mutex.RLock()%0A%20%20%20%20client%20%3A%3D%20rsc.client%0A%20%20%20%20rsc.mutex.RUnlock()%0A%0A%20%20%20%20if%20client%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22client%20not%20connected%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20client.Subscribe(ctx)%0A%7D%0A%0Afunc%20(rsc%20*ResilientSSEClient)%20Close()%20error%20%7B%0A%20%20%20%20rsc.cancel()%0A%20%20%20%20%0A%20%20%20%20rsc.mutex.Lock()%0A%20%20%20%20defer%20rsc.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20if%20rsc.client%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20rsc.client.Close()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%0A%2F%2F%20Helper%20function%20to%20check%20if%20an%20error%20is%20a%20connection%20error%0Afunc%20isConnectionError(err%20error)%20bool%20%7B%0A%20%20%20%20return%20errors.Is(err%2C%20ErrConnectionLost)%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20errors.Is(err%2C%20ErrConnectionFailed)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20SSE%20Event%20Handling%0A%0A%60%60%60go%0Atype%20SSEEventHandler%20struct%20%7B%0A%20%20%20%20client%20%20%20%20%20%20*client.SSEClient%0A%20%20%20%20handlers%20%20%20%20map%5Bstring%5D%5B%5Dfunc(mcp.Notification)%0A%20%20%20%20mutex%20%20%20%20%20%20%20sync.RWMutex%0A%20%20%20%20ctx%20%20%20%20%20%20%20%20%20context.Context%0A%20%20%20%20cancel%20%20%20%20%20%20context.CancelFunc%0A%20%20%20%20wg%20%20%20%20%20%20%20%20%20%20sync.WaitGroup%0A%7D%0A%0Afunc%20NewSSEEventHandler(c%20*client.SSEClient)%20*SSEEventHandler%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithCancel(context.Background())%0A%0A%20%20%20%20return%20%26SSEEventHandler%7B%0A%20%20%20%20%20%20%20%20client%3A%20%20%20c%2C%0A%20%20%20%20%20%20%20%20handlers%3A%20make(map%5Bstring%5D%5B%5Dfunc(mcp.Notification))%2C%0A%20%20%20%20%20%20%20%20ctx%3A%20%20%20%20%20%20ctx%2C%0A%20%20%20%20%20%20%20%20cancel%3A%20%20%20cancel%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20Start()%20error%20%7B%0A%20%20%20%20notifications%2C%20err%20%3A%3D%20seh.client.Subscribe(seh.ctx)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20seh.wg.Add(1)%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20defer%20seh.wg.Done()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20notification%20%3A%3D%20%3C-notifications%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20seh.handleNotification(notification)%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%3C-seh.ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20Stop()%20%7B%0A%20%20%20%20seh.cancel()%0A%20%20%20%20seh.wg.Wait()%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnProgress(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Fprogress%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnMessage(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Fmessage%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnResourceUpdate(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Fresources%2Fupdated%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20OnToolUpdate(handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.addHandler(%22notifications%2Ftools%2Fupdated%22%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20addHandler(method%20string%2C%20handler%20func(mcp.Notification))%20%7B%0A%20%20%20%20seh.mutex.Lock()%0A%20%20%20%20defer%20seh.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20seh.handlers%5Bmethod%5D%20%3D%20append(seh.handlers%5Bmethod%5D%2C%20handler)%0A%7D%0A%0Afunc%20(seh%20*SSEEventHandler)%20handleNotification(notification%20mcp.Notification)%20%7B%0A%20%20%20%20seh.mutex.RLock()%0A%20%20%20%20handlers%20%3A%3D%20seh.handlers%5Bnotification.Method%5D%0A%20%20%20%20seh.mutex.RUnlock()%0A%0A%20%20%20%20for%20_%2C%20handler%20%3A%3D%20range%20handlers%20%7B%0A%20%20%20%20%20%20%20%20go%20handler(notification)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20In-Process%20Client%0A%0AIn-process%20clients%20provide%20direct%20communication%20with%20servers%20in%20the%20same%20process.%0A%0A%23%23%23%20Basic%20In-Process%20Client%0A%0A%60%60%60go%0Afunc%20createInProcessClient()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Test%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20tools%20to%20server%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22test_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Test%20tool%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22input%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20input%20%3A%3D%20req.Params.Arguments%5B%22input%22%5D.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(%22Processed%3A%20%22%20%2B%20input)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20in-process%20client%0A%20%20%20%20c%20%3A%3D%20client.NewInProcessClient(s)%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20(no%20network%20overhead)%0A%20%20%20%20if%20err%20%3A%3D%20c.Initialize(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20client%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22test_tool%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20%22test%20data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20In-Process%20Client%20for%20Testing%0A%0A%60%60%60go%0Atype%20TestClient%20struct%20%7B%0A%20%20%20%20server%20*server.MCPServer%0A%20%20%20%20client%20*client.InProcessClient%0A%7D%0A%0Afunc%20NewTestClient()%20*TestClient%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Test%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithAllCapabilities()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20return%20%26TestClient%7B%0A%20%20%20%20%20%20%20%20server%3A%20s%2C%0A%20%20%20%20%20%20%20%20client%3A%20client.NewInProcessClient(s)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20AddTool(name%2C%20description%20string%2C%20handler%20server.ToolHandler)%20%7B%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(name%2C%20mcp.WithDescription(description))%0A%20%20%20%20tc.server.AddTool(tool%2C%20handler)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20AddResource(uri%2C%20name%20string%2C%20handler%20server.ResourceHandler)%20%7B%0A%20%20%20%20resource%20%3A%3D%20mcp.NewResource(uri%2C%20name)%0A%20%20%20%20tc.server.AddResource(resource%2C%20handler)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20Initialize(ctx%20context.Context)%20error%20%7B%0A%20%20%20%20return%20tc.client.Initialize(ctx)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20CallTool(ctx%20context.Context%2C%20name%20string%2C%20args%20map%5Bstring%5Dinterface%7B%7D)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20return%20tc.client.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20args%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20ReadResource(ctx%20context.Context%2C%20uri%20string)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20return%20tc.client.ReadResource(ctx%2C%20mcp.ReadResourceRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.ReadResourceRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20uri%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(tc%20*TestClient)%20Close()%20error%20%7B%0A%20%20%20%20return%20tc.client.Close()%0A%7D%0A%0A%2F%2F%20Usage%20in%20tests%0Afunc%20TestWithInProcessClient(t%20*testing.T)%20%7B%0A%20%20%20%20tc%20%3A%3D%20NewTestClient()%0A%20%20%20%20defer%20tc.Close()%0A%0A%20%20%20%20%2F%2F%20Add%20test%20tool%0A%20%20%20%20tc.AddTool(%22echo%22%2C%20%22Echo%20input%22%2C%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20input%20%3A%3D%20req.Params.Arguments%5B%22input%22%5D.(string)%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(input)%2C%20nil%0A%20%20%20%20%7D)%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20err%20%3A%3D%20tc.Initialize(ctx)%0A%20%20%20%20require.NoError(t%2C%20err)%0A%0A%20%20%20%20%2F%2F%20Test%20tool%20call%0A%20%20%20%20result%2C%20err%20%3A%3D%20tc.CallTool(ctx%2C%20%22echo%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22input%22%3A%20%22hello%20world%22%2C%0A%20%20%20%20%7D)%0A%20%20%20%20require.NoError(t%2C%20err)%0A%20%20%20%20assert.Equal(t%2C%20%22hello%20world%22%2C%20result.Content%5B0%5D.Text)%0A%7D%0A%60%60%60%0A%0A%23%23%20Transport%20Selection%0A%0A%23%23%23%20Decision%20Matrix%0A%0AChoose%20your%20transport%20based%20on%20these%20factors%3A%0A%0A%60%60%60go%0Atype%20TransportRequirements%20struct%20%7B%0A%20%20%20%20RealTime%20%20%20%20%20%20%20%20bool%0A%20%20%20%20MultiClient%20%20%20%20%20bool%0A%20%20%20%20NetworkRequired%20bool%0A%20%20%20%20Performance%20%20%20%20%20string%20%2F%2F%20%22high%22%2C%20%22medium%22%2C%20%22low%22%0A%20%20%20%20Complexity%20%20%20%20%20%20string%20%2F%2F%20%22low%22%2C%20%22medium%22%2C%20%22high%22%0A%7D%0A%0Afunc%20SelectTransport(req%20TransportRequirements)%20string%20%7B%0A%20%20%20%20switch%20%7B%0A%20%20%20%20case%20!req.NetworkRequired%20%26%26%20req.Performance%20%3D%3D%20%22high%22%3A%0A%20%20%20%20%20%20%20%20return%20%22inprocess%22%0A%20%20%20%20%0A%20%20%20%20case%20!req.NetworkRequired%20%26%26%20!req.MultiClient%3A%0A%20%20%20%20%20%20%20%20return%20%22stdio%22%0A%20%20%20%20%0A%20%20%20%20case%20req.RealTime%20%26%26%20req.MultiClient%3A%0A%20%20%20%20%20%20%20%20return%20%22sse%22%0A%20%20%20%20%0A%20%20%20%20case%20req.NetworkRequired%20%26%26%20req.MultiClient%3A%0A%20%20%20%20%20%20%20%20return%20%22streamablehttp%22%0A%20%20%20%20%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20%22stdio%22%20%2F%2F%20Default%20fallback%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%20examples%0Afunc%20demonstrateTransportSelection()%20%7B%0A%20%20%20%20%2F%2F%20High-performance%20testing%0A%20%20%20%20testReq%20%3A%3D%20TransportRequirements%7B%0A%20%20%20%20%20%20%20%20RealTime%3A%20%20%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20MultiClient%3A%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20NetworkRequired%3A%20false%2C%0A%20%20%20%20%20%20%20%20Performance%3A%20%20%20%20%20%22high%22%2C%0A%20%20%20%20%20%20%20%20Complexity%3A%20%20%20%20%20%20%22low%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Printf(%22Testing%3A%20%25s%5Cn%22%2C%20SelectTransport(testReq))%0A%0A%20%20%20%20%2F%2F%20Real-time%20web%20application%0A%20%20%20%20webReq%20%3A%3D%20TransportRequirements%7B%0A%20%20%20%20%20%20%20%20RealTime%3A%20%20%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20MultiClient%3A%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20NetworkRequired%3A%20true%2C%0A%20%20%20%20%20%20%20%20Performance%3A%20%20%20%20%20%22medium%22%2C%0A%20%20%20%20%20%20%20%20Complexity%3A%20%20%20%20%20%20%22medium%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Printf(%22Web%20app%3A%20%25s%5Cn%22%2C%20SelectTransport(webReq))%0A%0A%20%20%20%20%2F%2F%20CLI%20tool%0A%20%20%20%20cliReq%20%3A%3D%20TransportRequirements%7B%0A%20%20%20%20%20%20%20%20RealTime%3A%20%20%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20MultiClient%3A%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20NetworkRequired%3A%20false%2C%0A%20%20%20%20%20%20%20%20Performance%3A%20%20%20%20%20%22medium%22%2C%0A%20%20%20%20%20%20%20%20Complexity%3A%20%20%20%20%20%20%22low%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Printf(%22CLI%20tool%3A%20%25s%5Cn%22%2C%20SelectTransport(cliReq))%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multi-Transport%20Client%20Factory%0A%0A%60%60%60go%0Atype%20ClientFactory%20struct%20%7B%0A%20%20%20%20configs%20map%5Bstring%5Dinterface%7B%7D%0A%7D%0A%0Afunc%20NewClientFactory()%20*ClientFactory%20%7B%0A%20%20%20%20return%20%26ClientFactory%7B%0A%20%20%20%20%20%20%20%20configs%3A%20make(map%5Bstring%5Dinterface%7B%7D)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20SetStdioConfig(command%20string%2C%20args%20...string)%20%7B%0A%20%20%20%20cf.configs%5B%22stdio%22%5D%20%3D%20client.StdioOptions%7B%0A%20%20%20%20%20%20%20%20Command%3A%20command%2C%0A%20%20%20%20%20%20%20%20Args%3A%20%20%20%20args%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20SetStreamableHTTPConfig(baseURL%20string%2C%20headers%20map%5Bstring%5Dstring)%20%7B%0A%20%20%20%20cf.configs%5B%22streamablehttp%22%5D%20%3D%20struct%20%7B%0A%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%7D%7B%0A%20%20%20%20%20%20%20%20BaseURL%3A%20baseURL%2C%0A%20%20%20%20%20%20%20%20Headers%3A%20headers%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20SetSSEConfig(baseURL%20string%2C%20headers%20map%5Bstring%5Dstring)%20%7B%0A%20%20%20%20cf.configs%5B%22sse%22%5D%20%3D%20struct%20%7B%0A%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%7D%7B%0A%20%20%20%20%20%20%20%20BaseURL%3A%20baseURL%2C%0A%20%20%20%20%20%20%20%20Headers%3A%20headers%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(cf%20*ClientFactory)%20CreateClient(transport%20string)%20(client.Client%2C%20error)%20%7B%0A%20%20%20%20switch%20transport%20%7B%0A%20%20%20%20case%20%22stdio%22%3A%0A%20%20%20%20%20%20%20%20config%2C%20ok%20%3A%3D%20cf.configs%5B%22stdio%22%5D.(client.StdioOptions)%0A%20%20%20%20%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22stdio%20config%20not%20set%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20client.NewStdioClientWithOptions(config)%0A%0A%20%20%20%20case%20%22streamablehttp%22%3A%0A%20%20%20%20%20%20%20%20config%2C%20ok%20%3A%3D%20cf.configs%5B%22streamablehttp%22%5D.(struct%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22streamablehttp%20config%20not%20set%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20options%20%3A%3D%20%5B%5Dtransport.StreamableHTTPCOption%7B%7D%0A%20%20%20%20%20%20%20%20if%20len(config.Headers)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20options%20%3D%20append(options%2C%20transport.WithHTTPHeaders(config.Headers))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20client.NewStreamableHttpClient(config.BaseURL%2C%20options...)%2C%20nil%0A%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20config%2C%20ok%20%3A%3D%20cf.configs%5B%22sse%22%5D.(struct%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20BaseURL%20string%0A%20%20%20%20%20%20%20%20%20%20%20%20Headers%20map%5Bstring%5Dstring%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22sse%20config%20not%20set%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20options%20%3A%3D%20%5B%5Dtransport.ClientOption%7B%7D%0A%20%20%20%20%20%20%20%20if%20len(config.Headers)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20options%20%3D%20append(options%2C%20transport.WithHeaders(config.Headers))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20client.NewSSEMCPClient(config.BaseURL%2C%20options...)%0A%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20transport%3A%20%25s%22%2C%20transport)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Afunc%20demonstrateClientFactory()%20%7B%0A%20%20%20%20factory%20%3A%3D%20NewClientFactory()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Configure%20transports%0A%20%20%20%20factory.SetStdioConfig(%22go%22%2C%20%22run%22%2C%20%22server.go%22)%0A%20%20%20%20factory.SetStreamableHTTPConfig(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22Authorization%22%3A%20%22Bearer%20token%22%2C%0A%20%20%20%20%7D)%0A%20%20%20%20factory.SetSSEConfig(%22http%3A%2F%2Flocalhost%3A8080%2Fmcp%2Fsse%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22Authorization%22%3A%20%22Bearer%20token%22%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Create%20client%20based%20on%20environment%0A%20%20%20%20transport%20%3A%3D%20os.Getenv(%22MCP_TRANSPORT%22)%0A%20%20%20%20if%20transport%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20transport%20%3D%20%22stdio%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20client%2C%20err%20%3A%3D%20factory.CreateClient(transport)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20client.Close()%0A%0A%20%20%20%20%2F%2F%20Use%20client...%0A%7D%0A%60%60%60%0A%0A",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./advanced-sampling-9wbDV-BI.js"),[]),path:"/servers/advanced-sampling",type:"mdx",filePath:"servers/advanced-sampling.mdx",content:"%23%20Sampling%0A%0ALearn%20how%20to%20implement%20MCP%20servers%20that%20can%20request%20LLM%20completions%20from%20clients%20using%20the%20sampling%20capability.%0A%0A%23%23%20Overview%0A%0ASampling%20allows%20MCP%20servers%20to%20request%20LLM%20completions%20from%20clients%2C%20enabling%20bidirectional%20communication%20where%20servers%20can%20leverage%20client-side%20LLM%20capabilities.%20This%20is%20particularly%20useful%20for%20tools%20that%20need%20to%20generate%20content%2C%20answer%20questions%2C%20or%20perform%20reasoning%20tasks.%0A%0A%23%23%20Enabling%20Sampling%0A%0ATo%20enable%20sampling%20in%20your%20server%2C%20call%20%60EnableSampling()%60%20during%20server%20setup%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%0A%20%20%20%20mcpServer%20%3A%3D%20server.NewMCPServer(%22my-server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Enable%20sampling%20capability%0A%20%20%20%20mcpServer.EnableSampling()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20tools%20that%20use%20sampling...%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20server%0A%20%20%20%20server.ServeStdio(mcpServer)%0A%7D%0A%60%60%60%0A%0A%23%23%20Requesting%20Sampling%0A%0AUse%20%60RequestSampling()%60%20within%20tool%20handlers%20to%20request%20LLM%20completions%3A%0A%0A%60%60%60go%0AmcpServer.AddTool(mcp.Tool%7B%0A%20%20%20%20Name%3A%20%20%20%20%20%20%20%20%22ask_llm%22%2C%0A%20%20%20%20Description%3A%20%22Ask%20the%20LLM%20a%20question%20using%20sampling%22%2C%0A%20%20%20%20InputSchema%3A%20mcp.ToolInputSchema%7B%0A%20%20%20%20%20%20%20%20Type%3A%20%22object%22%2C%0A%20%20%20%20%20%20%20%20Properties%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22question%22%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22type%22%3A%20%20%20%20%20%20%20%20%22string%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22description%22%3A%20%22The%20question%20to%20ask%20the%20LLM%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22system_prompt%22%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22type%22%3A%20%20%20%20%20%20%20%20%22string%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22description%22%3A%20%22Optional%20system%20prompt%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20Required%3A%20%5B%5Dstring%7B%22question%22%7D%2C%0A%20%20%20%20%7D%2C%0A%7D%2C%20func(ctx%20context.Context%2C%20request%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20parameters%0A%20%20%20%20question%2C%20err%20%3A%3D%20request.RequireString(%22question%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20systemPrompt%20%3A%3D%20request.GetString(%22system_prompt%22%2C%20%22You%20are%20a%20helpful%20assistant.%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20sampling%20request%0A%20%20%20%20samplingRequest%20%3A%3D%20mcp.CreateMessageRequest%7B%0A%20%20%20%20%20%20%20%20CreateMessageParams%3A%20mcp.CreateMessageParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.SamplingMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20mcp.RoleUser%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20question%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20SystemPrompt%3A%20systemPrompt%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MaxTokens%3A%20%20%20%201000%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Temperature%3A%20%200.7%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Request%20sampling%20from%20client%0A%20%20%20%20result%2C%20err%20%3A%3D%20mcpServer.RequestSampling(ctx%2C%20samplingRequest)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22Error%20requesting%20sampling%3A%20%25v%22%2C%20err)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20IsError%3A%20true%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20the%20LLM%20response%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22LLM%20Response%3A%20%25s%22%2C%20getTextFromContent(result.Content))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D)%0A%60%60%60%0A%0A%23%23%20Sampling%20Request%20Parameters%0A%0AThe%20%60CreateMessageRequest%60%20supports%20various%20parameters%20to%20control%20LLM%20behavior%3A%0A%0A%60%60%60go%0AsamplingRequest%20%3A%3D%20mcp.CreateMessageRequest%7B%0A%20%20%20%20CreateMessageParams%3A%20mcp.CreateMessageParams%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Required%3A%20Messages%20to%20send%20to%20the%20LLM%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.SamplingMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20mcp.RoleUser%2C%20%20%20%20%20%20%20%20%2F%2F%20or%20mcp.RoleAssistant%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%20%20%20%2F%2F%20or%20mcp.ImageContent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22Your%20message%20here%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Optional%3A%20System%20prompt%20for%20context%0A%20%20%20%20%20%20%20%20SystemPrompt%3A%20%22You%20are%20a%20helpful%20assistant.%22%2C%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Optional%3A%20Maximum%20tokens%20to%20generate%0A%20%20%20%20%20%20%20%20MaxTokens%3A%201000%2C%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Optional%3A%20Temperature%20for%20randomness%20(0.0%20to%201.0)%0A%20%20%20%20%20%20%20%20Temperature%3A%200.7%2C%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Optional%3A%20Top-p%20sampling%20parameter%0A%20%20%20%20%20%20%20%20TopP%3A%200.9%2C%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Optional%3A%20Stop%20sequences%0A%20%20%20%20%20%20%20%20StopSequences%3A%20%5B%5Dstring%7B%22%5C%5Cn%5C%5Cn%22%7D%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%60%60%60%0A%0A%23%23%20Message%20Types%0A%0ASampling%20supports%20different%20message%20roles%20and%20content%20types%3A%0A%0A%23%23%23%20Message%20Roles%0A%0A%60%60%60go%0A%2F%2F%20User%20message%0A%7B%0A%20%20%20%20Role%3A%20mcp.RoleUser%2C%0A%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20Text%3A%20%22What%20is%20the%20capital%20of%20France%3F%22%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%0A%2F%2F%20Assistant%20message%20(for%20conversation%20context)%0A%7B%0A%20%20%20%20Role%3A%20mcp.RoleAssistant%2C%0A%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%20%0A%20%20%20%20%20%20%20%20Text%3A%20%22The%20capital%20of%20France%20is%20Paris.%22%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Content%20Types%0A%0A%23%23%23%23%20Text%20Content%0A%0A%60%60%60go%0Amcp.TextContent%7B%0A%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20Text%3A%20%22Your%20text%20content%20here%22%2C%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Image%20Content%0A%0A%60%60%60go%0Amcp.ImageContent%7B%0A%20%20%20%20Type%3A%20%22image%22%2C%0A%20%20%20%20Data%3A%20%22base64-encoded-image-data%22%2C%0A%20%20%20%20MimeType%3A%20%22image%2Fjpeg%22%2C%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AAlways%20handle%20sampling%20errors%20gracefully%3A%0A%0A%60%60%60go%0Aresult%2C%20err%20%3A%3D%20mcpServer.RequestSampling(ctx%2C%20samplingRequest)%0Aif%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%2F%2F%20Log%20the%20error%0A%20%20%20%20log.Printf(%22Sampling%20request%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20appropriate%20error%20response%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22Sorry%2C%20I%20couldn't%20process%20your%20request%20at%20this%20time.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20IsError%3A%20true%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Context%20and%20Timeouts%0A%0AUse%20context%20for%20timeout%20control%3A%0A%0A%60%60%60go%0A%2F%2F%20Set%20a%20timeout%20for%20the%20sampling%20request%0Actx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0Adefer%20cancel()%0A%0Aresult%2C%20err%20%3A%3D%20mcpServer.RequestSampling(ctx%2C%20samplingRequest)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Enable%20Sampling%20Early**%3A%20Call%20%60EnableSampling()%60%20during%20server%20initialization%0A2.%20**Handle%20Timeouts**%3A%20Set%20appropriate%20timeouts%20for%20sampling%20requests%0A3.%20**Graceful%20Errors**%3A%20Always%20provide%20meaningful%20error%20messages%20to%20users%0A4.%20**Content%20Extraction**%3A%20Use%20helper%20functions%20to%20extract%20text%20from%20responses%0A5.%20**System%20Prompts**%3A%20Use%20clear%20system%20prompts%20to%20guide%20LLM%20behavior%0A6.%20**Parameter%20Validation**%3A%20Validate%20tool%20parameters%20before%20making%20sampling%20requests%0A%0A%23%23%20Complete%20Example%0A%0AHere's%20a%20complete%20example%20server%20with%20sampling%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22time%22%0A%20%20%20%20%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%0A%20%20%20%20mcpServer%20%3A%3D%20server.NewMCPServer(%22sampling-example-server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Enable%20sampling%20capability%0A%20%20%20%20mcpServer.EnableSampling()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20sampling%20tool%0A%20%20%20%20mcpServer.AddTool(mcp.Tool%7B%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20%20%20%22ask_llm%22%2C%0A%20%20%20%20%20%20%20%20Description%3A%20%22Ask%20the%20LLM%20a%20question%20using%20sampling%22%2C%0A%20%20%20%20%20%20%20%20InputSchema%3A%20mcp.ToolInputSchema%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Properties%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22question%22%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22type%22%3A%20%20%20%20%20%20%20%20%22string%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22description%22%3A%20%22The%20question%20to%20ask%20the%20LLM%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22system_prompt%22%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22type%22%3A%20%20%20%20%20%20%20%20%22string%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22description%22%3A%20%22Optional%20system%20prompt%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Required%3A%20%5B%5Dstring%7B%22question%22%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20func(ctx%20context.Context%2C%20request%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20question%2C%20err%20%3A%3D%20request.RequireString(%22question%22)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20systemPrompt%20%3A%3D%20request.GetString(%22system_prompt%22%2C%20%22You%20are%20a%20helpful%20assistant.%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20sampling%20request%0A%20%20%20%20%20%20%20%20samplingRequest%20%3A%3D%20mcp.CreateMessageRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20CreateMessageParams%3A%20mcp.CreateMessageParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.SamplingMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20mcp.RoleUser%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20question%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20SystemPrompt%3A%20systemPrompt%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MaxTokens%3A%20%20%20%201000%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Temperature%3A%20%200.7%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Request%20sampling%20with%20timeout%0A%20%20%20%20%20%20%20%20samplingCtx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20%20%20%20%20defer%20cancel()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20mcpServer.RequestSampling(samplingCtx%2C%20samplingRequest)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22Error%20requesting%20sampling%3A%20%25v%22%2C%20err)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IsError%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20the%20LLM%20response%0A%20%20%20%20%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22LLM%20Response%20(model%3A%20%25s)%3A%20%25s%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result.Model%2C%20getTextFromContent(result.Content))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20server%0A%20%20%20%20log.Println(%22Starting%20sampling%20example%20server...%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(mcpServer)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20function%20to%20extract%20text%20from%20content%0Afunc%20getTextFromContent(content%20interface%7B%7D)%20string%20%7B%0A%20%20%20%20switch%20c%20%3A%3D%20content.(type)%20%7B%0A%20%20%20%20case%20mcp.TextContent%3A%0A%20%20%20%20%20%20%20%20return%20c.Text%0A%20%20%20%20case%20string%3A%0A%20%20%20%20%20%20%20%20return%20c%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20fmt.Sprintf(%22%25v%22%2C%20content)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20Learn%20about%20%5Bclient-side%20sampling%20implementation%5D(%2Fclients%2Fadvanced-sampling)%0A-%20Explore%20%5Badvanced%20server%20features%5D(%2Fservers%2Fadvanced)%0A-%20Check%20out%20the%20%5Bsampling%20examples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fmcp-go%2Ftree%2Fmain%2Fexamples%2Fsampling_server)",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./advanced-sampling-9wbDV-BI.js"),[]),path:"/servers/advanced-sampling.html",type:"mdx",filePath:"servers/advanced-sampling.mdx",content:"%23%20Sampling%0A%0ALearn%20how%20to%20implement%20MCP%20servers%20that%20can%20request%20LLM%20completions%20from%20clients%20using%20the%20sampling%20capability.%0A%0A%23%23%20Overview%0A%0ASampling%20allows%20MCP%20servers%20to%20request%20LLM%20completions%20from%20clients%2C%20enabling%20bidirectional%20communication%20where%20servers%20can%20leverage%20client-side%20LLM%20capabilities.%20This%20is%20particularly%20useful%20for%20tools%20that%20need%20to%20generate%20content%2C%20answer%20questions%2C%20or%20perform%20reasoning%20tasks.%0A%0A%23%23%20Enabling%20Sampling%0A%0ATo%20enable%20sampling%20in%20your%20server%2C%20call%20%60EnableSampling()%60%20during%20server%20setup%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%0A%20%20%20%20mcpServer%20%3A%3D%20server.NewMCPServer(%22my-server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Enable%20sampling%20capability%0A%20%20%20%20mcpServer.EnableSampling()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20tools%20that%20use%20sampling...%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20server%0A%20%20%20%20server.ServeStdio(mcpServer)%0A%7D%0A%60%60%60%0A%0A%23%23%20Requesting%20Sampling%0A%0AUse%20%60RequestSampling()%60%20within%20tool%20handlers%20to%20request%20LLM%20completions%3A%0A%0A%60%60%60go%0AmcpServer.AddTool(mcp.Tool%7B%0A%20%20%20%20Name%3A%20%20%20%20%20%20%20%20%22ask_llm%22%2C%0A%20%20%20%20Description%3A%20%22Ask%20the%20LLM%20a%20question%20using%20sampling%22%2C%0A%20%20%20%20InputSchema%3A%20mcp.ToolInputSchema%7B%0A%20%20%20%20%20%20%20%20Type%3A%20%22object%22%2C%0A%20%20%20%20%20%20%20%20Properties%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22question%22%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22type%22%3A%20%20%20%20%20%20%20%20%22string%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22description%22%3A%20%22The%20question%20to%20ask%20the%20LLM%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22system_prompt%22%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22type%22%3A%20%20%20%20%20%20%20%20%22string%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22description%22%3A%20%22Optional%20system%20prompt%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20Required%3A%20%5B%5Dstring%7B%22question%22%7D%2C%0A%20%20%20%20%7D%2C%0A%7D%2C%20func(ctx%20context.Context%2C%20request%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20parameters%0A%20%20%20%20question%2C%20err%20%3A%3D%20request.RequireString(%22question%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20systemPrompt%20%3A%3D%20request.GetString(%22system_prompt%22%2C%20%22You%20are%20a%20helpful%20assistant.%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20sampling%20request%0A%20%20%20%20samplingRequest%20%3A%3D%20mcp.CreateMessageRequest%7B%0A%20%20%20%20%20%20%20%20CreateMessageParams%3A%20mcp.CreateMessageParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.SamplingMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20mcp.RoleUser%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20question%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20SystemPrompt%3A%20systemPrompt%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MaxTokens%3A%20%20%20%201000%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Temperature%3A%20%200.7%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Request%20sampling%20from%20client%0A%20%20%20%20result%2C%20err%20%3A%3D%20mcpServer.RequestSampling(ctx%2C%20samplingRequest)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22Error%20requesting%20sampling%3A%20%25v%22%2C%20err)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20IsError%3A%20true%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20the%20LLM%20response%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22LLM%20Response%3A%20%25s%22%2C%20getTextFromContent(result.Content))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D)%0A%60%60%60%0A%0A%23%23%20Sampling%20Request%20Parameters%0A%0AThe%20%60CreateMessageRequest%60%20supports%20various%20parameters%20to%20control%20LLM%20behavior%3A%0A%0A%60%60%60go%0AsamplingRequest%20%3A%3D%20mcp.CreateMessageRequest%7B%0A%20%20%20%20CreateMessageParams%3A%20mcp.CreateMessageParams%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Required%3A%20Messages%20to%20send%20to%20the%20LLM%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.SamplingMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20mcp.RoleUser%2C%20%20%20%20%20%20%20%20%2F%2F%20or%20mcp.RoleAssistant%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%20%20%20%2F%2F%20or%20mcp.ImageContent%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22Your%20message%20here%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Optional%3A%20System%20prompt%20for%20context%0A%20%20%20%20%20%20%20%20SystemPrompt%3A%20%22You%20are%20a%20helpful%20assistant.%22%2C%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Optional%3A%20Maximum%20tokens%20to%20generate%0A%20%20%20%20%20%20%20%20MaxTokens%3A%201000%2C%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Optional%3A%20Temperature%20for%20randomness%20(0.0%20to%201.0)%0A%20%20%20%20%20%20%20%20Temperature%3A%200.7%2C%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Optional%3A%20Top-p%20sampling%20parameter%0A%20%20%20%20%20%20%20%20TopP%3A%200.9%2C%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Optional%3A%20Stop%20sequences%0A%20%20%20%20%20%20%20%20StopSequences%3A%20%5B%5Dstring%7B%22%5C%5Cn%5C%5Cn%22%7D%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%60%60%60%0A%0A%23%23%20Message%20Types%0A%0ASampling%20supports%20different%20message%20roles%20and%20content%20types%3A%0A%0A%23%23%23%20Message%20Roles%0A%0A%60%60%60go%0A%2F%2F%20User%20message%0A%7B%0A%20%20%20%20Role%3A%20mcp.RoleUser%2C%0A%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20Text%3A%20%22What%20is%20the%20capital%20of%20France%3F%22%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%0A%2F%2F%20Assistant%20message%20(for%20conversation%20context)%0A%7B%0A%20%20%20%20Role%3A%20mcp.RoleAssistant%2C%0A%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%20%0A%20%20%20%20%20%20%20%20Text%3A%20%22The%20capital%20of%20France%20is%20Paris.%22%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Content%20Types%0A%0A%23%23%23%23%20Text%20Content%0A%0A%60%60%60go%0Amcp.TextContent%7B%0A%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20Text%3A%20%22Your%20text%20content%20here%22%2C%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Image%20Content%0A%0A%60%60%60go%0Amcp.ImageContent%7B%0A%20%20%20%20Type%3A%20%22image%22%2C%0A%20%20%20%20Data%3A%20%22base64-encoded-image-data%22%2C%0A%20%20%20%20MimeType%3A%20%22image%2Fjpeg%22%2C%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AAlways%20handle%20sampling%20errors%20gracefully%3A%0A%0A%60%60%60go%0Aresult%2C%20err%20%3A%3D%20mcpServer.RequestSampling(ctx%2C%20samplingRequest)%0Aif%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%2F%2F%20Log%20the%20error%0A%20%20%20%20log.Printf(%22Sampling%20request%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20appropriate%20error%20response%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22Sorry%2C%20I%20couldn't%20process%20your%20request%20at%20this%20time.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20IsError%3A%20true%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Context%20and%20Timeouts%0A%0AUse%20context%20for%20timeout%20control%3A%0A%0A%60%60%60go%0A%2F%2F%20Set%20a%20timeout%20for%20the%20sampling%20request%0Actx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0Adefer%20cancel()%0A%0Aresult%2C%20err%20%3A%3D%20mcpServer.RequestSampling(ctx%2C%20samplingRequest)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Enable%20Sampling%20Early**%3A%20Call%20%60EnableSampling()%60%20during%20server%20initialization%0A2.%20**Handle%20Timeouts**%3A%20Set%20appropriate%20timeouts%20for%20sampling%20requests%0A3.%20**Graceful%20Errors**%3A%20Always%20provide%20meaningful%20error%20messages%20to%20users%0A4.%20**Content%20Extraction**%3A%20Use%20helper%20functions%20to%20extract%20text%20from%20responses%0A5.%20**System%20Prompts**%3A%20Use%20clear%20system%20prompts%20to%20guide%20LLM%20behavior%0A6.%20**Parameter%20Validation**%3A%20Validate%20tool%20parameters%20before%20making%20sampling%20requests%0A%0A%23%23%20Complete%20Example%0A%0AHere's%20a%20complete%20example%20server%20with%20sampling%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22time%22%0A%20%20%20%20%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%0A%20%20%20%20mcpServer%20%3A%3D%20server.NewMCPServer(%22sampling-example-server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Enable%20sampling%20capability%0A%20%20%20%20mcpServer.EnableSampling()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20sampling%20tool%0A%20%20%20%20mcpServer.AddTool(mcp.Tool%7B%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20%20%20%22ask_llm%22%2C%0A%20%20%20%20%20%20%20%20Description%3A%20%22Ask%20the%20LLM%20a%20question%20using%20sampling%22%2C%0A%20%20%20%20%20%20%20%20InputSchema%3A%20mcp.ToolInputSchema%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Properties%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22question%22%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22type%22%3A%20%20%20%20%20%20%20%20%22string%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22description%22%3A%20%22The%20question%20to%20ask%20the%20LLM%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22system_prompt%22%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22type%22%3A%20%20%20%20%20%20%20%20%22string%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22description%22%3A%20%22Optional%20system%20prompt%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Required%3A%20%5B%5Dstring%7B%22question%22%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20func(ctx%20context.Context%2C%20request%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20question%2C%20err%20%3A%3D%20request.RequireString(%22question%22)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20systemPrompt%20%3A%3D%20request.GetString(%22system_prompt%22%2C%20%22You%20are%20a%20helpful%20assistant.%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20sampling%20request%0A%20%20%20%20%20%20%20%20samplingRequest%20%3A%3D%20mcp.CreateMessageRequest%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20CreateMessageParams%3A%20mcp.CreateMessageParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.SamplingMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20mcp.RoleUser%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20question%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20SystemPrompt%3A%20systemPrompt%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MaxTokens%3A%20%20%20%201000%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Temperature%3A%20%200.7%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Request%20sampling%20with%20timeout%0A%20%20%20%20%20%20%20%20samplingCtx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20%20%20%20%20defer%20cancel()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20mcpServer.RequestSampling(samplingCtx%2C%20samplingRequest)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22Error%20requesting%20sampling%3A%20%25v%22%2C%20err)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20IsError%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20the%20LLM%20response%0A%20%20%20%20%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22LLM%20Response%20(model%3A%20%25s)%3A%20%25s%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result.Model%2C%20getTextFromContent(result.Content))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20server%0A%20%20%20%20log.Println(%22Starting%20sampling%20example%20server...%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(mcpServer)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatalf(%22Server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20function%20to%20extract%20text%20from%20content%0Afunc%20getTextFromContent(content%20interface%7B%7D)%20string%20%7B%0A%20%20%20%20switch%20c%20%3A%3D%20content.(type)%20%7B%0A%20%20%20%20case%20mcp.TextContent%3A%0A%20%20%20%20%20%20%20%20return%20c.Text%0A%20%20%20%20case%20string%3A%0A%20%20%20%20%20%20%20%20return%20c%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20fmt.Sprintf(%22%25v%22%2C%20content)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20Learn%20about%20%5Bclient-side%20sampling%20implementation%5D(%2Fclients%2Fadvanced-sampling)%0A-%20Explore%20%5Badvanced%20server%20features%5D(%2Fservers%2Fadvanced)%0A-%20Check%20out%20the%20%5Bsampling%20examples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fmcp-go%2Ftree%2Fmain%2Fexamples%2Fsampling_server)",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./advanced-DCdRNDXR.js"),[]),path:"/servers/advanced",type:"mdx",filePath:"servers/advanced.mdx",content:"%23%20Advanced%20Server%20Features%0A%0AExplore%20powerful%20features%20that%20make%20MCP-Go%20servers%20production-ready%3A%20typed%20tools%2C%20session%20management%2C%20middleware%2C%20hooks%2C%20and%20more.%0A%0A%23%23%20Typed%20Tools%0A%0ATyped%20tools%20provide%20compile-time%20type%20safety%20and%20automatic%20parameter%20validation%2C%20reducing%20boilerplate%20and%20preventing%20runtime%20errors.%0A%0A%23%23%23%20Basic%20Typed%20Tool%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0A%2F%2F%20Define%20input%20and%20output%20types%0Atype%20CalculateInput%20struct%20%7B%0A%20%20%20%20Operation%20string%20%20%60json%3A%22operation%22%20validate%3A%22required%2Coneof%3Dadd%20subtract%20multiply%20divide%22%60%0A%20%20%20%20X%20%20%20%20%20%20%20%20%20float64%20%60json%3A%22x%22%20validate%3A%22required%22%60%0A%20%20%20%20Y%20%20%20%20%20%20%20%20%20float64%20%60json%3A%22y%22%20validate%3A%22required%22%60%0A%7D%0A%0Atype%20CalculateOutput%20struct%20%7B%0A%20%20%20%20Result%20%20%20%20float64%20%60json%3A%22result%22%60%0A%20%20%20%20Operation%20string%20%20%60json%3A%22operation%22%60%0A%7D%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Typed%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20typed%20tool%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Perform%20arithmetic%20operations%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22operation%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required())%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20tool%20with%20typed%20handler%0A%20%20%20%20s.AddTool(tool%2C%20mcp.NewTypedToolHandler(handleCalculateTyped))%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleCalculateTyped(ctx%20context.Context%2C%20req%20mcp.CallToolRequest%2C%20input%20CalculateInput)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20var%20result%20float64%0A%20%20%20%20%0A%20%20%20%20switch%20input.Operation%20%7B%0A%20%20%20%20case%20%22add%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20%2B%20input.Y%0A%20%20%20%20case%20%22subtract%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20-%20input.Y%0A%20%20%20%20case%20%22multiply%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20*%20input.Y%0A%20%20%20%20case%20%22divide%22%3A%0A%20%20%20%20%20%20%20%20if%20input.Y%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22division%20by%20zero%22)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20%2F%20input.Y%0A%20%20%20%20%7D%0A%0A%20%20%20%20output%20%3A%3D%20CalculateOutput%7B%0A%20%20%20%20%20%20%20%20Result%3A%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20Operation%3A%20input.Operation%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(output)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Complex%20Typed%20Tool%0A%0A%60%60%60go%0Atype%20UserCreateInput%20struct%20%7B%0A%20%20%20%20Name%20%20%20%20%20string%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22name%22%20validate%3A%22required%2Cmin%3D1%2Cmax%3D100%22%60%0A%20%20%20%20Email%20%20%20%20string%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22email%22%20validate%3A%22required%2Cemail%22%60%0A%20%20%20%20Age%20%20%20%20%20%20int%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22age%22%20validate%3A%22min%3D0%2Cmax%3D150%22%60%0A%20%20%20%20Tags%20%20%20%20%20%5B%5Dstring%20%20%20%20%20%20%20%20%20%20%60json%3A%22tags%22%20validate%3A%22dive%2Cmin%3D1%22%60%0A%20%20%20%20Metadata%20map%5Bstring%5Dstring%20%60json%3A%22metadata%22%60%0A%20%20%20%20Active%20%20%20bool%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22active%22%60%0A%7D%0A%0Atype%20UserCreateOutput%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20%20string%20%20%20%20%60json%3A%22id%22%60%0A%20%20%20%20Name%20%20%20%20%20%20string%20%20%20%20%60json%3A%22name%22%60%0A%20%20%20%20Email%20%20%20%20%20string%20%20%20%20%60json%3A%22email%22%60%0A%20%20%20%20CreatedAt%20time.Time%20%60json%3A%22created_at%22%60%0A%20%20%20%20Status%20%20%20%20string%20%20%20%20%60json%3A%22status%22%60%0A%7D%0A%0Afunc%20handleCreateUser(ctx%20context.Context%2C%20req%20mcp.CallToolRequest%2C%20input%20UserCreateInput)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Validation%20is%20automatic%20based%20on%20struct%20tags%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20user%20in%20database%0A%20%20%20%20user%20%3A%3D%20%26User%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20generateID()%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20input.Name%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%20%20%20%20input.Email%2C%0A%20%20%20%20%20%20%20%20Age%3A%20%20%20%20%20%20%20input.Age%2C%0A%20%20%20%20%20%20%20%20Tags%3A%20%20%20%20%20%20input.Tags%2C%0A%20%20%20%20%20%20%20%20Metadata%3A%20%20input.Metadata%2C%0A%20%20%20%20%20%20%20%20Active%3A%20%20%20%20input.Active%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20db.Create(user)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20user%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20output%20%3A%3D%20%26UserCreateOutput%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20user.ID%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20user.Name%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%20%20%20%20user.Email%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20user.CreatedAt%2C%0A%20%20%20%20%20%20%20%20Status%3A%20%20%20%20%22created%22%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(output)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Custom%20Validation%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22path%2Ffilepath%22%0A%20%20%20%20%22strings%22%0A%0A%20%20%20%20%22github.com%2Fgo-playground%2Fvalidator%2Fv10%22%0A)%0A%0Atype%20FileOperationInput%20struct%20%7B%0A%20%20%20%20Path%20%20%20%20%20%20string%20%60json%3A%22path%22%20validate%3A%22required%2Cfilepath%22%60%0A%20%20%20%20Operation%20string%20%60json%3A%22operation%22%20validate%3A%22required%2Coneof%3Dread%20write%20delete%22%60%0A%20%20%20%20Content%20%20%20string%20%60json%3A%22content%22%20validate%3A%22required_if%3DOperation%20write%22%60%0A%7D%0A%0A%2F%2F%20Custom%20validator%0Afunc%20init()%20%7B%0A%20%20%20%20validate%20%3A%3D%20validator.New()%0A%20%20%20%20validate.RegisterValidation(%22filepath%22%2C%20validateFilePath)%0A%7D%0A%0Afunc%20validateFilePath(fl%20validator.FieldLevel)%20bool%20%7B%0A%20%20%20%20path%20%3A%3D%20fl.Field().String()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Prevent%20directory%20traversal%0A%20%20%20%20if%20strings.Contains(path%2C%20%22..%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Ensure%20path%20is%20within%20allowed%20directory%0A%20%20%20%20allowedDir%20%3A%3D%20%22%2Fapp%2Fdata%22%0A%20%20%20%20absPath%2C%20err%20%3A%3D%20filepath.Abs(path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20strings.HasPrefix(absPath%2C%20allowedDir)%0A%7D%0A%60%60%60%0A%0A%23%23%20Session%20Management%0A%0AHandle%20multiple%20clients%20with%20per-session%20state%20and%20tools.%0A%0A%23%23%23%20Per-Session%20State%0A%0A%60%60%60go%0Atype%20SessionState%20struct%20%7B%0A%20%20%20%20UserID%20%20%20%20%20%20string%0A%20%20%20%20Permissions%20%5B%5Dstring%0A%20%20%20%20Settings%20%20%20%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20StartTime%20%20%20time.Time%0A%7D%0A%0Atype%20SessionManager%20struct%20%7B%0A%20%20%20%20sessions%20map%5Bstring%5D*SessionState%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewSessionManager()%20*SessionManager%20%7B%0A%20%20%20%20return%20%26SessionManager%7B%0A%20%20%20%20%20%20%20%20sessions%3A%20make(map%5Bstring%5D*SessionState)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20CreateSession(sessionID%2C%20userID%20string%2C%20permissions%20%5B%5Dstring)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20sm.sessions%5BsessionID%5D%20%3D%20%26SessionState%7B%0A%20%20%20%20%20%20%20%20UserID%3A%20%20%20%20%20%20userID%2C%0A%20%20%20%20%20%20%20%20Permissions%3A%20permissions%2C%0A%20%20%20%20%20%20%20%20Settings%3A%20%20%20%20make(map%5Bstring%5Dinterface%7B%7D)%2C%0A%20%20%20%20%20%20%20%20StartTime%3A%20%20%20time.Now()%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20GetSession(sessionID%20string)%20(*SessionState%2C%20bool)%20%7B%0A%20%20%20%20sm.mutex.RLock()%0A%20%20%20%20defer%20sm.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20session%2C%20exists%20%3A%3D%20sm.sessions%5BsessionID%5D%0A%20%20%20%20return%20session%2C%20exists%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20RemoveSession(sessionID%20string)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20delete(sm.sessions%2C%20sessionID)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Session-Aware%20Tools%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20sessionManager%20%3A%3D%20NewSessionManager()%0A%20%20%20%20%0A%20%20%20%20hooks%20%3A%3D%20%26server.Hooks%7B%7D%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnRegisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Initialize%20session%20with%20default%20permissions%0A%20%20%20%20%20%20%20%20sessionManager.CreateSession(session.ID()%2C%20%22anonymous%22%2C%20%5B%5Dstring%7B%22read%22%7D)%0A%20%20%20%20%20%20%20%20log.Printf(%22Session%20%25s%20started%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnUnregisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20sessionManager.RemoveSession(session.ID())%0A%20%20%20%20%20%20%20%20log.Printf(%22Session%20%25s%20ended%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Session%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(hooks)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20session-aware%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_user_data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20user-specific%20data%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22data_type%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20createSessionAwareTool(sessionManager)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20createSessionAwareTool(sm%20*SessionManager)%20server.ToolHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20session%2C%20exists%20%3A%3D%20sm.GetSession(sessionID)%0A%20%20%20%20%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20session%22)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20dataType%20%3A%3D%20req.Params.Arguments%5B%22data_type%22%5D.(string)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20permissions%0A%20%20%20%20%20%20%20%20if%20!hasPermission(session.Permissions%2C%20%22read%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22insufficient%20permissions%22)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Get%20user-specific%20data%0A%20%20%20%20%20%20%20%20data%2C%20err%20%3A%3D%20getUserData(session.UserID%2C%20dataType)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Middleware%0A%0AAdd%20cross-cutting%20concerns%20like%20logging%2C%20authentication%2C%20and%20rate%20limiting.%0A%0A%23%23%23%20Logging%20Middleware%0A%0A%60%60%60go%0Atype%20LoggingMiddleware%20struct%20%7B%0A%20%20%20%20logger%20*log.Logger%0A%7D%0A%0Afunc%20NewLoggingMiddleware(logger%20*log.Logger)%20*LoggingMiddleware%20%7B%0A%20%20%20%20return%20%26LoggingMiddleware%7Blogger%3A%20logger%7D%0A%7D%0A%0Afunc%20(m%20*LoggingMiddleware)%20ToolMiddleware(next%20server.ToolHandlerFunc)%20server.ToolHandlerFunc%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20m.logger.Printf(%22Tool%20call%20started%3A%20tool%3D%25s%22%2C%20req.Params.Name)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20duration%20%3A%3D%20time.Since(start)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Tool%20call%20failed%3A%20session%3D%25s%20tool%3D%25s%20duration%3D%25v%20error%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.Name%2C%20duration%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Tool%20call%20completed%3A%20session%3D%25s%20tool%3D%25s%20duration%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.Name%2C%20duration)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*LoggingMiddleware)%20ResourceMiddleware(next%20server.ResourceHandler)%20server.ResourceHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20m.logger.Printf(%22Resource%20read%20started%3A%20session%3D%25s%20uri%3D%25s%22%2C%20sessionID%2C%20req.Params.URI)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20duration%20%3A%3D%20time.Since(start)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Resource%20read%20failed%3A%20session%3D%25s%20uri%3D%25s%20duration%3D%25v%20error%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.URI%2C%20duration%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Resource%20read%20completed%3A%20session%3D%25s%20uri%3D%25s%20duration%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.URI%2C%20duration)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Rate%20Limiting%20Middleware%0A%0A%60%60%60go%0Atype%20RateLimitMiddleware%20struct%20%7B%0A%20%20%20%20limiters%20map%5Bstring%5D*rate.Limiter%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%20%20%20%20rate%20%20%20%20%20rate.Limit%0A%20%20%20%20burst%20%20%20%20int%0A%7D%0A%0Afunc%20NewRateLimitMiddleware(requestsPerSecond%20float64%2C%20burst%20int)%20*RateLimitMiddleware%20%7B%0A%20%20%20%20return%20%26RateLimitMiddleware%7B%0A%20%20%20%20%20%20%20%20limiters%3A%20make(map%5Bstring%5D*rate.Limiter)%2C%0A%20%20%20%20%20%20%20%20rate%3A%20%20%20%20%20rate.Limit(requestsPerSecond)%2C%0A%20%20%20%20%20%20%20%20burst%3A%20%20%20%20burst%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*RateLimitMiddleware)%20getLimiter(sessionID%20string)%20*rate.Limiter%20%7B%0A%20%20%20%20m.mutex.RLock()%0A%20%20%20%20limiter%2C%20exists%20%3A%3D%20m.limiters%5BsessionID%5D%0A%20%20%20%20m.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20m.mutex.Lock()%0A%20%20%20%20%20%20%20%20limiter%20%3D%20rate.NewLimiter(m.rate%2C%20m.burst)%0A%20%20%20%20%20%20%20%20m.limiters%5BsessionID%5D%20%3D%20limiter%0A%20%20%20%20%20%20%20%20m.mutex.Unlock()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20limiter%0A%7D%0A%0Afunc%20(m%20*RateLimitMiddleware)%20ToolMiddleware(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20limiter%20%3A%3D%20m.getLimiter(sessionID)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20!limiter.Allow()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22rate%20limit%20exceeded%20for%20session%20%25s%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Authentication%20Middleware%0A%0A%60%60%60go%0Atype%20AuthMiddleware%20struct%20%7B%0A%20%20%20%20tokenValidator%20TokenValidator%0A%7D%0A%0Afunc%20NewAuthMiddleware(validator%20TokenValidator)%20*AuthMiddleware%20%7B%0A%20%20%20%20return%20%26AuthMiddleware%7BtokenValidator%3A%20validator%7D%0A%7D%0A%0Afunc%20(m%20*AuthMiddleware)%20ToolMiddleware(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Extract%20token%20from%20context%20or%20request%0A%20%20%20%20%20%20%20%20token%20%3A%3D%20extractToken(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20if%20token%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22authentication%20required%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Validate%20token%0A%20%20%20%20%20%20%20%20user%2C%20err%20%3A%3D%20m.tokenValidator.Validate(token)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20token%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20user%20to%20context%0A%20%20%20%20%20%20%20%20ctx%20%3D%20context.WithValue(ctx%2C%20%22user%22%2C%20user)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Hooks%0A%0AImplement%20lifecycle%20callbacks%20for%20telemetry%2C%20logging%2C%20and%20custom%20behavior.%0A%0A%23%23%23%20Comprehensive%20Hooks%0A%0A%60%60%60go%0Atype%20TelemetryHooks%20struct%20%7B%0A%20%20%20%20metrics%20MetricsCollector%0A%20%20%20%20logger%20%20*log.Logger%0A%7D%0A%0Afunc%20NewTelemetryHooks(metrics%20MetricsCollector%2C%20logger%20*log.Logger)%20*TelemetryHooks%20%7B%0A%20%20%20%20return%20%26TelemetryHooks%7B%0A%20%20%20%20%20%20%20%20metrics%3A%20metrics%2C%0A%20%20%20%20%20%20%20%20logger%3A%20%20logger%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnServerStart()%20%7B%0A%20%20%20%20h.logger.Println(%22MCP%20Server%20starting%22)%0A%20%20%20%20h.metrics.Increment(%22server.starts%22)%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnServerStop()%20%7B%0A%20%20%20%20h.logger.Println(%22MCP%20Server%20stopping%22)%0A%20%20%20%20h.metrics.Increment(%22server.stops%22)%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnSessionStart(sessionID%20string)%20%7B%0A%20%20%20%20h.logger.Printf(%22Session%20started%3A%20%25s%22%2C%20sessionID)%0A%20%20%20%20h.metrics.Increment(%22sessions.started%22)%0A%20%20%20%20h.metrics.Gauge(%22sessions.active%22%2C%20h.getActiveSessionCount())%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnSessionEnd(sessionID%20string)%20%7B%0A%20%20%20%20h.logger.Printf(%22Session%20ended%3A%20%25s%22%2C%20sessionID)%0A%20%20%20%20h.metrics.Increment(%22sessions.ended%22)%0A%20%20%20%20h.metrics.Gauge(%22sessions.active%22%2C%20h.getActiveSessionCount())%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnToolCall(sessionID%2C%20toolName%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20h.metrics.Increment(%22tools.calls%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22tool%22%3A%20%20%20%20toolName%2C%0A%20%20%20%20%20%20%20%20%22session%22%3A%20sessionID%2C%0A%20%20%20%20%7D)%0A%20%20%20%20h.metrics.Histogram(%22tools.duration%22%2C%20duration.Seconds()%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22tool%22%3A%20toolName%2C%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20h.metrics.Increment(%22tools.errors%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22tool%22%3A%20toolName%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnResourceRead(sessionID%2C%20uri%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20h.metrics.Increment(%22resources.reads%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22session%22%3A%20sessionID%2C%0A%20%20%20%20%7D)%0A%20%20%20%20h.metrics.Histogram(%22resources.duration%22%2C%20duration.Seconds())%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20h.metrics.Increment(%22resources.errors%22)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Custom%20Business%20Logic%20Hooks%0A%0A%60%60%60go%0Atype%20BusinessHooks%20struct%20%7B%0A%20%20%20%20auditLogger%20AuditLogger%0A%20%20%20%20notifier%20%20%20%20Notifier%0A%7D%0A%0Afunc%20(h%20*BusinessHooks)%20OnToolCall(sessionID%2C%20toolName%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20%2F%2F%20Audit%20sensitive%20operations%0A%20%20%20%20if%20isSensitiveTool(toolName)%20%7B%0A%20%20%20%20%20%20%20%20h.auditLogger.LogToolCall(sessionID%2C%20toolName%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Alert%20on%20errors%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20h.notifier.SendAlert(fmt.Sprintf(%22Tool%20%25s%20failed%20for%20session%20%25s%3A%20%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20toolName%2C%20sessionID%2C%20err))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Monitor%20performance%0A%20%20%20%20if%20duration%20%3E%2030*time.Second%20%7B%0A%20%20%20%20%20%20%20%20h.notifier.SendAlert(fmt.Sprintf(%22Slow%20tool%20execution%3A%20%25s%20took%20%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20toolName%2C%20duration))%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*BusinessHooks)%20OnSessionStart(sessionID%20string)%20%7B%0A%20%20%20%20%2F%2F%20Initialize%20user-specific%20resources%0A%20%20%20%20h.initializeUserResources(sessionID)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Send%20welcome%20notification%0A%20%20%20%20h.notifier.SendWelcome(sessionID)%0A%7D%0A%0Afunc%20(h%20*BusinessHooks)%20OnSessionEnd(sessionID%20string)%20%7B%0A%20%20%20%20%2F%2F%20Cleanup%20user%20resources%0A%20%20%20%20h.cleanupUserResources(sessionID)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Log%20session%20summary%0A%20%20%20%20h.auditLogger.LogSessionEnd(sessionID)%0A%7D%0A%60%60%60%0A%0A%23%23%20Tool%20Filtering%0A%0AConditionally%20expose%20tools%20based%20on%20context%2C%20permissions%2C%20or%20other%20criteria.%0A%0A%23%23%23%20Permission-Based%20Filtering%0A%0A%60%60%60go%0Atype%20PermissionFilter%20struct%20%7B%0A%20%20%20%20sessionManager%20*SessionManager%0A%7D%0A%0Afunc%20NewPermissionFilter(sm%20*SessionManager)%20*PermissionFilter%20%7B%0A%20%20%20%20return%20%26PermissionFilter%7BsessionManager%3A%20sm%7D%0A%7D%0A%0Afunc%20(f%20*PermissionFilter)%20FilterTools(ctx%20context.Context%2C%20tools%20%5B%5Dmcp.Tool)%20%5B%5Dmcp.Tool%20%7B%0A%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20session%2C%20exists%20%3A%3D%20f.sessionManager.GetSession(sessionID)%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%5Dmcp.Tool%7B%7D%20%2F%2F%20No%20tools%20for%20invalid%20sessions%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Tool%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools%20%7B%0A%20%20%20%20%20%20%20%20if%20f.hasPermissionForTool(session%2C%20tool.Name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20tool)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20filtered%0A%7D%0A%0Afunc%20(f%20*PermissionFilter)%20hasPermissionForTool(session%20*SessionState%2C%20toolName%20string)%20bool%20%7B%0A%20%20%20%20requiredPermissions%20%3A%3D%20map%5Bstring%5D%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22delete_user%22%3A%20%20%20%20%7B%22admin%22%7D%2C%0A%20%20%20%20%20%20%20%20%22modify_system%22%3A%20%20%7B%22admin%22%2C%20%22operator%22%7D%2C%0A%20%20%20%20%20%20%20%20%22read_data%22%3A%20%20%20%20%20%20%7B%22admin%22%2C%20%22operator%22%2C%20%22user%22%7D%2C%0A%20%20%20%20%20%20%20%20%22create_report%22%3A%20%20%7B%22admin%22%2C%20%22operator%22%2C%20%22user%22%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20required%2C%20exists%20%3A%3D%20requiredPermissions%5BtoolName%5D%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20true%20%2F%2F%20Allow%20tools%20without%20specific%20requirements%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20permission%20%3A%3D%20range%20session.Permissions%20%7B%0A%20%20%20%20%20%20%20%20for%20_%2C%20req%20%3A%3D%20range%20required%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20permission%20%3D%3D%20req%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20false%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Context-Based%20Filtering%0A%0A%60%60%60go%0Atype%20ContextFilter%20struct%7B%7D%0A%0Afunc%20(f%20*ContextFilter)%20FilterTools(ctx%20context.Context%2C%20tools%20%5B%5Dmcp.Tool)%20%5B%5Dmcp.Tool%20%7B%0A%20%20%20%20timeOfDay%20%3A%3D%20time.Now().Hour()%0A%20%20%20%20environment%20%3A%3D%20os.Getenv(%22ENVIRONMENT%22)%0A%20%20%20%20%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Tool%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools%20%7B%0A%20%20%20%20%20%20%20%20if%20f.shouldIncludeTool(tool%2C%20timeOfDay%2C%20environment)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20tool)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20filtered%0A%7D%0A%0Afunc%20(f%20*ContextFilter)%20shouldIncludeTool(tool%20mcp.Tool%2C%20hour%20int%2C%20env%20string)%20bool%20%7B%0A%20%20%20%20%2F%2F%20Maintenance%20tools%20only%20during%20off-hours%0A%20%20%20%20maintenanceTools%20%3A%3D%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22backup_database%22%3A%20%20true%2C%0A%20%20%20%20%20%20%20%20%22cleanup_logs%22%3A%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20%22restart_service%22%3A%20%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20maintenanceTools%5Btool.Name%5D%20%7B%0A%20%20%20%20%20%20%20%20return%20hour%20%3C%206%20%7C%7C%20hour%20%3E%2022%20%2F%2F%20Only%20between%2010%20PM%20and%206%20AM%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Debug%20tools%20only%20in%20development%0A%20%20%20%20debugTools%20%3A%3D%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22debug_session%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%22dump_state%22%3A%20%20%20%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20debugTools%5Btool.Name%5D%20%7B%0A%20%20%20%20%20%20%20%20return%20env%20%3D%3D%20%22development%22%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20true%0A%7D%0A%60%60%60%0A%0A%23%23%20Notifications%0A%0ASend%20server-to-client%20messages%20for%20real-time%20updates.%0A%0A%23%23%23%20Custom%20Notifications%0A%0A%60%60%60go%0Afunc%20handleLongRunningTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20srv%20%3A%3D%20server.ServerFromContext(ctx)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Simulate%20long-running%20work%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20100%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Send%20custom%20notification%20to%20all%20clients%0A%20%20%20%20%20%20%20%20notification%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22type%22%3A%20%20%20%20%20%22progress%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22progress%22%3A%20i%20%2B%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22total%22%3A%20%20%20%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20fmt.Sprintf(%22Processing%20step%20%25d%2F100%22%2C%20i%2B1)%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20srv.SendNotificationToAllClients(%22progress%22%2C%20notification)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(%22Long%20operation%20completed%20successfully%22)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Custom%20Notifications%0A%0A%60%60%60go%0Atype%20CustomNotifier%20struct%20%7B%0A%20%20%20%20sessions%20map%5Bstring%5Dchan%20mcp.Notification%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewCustomNotifier()%20*CustomNotifier%20%7B%0A%20%20%20%20return%20%26CustomNotifier%7B%0A%20%20%20%20%20%20%20%20sessions%3A%20make(map%5Bstring%5Dchan%20mcp.Notification)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20RegisterSession(sessionID%20string)%20%7B%0A%20%20%20%20n.mutex.Lock()%0A%20%20%20%20defer%20n.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20n.sessions%5BsessionID%5D%20%3D%20make(chan%20mcp.Notification%2C%20100)%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20UnregisterSession(sessionID%20string)%20%7B%0A%20%20%20%20n.mutex.Lock()%0A%20%20%20%20defer%20n.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20if%20ch%2C%20exists%20%3A%3D%20n.sessions%5BsessionID%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20close(ch)%0A%20%20%20%20%20%20%20%20delete(n.sessions%2C%20sessionID)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20SendAlert(sessionID%2C%20message%20string%2C%20severity%20string)%20%7B%0A%20%20%20%20n.mutex.RLock()%0A%20%20%20%20defer%20n.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20ch%2C%20exists%20%3A%3D%20n.sessions%5BsessionID%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20ch%20%3C-%20mcp.Notification%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22alert%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Data%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20message%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22severity%22%3A%20severity%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Channel%20full%2C%20drop%20notification%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20BroadcastSystemMessage(message%20string)%20%7B%0A%20%20%20%20n.mutex.RLock()%0A%20%20%20%20defer%20n.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20notification%20%3A%3D%20mcp.Notification%7B%0A%20%20%20%20%20%20%20%20Type%3A%20%22system_message%22%2C%0A%20%20%20%20%20%20%20%20Data%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20%20message%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20ch%20%3A%3D%20range%20n.sessions%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20ch%20%3C-%20notification%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Channel%20full%2C%20skip%20this%20session%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Production%20Configuration%0A%0A%23%23%23%20Complete%20Production%20Server%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Initialize%20components%0A%20%20%20%20logger%20%3A%3D%20log.New(os.Stdout%2C%20%22%5BMCP%5D%20%22%2C%20log.LstdFlags)%0A%20%20%20%20metrics%20%3A%3D%20NewPrometheusMetrics()%0A%20%20%20%20sessionManager%20%3A%3D%20NewSessionManager()%0A%20%20%20%20notifier%20%3A%3D%20NewCustomNotifier()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20middleware%0A%20%20%20%20loggingMW%20%3A%3D%20NewLoggingMiddleware(logger)%0A%20%20%20%20rateLimitMW%20%3A%3D%20NewRateLimitMiddleware(10.0%2C%2020)%20%2F%2F%2010%20req%2Fsec%2C%20burst%2020%0A%20%20%20%20authMW%20%3A%3D%20NewAuthMiddleware(NewJWTValidator())%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20hooks%0A%20%20%20%20telemetryHooks%20%3A%3D%20NewTelemetryHooks(metrics%2C%20logger)%0A%20%20%20%20businessHooks%20%3A%3D%20NewBusinessHooks(NewAuditLogger()%2C%20NewSlackNotifier())%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20server%20with%20all%20features%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Production%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(false%2C%20true)%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(telemetryHooks)%2C%0A%20%20%20%20%20%20%20%20server.WithToolHandlerMiddleware(loggingMW.ToolMiddleware)%2C%0A%20%20%20%20%20%20%20%20server.WithToolFilter(NewPermissionFilter(sessionManager))%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20tools%20and%20resources%0A%20%20%20%20addProductionTools(s)%0A%20%20%20%20addProductionResources(s)%0A%20%20%20%20addProductionPrompts(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20server%20with%20graceful%20shutdown%0A%20%20%20%20startWithGracefulShutdown(s)%0A%7D%0A%0Afunc%20startWithGracefulShutdown(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Setup%20signal%20handling%0A%20%20%20%20sigChan%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(sigChan%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20server%20in%20goroutine%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20shutdown%20signal%0A%20%20%20%20%3C-sigChan%0A%20%20%20%20log.Println(%22Shutting%20down%20server...%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Graceful%20shutdown%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20if%20err%20%3A%3D%20s.Shutdown(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Shutdown%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20log.Println(%22Server%20stopped%22)%0A%7D%0A%60%60%60%0A%0A%23%23%20Sampling%20(Advanced)%0A%0ASampling%20is%20an%20advanced%20feature%20that%20allows%20servers%20to%20request%20LLM%20completions%20from%20clients.%20This%20enables%20bidirectional%20communication%20where%20servers%20can%20leverage%20client-side%20LLM%20capabilities%20for%20content%20generation%2C%20reasoning%2C%20and%20question%20answering.%0A%0A%3E%20**Note**%3A%20Sampling%20is%20an%20advanced%20feature%20that%20most%20servers%20don't%20need.%20Only%20implement%20sampling%20if%20your%20server%20specifically%20needs%20to%20generate%20content%20using%20the%20client's%20LLM.%0A%0A%23%23%23%20When%20to%20Use%20Sampling%0A%0AConsider%20sampling%20when%20your%20server%20needs%20to%3A%0A-%20Generate%20content%20based%20on%20user%20input%0A-%20Answer%20questions%20using%20LLM%20reasoning%0A-%20Perform%20text%20analysis%20or%20summarization%0A-%20Create%20dynamic%20responses%20that%20require%20LLM%20capabilities%0A%0A%23%23%23%20Basic%20Implementation%0A%0A%60%60%60go%0A%2F%2F%20Enable%20sampling%20capability%0AmcpServer.EnableSampling()%0A%0A%2F%2F%20Add%20a%20tool%20that%20uses%20sampling%0AmcpServer.AddTool(mcp.Tool%7B%0A%20%20%20%20Name%3A%20%20%20%20%20%20%20%20%22ask_llm%22%2C%0A%20%20%20%20Description%3A%20%22Ask%20the%20LLM%20a%20question%20using%20sampling%22%2C%0A%20%20%20%20InputSchema%3A%20mcp.ToolInputSchema%7B%0A%20%20%20%20%20%20%20%20Type%3A%20%22object%22%2C%0A%20%20%20%20%20%20%20%20Properties%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22question%22%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22type%22%3A%20%20%20%20%20%20%20%20%22string%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22description%22%3A%20%22The%20question%20to%20ask%20the%20LLM%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20Required%3A%20%5B%5Dstring%7B%22question%22%7D%2C%0A%20%20%20%20%7D%2C%0A%7D%2C%20func(ctx%20context.Context%2C%20request%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20question%2C%20err%20%3A%3D%20request.RequireString(%22question%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20sampling%20request%0A%20%20%20%20samplingRequest%20%3A%3D%20mcp.CreateMessageRequest%7B%0A%20%20%20%20%20%20%20%20CreateMessageParams%3A%20mcp.CreateMessageParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.SamplingMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20mcp.RoleUser%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20question%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20SystemPrompt%3A%20%22You%20are%20a%20helpful%20assistant.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MaxTokens%3A%20%20%20%201000%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Temperature%3A%20%200.7%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Request%20sampling%20from%20client%0A%20%20%20%20result%2C%20err%20%3A%3D%20mcpServer.RequestSampling(ctx%2C%20samplingRequest)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22Error%3A%20%25v%22%2C%20err)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20IsError%3A%20true%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22LLM%20Response%3A%20%25s%22%2C%20result.Content)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D)%0A%60%60%60%0A%0AFor%20complete%20sampling%20documentation%2C%20see%20**%5BServer%20Sampling%20Guide%5D(%2Fservers%2Fadvanced-sampling)**.%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Learn%20to%20build%20MCP%20clients%0A-%20**%5BServer%20Basics%5D(%2Fservers%2Fbasics)**%20-%20Review%20fundamental%20concepts",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./advanced-DCdRNDXR.js"),[]),path:"/servers/advanced.html",type:"mdx",filePath:"servers/advanced.mdx",content:"%23%20Advanced%20Server%20Features%0A%0AExplore%20powerful%20features%20that%20make%20MCP-Go%20servers%20production-ready%3A%20typed%20tools%2C%20session%20management%2C%20middleware%2C%20hooks%2C%20and%20more.%0A%0A%23%23%20Typed%20Tools%0A%0ATyped%20tools%20provide%20compile-time%20type%20safety%20and%20automatic%20parameter%20validation%2C%20reducing%20boilerplate%20and%20preventing%20runtime%20errors.%0A%0A%23%23%23%20Basic%20Typed%20Tool%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0A%2F%2F%20Define%20input%20and%20output%20types%0Atype%20CalculateInput%20struct%20%7B%0A%20%20%20%20Operation%20string%20%20%60json%3A%22operation%22%20validate%3A%22required%2Coneof%3Dadd%20subtract%20multiply%20divide%22%60%0A%20%20%20%20X%20%20%20%20%20%20%20%20%20float64%20%60json%3A%22x%22%20validate%3A%22required%22%60%0A%20%20%20%20Y%20%20%20%20%20%20%20%20%20float64%20%60json%3A%22y%22%20validate%3A%22required%22%60%0A%7D%0A%0Atype%20CalculateOutput%20struct%20%7B%0A%20%20%20%20Result%20%20%20%20float64%20%60json%3A%22result%22%60%0A%20%20%20%20Operation%20string%20%20%60json%3A%22operation%22%60%0A%7D%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Typed%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20typed%20tool%0A%20%20%20%20tool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Perform%20arithmetic%20operations%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22operation%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required())%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20tool%20with%20typed%20handler%0A%20%20%20%20s.AddTool(tool%2C%20mcp.NewTypedToolHandler(handleCalculateTyped))%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleCalculateTyped(ctx%20context.Context%2C%20req%20mcp.CallToolRequest%2C%20input%20CalculateInput)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20var%20result%20float64%0A%20%20%20%20%0A%20%20%20%20switch%20input.Operation%20%7B%0A%20%20%20%20case%20%22add%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20%2B%20input.Y%0A%20%20%20%20case%20%22subtract%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20-%20input.Y%0A%20%20%20%20case%20%22multiply%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20*%20input.Y%0A%20%20%20%20case%20%22divide%22%3A%0A%20%20%20%20%20%20%20%20if%20input.Y%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22division%20by%20zero%22)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20result%20%3D%20input.X%20%2F%20input.Y%0A%20%20%20%20%7D%0A%0A%20%20%20%20output%20%3A%3D%20CalculateOutput%7B%0A%20%20%20%20%20%20%20%20Result%3A%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20Operation%3A%20input.Operation%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(output)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Complex%20Typed%20Tool%0A%0A%60%60%60go%0Atype%20UserCreateInput%20struct%20%7B%0A%20%20%20%20Name%20%20%20%20%20string%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22name%22%20validate%3A%22required%2Cmin%3D1%2Cmax%3D100%22%60%0A%20%20%20%20Email%20%20%20%20string%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22email%22%20validate%3A%22required%2Cemail%22%60%0A%20%20%20%20Age%20%20%20%20%20%20int%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22age%22%20validate%3A%22min%3D0%2Cmax%3D150%22%60%0A%20%20%20%20Tags%20%20%20%20%20%5B%5Dstring%20%20%20%20%20%20%20%20%20%20%60json%3A%22tags%22%20validate%3A%22dive%2Cmin%3D1%22%60%0A%20%20%20%20Metadata%20map%5Bstring%5Dstring%20%60json%3A%22metadata%22%60%0A%20%20%20%20Active%20%20%20bool%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60json%3A%22active%22%60%0A%7D%0A%0Atype%20UserCreateOutput%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20%20string%20%20%20%20%60json%3A%22id%22%60%0A%20%20%20%20Name%20%20%20%20%20%20string%20%20%20%20%60json%3A%22name%22%60%0A%20%20%20%20Email%20%20%20%20%20string%20%20%20%20%60json%3A%22email%22%60%0A%20%20%20%20CreatedAt%20time.Time%20%60json%3A%22created_at%22%60%0A%20%20%20%20Status%20%20%20%20string%20%20%20%20%60json%3A%22status%22%60%0A%7D%0A%0Afunc%20handleCreateUser(ctx%20context.Context%2C%20req%20mcp.CallToolRequest%2C%20input%20UserCreateInput)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Validation%20is%20automatic%20based%20on%20struct%20tags%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20user%20in%20database%0A%20%20%20%20user%20%3A%3D%20%26User%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20generateID()%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20input.Name%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%20%20%20%20input.Email%2C%0A%20%20%20%20%20%20%20%20Age%3A%20%20%20%20%20%20%20input.Age%2C%0A%20%20%20%20%20%20%20%20Tags%3A%20%20%20%20%20%20input.Tags%2C%0A%20%20%20%20%20%20%20%20Metadata%3A%20%20input.Metadata%2C%0A%20%20%20%20%20%20%20%20Active%3A%20%20%20%20input.Active%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20db.Create(user)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20user%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20output%20%3A%3D%20%26UserCreateOutput%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20user.ID%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20user.Name%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%20%20%20%20user.Email%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20user.CreatedAt%2C%0A%20%20%20%20%20%20%20%20Status%3A%20%20%20%20%22created%22%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultJSON(output)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Custom%20Validation%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22path%2Ffilepath%22%0A%20%20%20%20%22strings%22%0A%0A%20%20%20%20%22github.com%2Fgo-playground%2Fvalidator%2Fv10%22%0A)%0A%0Atype%20FileOperationInput%20struct%20%7B%0A%20%20%20%20Path%20%20%20%20%20%20string%20%60json%3A%22path%22%20validate%3A%22required%2Cfilepath%22%60%0A%20%20%20%20Operation%20string%20%60json%3A%22operation%22%20validate%3A%22required%2Coneof%3Dread%20write%20delete%22%60%0A%20%20%20%20Content%20%20%20string%20%60json%3A%22content%22%20validate%3A%22required_if%3DOperation%20write%22%60%0A%7D%0A%0A%2F%2F%20Custom%20validator%0Afunc%20init()%20%7B%0A%20%20%20%20validate%20%3A%3D%20validator.New()%0A%20%20%20%20validate.RegisterValidation(%22filepath%22%2C%20validateFilePath)%0A%7D%0A%0Afunc%20validateFilePath(fl%20validator.FieldLevel)%20bool%20%7B%0A%20%20%20%20path%20%3A%3D%20fl.Field().String()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Prevent%20directory%20traversal%0A%20%20%20%20if%20strings.Contains(path%2C%20%22..%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Ensure%20path%20is%20within%20allowed%20directory%0A%20%20%20%20allowedDir%20%3A%3D%20%22%2Fapp%2Fdata%22%0A%20%20%20%20absPath%2C%20err%20%3A%3D%20filepath.Abs(path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20strings.HasPrefix(absPath%2C%20allowedDir)%0A%7D%0A%60%60%60%0A%0A%23%23%20Session%20Management%0A%0AHandle%20multiple%20clients%20with%20per-session%20state%20and%20tools.%0A%0A%23%23%23%20Per-Session%20State%0A%0A%60%60%60go%0Atype%20SessionState%20struct%20%7B%0A%20%20%20%20UserID%20%20%20%20%20%20string%0A%20%20%20%20Permissions%20%5B%5Dstring%0A%20%20%20%20Settings%20%20%20%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20StartTime%20%20%20time.Time%0A%7D%0A%0Atype%20SessionManager%20struct%20%7B%0A%20%20%20%20sessions%20map%5Bstring%5D*SessionState%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewSessionManager()%20*SessionManager%20%7B%0A%20%20%20%20return%20%26SessionManager%7B%0A%20%20%20%20%20%20%20%20sessions%3A%20make(map%5Bstring%5D*SessionState)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20CreateSession(sessionID%2C%20userID%20string%2C%20permissions%20%5B%5Dstring)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20sm.sessions%5BsessionID%5D%20%3D%20%26SessionState%7B%0A%20%20%20%20%20%20%20%20UserID%3A%20%20%20%20%20%20userID%2C%0A%20%20%20%20%20%20%20%20Permissions%3A%20permissions%2C%0A%20%20%20%20%20%20%20%20Settings%3A%20%20%20%20make(map%5Bstring%5Dinterface%7B%7D)%2C%0A%20%20%20%20%20%20%20%20StartTime%3A%20%20%20time.Now()%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20GetSession(sessionID%20string)%20(*SessionState%2C%20bool)%20%7B%0A%20%20%20%20sm.mutex.RLock()%0A%20%20%20%20defer%20sm.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20session%2C%20exists%20%3A%3D%20sm.sessions%5BsessionID%5D%0A%20%20%20%20return%20session%2C%20exists%0A%7D%0A%0Afunc%20(sm%20*SessionManager)%20RemoveSession(sessionID%20string)%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20delete(sm.sessions%2C%20sessionID)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Session-Aware%20Tools%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20sessionManager%20%3A%3D%20NewSessionManager()%0A%20%20%20%20%0A%20%20%20%20hooks%20%3A%3D%20%26server.Hooks%7B%7D%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnRegisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Initialize%20session%20with%20default%20permissions%0A%20%20%20%20%20%20%20%20sessionManager.CreateSession(session.ID()%2C%20%22anonymous%22%2C%20%5B%5Dstring%7B%22read%22%7D)%0A%20%20%20%20%20%20%20%20log.Printf(%22Session%20%25s%20started%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnUnregisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20sessionManager.RemoveSession(session.ID())%0A%20%20%20%20%20%20%20%20log.Printf(%22Session%20%25s%20ended%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Session%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(hooks)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20session-aware%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_user_data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20user-specific%20data%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22data_type%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20createSessionAwareTool(sessionManager)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20createSessionAwareTool(sm%20*SessionManager)%20server.ToolHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20session%2C%20exists%20%3A%3D%20sm.GetSession(sessionID)%0A%20%20%20%20%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20session%22)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20dataType%20%3A%3D%20req.Params.Arguments%5B%22data_type%22%5D.(string)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20permissions%0A%20%20%20%20%20%20%20%20if%20!hasPermission(session.Permissions%2C%20%22read%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22insufficient%20permissions%22)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Get%20user-specific%20data%0A%20%20%20%20%20%20%20%20data%2C%20err%20%3A%3D%20getUserData(session.UserID%2C%20dataType)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Middleware%0A%0AAdd%20cross-cutting%20concerns%20like%20logging%2C%20authentication%2C%20and%20rate%20limiting.%0A%0A%23%23%23%20Logging%20Middleware%0A%0A%60%60%60go%0Atype%20LoggingMiddleware%20struct%20%7B%0A%20%20%20%20logger%20*log.Logger%0A%7D%0A%0Afunc%20NewLoggingMiddleware(logger%20*log.Logger)%20*LoggingMiddleware%20%7B%0A%20%20%20%20return%20%26LoggingMiddleware%7Blogger%3A%20logger%7D%0A%7D%0A%0Afunc%20(m%20*LoggingMiddleware)%20ToolMiddleware(next%20server.ToolHandlerFunc)%20server.ToolHandlerFunc%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20m.logger.Printf(%22Tool%20call%20started%3A%20tool%3D%25s%22%2C%20req.Params.Name)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20duration%20%3A%3D%20time.Since(start)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Tool%20call%20failed%3A%20session%3D%25s%20tool%3D%25s%20duration%3D%25v%20error%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.Name%2C%20duration%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Tool%20call%20completed%3A%20session%3D%25s%20tool%3D%25s%20duration%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.Name%2C%20duration)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*LoggingMiddleware)%20ResourceMiddleware(next%20server.ResourceHandler)%20server.ResourceHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20m.logger.Printf(%22Resource%20read%20started%3A%20session%3D%25s%20uri%3D%25s%22%2C%20sessionID%2C%20req.Params.URI)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20duration%20%3A%3D%20time.Since(start)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Resource%20read%20failed%3A%20session%3D%25s%20uri%3D%25s%20duration%3D%25v%20error%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.URI%2C%20duration%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20m.logger.Printf(%22Resource%20read%20completed%3A%20session%3D%25s%20uri%3D%25s%20duration%3D%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sessionID%2C%20req.Params.URI%2C%20duration)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Rate%20Limiting%20Middleware%0A%0A%60%60%60go%0Atype%20RateLimitMiddleware%20struct%20%7B%0A%20%20%20%20limiters%20map%5Bstring%5D*rate.Limiter%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%20%20%20%20rate%20%20%20%20%20rate.Limit%0A%20%20%20%20burst%20%20%20%20int%0A%7D%0A%0Afunc%20NewRateLimitMiddleware(requestsPerSecond%20float64%2C%20burst%20int)%20*RateLimitMiddleware%20%7B%0A%20%20%20%20return%20%26RateLimitMiddleware%7B%0A%20%20%20%20%20%20%20%20limiters%3A%20make(map%5Bstring%5D*rate.Limiter)%2C%0A%20%20%20%20%20%20%20%20rate%3A%20%20%20%20%20rate.Limit(requestsPerSecond)%2C%0A%20%20%20%20%20%20%20%20burst%3A%20%20%20%20burst%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*RateLimitMiddleware)%20getLimiter(sessionID%20string)%20*rate.Limiter%20%7B%0A%20%20%20%20m.mutex.RLock()%0A%20%20%20%20limiter%2C%20exists%20%3A%3D%20m.limiters%5BsessionID%5D%0A%20%20%20%20m.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20m.mutex.Lock()%0A%20%20%20%20%20%20%20%20limiter%20%3D%20rate.NewLimiter(m.rate%2C%20m.burst)%0A%20%20%20%20%20%20%20%20m.limiters%5BsessionID%5D%20%3D%20limiter%0A%20%20%20%20%20%20%20%20m.mutex.Unlock()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20limiter%0A%7D%0A%0Afunc%20(m%20*RateLimitMiddleware)%20ToolMiddleware(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20%20%20%20%20limiter%20%3A%3D%20m.getLimiter(sessionID)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20!limiter.Allow()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22rate%20limit%20exceeded%20for%20session%20%25s%22%2C%20sessionID)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Authentication%20Middleware%0A%0A%60%60%60go%0Atype%20AuthMiddleware%20struct%20%7B%0A%20%20%20%20tokenValidator%20TokenValidator%0A%7D%0A%0Afunc%20NewAuthMiddleware(validator%20TokenValidator)%20*AuthMiddleware%20%7B%0A%20%20%20%20return%20%26AuthMiddleware%7BtokenValidator%3A%20validator%7D%0A%7D%0A%0Afunc%20(m%20*AuthMiddleware)%20ToolMiddleware(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Extract%20token%20from%20context%20or%20request%0A%20%20%20%20%20%20%20%20token%20%3A%3D%20extractToken(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20if%20token%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22authentication%20required%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Validate%20token%0A%20%20%20%20%20%20%20%20user%2C%20err%20%3A%3D%20m.tokenValidator.Validate(token)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20token%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20user%20to%20context%0A%20%20%20%20%20%20%20%20ctx%20%3D%20context.WithValue(ctx%2C%20%22user%22%2C%20user)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Hooks%0A%0AImplement%20lifecycle%20callbacks%20for%20telemetry%2C%20logging%2C%20and%20custom%20behavior.%0A%0A%23%23%23%20Comprehensive%20Hooks%0A%0A%60%60%60go%0Atype%20TelemetryHooks%20struct%20%7B%0A%20%20%20%20metrics%20MetricsCollector%0A%20%20%20%20logger%20%20*log.Logger%0A%7D%0A%0Afunc%20NewTelemetryHooks(metrics%20MetricsCollector%2C%20logger%20*log.Logger)%20*TelemetryHooks%20%7B%0A%20%20%20%20return%20%26TelemetryHooks%7B%0A%20%20%20%20%20%20%20%20metrics%3A%20metrics%2C%0A%20%20%20%20%20%20%20%20logger%3A%20%20logger%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnServerStart()%20%7B%0A%20%20%20%20h.logger.Println(%22MCP%20Server%20starting%22)%0A%20%20%20%20h.metrics.Increment(%22server.starts%22)%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnServerStop()%20%7B%0A%20%20%20%20h.logger.Println(%22MCP%20Server%20stopping%22)%0A%20%20%20%20h.metrics.Increment(%22server.stops%22)%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnSessionStart(sessionID%20string)%20%7B%0A%20%20%20%20h.logger.Printf(%22Session%20started%3A%20%25s%22%2C%20sessionID)%0A%20%20%20%20h.metrics.Increment(%22sessions.started%22)%0A%20%20%20%20h.metrics.Gauge(%22sessions.active%22%2C%20h.getActiveSessionCount())%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnSessionEnd(sessionID%20string)%20%7B%0A%20%20%20%20h.logger.Printf(%22Session%20ended%3A%20%25s%22%2C%20sessionID)%0A%20%20%20%20h.metrics.Increment(%22sessions.ended%22)%0A%20%20%20%20h.metrics.Gauge(%22sessions.active%22%2C%20h.getActiveSessionCount())%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnToolCall(sessionID%2C%20toolName%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20h.metrics.Increment(%22tools.calls%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22tool%22%3A%20%20%20%20toolName%2C%0A%20%20%20%20%20%20%20%20%22session%22%3A%20sessionID%2C%0A%20%20%20%20%7D)%0A%20%20%20%20h.metrics.Histogram(%22tools.duration%22%2C%20duration.Seconds()%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22tool%22%3A%20toolName%2C%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20h.metrics.Increment(%22tools.errors%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22tool%22%3A%20toolName%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*TelemetryHooks)%20OnResourceRead(sessionID%2C%20uri%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20h.metrics.Increment(%22resources.reads%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22session%22%3A%20sessionID%2C%0A%20%20%20%20%7D)%0A%20%20%20%20h.metrics.Histogram(%22resources.duration%22%2C%20duration.Seconds())%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20h.metrics.Increment(%22resources.errors%22)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Custom%20Business%20Logic%20Hooks%0A%0A%60%60%60go%0Atype%20BusinessHooks%20struct%20%7B%0A%20%20%20%20auditLogger%20AuditLogger%0A%20%20%20%20notifier%20%20%20%20Notifier%0A%7D%0A%0Afunc%20(h%20*BusinessHooks)%20OnToolCall(sessionID%2C%20toolName%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20%2F%2F%20Audit%20sensitive%20operations%0A%20%20%20%20if%20isSensitiveTool(toolName)%20%7B%0A%20%20%20%20%20%20%20%20h.auditLogger.LogToolCall(sessionID%2C%20toolName%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Alert%20on%20errors%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20h.notifier.SendAlert(fmt.Sprintf(%22Tool%20%25s%20failed%20for%20session%20%25s%3A%20%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20toolName%2C%20sessionID%2C%20err))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Monitor%20performance%0A%20%20%20%20if%20duration%20%3E%2030*time.Second%20%7B%0A%20%20%20%20%20%20%20%20h.notifier.SendAlert(fmt.Sprintf(%22Slow%20tool%20execution%3A%20%25s%20took%20%25v%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20toolName%2C%20duration))%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(h%20*BusinessHooks)%20OnSessionStart(sessionID%20string)%20%7B%0A%20%20%20%20%2F%2F%20Initialize%20user-specific%20resources%0A%20%20%20%20h.initializeUserResources(sessionID)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Send%20welcome%20notification%0A%20%20%20%20h.notifier.SendWelcome(sessionID)%0A%7D%0A%0Afunc%20(h%20*BusinessHooks)%20OnSessionEnd(sessionID%20string)%20%7B%0A%20%20%20%20%2F%2F%20Cleanup%20user%20resources%0A%20%20%20%20h.cleanupUserResources(sessionID)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Log%20session%20summary%0A%20%20%20%20h.auditLogger.LogSessionEnd(sessionID)%0A%7D%0A%60%60%60%0A%0A%23%23%20Tool%20Filtering%0A%0AConditionally%20expose%20tools%20based%20on%20context%2C%20permissions%2C%20or%20other%20criteria.%0A%0A%23%23%23%20Permission-Based%20Filtering%0A%0A%60%60%60go%0Atype%20PermissionFilter%20struct%20%7B%0A%20%20%20%20sessionManager%20*SessionManager%0A%7D%0A%0Afunc%20NewPermissionFilter(sm%20*SessionManager)%20*PermissionFilter%20%7B%0A%20%20%20%20return%20%26PermissionFilter%7BsessionManager%3A%20sm%7D%0A%7D%0A%0Afunc%20(f%20*PermissionFilter)%20FilterTools(ctx%20context.Context%2C%20tools%20%5B%5Dmcp.Tool)%20%5B%5Dmcp.Tool%20%7B%0A%20%20%20%20sessionID%20%3A%3D%20server.GetSessionID(ctx)%0A%20%20%20%20session%2C%20exists%20%3A%3D%20f.sessionManager.GetSession(sessionID)%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%5Dmcp.Tool%7B%7D%20%2F%2F%20No%20tools%20for%20invalid%20sessions%0A%20%20%20%20%7D%0A%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Tool%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools%20%7B%0A%20%20%20%20%20%20%20%20if%20f.hasPermissionForTool(session%2C%20tool.Name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20tool)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20filtered%0A%7D%0A%0Afunc%20(f%20*PermissionFilter)%20hasPermissionForTool(session%20*SessionState%2C%20toolName%20string)%20bool%20%7B%0A%20%20%20%20requiredPermissions%20%3A%3D%20map%5Bstring%5D%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22delete_user%22%3A%20%20%20%20%7B%22admin%22%7D%2C%0A%20%20%20%20%20%20%20%20%22modify_system%22%3A%20%20%7B%22admin%22%2C%20%22operator%22%7D%2C%0A%20%20%20%20%20%20%20%20%22read_data%22%3A%20%20%20%20%20%20%7B%22admin%22%2C%20%22operator%22%2C%20%22user%22%7D%2C%0A%20%20%20%20%20%20%20%20%22create_report%22%3A%20%20%7B%22admin%22%2C%20%22operator%22%2C%20%22user%22%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20required%2C%20exists%20%3A%3D%20requiredPermissions%5BtoolName%5D%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20true%20%2F%2F%20Allow%20tools%20without%20specific%20requirements%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20permission%20%3A%3D%20range%20session.Permissions%20%7B%0A%20%20%20%20%20%20%20%20for%20_%2C%20req%20%3A%3D%20range%20required%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20permission%20%3D%3D%20req%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20false%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Context-Based%20Filtering%0A%0A%60%60%60go%0Atype%20ContextFilter%20struct%7B%7D%0A%0Afunc%20(f%20*ContextFilter)%20FilterTools(ctx%20context.Context%2C%20tools%20%5B%5Dmcp.Tool)%20%5B%5Dmcp.Tool%20%7B%0A%20%20%20%20timeOfDay%20%3A%3D%20time.Now().Hour()%0A%20%20%20%20environment%20%3A%3D%20os.Getenv(%22ENVIRONMENT%22)%0A%20%20%20%20%0A%20%20%20%20var%20filtered%20%5B%5Dmcp.Tool%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools%20%7B%0A%20%20%20%20%20%20%20%20if%20f.shouldIncludeTool(tool%2C%20timeOfDay%2C%20environment)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20tool)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20filtered%0A%7D%0A%0Afunc%20(f%20*ContextFilter)%20shouldIncludeTool(tool%20mcp.Tool%2C%20hour%20int%2C%20env%20string)%20bool%20%7B%0A%20%20%20%20%2F%2F%20Maintenance%20tools%20only%20during%20off-hours%0A%20%20%20%20maintenanceTools%20%3A%3D%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22backup_database%22%3A%20%20true%2C%0A%20%20%20%20%20%20%20%20%22cleanup_logs%22%3A%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20%22restart_service%22%3A%20%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20maintenanceTools%5Btool.Name%5D%20%7B%0A%20%20%20%20%20%20%20%20return%20hour%20%3C%206%20%7C%7C%20hour%20%3E%2022%20%2F%2F%20Only%20between%2010%20PM%20and%206%20AM%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Debug%20tools%20only%20in%20development%0A%20%20%20%20debugTools%20%3A%3D%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22debug_session%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%22dump_state%22%3A%20%20%20%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20debugTools%5Btool.Name%5D%20%7B%0A%20%20%20%20%20%20%20%20return%20env%20%3D%3D%20%22development%22%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20true%0A%7D%0A%60%60%60%0A%0A%23%23%20Notifications%0A%0ASend%20server-to-client%20messages%20for%20real-time%20updates.%0A%0A%23%23%23%20Custom%20Notifications%0A%0A%60%60%60go%0Afunc%20handleLongRunningTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20srv%20%3A%3D%20server.ServerFromContext(ctx)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Simulate%20long-running%20work%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20100%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Send%20custom%20notification%20to%20all%20clients%0A%20%20%20%20%20%20%20%20notification%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22type%22%3A%20%20%20%20%20%22progress%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22progress%22%3A%20i%20%2B%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22total%22%3A%20%20%20%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20fmt.Sprintf(%22Processing%20step%20%25d%2F100%22%2C%20i%2B1)%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20srv.SendNotificationToAllClients(%22progress%22%2C%20notification)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(%22Long%20operation%20completed%20successfully%22)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Custom%20Notifications%0A%0A%60%60%60go%0Atype%20CustomNotifier%20struct%20%7B%0A%20%20%20%20sessions%20map%5Bstring%5Dchan%20mcp.Notification%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewCustomNotifier()%20*CustomNotifier%20%7B%0A%20%20%20%20return%20%26CustomNotifier%7B%0A%20%20%20%20%20%20%20%20sessions%3A%20make(map%5Bstring%5Dchan%20mcp.Notification)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20RegisterSession(sessionID%20string)%20%7B%0A%20%20%20%20n.mutex.Lock()%0A%20%20%20%20defer%20n.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20n.sessions%5BsessionID%5D%20%3D%20make(chan%20mcp.Notification%2C%20100)%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20UnregisterSession(sessionID%20string)%20%7B%0A%20%20%20%20n.mutex.Lock()%0A%20%20%20%20defer%20n.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20if%20ch%2C%20exists%20%3A%3D%20n.sessions%5BsessionID%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20close(ch)%0A%20%20%20%20%20%20%20%20delete(n.sessions%2C%20sessionID)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20SendAlert(sessionID%2C%20message%20string%2C%20severity%20string)%20%7B%0A%20%20%20%20n.mutex.RLock()%0A%20%20%20%20defer%20n.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20ch%2C%20exists%20%3A%3D%20n.sessions%5BsessionID%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20ch%20%3C-%20mcp.Notification%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22alert%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Data%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20message%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22severity%22%3A%20severity%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Channel%20full%2C%20drop%20notification%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNotifier)%20BroadcastSystemMessage(message%20string)%20%7B%0A%20%20%20%20n.mutex.RLock()%0A%20%20%20%20defer%20n.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20notification%20%3A%3D%20mcp.Notification%7B%0A%20%20%20%20%20%20%20%20Type%3A%20%22system_message%22%2C%0A%20%20%20%20%20%20%20%20Data%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20%20message%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20ch%20%3A%3D%20range%20n.sessions%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20ch%20%3C-%20notification%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Channel%20full%2C%20skip%20this%20session%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Production%20Configuration%0A%0A%23%23%23%20Complete%20Production%20Server%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Initialize%20components%0A%20%20%20%20logger%20%3A%3D%20log.New(os.Stdout%2C%20%22%5BMCP%5D%20%22%2C%20log.LstdFlags)%0A%20%20%20%20metrics%20%3A%3D%20NewPrometheusMetrics()%0A%20%20%20%20sessionManager%20%3A%3D%20NewSessionManager()%0A%20%20%20%20notifier%20%3A%3D%20NewCustomNotifier()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20middleware%0A%20%20%20%20loggingMW%20%3A%3D%20NewLoggingMiddleware(logger)%0A%20%20%20%20rateLimitMW%20%3A%3D%20NewRateLimitMiddleware(10.0%2C%2020)%20%2F%2F%2010%20req%2Fsec%2C%20burst%2020%0A%20%20%20%20authMW%20%3A%3D%20NewAuthMiddleware(NewJWTValidator())%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20hooks%0A%20%20%20%20telemetryHooks%20%3A%3D%20NewTelemetryHooks(metrics%2C%20logger)%0A%20%20%20%20businessHooks%20%3A%3D%20NewBusinessHooks(NewAuditLogger()%2C%20NewSlackNotifier())%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20server%20with%20all%20features%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Production%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(false%2C%20true)%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(telemetryHooks)%2C%0A%20%20%20%20%20%20%20%20server.WithToolHandlerMiddleware(loggingMW.ToolMiddleware)%2C%0A%20%20%20%20%20%20%20%20server.WithToolFilter(NewPermissionFilter(sessionManager))%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20tools%20and%20resources%0A%20%20%20%20addProductionTools(s)%0A%20%20%20%20addProductionResources(s)%0A%20%20%20%20addProductionPrompts(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20server%20with%20graceful%20shutdown%0A%20%20%20%20startWithGracefulShutdown(s)%0A%7D%0A%0Afunc%20startWithGracefulShutdown(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Setup%20signal%20handling%0A%20%20%20%20sigChan%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(sigChan%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20server%20in%20goroutine%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20shutdown%20signal%0A%20%20%20%20%3C-sigChan%0A%20%20%20%20log.Println(%22Shutting%20down%20server...%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Graceful%20shutdown%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20if%20err%20%3A%3D%20s.Shutdown(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Shutdown%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20log.Println(%22Server%20stopped%22)%0A%7D%0A%60%60%60%0A%0A%23%23%20Sampling%20(Advanced)%0A%0ASampling%20is%20an%20advanced%20feature%20that%20allows%20servers%20to%20request%20LLM%20completions%20from%20clients.%20This%20enables%20bidirectional%20communication%20where%20servers%20can%20leverage%20client-side%20LLM%20capabilities%20for%20content%20generation%2C%20reasoning%2C%20and%20question%20answering.%0A%0A%3E%20**Note**%3A%20Sampling%20is%20an%20advanced%20feature%20that%20most%20servers%20don't%20need.%20Only%20implement%20sampling%20if%20your%20server%20specifically%20needs%20to%20generate%20content%20using%20the%20client's%20LLM.%0A%0A%23%23%23%20When%20to%20Use%20Sampling%0A%0AConsider%20sampling%20when%20your%20server%20needs%20to%3A%0A-%20Generate%20content%20based%20on%20user%20input%0A-%20Answer%20questions%20using%20LLM%20reasoning%0A-%20Perform%20text%20analysis%20or%20summarization%0A-%20Create%20dynamic%20responses%20that%20require%20LLM%20capabilities%0A%0A%23%23%23%20Basic%20Implementation%0A%0A%60%60%60go%0A%2F%2F%20Enable%20sampling%20capability%0AmcpServer.EnableSampling()%0A%0A%2F%2F%20Add%20a%20tool%20that%20uses%20sampling%0AmcpServer.AddTool(mcp.Tool%7B%0A%20%20%20%20Name%3A%20%20%20%20%20%20%20%20%22ask_llm%22%2C%0A%20%20%20%20Description%3A%20%22Ask%20the%20LLM%20a%20question%20using%20sampling%22%2C%0A%20%20%20%20InputSchema%3A%20mcp.ToolInputSchema%7B%0A%20%20%20%20%20%20%20%20Type%3A%20%22object%22%2C%0A%20%20%20%20%20%20%20%20Properties%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22question%22%3A%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22type%22%3A%20%20%20%20%20%20%20%20%22string%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22description%22%3A%20%22The%20question%20to%20ask%20the%20LLM%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20Required%3A%20%5B%5Dstring%7B%22question%22%7D%2C%0A%20%20%20%20%7D%2C%0A%7D%2C%20func(ctx%20context.Context%2C%20request%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20question%2C%20err%20%3A%3D%20request.RequireString(%22question%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20sampling%20request%0A%20%20%20%20samplingRequest%20%3A%3D%20mcp.CreateMessageRequest%7B%0A%20%20%20%20%20%20%20%20CreateMessageParams%3A%20mcp.CreateMessageParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.SamplingMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20mcp.RoleUser%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20question%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20SystemPrompt%3A%20%22You%20are%20a%20helpful%20assistant.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MaxTokens%3A%20%20%20%201000%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Temperature%3A%20%200.7%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Request%20sampling%20from%20client%0A%20%20%20%20result%2C%20err%20%3A%3D%20mcpServer.RequestSampling(ctx%2C%20samplingRequest)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22Error%3A%20%25v%22%2C%20err)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20IsError%3A%20true%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22LLM%20Response%3A%20%25s%22%2C%20result.Content)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D)%0A%60%60%60%0A%0AFor%20complete%20sampling%20documentation%2C%20see%20**%5BServer%20Sampling%20Guide%5D(%2Fservers%2Fadvanced-sampling)**.%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Learn%20to%20build%20MCP%20clients%0A-%20**%5BServer%20Basics%5D(%2Fservers%2Fbasics)**%20-%20Review%20fundamental%20concepts",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./basics-TUVYaUid.js"),[]),path:"/servers/basics",type:"mdx",filePath:"servers/basics.mdx",content:"%23%20Server%20Basics%0A%0ALearn%20how%20to%20create%2C%20configure%2C%20and%20start%20MCP%20servers%20with%20different%20transport%20options.%0A%0A%23%23%20Creating%20a%20Server%0A%0AThe%20foundation%20of%20any%20MCP%20server%20is%20the%20%60NewMCPServer()%60%20function.%20This%20creates%20a%20server%20instance%20with%20basic%20metadata%20and%20optional%20configuration.%0A%0A%23%23%23%20Basic%20Server%20Creation%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20basic%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22My%20MCP%20Server%22%2C%20%20%2F%2F%20Server%20name%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%20%20%20%20%20%20%20%20%20%20%2F%2F%20Server%20version%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20the%20server%20(stdio%20transport)%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Server%20with%20Options%0A%0AUse%20server%20options%20to%20configure%20capabilities%20and%20behavior%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Advanced%20Server%22%2C%0A%20%20%20%20%222.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%20%20%20%20%20%20%2F%2F%20Enable%20tools%0A%20%20%20%20server.WithResourceCapabilities(true)%2C%20%20%2F%2F%20Enable%20resources%20%20%0A%20%20%20%20server.WithPromptCapabilities(true)%2C%20%20%20%20%2F%2F%20Enable%20prompts%0A%20%20%20%20server.WithRecovery()%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20panic%20recovery%0A%20%20%20%20server.WithHooks(myHooks)%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20lifecycle%20hooks%0A)%0A%60%60%60%0A%0A%23%23%20Server%20Configuration%0A%0A%23%23%23%20Capabilities%0A%0ACapabilities%20tell%20clients%20what%20features%20your%20server%20supports%3A%0A%0A%60%60%60go%0A%2F%2F%20Enable%20specific%20capabilities%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Specialized%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%20%20%20%20%20%20%2F%2F%20Can%20execute%20tools%0A%20%20%20%20server.WithResourceCapabilities(true)%2C%20%20%2F%2F%20Can%20provide%20resources%0A%20%20%20%20server.WithPromptCapabilities(true)%2C%20%20%20%20%2F%2F%20Can%20provide%20prompts%0A)%0A%0A%2F%2F%20Or%20enable%20all%20capabilities%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Full-Featured%20Server%22%2C%20%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20server.WithPromptCapabilities(true)%2C%0A)%0A%60%60%60%0A%0A**Capability%20types%3A**%0A-%20**Tools**%3A%20Server%20can%20execute%20function%20calls%20from%20LLMs%0A-%20**Resources**%3A%20Server%20can%20provide%20data%2Fcontent%20to%20LLMs%20%20%0A-%20**Prompts**%3A%20Server%20can%20provide%20prompt%20templates%0A%0A%23%23%23%20Recovery%20Middleware%0A%0AAdd%20automatic%20panic%20recovery%20to%20prevent%20server%20crashes%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Robust%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%20%0A%20%20%20%20server.WithRecovery()%2C%20%2F%2F%20Automatically%20recover%20from%20panics%0A)%0A%60%60%60%0A%0AThis%20catches%20panics%20in%20handlers%20and%20returns%20proper%20error%20responses%20instead%20of%20crashing.%0A%0A%23%23%23%20Custom%20Metadata%0A%0AAdd%20additional%20server%20information%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22My%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithInstructions(%22A%20server%20that%20does%20amazing%20things%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Starting%20Servers%0A%0AMCP-Go%20supports%20multiple%20transport%20methods%20for%20different%20deployment%20scenarios.%0A%0A%23%23%23%20Stdio%20Transport%0A%0AStandard%20input%2Foutput%20-%20most%20common%20for%20local%20tools%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22My%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20stdio%20server%20(blocks%20until%20terminated)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A**Best%20for%3A**%0A-%20Local%20development%20tools%0A-%20CLI%20integrations%20%20%0A-%20Desktop%20applications%0A-%20Single-client%20scenarios%0A%0A%23%23%23%20HTTP%20Transport%0A%0ATraditional%20HTTP%20request%2Fresponse%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22HTTP%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20HTTP%20server%0A%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20HTTP%20server%20on%20port%208080%0A%20%20%20%20if%20err%20%3A%3D%20httpServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A**Best%20for%3A**%0A-%20Web%20services%0A-%20Load-balanced%20deployments%0A-%20REST-like%20APIs%0A-%20Caching%20scenarios%0A%0A%23%23%23%20Server-Sent%20Events%20(SSE)%0A%0AHTTP-based%20streaming%20for%20real-time%20updates%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22SSE%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20SSE%20server%0A%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20SSE%20server%20on%20port%208080%0A%20%20%20%20if%20err%20%3A%3D%20sseServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A**Best%20for%3A**%0A-%20Web%20applications%0A-%20Real-time%20notifications%0A-%20Multiple%20concurrent%20clients%0A-%20Browser-based%20tools%0A%0A%23%23%23%20Custom%20Transport%20Options%0A%0AConfigure%20transport-specific%20options%3A%0A%0A%60%60%60go%0A%2F%2F%20HTTP%20with%20custom%20options%0AhttpServer%20%3A%3D%20server.NewStreamableHTTPServer(s%2C%0A%20%20%20%20server.WithEndpointPath(%22%2Fmcp%22)%2C%0A%20%20%20%20server.WithStateless(true)%2C%0A)%0A%0Aif%20err%20%3A%3D%20httpServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20log.Fatal(err)%0A%7D%0A%0A%2F%2F%20SSE%20with%20custom%20options%0AsseServer%20%3A%3D%20server.NewSSEServer(s%2C%0A%20%20%20%20server.WithSSEEndpoint(%22%2Fevents%22)%2C%0A%20%20%20%20server.WithMessageEndpoint(%22%2Fmessage%22)%2C%0A%20%20%20%20server.WithKeepAlive(true)%2C%0A)%0A%0Aif%20err%20%3A%3D%20sseServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20log.Fatal(err)%0A%7D%0A%60%60%60%0A%0A%23%23%20Environment-Based%20Configuration%0A%0AConfigure%20servers%20based%20on%20environment%20variables%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Configurable%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Choose%20transport%20based%20on%20environment%0A%20%20%20%20transport%20%3A%3D%20os.Getenv(%22MCP_TRANSPORT%22)%0A%20%20%20%20port%20%3A%3D%20os.Getenv(%22PORT%22)%0A%20%20%20%20if%20port%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20port%20%3D%20%228080%22%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20switch%20transport%20%7B%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20%20%20%20%20httpServer.Start(%22%3A%22%2Bport)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20%20%20%20%20sseServer.Start(%22%3A%22%2Bport)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20server.ServeStdio(s)%0A%20%20%20%20%7D%0A%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Server%20Lifecycle%0A%0AUnderstanding%20the%20server%20lifecycle%20helps%20with%20proper%20resource%20management%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20hooks%20%3A%3D%20%26server.Hooks%7B%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20session%20lifecycle%20hooks%0A%20%20%20%20hooks.AddOnRegisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20connected%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnUnregisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20disconnected%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20request%20hooks%0A%20%20%20%20hooks.AddBeforeAny(func(ctx%20context.Context%2C%20id%20any%2C%20method%20mcp.MCPMethod%2C%20message%20any)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Processing%20%25s%20request%22%2C%20method)%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnError(func(ctx%20context.Context%2C%20id%20any%2C%20method%20mcp.MCPMethod%2C%20message%20any%2C%20err%20error)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20in%20%25s%3A%20%25v%22%2C%20method%2C%20err)%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Lifecycle%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(hooks)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Graceful%20shutdown%0A%20%20%20%20c%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(c%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%3C-c%0A%20%20%20%20%20%20%20%20log.Println(%22Shutting%20down%20server...%22)%0A%20%20%20%20%20%20%20%20s.Shutdown()%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AProper%20error%20handling%20ensures%20robust%20server%20operation%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Error-Safe%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%20%2F%2F%20Panic%20recovery%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20error%20handling%20for%20server%20startup%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20server.ErrServerClosed)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Server%20closed%20gracefully%22)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Fatalf(%22Server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0ANow%20that%20you%20understand%20server%20basics%2C%20learn%20how%20to%20add%20functionality%3A%0A%0A-%20**%5BResources%5D(%2Fservers%2Fresources)**%20-%20Expose%20data%20to%20LLMs%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Provide%20functionality%20to%20LLMs%20%20%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Create%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Hooks%2C%20middleware%2C%20and%20more",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./basics-TUVYaUid.js"),[]),path:"/servers/basics.html",type:"mdx",filePath:"servers/basics.mdx",content:"%23%20Server%20Basics%0A%0ALearn%20how%20to%20create%2C%20configure%2C%20and%20start%20MCP%20servers%20with%20different%20transport%20options.%0A%0A%23%23%20Creating%20a%20Server%0A%0AThe%20foundation%20of%20any%20MCP%20server%20is%20the%20%60NewMCPServer()%60%20function.%20This%20creates%20a%20server%20instance%20with%20basic%20metadata%20and%20optional%20configuration.%0A%0A%23%23%23%20Basic%20Server%20Creation%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20basic%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22My%20MCP%20Server%22%2C%20%20%2F%2F%20Server%20name%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%20%20%20%20%20%20%20%20%20%20%2F%2F%20Server%20version%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20the%20server%20(stdio%20transport)%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Server%20with%20Options%0A%0AUse%20server%20options%20to%20configure%20capabilities%20and%20behavior%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Advanced%20Server%22%2C%0A%20%20%20%20%222.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%20%20%20%20%20%20%2F%2F%20Enable%20tools%0A%20%20%20%20server.WithResourceCapabilities(true)%2C%20%20%2F%2F%20Enable%20resources%20%20%0A%20%20%20%20server.WithPromptCapabilities(true)%2C%20%20%20%20%2F%2F%20Enable%20prompts%0A%20%20%20%20server.WithRecovery()%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20panic%20recovery%0A%20%20%20%20server.WithHooks(myHooks)%2C%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20lifecycle%20hooks%0A)%0A%60%60%60%0A%0A%23%23%20Server%20Configuration%0A%0A%23%23%23%20Capabilities%0A%0ACapabilities%20tell%20clients%20what%20features%20your%20server%20supports%3A%0A%0A%60%60%60go%0A%2F%2F%20Enable%20specific%20capabilities%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Specialized%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%20%20%20%20%20%20%2F%2F%20Can%20execute%20tools%0A%20%20%20%20server.WithResourceCapabilities(true)%2C%20%20%2F%2F%20Can%20provide%20resources%0A%20%20%20%20server.WithPromptCapabilities(true)%2C%20%20%20%20%2F%2F%20Can%20provide%20prompts%0A)%0A%0A%2F%2F%20Or%20enable%20all%20capabilities%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Full-Featured%20Server%22%2C%20%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20server.WithPromptCapabilities(true)%2C%0A)%0A%60%60%60%0A%0A**Capability%20types%3A**%0A-%20**Tools**%3A%20Server%20can%20execute%20function%20calls%20from%20LLMs%0A-%20**Resources**%3A%20Server%20can%20provide%20data%2Fcontent%20to%20LLMs%20%20%0A-%20**Prompts**%3A%20Server%20can%20provide%20prompt%20templates%0A%0A%23%23%23%20Recovery%20Middleware%0A%0AAdd%20automatic%20panic%20recovery%20to%20prevent%20server%20crashes%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22Robust%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%20%0A%20%20%20%20server.WithRecovery()%2C%20%2F%2F%20Automatically%20recover%20from%20panics%0A)%0A%60%60%60%0A%0AThis%20catches%20panics%20in%20handlers%20and%20returns%20proper%20error%20responses%20instead%20of%20crashing.%0A%0A%23%23%23%20Custom%20Metadata%0A%0AAdd%20additional%20server%20information%3A%0A%0A%60%60%60go%0As%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%22My%20Server%22%2C%0A%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20server.WithInstructions(%22A%20server%20that%20does%20amazing%20things%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Starting%20Servers%0A%0AMCP-Go%20supports%20multiple%20transport%20methods%20for%20different%20deployment%20scenarios.%0A%0A%23%23%23%20Stdio%20Transport%0A%0AStandard%20input%2Foutput%20-%20most%20common%20for%20local%20tools%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22My%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20stdio%20server%20(blocks%20until%20terminated)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A**Best%20for%3A**%0A-%20Local%20development%20tools%0A-%20CLI%20integrations%20%20%0A-%20Desktop%20applications%0A-%20Single-client%20scenarios%0A%0A%23%23%23%20HTTP%20Transport%0A%0ATraditional%20HTTP%20request%2Fresponse%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22HTTP%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20HTTP%20server%0A%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20HTTP%20server%20on%20port%208080%0A%20%20%20%20if%20err%20%3A%3D%20httpServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A**Best%20for%3A**%0A-%20Web%20services%0A-%20Load-balanced%20deployments%0A-%20REST-like%20APIs%0A-%20Caching%20scenarios%0A%0A%23%23%23%20Server-Sent%20Events%20(SSE)%0A%0AHTTP-based%20streaming%20for%20real-time%20updates%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22SSE%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20SSE%20server%0A%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20SSE%20server%20on%20port%208080%0A%20%20%20%20if%20err%20%3A%3D%20sseServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A**Best%20for%3A**%0A-%20Web%20applications%0A-%20Real-time%20notifications%0A-%20Multiple%20concurrent%20clients%0A-%20Browser-based%20tools%0A%0A%23%23%23%20Custom%20Transport%20Options%0A%0AConfigure%20transport-specific%20options%3A%0A%0A%60%60%60go%0A%2F%2F%20HTTP%20with%20custom%20options%0AhttpServer%20%3A%3D%20server.NewStreamableHTTPServer(s%2C%0A%20%20%20%20server.WithEndpointPath(%22%2Fmcp%22)%2C%0A%20%20%20%20server.WithStateless(true)%2C%0A)%0A%0Aif%20err%20%3A%3D%20httpServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20log.Fatal(err)%0A%7D%0A%0A%2F%2F%20SSE%20with%20custom%20options%0AsseServer%20%3A%3D%20server.NewSSEServer(s%2C%0A%20%20%20%20server.WithSSEEndpoint(%22%2Fevents%22)%2C%0A%20%20%20%20server.WithMessageEndpoint(%22%2Fmessage%22)%2C%0A%20%20%20%20server.WithKeepAlive(true)%2C%0A)%0A%0Aif%20err%20%3A%3D%20sseServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20log.Fatal(err)%0A%7D%0A%60%60%60%0A%0A%23%23%20Environment-Based%20Configuration%0A%0AConfigure%20servers%20based%20on%20environment%20variables%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Configurable%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Choose%20transport%20based%20on%20environment%0A%20%20%20%20transport%20%3A%3D%20os.Getenv(%22MCP_TRANSPORT%22)%0A%20%20%20%20port%20%3A%3D%20os.Getenv(%22PORT%22)%0A%20%20%20%20if%20port%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20port%20%3D%20%228080%22%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20switch%20transport%20%7B%0A%20%20%20%20case%20%22http%22%3A%0A%20%20%20%20%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20%20%20%20%20httpServer.Start(%22%3A%22%2Bport)%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20%20%20%20%20sseServer.Start(%22%3A%22%2Bport)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20server.ServeStdio(s)%0A%20%20%20%20%7D%0A%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Server%20Lifecycle%0A%0AUnderstanding%20the%20server%20lifecycle%20helps%20with%20proper%20resource%20management%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20hooks%20%3A%3D%20%26server.Hooks%7B%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20session%20lifecycle%20hooks%0A%20%20%20%20hooks.AddOnRegisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20connected%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnUnregisterSession(func(ctx%20context.Context%2C%20session%20server.ClientSession)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Client%20%25s%20disconnected%22%2C%20session.ID())%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20request%20hooks%0A%20%20%20%20hooks.AddBeforeAny(func(ctx%20context.Context%2C%20id%20any%2C%20method%20mcp.MCPMethod%2C%20message%20any)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Processing%20%25s%20request%22%2C%20method)%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20hooks.AddOnError(func(ctx%20context.Context%2C%20id%20any%2C%20method%20mcp.MCPMethod%2C%20message%20any%2C%20err%20error)%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Error%20in%20%25s%3A%20%25v%22%2C%20method%2C%20err)%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Lifecycle%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithHooks(hooks)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Graceful%20shutdown%0A%20%20%20%20c%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(c%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%3C-c%0A%20%20%20%20%20%20%20%20log.Println(%22Shutting%20down%20server...%22)%0A%20%20%20%20%20%20%20%20s.Shutdown()%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AProper%20error%20handling%20ensures%20robust%20server%20operation%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Error-Safe%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%20%2F%2F%20Panic%20recovery%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20error%20handling%20for%20server%20startup%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20server.ErrServerClosed)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Println(%22Server%20closed%20gracefully%22)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Fatalf(%22Server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0ANow%20that%20you%20understand%20server%20basics%2C%20learn%20how%20to%20add%20functionality%3A%0A%0A-%20**%5BResources%5D(%2Fservers%2Fresources)**%20-%20Expose%20data%20to%20LLMs%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Provide%20functionality%20to%20LLMs%20%20%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Create%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Hooks%2C%20middleware%2C%20and%20more",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./index-C_1Cj42K.js"),[]),path:"/servers",type:"mdx",filePath:"servers/index.mdx",content:"%23%20Building%20MCP%20Servers%0A%0ALearn%20how%20to%20build%20powerful%20MCP%20servers%20with%20MCP-Go.%20This%20section%20covers%20everything%20from%20basic%20server%20setup%20to%20advanced%20features%20like%20typed%20tools%20and%20session%20management.%0A%0A%23%23%20Overview%0A%0AMCP%20servers%20expose%20tools%2C%20resources%2C%20and%20prompts%20to%20LLM%20clients.%20MCP-Go%20makes%20it%20easy%20to%20build%20robust%20servers%20with%20minimal%20boilerplate%20while%20providing%20full%20control%20over%20advanced%20features.%0A%0A%23%23%20What%20You'll%20Learn%0A%0A-%20**%5BServer%20Basics%5D(%2Fservers%2Fbasics)**%20-%20Creating%20and%20configuring%20servers%0A-%20**%5BResources%5D(%2Fservers%2Fresources)**%20-%20Exposing%20data%20to%20LLMs%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Providing%20functionality%20to%20LLMs%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Creating%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Typed%20tools%2C%20middleware%2C%20hooks%2C%20sampling%2C%20and%20more%0A%0A%23%23%20Quick%20Example%0A%0AHere's%20a%20complete%20MCP%20server%20that%20demonstrates%20the%20key%20concepts%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Avar%20start%20time.Time%0A%0Afunc%20main()%20%7B%0A%20%20%20%20start%20%3D%20time.Now()%0A%20%20%20%20%2F%2F%20Create%20server%20with%20capabilities%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22Demo%20Server%22%2C%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(false%2C%20true)%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_time%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20the%20current%20time%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22format%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Time%20format%20(RFC3339%2C%20Unix%2C%20etc.)%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.DefaultString(%22RFC3339%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleGetTime%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20resource%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22config%3A%2F%2Fserver%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Server%20Configuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Current%20server%20configuration%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleConfig%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20prompt%0A%20%20%20%20s.AddPrompt(%0A%20%20%20%20%20%20%20%20mcp.NewPrompt(%22analyze_logs%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithPromptDescription(%22Analyze%20server%20logs%20for%20issues%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithArgument(%22log_level%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.ArgumentDescription(%22Minimum%20log%20level%20to%20analyze%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleAnalyzeLogs%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20the%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleGetTime(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20format%20%3A%3D%20req.GetString(%22format%22%2C%20%22RFC3339%22)%0A%20%20%20%20%0A%20%20%20%20var%20timeStr%20string%0A%20%20%20%20switch%20format%20%7B%0A%20%20%20%20case%20%22Unix%22%3A%0A%20%20%20%20%20%20%20%20timeStr%20%3D%20fmt.Sprintf(%22%25d%22%2C%20time.Now().Unix())%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20timeStr%20%3D%20time.Now().Format(time.RFC3339)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(timeStr)%2C%20nil%0A%7D%0A%0Afunc%20handleConfig(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(%5B%5Dmcp.ResourceContents%2C%20error)%20%7B%0A%20%20%20%20config%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%22Demo%20Server%22%2C%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%22uptime%22%3A%20time.Since(start).String()%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20configJSON%2C%20err%20%3A%3D%20json.Marshal(config)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(configJSON)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20handleAnalyzeLogs(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20logLevel%20%3A%3D%20%22error%22%20%2F%2F%20default%20value%0A%20%20%20%20if%20args%20%3A%3D%20req.Params.Arguments%3B%20args%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20level%2C%20ok%20%3A%3D%20args%5B%22log_level%22%5D.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logLevel%20%3D%20level%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20%22Analyze%20server%20logs%20for%20potential%20issues%22%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20mcp.RoleUser%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Please%20analyze%20the%20server%20logs%20for%20entries%20at%20%25s%20level%20or%20higher.%20%22%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Look%20for%20patterns%2C%20errors%2C%20and%20potential%20issues%20that%20need%20attention.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20logLevel%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0AStart%20with%20%5BServer%20Basics%5D(%2Fservers%2Fbasics)%20to%20learn%20how%20to%20create%20and%20configure%20your%20first%20MCP%20server%2C%20then%20explore%20the%20other%20sections%20to%20add%20resources%2C%20tools%2C%20and%20advanced%20features.",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./index-C_1Cj42K.js"),[]),path:"/servers.html",type:"mdx",filePath:"servers/index.mdx",content:"%23%20Building%20MCP%20Servers%0A%0ALearn%20how%20to%20build%20powerful%20MCP%20servers%20with%20MCP-Go.%20This%20section%20covers%20everything%20from%20basic%20server%20setup%20to%20advanced%20features%20like%20typed%20tools%20and%20session%20management.%0A%0A%23%23%20Overview%0A%0AMCP%20servers%20expose%20tools%2C%20resources%2C%20and%20prompts%20to%20LLM%20clients.%20MCP-Go%20makes%20it%20easy%20to%20build%20robust%20servers%20with%20minimal%20boilerplate%20while%20providing%20full%20control%20over%20advanced%20features.%0A%0A%23%23%20What%20You'll%20Learn%0A%0A-%20**%5BServer%20Basics%5D(%2Fservers%2Fbasics)**%20-%20Creating%20and%20configuring%20servers%0A-%20**%5BResources%5D(%2Fservers%2Fresources)**%20-%20Exposing%20data%20to%20LLMs%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Providing%20functionality%20to%20LLMs%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Creating%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Typed%20tools%2C%20middleware%2C%20hooks%2C%20sampling%2C%20and%20more%0A%0A%23%23%20Quick%20Example%0A%0AHere's%20a%20complete%20MCP%20server%20that%20demonstrates%20the%20key%20concepts%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Avar%20start%20time.Time%0A%0Afunc%20main()%20%7B%0A%20%20%20%20start%20%3D%20time.Now()%0A%20%20%20%20%2F%2F%20Create%20server%20with%20capabilities%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%0A%20%20%20%20%20%20%20%20%22Demo%20Server%22%2C%0A%20%20%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(false%2C%20true)%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_time%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20the%20current%20time%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22format%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Time%20format%20(RFC3339%2C%20Unix%2C%20etc.)%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.DefaultString(%22RFC3339%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleGetTime%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20resource%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22config%3A%2F%2Fserver%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Server%20Configuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Current%20server%20configuration%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleConfig%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20prompt%0A%20%20%20%20s.AddPrompt(%0A%20%20%20%20%20%20%20%20mcp.NewPrompt(%22analyze_logs%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithPromptDescription(%22Analyze%20server%20logs%20for%20issues%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithArgument(%22log_level%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.ArgumentDescription(%22Minimum%20log%20level%20to%20analyze%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleAnalyzeLogs%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20the%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleGetTime(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20format%20%3A%3D%20req.GetString(%22format%22%2C%20%22RFC3339%22)%0A%20%20%20%20%0A%20%20%20%20var%20timeStr%20string%0A%20%20%20%20switch%20format%20%7B%0A%20%20%20%20case%20%22Unix%22%3A%0A%20%20%20%20%20%20%20%20timeStr%20%3D%20fmt.Sprintf(%22%25d%22%2C%20time.Now().Unix())%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20timeStr%20%3D%20time.Now().Format(time.RFC3339)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(timeStr)%2C%20nil%0A%7D%0A%0Afunc%20handleConfig(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(%5B%5Dmcp.ResourceContents%2C%20error)%20%7B%0A%20%20%20%20config%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%22Demo%20Server%22%2C%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%22uptime%22%3A%20time.Since(start).String()%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20configJSON%2C%20err%20%3A%3D%20json.Marshal(config)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(configJSON)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20handleAnalyzeLogs(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20logLevel%20%3A%3D%20%22error%22%20%2F%2F%20default%20value%0A%20%20%20%20if%20args%20%3A%3D%20req.Params.Arguments%3B%20args%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20level%2C%20ok%20%3A%3D%20args%5B%22log_level%22%5D.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logLevel%20%3D%20level%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20%22Analyze%20server%20logs%20for%20potential%20issues%22%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20mcp.RoleUser%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Please%20analyze%20the%20server%20logs%20for%20entries%20at%20%25s%20level%20or%20higher.%20%22%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Look%20for%20patterns%2C%20errors%2C%20and%20potential%20issues%20that%20need%20attention.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20logLevel%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0AStart%20with%20%5BServer%20Basics%5D(%2Fservers%2Fbasics)%20to%20learn%20how%20to%20create%20and%20configure%20your%20first%20MCP%20server%2C%20then%20explore%20the%20other%20sections%20to%20add%20resources%2C%20tools%2C%20and%20advanced%20features.",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./prompts-BwMG7Ce3.js"),[]),path:"/servers/prompts",type:"mdx",filePath:"servers/prompts.mdx",content:"%23%20Implementing%20Prompts%0A%0APrompts%20are%20reusable%20interaction%20templates%20that%20help%20structure%20conversations%20between%20users%20and%20LLMs.%20They%20provide%20context%2C%20instructions%2C%20and%20can%20include%20dynamic%20content%20from%20resources.%0A%0A%23%23%20Prompt%20Fundamentals%0A%0APrompts%20in%20MCP%20serve%20as%20templates%20that%20can%20be%20invoked%20by%20LLMs%20to%20generate%20structured%20interactions.%20They're%20particularly%20useful%20for%20complex%20workflows%2C%20analysis%20tasks%2C%20or%20any%20scenario%20where%20you%20want%20to%20provide%20consistent%20context%20and%20instructions.%0A%0A%23%23%23%20Basic%20Prompt%20Structure%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20simple%20prompt%0Aprompt%20%3A%3D%20mcp.NewPrompt(%22code_review%22%2C%0A%20%20%20%20mcp.WithPromptDescription(%22Review%20code%20for%20best%20practices%20and%20issues%22)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22code%22%2C%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22The%20code%20to%20review%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22language%22%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Programming%20language%22)%2C%0A%20%20%20%20%20%20%20%20mcp.Default(%22auto-detect%22)%2C%0A%20%20%20%20)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Prompt%20Templates%0A%0A%23%23%23%20Basic%20Code%20Review%20Prompt%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Code%20Assistant%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Code%20review%20prompt%0A%20%20%20%20codeReviewPrompt%20%3A%3D%20mcp.NewPrompt(%22code_review%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptDescription(%22Review%20code%20for%20best%20practices%2C%20bugs%2C%20and%20improvements%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptArgument(%22code%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22The%20code%20to%20review%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptArgument(%22language%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Programming%20language%20(auto-detected%20if%20not%20specified)%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptArgument(%22focus%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Specific%20areas%20to%20focus%20on%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Enum(%22security%22%2C%20%22performance%22%2C%20%22readability%22%2C%20%22best-practices%22%2C%20%22all%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Default(%22all%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddPrompt(codeReviewPrompt%2C%20handleCodeReview)%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleCodeReview(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20arguments%20safely%0A%20%20%20%20args%20%3A%3D%20req.Params.Arguments%0A%20%20%20%20if%20args%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22missing%20required%20arguments%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20code%2C%20ok%20%3A%3D%20args%5B%22code%22%5D.(string)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22code%20argument%20is%20required%20and%20must%20be%20a%20string%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20language%20%3A%3D%20getStringArg(args%2C%20%22language%22%2C%20%22auto-detect%22)%0A%20%20%20%20focus%20%3A%3D%20getStringArg(args%2C%20%22focus%22%2C%20%22all%22)%0A%0A%20%20%20%20%2F%2F%20Build%20the%20prompt%20based%20on%20focus%20area%0A%20%20%20%20var%20instructions%20string%0A%20%20%20%20switch%20focus%20%7B%0A%20%20%20%20case%20%22security%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20specifically%20on%20security%20vulnerabilities%2C%20input%20validation%2C%20and%20potential%20attack%20vectors.%22%0A%20%20%20%20case%20%22performance%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20on%20performance%20optimizations%2C%20algorithmic%20efficiency%2C%20and%20resource%20usage.%22%0A%20%20%20%20case%20%22readability%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20on%20code%20clarity%2C%20naming%20conventions%2C%20and%20maintainability.%22%0A%20%20%20%20case%20%22best-practices%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20on%20language-specific%20best%20practices%20and%20design%20patterns.%22%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Provide%20a%20comprehensive%20review%20covering%20security%2C%20performance%2C%20readability%2C%20and%20best%20practices.%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22Code%20review%20for%20%25s%20code%22%2C%20language)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Please%20review%20the%20following%20%25s%20code%3A%5Cn%5Cn%25s%5Cn%5CnInstructions%3A%20%25s%5Cn%5CnPlease%20provide%3A%5Cn1.%20Overall%20assessment%5Cn2.%20Specific%20issues%20found%5Cn3.%20Suggested%20improvements%5Cn4.%20Best%20practice%20recommendations%5Cn%5CnCode%3A%5Cn%0A%60%60%60%0A%0A%23%23%23%20Data%20Analysis%20Prompt%0A%0A%60%60%60go%0Afunc%20handleDataAnalysis(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20datasetURI%20%3A%3D%20req.Params.Arguments%5B%22dataset_uri%22%5D.(string)%0A%20%20%20%20analysisType%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22analysis_type%22%2C%20%22exploratory%22)%0A%20%20%20%20focusAreas%20%3A%3D%20getStringSliceArg(req.Params.Arguments%2C%20%22focus_areas%22%2C%20%5B%5Dstring%7B%7D)%0A%0A%20%20%20%20%2F%2F%20Fetch%20the%20dataset%20(this%20would%20typically%20read%20from%20a%20resource)%0A%20%20%20%20dataset%2C%20err%20%3A%3D%20fetchDataset(ctx%2C%20datasetURI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20dataset%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20analysis%20instructions%0A%20%20%20%20var%20instructions%20strings.Builder%0A%20%20%20%20instructions.WriteString(%22Please%20analyze%20the%20provided%20dataset.%20%22)%0A%0A%20%20%20%20switch%20analysisType%20%7B%0A%20%20%20%20case%20%22exploratory%22%3A%0A%20%20%20%20%20%20%20%20instructions.WriteString(%22Perform%20exploratory%20data%20analysis%20including%20summary%20statistics%2C%20distributions%2C%20and%20patterns.%22)%0A%20%20%20%20case%20%22predictive%22%3A%0A%20%20%20%20%20%20%20%20instructions.WriteString(%22Focus%20on%20predictive%20modeling%20opportunities%20and%20feature%20relationships.%22)%0A%20%20%20%20case%20%22diagnostic%22%3A%0A%20%20%20%20%20%20%20%20instructions.WriteString(%22Identify%20data%20quality%20issues%2C%20outliers%2C%20and%20potential%20problems.%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(focusAreas)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20instructions.WriteString(fmt.Sprintf(%22%20Pay%20special%20attention%20to%3A%20%25s.%22%2C%20strings.Join(focusAreas%2C%20%22%2C%20%22)))%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20analysis%20of%20dataset%22%2C%20strings.Title(analysisType))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%60%25s%0A%0ADataset%20Information%3A%0A-%20Source%3A%20%25s%0A-%20Records%3A%20%25d%0A-%20Columns%3A%20%25s%0A%0ADataset%20Preview%3A%0A%25s%0A%0APlease%20provide%20a%20comprehensive%20analysis%20including%3A%0A1.%20Data%20overview%20and%20quality%20assessment%0A2.%20Key%20insights%20and%20patterns%0A3.%20Recommendations%20for%20further%20analysis%0A4.%20Potential%20issues%20or%20concerns%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20instructions.String()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20datasetURI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataset.RecordCount%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20strings.Join(dataset.Columns%2C%20%22%2C%20%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataset.Preview%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Prompt%20Arguments%0A%0A%23%23%23%20Flexible%20Parameter%20Handling%0A%0A%60%60%60go%0Afunc%20handleFlexiblePrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Required%20arguments%0A%20%20%20%20task%20%3A%3D%20req.Params.Arguments%5B%22task%22%5D.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Optional%20arguments%20with%20defaults%0A%20%20%20%20tone%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22tone%22%2C%20%22professional%22)%0A%20%20%20%20length%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22length%22%2C%20%22medium%22)%0A%20%20%20%20audience%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22audience%22%2C%20%22general%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Array%20arguments%0A%20%20%20%20keywords%20%3A%3D%20getStringSliceArg(req.Params.Arguments%2C%20%22keywords%22%2C%20%5B%5Dstring%7B%7D)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Object%20arguments%0A%20%20%20%20var%20constraints%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20c%2C%20exists%20%3A%3D%20req.Params.Arguments%5B%22constraints%22%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20constraints%20%3D%20c.(map%5Bstring%5Dinterface%7B%7D)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20prompt%20based%20on%20parameters%0A%20%20%20%20prompt%20%3A%3D%20buildDynamicPrompt(task%2C%20tone%2C%20length%2C%20audience%2C%20keywords%2C%20constraints)%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22Generate%20%25s%20content%22%2C%20task)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(prompt)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20getStringArg(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%2C%20defaultValue%20string)%20string%20%7B%0A%20%20%20%20if%20val%2C%20exists%20%3A%3D%20args%5Bkey%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20str%2C%20ok%20%3A%3D%20val.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20str%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%0Afunc%20getStringSliceArg(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%20string%2C%20defaultValue%20%5B%5Dstring)%20%5B%5Dstring%20%7B%0A%20%20%20%20if%20val%2C%20exists%20%3A%3D%20args%5Bkey%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20slice%2C%20ok%20%3A%3D%20val.(%5B%5Dinterface%7B%7D)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20make(%5B%5Dstring%2C%20len(slice))%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20i%2C%20v%20%3A%3D%20range%20slice%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20str%2C%20ok%20%3A%3D%20v.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%5Bi%5D%20%3D%20str%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%60%60%60%0A%0A%23%23%20Message%20Types%0A%0A%23%23%23%20Multi-Message%20Conversations%0A%0A%60%60%60go%0Afunc%20handleConversationPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20scenario%20%3A%3D%20req.Params.Arguments%5B%22scenario%22%5D.(string)%0A%20%20%20%20userRole%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22user_role%22%2C%20%22customer%22)%0A%20%20%20%20%0A%20%20%20%20var%20messages%20%5B%5Dmcp.PromptMessage%0A%20%20%20%20%0A%20%20%20%20switch%20scenario%20%7B%0A%20%20%20%20case%20%22customer_support%22%3A%0A%20%20%20%20%20%20%20%20messages%20%3D%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22You%20are%20a%20helpful%20customer%20support%20representative.%20Be%20polite%2C%20professional%2C%20and%20solution-oriented.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%22I'm%20a%20%25s%20with%20a%20question%20about%20your%20service.%22%2C%20userRole))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22assistant%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22Hello!%20I'm%20here%20to%20help.%20What%20can%20I%20assist%20you%20with%20today%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22Please%20continue%20the%20conversation%20based%20on%20the%20customer's%20needs.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20%22technical_interview%22%3A%0A%20%20%20%20%20%20%20%20messages%20%3D%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22You%20are%20conducting%20a%20technical%20interview.%20Ask%20thoughtful%20questions%20and%20provide%20constructive%20feedback.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22Let's%20begin%20the%20technical%20interview.%20Please%20start%20with%20an%20appropriate%20question.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20conversation%20scenario%22%2C%20strings.Title(scenario))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%20%20%20messages%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20System%20and%20User%20Roles%0A%0A%60%60%60go%0Afunc%20handleRoleBasedPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20expertise%20%3A%3D%20req.Params.Arguments%5B%22expertise%22%5D.(string)%0A%20%20%20%20task%20%3A%3D%20req.Params.Arguments%5B%22task%22%5D.(string)%0A%20%20%20%20context%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22context%22%2C%20%22%22)%0A%0A%20%20%20%20%2F%2F%20Define%20system%20message%20based%20on%20expertise%0A%20%20%20%20var%20systemMessage%20string%0A%20%20%20%20switch%20expertise%20%7B%0A%20%20%20%20case%20%22software_engineer%22%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20%22You%20are%20an%20experienced%20software%20engineer%20with%20expertise%20in%20system%20design%2C%20code%20quality%2C%20and%20best%20practices.%22%0A%20%20%20%20case%20%22data_scientist%22%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20%22You%20are%20a%20data%20scientist%20with%20expertise%20in%20statistical%20analysis%2C%20machine%20learning%2C%20and%20data%20visualization.%22%0A%20%20%20%20case%20%22product_manager%22%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20%22You%20are%20a%20product%20manager%20with%20expertise%20in%20user%20experience%2C%20market%20analysis%2C%20and%20feature%20prioritization.%22%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20fmt.Sprintf(%22You%20are%20an%20expert%20in%20%25s.%22%2C%20expertise)%0A%20%20%20%20%7D%0A%0A%20%20%20%20messages%20%3A%3D%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(systemMessage)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20context%20if%20provided%0A%20%20%20%20if%20context%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20messages%20%3D%20append(messages%2C%20mcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%22Context%3A%20%25s%22%2C%20context))%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20the%20main%20task%0A%20%20%20%20messages%20%3D%20append(messages%2C%20mcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(task)%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20task%22%2C%20strings.Title(expertise))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%20%20%20messages%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Embedded%20Resources%0A%0A%23%23%23%20Including%20Resource%20Data%0A%0A%60%60%60go%0Afunc%20handleResourceEmbeddedPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20documentURI%20%3A%3D%20req.Params.Arguments%5B%22document_uri%22%5D.(string)%0A%20%20%20%20analysisType%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22analysis_type%22%2C%20%22summary%22)%0A%0A%20%20%20%20%2F%2F%20Fetch%20the%20document%20content%0A%20%20%20%20document%2C%20err%20%3A%3D%20fetchResource(ctx%2C%20documentURI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20document%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20analysis%20prompt%20with%20embedded%20content%0A%20%20%20%20var%20instructions%20string%0A%20%20%20%20switch%20analysisType%20%7B%0A%20%20%20%20case%20%22summary%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20provide%20a%20concise%20summary%20of%20the%20key%20points%20in%20this%20document.%22%0A%20%20%20%20case%20%22critique%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20provide%20a%20critical%20analysis%20of%20the%20arguments%20and%20evidence%20presented.%22%0A%20%20%20%20case%20%22questions%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20generate%20thoughtful%20questions%20that%20this%20document%20raises%20or%20could%20be%20used%20to%20explore.%22%0A%20%20%20%20case%20%22action_items%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20extract%20actionable%20items%20and%20recommendations%20from%20this%20document.%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22Document%20%25s%22%2C%20analysisType)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%60%25s%0A%0ADocument%3A%20%25s%0AContent%3A%0A---%0A%25s%0A---%0A%0APlease%20provide%20your%20analysis%20following%20the%20instructions%20above.%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20instructions%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20documentURI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.Content%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Dynamic%20Resource%20Integration%0A%0A%60%60%60go%0Afunc%20handleDynamicResourcePrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20resourceURIs%20%3A%3D%20req.Params.Arguments%5B%22resource_uris%22%5D.(%5B%5Dinterface%7B%7D)%0A%20%20%20%20promptType%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22prompt_type%22%2C%20%22compare%22)%0A%0A%20%20%20%20%2F%2F%20Fetch%20all%20resources%0A%20%20%20%20var%20resources%20%5B%5DResourceData%0A%20%20%20%20for%20_%2C%20uri%20%3A%3D%20range%20resourceURIs%20%7B%0A%20%20%20%20%20%20%20%20if%20uriStr%2C%20ok%20%3A%3D%20uri.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20resource%2C%20err%20%3A%3D%20fetchResource(ctx%2C%20uriStr)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20resource%20%25s%3A%20%25w%22%2C%20uriStr%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20resources%20%3D%20append(resources%2C%20resource)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20prompt%20based%20on%20type%20and%20resources%0A%20%20%20%20var%20content%20strings.Builder%0A%20%20%20%20%0A%20%20%20%20switch%20promptType%20%7B%0A%20%20%20%20case%20%22compare%22%3A%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20compare%20and%20contrast%20the%20following%20documents%3A%5Cn%5Cn%22)%0A%20%20%20%20%20%20%20%20for%20i%2C%20resource%20%3A%3D%20range%20resources%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20content.WriteString(fmt.Sprintf(%22Document%20%25d%20(%25s)%3A%5Cn%25s%5Cn%5Cn%22%2C%20i%2B1%2C%20resource.URI%2C%20resource.Content))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20provide%3A%5Cn1.%20Key%20similarities%5Cn2.%20Important%20differences%5Cn3.%20Overall%20assessment%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20%22synthesize%22%3A%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20synthesize%20information%20from%20the%20following%20sources%3A%5Cn%5Cn%22)%0A%20%20%20%20%20%20%20%20for%20i%2C%20resource%20%3A%3D%20range%20resources%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20content.WriteString(fmt.Sprintf(%22Source%20%25d%20(%25s)%3A%5Cn%25s%5Cn%5Cn%22%2C%20i%2B1%2C%20resource.URI%2C%20resource.Content))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20create%20a%20unified%20analysis%20that%20incorporates%20insights%20from%20all%20sources.%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20multiple%20resources%22%2C%20strings.Title(promptType))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(content.String())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Advanced%20Prompt%20Patterns%0A%0A%23%23%23%20Conditional%20Prompts%0A%0A%60%60%60go%0Afunc%20handleConditionalPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20userLevel%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22user_level%22%2C%20%22beginner%22)%0A%20%20%20%20topic%20%3A%3D%20req.Params.Arguments%5B%22topic%22%5D.(string)%0A%20%20%20%20includeExamples%20%3A%3D%20getBoolArg(req.Params.Arguments%2C%20%22include_examples%22%2C%20true)%0A%0A%20%20%20%20var%20prompt%20strings.Builder%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Adjust%20complexity%20based%20on%20user%20level%0A%20%20%20%20switch%20userLevel%20%7B%0A%20%20%20%20case%20%22beginner%22%3A%0A%20%20%20%20%20%20%20%20prompt.WriteString(fmt.Sprintf(%22Please%20explain%20%25s%20in%20simple%20terms%20suitable%20for%20someone%20new%20to%20the%20topic.%20%22%2C%20topic))%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Use%20clear%20language%20and%20avoid%20jargon.%20%22)%0A%20%20%20%20case%20%22intermediate%22%3A%0A%20%20%20%20%20%20%20%20prompt.WriteString(fmt.Sprintf(%22Please%20provide%20a%20detailed%20explanation%20of%20%25s.%20%22%2C%20topic))%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Include%20technical%20details%20but%20ensure%20clarity.%20%22)%0A%20%20%20%20case%20%22advanced%22%3A%0A%20%20%20%20%20%20%20%20prompt.WriteString(fmt.Sprintf(%22Please%20provide%20an%20in-depth%20analysis%20of%20%25s.%20%22%2C%20topic))%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Include%20advanced%20concepts%2C%20edge%20cases%2C%20and%20technical%20nuances.%20%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20includeExamples%20%7B%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Please%20include%20relevant%20examples%20and%20practical%20applications.%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20explanation%20for%20%25s%20level%22%2C%20topic%2C%20userLevel)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(prompt.String())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20getBoolArg(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%20string%2C%20defaultValue%20bool)%20bool%20%7B%0A%20%20%20%20if%20val%2C%20exists%20%3A%3D%20args%5Bkey%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20b%2C%20ok%20%3A%3D%20val.(bool)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20b%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Template-Based%20Prompts%0A%0A%60%60%60go%0Atype%20PromptTemplate%20struct%20%7B%0A%20%20%20%20Name%20%20%20%20%20%20%20%20string%0A%20%20%20%20Description%20string%0A%20%20%20%20Template%20%20%20%20string%0A%20%20%20%20Variables%20%20%20%5B%5Dstring%0A%7D%0A%0Avar%20promptTemplates%20%3D%20map%5Bstring%5DPromptTemplate%7B%0A%20%20%20%20%22bug_report%22%3A%20%7B%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20%20%20%22Bug%20Report%20Analysis%22%2C%0A%20%20%20%20%20%20%20%20Description%3A%20%22Analyze%20a%20bug%20report%20and%20suggest%20solutions%22%2C%0A%20%20%20%20%20%20%20%20Template%3A%20%60Please%20analyze%20this%20bug%20report%3A%0A%0A**Bug%20Description%3A**%20%7B%7B.description%7D%7D%0A**Steps%20to%20Reproduce%3A**%20%7B%7B.steps%7D%7D%0A**Expected%20Behavior%3A**%20%7B%7B.expected%7D%7D%0A**Actual%20Behavior%3A**%20%7B%7B.actual%7D%7D%0A**Environment%3A**%20%7B%7B.environment%7D%7D%0A%0APlease%20provide%3A%0A1.%20Root%20cause%20analysis%0A2.%20Potential%20solutions%0A3.%20Prevention%20strategies%0A4.%20Priority%20assessment%60%2C%0A%20%20%20%20%20%20%20%20Variables%3A%20%5B%5Dstring%7B%22description%22%2C%20%22steps%22%2C%20%22expected%22%2C%20%22actual%22%2C%20%22environment%22%7D%2C%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22feature_request%22%3A%20%7B%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20%20%20%22Feature%20Request%20Evaluation%22%2C%0A%20%20%20%20%20%20%20%20Description%3A%20%22Evaluate%20a%20feature%20request%22%2C%0A%20%20%20%20%20%20%20%20Template%3A%20%60Please%20evaluate%20this%20feature%20request%3A%0A%0A**Feature%3A**%20%7B%7B.feature%7D%7D%0A**Use%20Case%3A**%20%7B%7B.use_case%7D%7D%0A**User%20Story%3A**%20%7B%7B.user_story%7D%7D%0A**Acceptance%20Criteria%3A**%20%7B%7B.criteria%7D%7D%0A%0APlease%20assess%3A%0A1.%20Business%20value%20and%20impact%0A2.%20Technical%20feasibility%0A3.%20Implementation%20complexity%0A4.%20Potential%20risks%20and%20considerations%60%2C%0A%20%20%20%20%20%20%20%20Variables%3A%20%5B%5Dstring%7B%22feature%22%2C%20%22use_case%22%2C%20%22user_story%22%2C%20%22criteria%22%7D%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%0Afunc%20handleTemplatePrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20templateName%20%3A%3D%20req.Params.Arguments%5B%22template%22%5D.(string)%0A%20%20%20%20variables%20%3A%3D%20req.Params.Arguments%5B%22variables%22%5D.(map%5Bstring%5Dinterface%7B%7D)%0A%0A%20%20%20%20template%2C%20exists%20%3A%3D%20promptTemplates%5BtemplateName%5D%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20template%3A%20%25s%22%2C%20templateName)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Replace%20template%20variables%0A%20%20%20%20content%20%3A%3D%20template.Template%0A%20%20%20%20for%20_%2C%20variable%20%3A%3D%20range%20template.Variables%20%7B%0A%20%20%20%20%20%20%20%20if%20value%2C%20exists%20%3A%3D%20variables%5Bvariable%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placeholder%20%3A%3D%20fmt.Sprintf(%22%7B%7B.%25s%7D%7D%22%2C%20variable)%0A%20%20%20%20%20%20%20%20%20%20%20%20content%20%3D%20strings.ReplaceAll(content%2C%20placeholder%2C%20fmt.Sprintf(%22%25v%22%2C%20value))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20template.Description%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(content)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20typed%20tools%2C%20middleware%2C%20and%20hooks%0A-%20**%5BClient%20Integration%5D(%2Fclients)**%20-%20Learn%20how%20to%20build%20MCP%20clients%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Learn%20about%20implementing%20server%20tools",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./prompts-BwMG7Ce3.js"),[]),path:"/servers/prompts.html",type:"mdx",filePath:"servers/prompts.mdx",content:"%23%20Implementing%20Prompts%0A%0APrompts%20are%20reusable%20interaction%20templates%20that%20help%20structure%20conversations%20between%20users%20and%20LLMs.%20They%20provide%20context%2C%20instructions%2C%20and%20can%20include%20dynamic%20content%20from%20resources.%0A%0A%23%23%20Prompt%20Fundamentals%0A%0APrompts%20in%20MCP%20serve%20as%20templates%20that%20can%20be%20invoked%20by%20LLMs%20to%20generate%20structured%20interactions.%20They're%20particularly%20useful%20for%20complex%20workflows%2C%20analysis%20tasks%2C%20or%20any%20scenario%20where%20you%20want%20to%20provide%20consistent%20context%20and%20instructions.%0A%0A%23%23%23%20Basic%20Prompt%20Structure%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20simple%20prompt%0Aprompt%20%3A%3D%20mcp.NewPrompt(%22code_review%22%2C%0A%20%20%20%20mcp.WithPromptDescription(%22Review%20code%20for%20best%20practices%20and%20issues%22)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22code%22%2C%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22The%20code%20to%20review%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithPromptArgument(%22language%22%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Programming%20language%22)%2C%0A%20%20%20%20%20%20%20%20mcp.Default(%22auto-detect%22)%2C%0A%20%20%20%20)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Prompt%20Templates%0A%0A%23%23%23%20Basic%20Code%20Review%20Prompt%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Code%20Assistant%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Code%20review%20prompt%0A%20%20%20%20codeReviewPrompt%20%3A%3D%20mcp.NewPrompt(%22code_review%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptDescription(%22Review%20code%20for%20best%20practices%2C%20bugs%2C%20and%20improvements%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptArgument(%22code%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22The%20code%20to%20review%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptArgument(%22language%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Programming%20language%20(auto-detected%20if%20not%20specified)%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithPromptArgument(%22focus%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Specific%20areas%20to%20focus%20on%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Enum(%22security%22%2C%20%22performance%22%2C%20%22readability%22%2C%20%22best-practices%22%2C%20%22all%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Default(%22all%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddPrompt(codeReviewPrompt%2C%20handleCodeReview)%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleCodeReview(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20arguments%20safely%0A%20%20%20%20args%20%3A%3D%20req.Params.Arguments%0A%20%20%20%20if%20args%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22missing%20required%20arguments%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20code%2C%20ok%20%3A%3D%20args%5B%22code%22%5D.(string)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22code%20argument%20is%20required%20and%20must%20be%20a%20string%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20language%20%3A%3D%20getStringArg(args%2C%20%22language%22%2C%20%22auto-detect%22)%0A%20%20%20%20focus%20%3A%3D%20getStringArg(args%2C%20%22focus%22%2C%20%22all%22)%0A%0A%20%20%20%20%2F%2F%20Build%20the%20prompt%20based%20on%20focus%20area%0A%20%20%20%20var%20instructions%20string%0A%20%20%20%20switch%20focus%20%7B%0A%20%20%20%20case%20%22security%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20specifically%20on%20security%20vulnerabilities%2C%20input%20validation%2C%20and%20potential%20attack%20vectors.%22%0A%20%20%20%20case%20%22performance%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20on%20performance%20optimizations%2C%20algorithmic%20efficiency%2C%20and%20resource%20usage.%22%0A%20%20%20%20case%20%22readability%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20on%20code%20clarity%2C%20naming%20conventions%2C%20and%20maintainability.%22%0A%20%20%20%20case%20%22best-practices%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Focus%20on%20language-specific%20best%20practices%20and%20design%20patterns.%22%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Provide%20a%20comprehensive%20review%20covering%20security%2C%20performance%2C%20readability%2C%20and%20best%20practices.%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22Code%20review%20for%20%25s%20code%22%2C%20language)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Please%20review%20the%20following%20%25s%20code%3A%5Cn%5Cn%25s%5Cn%5CnInstructions%3A%20%25s%5Cn%5CnPlease%20provide%3A%5Cn1.%20Overall%20assessment%5Cn2.%20Specific%20issues%20found%5Cn3.%20Suggested%20improvements%5Cn4.%20Best%20practice%20recommendations%5Cn%5CnCode%3A%5Cn%0A%60%60%60%0A%0A%23%23%23%20Data%20Analysis%20Prompt%0A%0A%60%60%60go%0Afunc%20handleDataAnalysis(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20datasetURI%20%3A%3D%20req.Params.Arguments%5B%22dataset_uri%22%5D.(string)%0A%20%20%20%20analysisType%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22analysis_type%22%2C%20%22exploratory%22)%0A%20%20%20%20focusAreas%20%3A%3D%20getStringSliceArg(req.Params.Arguments%2C%20%22focus_areas%22%2C%20%5B%5Dstring%7B%7D)%0A%0A%20%20%20%20%2F%2F%20Fetch%20the%20dataset%20(this%20would%20typically%20read%20from%20a%20resource)%0A%20%20%20%20dataset%2C%20err%20%3A%3D%20fetchDataset(ctx%2C%20datasetURI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20dataset%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20analysis%20instructions%0A%20%20%20%20var%20instructions%20strings.Builder%0A%20%20%20%20instructions.WriteString(%22Please%20analyze%20the%20provided%20dataset.%20%22)%0A%0A%20%20%20%20switch%20analysisType%20%7B%0A%20%20%20%20case%20%22exploratory%22%3A%0A%20%20%20%20%20%20%20%20instructions.WriteString(%22Perform%20exploratory%20data%20analysis%20including%20summary%20statistics%2C%20distributions%2C%20and%20patterns.%22)%0A%20%20%20%20case%20%22predictive%22%3A%0A%20%20%20%20%20%20%20%20instructions.WriteString(%22Focus%20on%20predictive%20modeling%20opportunities%20and%20feature%20relationships.%22)%0A%20%20%20%20case%20%22diagnostic%22%3A%0A%20%20%20%20%20%20%20%20instructions.WriteString(%22Identify%20data%20quality%20issues%2C%20outliers%2C%20and%20potential%20problems.%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20len(focusAreas)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20instructions.WriteString(fmt.Sprintf(%22%20Pay%20special%20attention%20to%3A%20%25s.%22%2C%20strings.Join(focusAreas%2C%20%22%2C%20%22)))%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20analysis%20of%20dataset%22%2C%20strings.Title(analysisType))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%60%25s%0A%0ADataset%20Information%3A%0A-%20Source%3A%20%25s%0A-%20Records%3A%20%25d%0A-%20Columns%3A%20%25s%0A%0ADataset%20Preview%3A%0A%25s%0A%0APlease%20provide%20a%20comprehensive%20analysis%20including%3A%0A1.%20Data%20overview%20and%20quality%20assessment%0A2.%20Key%20insights%20and%20patterns%0A3.%20Recommendations%20for%20further%20analysis%0A4.%20Potential%20issues%20or%20concerns%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20instructions.String()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20datasetURI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataset.RecordCount%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20strings.Join(dataset.Columns%2C%20%22%2C%20%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataset.Preview%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Prompt%20Arguments%0A%0A%23%23%23%20Flexible%20Parameter%20Handling%0A%0A%60%60%60go%0Afunc%20handleFlexiblePrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Required%20arguments%0A%20%20%20%20task%20%3A%3D%20req.Params.Arguments%5B%22task%22%5D.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Optional%20arguments%20with%20defaults%0A%20%20%20%20tone%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22tone%22%2C%20%22professional%22)%0A%20%20%20%20length%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22length%22%2C%20%22medium%22)%0A%20%20%20%20audience%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22audience%22%2C%20%22general%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Array%20arguments%0A%20%20%20%20keywords%20%3A%3D%20getStringSliceArg(req.Params.Arguments%2C%20%22keywords%22%2C%20%5B%5Dstring%7B%7D)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Object%20arguments%0A%20%20%20%20var%20constraints%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20c%2C%20exists%20%3A%3D%20req.Params.Arguments%5B%22constraints%22%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20constraints%20%3D%20c.(map%5Bstring%5Dinterface%7B%7D)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20prompt%20based%20on%20parameters%0A%20%20%20%20prompt%20%3A%3D%20buildDynamicPrompt(task%2C%20tone%2C%20length%2C%20audience%2C%20keywords%2C%20constraints)%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22Generate%20%25s%20content%22%2C%20task)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(prompt)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20getStringArg(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%2C%20defaultValue%20string)%20string%20%7B%0A%20%20%20%20if%20val%2C%20exists%20%3A%3D%20args%5Bkey%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20str%2C%20ok%20%3A%3D%20val.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20str%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%0Afunc%20getStringSliceArg(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%20string%2C%20defaultValue%20%5B%5Dstring)%20%5B%5Dstring%20%7B%0A%20%20%20%20if%20val%2C%20exists%20%3A%3D%20args%5Bkey%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20slice%2C%20ok%20%3A%3D%20val.(%5B%5Dinterface%7B%7D)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20make(%5B%5Dstring%2C%20len(slice))%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20i%2C%20v%20%3A%3D%20range%20slice%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20str%2C%20ok%20%3A%3D%20v.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%5Bi%5D%20%3D%20str%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%60%60%60%0A%0A%23%23%20Message%20Types%0A%0A%23%23%23%20Multi-Message%20Conversations%0A%0A%60%60%60go%0Afunc%20handleConversationPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20scenario%20%3A%3D%20req.Params.Arguments%5B%22scenario%22%5D.(string)%0A%20%20%20%20userRole%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22user_role%22%2C%20%22customer%22)%0A%20%20%20%20%0A%20%20%20%20var%20messages%20%5B%5Dmcp.PromptMessage%0A%20%20%20%20%0A%20%20%20%20switch%20scenario%20%7B%0A%20%20%20%20case%20%22customer_support%22%3A%0A%20%20%20%20%20%20%20%20messages%20%3D%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22You%20are%20a%20helpful%20customer%20support%20representative.%20Be%20polite%2C%20professional%2C%20and%20solution-oriented.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%22I'm%20a%20%25s%20with%20a%20question%20about%20your%20service.%22%2C%20userRole))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22assistant%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22Hello!%20I'm%20here%20to%20help.%20What%20can%20I%20assist%20you%20with%20today%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22Please%20continue%20the%20conversation%20based%20on%20the%20customer's%20needs.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20%22technical_interview%22%3A%0A%20%20%20%20%20%20%20%20messages%20%3D%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22You%20are%20conducting%20a%20technical%20interview.%20Ask%20thoughtful%20questions%20and%20provide%20constructive%20feedback.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(%22Let's%20begin%20the%20technical%20interview.%20Please%20start%20with%20an%20appropriate%20question.%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20conversation%20scenario%22%2C%20strings.Title(scenario))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%20%20%20messages%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20System%20and%20User%20Roles%0A%0A%60%60%60go%0Afunc%20handleRoleBasedPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20expertise%20%3A%3D%20req.Params.Arguments%5B%22expertise%22%5D.(string)%0A%20%20%20%20task%20%3A%3D%20req.Params.Arguments%5B%22task%22%5D.(string)%0A%20%20%20%20context%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22context%22%2C%20%22%22)%0A%0A%20%20%20%20%2F%2F%20Define%20system%20message%20based%20on%20expertise%0A%20%20%20%20var%20systemMessage%20string%0A%20%20%20%20switch%20expertise%20%7B%0A%20%20%20%20case%20%22software_engineer%22%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20%22You%20are%20an%20experienced%20software%20engineer%20with%20expertise%20in%20system%20design%2C%20code%20quality%2C%20and%20best%20practices.%22%0A%20%20%20%20case%20%22data_scientist%22%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20%22You%20are%20a%20data%20scientist%20with%20expertise%20in%20statistical%20analysis%2C%20machine%20learning%2C%20and%20data%20visualization.%22%0A%20%20%20%20case%20%22product_manager%22%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20%22You%20are%20a%20product%20manager%20with%20expertise%20in%20user%20experience%2C%20market%20analysis%2C%20and%20feature%20prioritization.%22%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20systemMessage%20%3D%20fmt.Sprintf(%22You%20are%20an%20expert%20in%20%25s.%22%2C%20expertise)%0A%20%20%20%20%7D%0A%0A%20%20%20%20messages%20%3A%3D%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(systemMessage)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20context%20if%20provided%0A%20%20%20%20if%20context%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20messages%20%3D%20append(messages%2C%20mcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%22Context%3A%20%25s%22%2C%20context))%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Add%20the%20main%20task%0A%20%20%20%20messages%20%3D%20append(messages%2C%20mcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(task)%2C%0A%20%20%20%20%7D)%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20task%22%2C%20strings.Title(expertise))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%20%20%20messages%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Embedded%20Resources%0A%0A%23%23%23%20Including%20Resource%20Data%0A%0A%60%60%60go%0Afunc%20handleResourceEmbeddedPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20documentURI%20%3A%3D%20req.Params.Arguments%5B%22document_uri%22%5D.(string)%0A%20%20%20%20analysisType%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22analysis_type%22%2C%20%22summary%22)%0A%0A%20%20%20%20%2F%2F%20Fetch%20the%20document%20content%0A%20%20%20%20document%2C%20err%20%3A%3D%20fetchResource(ctx%2C%20documentURI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20document%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20analysis%20prompt%20with%20embedded%20content%0A%20%20%20%20var%20instructions%20string%0A%20%20%20%20switch%20analysisType%20%7B%0A%20%20%20%20case%20%22summary%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20provide%20a%20concise%20summary%20of%20the%20key%20points%20in%20this%20document.%22%0A%20%20%20%20case%20%22critique%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20provide%20a%20critical%20analysis%20of%20the%20arguments%20and%20evidence%20presented.%22%0A%20%20%20%20case%20%22questions%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20generate%20thoughtful%20questions%20that%20this%20document%20raises%20or%20could%20be%20used%20to%20explore.%22%0A%20%20%20%20case%20%22action_items%22%3A%0A%20%20%20%20%20%20%20%20instructions%20%3D%20%22Please%20extract%20actionable%20items%20and%20recommendations%20from%20this%20document.%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22Document%20%25s%22%2C%20analysisType)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(fmt.Sprintf(%60%25s%0A%0ADocument%3A%20%25s%0AContent%3A%0A---%0A%25s%0A---%0A%0APlease%20provide%20your%20analysis%20following%20the%20instructions%20above.%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20instructions%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20documentURI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20document.Content%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Dynamic%20Resource%20Integration%0A%0A%60%60%60go%0Afunc%20handleDynamicResourcePrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20resourceURIs%20%3A%3D%20req.Params.Arguments%5B%22resource_uris%22%5D.(%5B%5Dinterface%7B%7D)%0A%20%20%20%20promptType%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22prompt_type%22%2C%20%22compare%22)%0A%0A%20%20%20%20%2F%2F%20Fetch%20all%20resources%0A%20%20%20%20var%20resources%20%5B%5DResourceData%0A%20%20%20%20for%20_%2C%20uri%20%3A%3D%20range%20resourceURIs%20%7B%0A%20%20%20%20%20%20%20%20if%20uriStr%2C%20ok%20%3A%3D%20uri.(string)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20resource%2C%20err%20%3A%3D%20fetchResource(ctx%2C%20uriStr)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20resource%20%25s%3A%20%25w%22%2C%20uriStr%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20resources%20%3D%20append(resources%2C%20resource)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20prompt%20based%20on%20type%20and%20resources%0A%20%20%20%20var%20content%20strings.Builder%0A%20%20%20%20%0A%20%20%20%20switch%20promptType%20%7B%0A%20%20%20%20case%20%22compare%22%3A%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20compare%20and%20contrast%20the%20following%20documents%3A%5Cn%5Cn%22)%0A%20%20%20%20%20%20%20%20for%20i%2C%20resource%20%3A%3D%20range%20resources%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20content.WriteString(fmt.Sprintf(%22Document%20%25d%20(%25s)%3A%5Cn%25s%5Cn%5Cn%22%2C%20i%2B1%2C%20resource.URI%2C%20resource.Content))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20provide%3A%5Cn1.%20Key%20similarities%5Cn2.%20Important%20differences%5Cn3.%20Overall%20assessment%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20%22synthesize%22%3A%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20synthesize%20information%20from%20the%20following%20sources%3A%5Cn%5Cn%22)%0A%20%20%20%20%20%20%20%20for%20i%2C%20resource%20%3A%3D%20range%20resources%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20content.WriteString(fmt.Sprintf(%22Source%20%25d%20(%25s)%3A%5Cn%25s%5Cn%5Cn%22%2C%20i%2B1%2C%20resource.URI%2C%20resource.Content))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20content.WriteString(%22Please%20create%20a%20unified%20analysis%20that%20incorporates%20insights%20from%20all%20sources.%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20multiple%20resources%22%2C%20strings.Title(promptType))%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(content.String())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Advanced%20Prompt%20Patterns%0A%0A%23%23%23%20Conditional%20Prompts%0A%0A%60%60%60go%0Afunc%20handleConditionalPrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20userLevel%20%3A%3D%20getStringArg(req.Params.Arguments%2C%20%22user_level%22%2C%20%22beginner%22)%0A%20%20%20%20topic%20%3A%3D%20req.Params.Arguments%5B%22topic%22%5D.(string)%0A%20%20%20%20includeExamples%20%3A%3D%20getBoolArg(req.Params.Arguments%2C%20%22include_examples%22%2C%20true)%0A%0A%20%20%20%20var%20prompt%20strings.Builder%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Adjust%20complexity%20based%20on%20user%20level%0A%20%20%20%20switch%20userLevel%20%7B%0A%20%20%20%20case%20%22beginner%22%3A%0A%20%20%20%20%20%20%20%20prompt.WriteString(fmt.Sprintf(%22Please%20explain%20%25s%20in%20simple%20terms%20suitable%20for%20someone%20new%20to%20the%20topic.%20%22%2C%20topic))%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Use%20clear%20language%20and%20avoid%20jargon.%20%22)%0A%20%20%20%20case%20%22intermediate%22%3A%0A%20%20%20%20%20%20%20%20prompt.WriteString(fmt.Sprintf(%22Please%20provide%20a%20detailed%20explanation%20of%20%25s.%20%22%2C%20topic))%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Include%20technical%20details%20but%20ensure%20clarity.%20%22)%0A%20%20%20%20case%20%22advanced%22%3A%0A%20%20%20%20%20%20%20%20prompt.WriteString(fmt.Sprintf(%22Please%20provide%20an%20in-depth%20analysis%20of%20%25s.%20%22%2C%20topic))%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Include%20advanced%20concepts%2C%20edge%20cases%2C%20and%20technical%20nuances.%20%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20includeExamples%20%7B%0A%20%20%20%20%20%20%20%20prompt.WriteString(%22Please%20include%20relevant%20examples%20and%20practical%20applications.%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20fmt.Sprintf(%22%25s%20explanation%20for%20%25s%20level%22%2C%20topic%2C%20userLevel)%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(prompt.String())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20getBoolArg(args%20map%5Bstring%5Dinterface%7B%7D%2C%20key%20string%2C%20defaultValue%20bool)%20bool%20%7B%0A%20%20%20%20if%20val%2C%20exists%20%3A%3D%20args%5Bkey%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20b%2C%20ok%20%3A%3D%20val.(bool)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20b%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20defaultValue%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Template-Based%20Prompts%0A%0A%60%60%60go%0Atype%20PromptTemplate%20struct%20%7B%0A%20%20%20%20Name%20%20%20%20%20%20%20%20string%0A%20%20%20%20Description%20string%0A%20%20%20%20Template%20%20%20%20string%0A%20%20%20%20Variables%20%20%20%5B%5Dstring%0A%7D%0A%0Avar%20promptTemplates%20%3D%20map%5Bstring%5DPromptTemplate%7B%0A%20%20%20%20%22bug_report%22%3A%20%7B%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20%20%20%22Bug%20Report%20Analysis%22%2C%0A%20%20%20%20%20%20%20%20Description%3A%20%22Analyze%20a%20bug%20report%20and%20suggest%20solutions%22%2C%0A%20%20%20%20%20%20%20%20Template%3A%20%60Please%20analyze%20this%20bug%20report%3A%0A%0A**Bug%20Description%3A**%20%7B%7B.description%7D%7D%0A**Steps%20to%20Reproduce%3A**%20%7B%7B.steps%7D%7D%0A**Expected%20Behavior%3A**%20%7B%7B.expected%7D%7D%0A**Actual%20Behavior%3A**%20%7B%7B.actual%7D%7D%0A**Environment%3A**%20%7B%7B.environment%7D%7D%0A%0APlease%20provide%3A%0A1.%20Root%20cause%20analysis%0A2.%20Potential%20solutions%0A3.%20Prevention%20strategies%0A4.%20Priority%20assessment%60%2C%0A%20%20%20%20%20%20%20%20Variables%3A%20%5B%5Dstring%7B%22description%22%2C%20%22steps%22%2C%20%22expected%22%2C%20%22actual%22%2C%20%22environment%22%7D%2C%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22feature_request%22%3A%20%7B%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20%20%20%22Feature%20Request%20Evaluation%22%2C%0A%20%20%20%20%20%20%20%20Description%3A%20%22Evaluate%20a%20feature%20request%22%2C%0A%20%20%20%20%20%20%20%20Template%3A%20%60Please%20evaluate%20this%20feature%20request%3A%0A%0A**Feature%3A**%20%7B%7B.feature%7D%7D%0A**Use%20Case%3A**%20%7B%7B.use_case%7D%7D%0A**User%20Story%3A**%20%7B%7B.user_story%7D%7D%0A**Acceptance%20Criteria%3A**%20%7B%7B.criteria%7D%7D%0A%0APlease%20assess%3A%0A1.%20Business%20value%20and%20impact%0A2.%20Technical%20feasibility%0A3.%20Implementation%20complexity%0A4.%20Potential%20risks%20and%20considerations%60%2C%0A%20%20%20%20%20%20%20%20Variables%3A%20%5B%5Dstring%7B%22feature%22%2C%20%22use_case%22%2C%20%22user_story%22%2C%20%22criteria%22%7D%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%0Afunc%20handleTemplatePrompt(ctx%20context.Context%2C%20req%20mcp.GetPromptRequest)%20(*mcp.GetPromptResult%2C%20error)%20%7B%0A%20%20%20%20templateName%20%3A%3D%20req.Params.Arguments%5B%22template%22%5D.(string)%0A%20%20%20%20variables%20%3A%3D%20req.Params.Arguments%5B%22variables%22%5D.(map%5Bstring%5Dinterface%7B%7D)%0A%0A%20%20%20%20template%2C%20exists%20%3A%3D%20promptTemplates%5BtemplateName%5D%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20template%3A%20%25s%22%2C%20templateName)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Replace%20template%20variables%0A%20%20%20%20content%20%3A%3D%20template.Template%0A%20%20%20%20for%20_%2C%20variable%20%3A%3D%20range%20template.Variables%20%7B%0A%20%20%20%20%20%20%20%20if%20value%2C%20exists%20%3A%3D%20variables%5Bvariable%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20placeholder%20%3A%3D%20fmt.Sprintf(%22%7B%7B.%25s%7D%7D%22%2C%20variable)%0A%20%20%20%20%20%20%20%20%20%20%20%20content%20%3D%20strings.ReplaceAll(content%2C%20placeholder%2C%20fmt.Sprintf(%22%25v%22%2C%20value))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.GetPromptResult%7B%0A%20%20%20%20%20%20%20%20Description%3A%20template.Description%2C%0A%20%20%20%20%20%20%20%20Messages%3A%20%5B%5Dmcp.PromptMessage%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Role%3A%20%22user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%3A%20mcp.NewTextContent(content)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20typed%20tools%2C%20middleware%2C%20and%20hooks%0A-%20**%5BClient%20Integration%5D(%2Fclients)**%20-%20Learn%20how%20to%20build%20MCP%20clients%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Learn%20about%20implementing%20server%20tools",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./resources-BlADHzA9.js"),[]),path:"/servers/resources",type:"mdx",filePath:"servers/resources.mdx",content:"%23%20Implementing%20Resources%0A%0AResources%20expose%20data%20to%20LLMs%20in%20a%20read-only%20manner.%20Think%20of%20them%20as%20GET%20endpoints%20that%20provide%20access%20to%20files%2C%20databases%2C%20APIs%2C%20or%20any%20other%20data%20source.%0A%0A%23%23%20Resource%20Fundamentals%0A%0AResources%20in%20MCP%20are%20identified%20by%20URIs%20and%20can%20be%20either%20static%20(fixed%20content)%20or%20dynamic%20(generated%20on-demand).%20They're%20perfect%20for%20giving%20LLMs%20access%20to%20documentation%2C%20configuration%20files%2C%20database%20records%2C%20or%20API%20responses.%0A%0A%23%23%23%20Basic%20Resource%20Structure%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20simple%20resource%0Aresource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22docs%3A%2F%2Freadme%22%2C%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20URI%20-%20unique%20identifier%0A%20%20%20%20%22Project%20README%22%2C%20%20%20%20%20%20%20%20%20%20%2F%2F%20Name%20-%20human-readable%0A%20%20%20%20mcp.WithResourceDescription(%22Main%20project%20documentation%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Static%20Resources%0A%0AStatic%20resources%20have%20fixed%20URIs%20and%20typically%20serve%20predetermined%20content.%0A%0A%23%23%23%20File-Based%20Resources%0A%0AExpose%20files%20from%20your%20filesystem%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22File%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20static%20file%20resource%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22file%3A%2F%2FREADME.md%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Project%20README%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Main%20project%20documentation%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleReadmeFile%2C%0A%20%20%20%20)%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleReadmeFile(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20content%2C%20err%20%3A%3D%20os.ReadFile(%22README.md%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20README%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22text%2Fmarkdown%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(content)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Configuration%20Resources%0A%0AExpose%20application%20configuration%3A%0A%0A%60%60%60go%0A%2F%2F%20Configuration%20resource%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22config%3A%2F%2Fapp%22%2C%0A%20%20%20%20%20%20%20%20%22Application%20Configuration%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Current%20application%20settings%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleAppConfig%2C%0A)%0A%0Afunc%20handleAppConfig(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20config%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22database_url%22%3A%20os.Getenv(%22DATABASE_URL%22)%2C%0A%20%20%20%20%20%20%20%20%22debug_mode%22%3A%20%20%20os.Getenv(%22DEBUG%22)%20%3D%3D%20%22true%22%2C%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%22features%22%3A%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22authentication%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22caching%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%22logging%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20configJSON%2C%20err%20%3A%3D%20json.Marshal(config)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(configJSON)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Resources%0A%0ADynamic%20resources%20use%20URI%20templates%20with%20parameters%2C%20allowing%20for%20flexible%2C%20parameterized%20access%20to%20data.%0A%0A%23%23%23%20URI%20Templates%0A%0AUse%20%60%7Bparameter%7D%60%20syntax%20for%20dynamic%20parts%3A%0A%0A%60%60%60go%0A%2F%2F%20User%20profile%20resource%20with%20dynamic%20user%20ID%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22users%3A%2F%2F%7Buser_id%7D%22%2C%0A%20%20%20%20%20%20%20%20%22User%20Profile%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22User%20profile%20information%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleUserProfile%2C%0A)%0A%0Afunc%20handleUserProfile(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20user_id%20from%20URI%0A%20%20%20%20userID%20%3A%3D%20extractUserID(req.Params.URI)%20%2F%2F%20%22users%3A%2F%2F123%22%20-%3E%20%22123%22%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Fetch%20user%20data%20(from%20database%2C%20API%2C%20etc.)%0A%20%20%20%20user%2C%20err%20%3A%3D%20getUserFromDB(userID)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22user%20not%20found%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(user)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20extractUserID(uri%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Extract%20ID%20from%20%22users%3A%2F%2F123%22%20format%0A%20%20%20%20parts%20%3A%3D%20strings.Split(uri%2C%20%22%3A%2F%2F%22)%0A%20%20%20%20if%20len(parts)%20%3D%3D%202%20%7B%0A%20%20%20%20%20%20%20%20return%20parts%5B1%5D%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22%22%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Database%20Resources%0A%0AExpose%20database%20records%20dynamically%3A%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22database%2Fsql%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0A%2F%2F%20Database%20table%20resource%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22db%3A%2F%2F%7Btable%7D%2F%7Bid%7D%22%2C%0A%20%20%20%20%20%20%20%20%22Database%20Record%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Access%20database%20records%20by%20table%20and%20ID%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleDatabaseRecord%2C%0A)%0A%0Afunc%20handleDatabaseRecord(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20table%2C%20id%20%3A%3D%20parseDBURI(req.Params.URI)%20%2F%2F%20%22db%3A%2F%2Fusers%2F123%22%20-%3E%20%22users%22%2C%20%22123%22%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20table%20name%20for%20security%0A%20%20%20%20allowedTables%20%3A%3D%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22users%22%3A%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20%22products%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%22orders%22%3A%20%20%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20!allowedTables%5Btable%5D%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22table%20not%20accessible%3A%20%25s%22%2C%20table)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Query%20database%0A%20%20%20%20query%20%3A%3D%20fmt.Sprintf(%22SELECT%20*%20FROM%20%25s%20WHERE%20id%20%3D%20%3F%22%2C%20table)%0A%20%20%20%20row%20%3A%3D%20db.QueryRowContext(ctx%2C%20query%2C%20id)%0A%20%20%20%20%0A%20%20%20%20var%20data%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20err%20%3A%3D%20scanRowToMap(row%2C%20%26data)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22record%20not%20found%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20API%20Resources%0A%0AProxy%20external%20APIs%20through%20resources%3A%0A%0A%60%60%60go%0A%2F%2F%20Weather%20API%20resource%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22weather%3A%2F%2F%7Blocation%7D%22%2C%0A%20%20%20%20%20%20%20%20%22Weather%20Data%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Current%20weather%20for%20a%20location%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleWeatherData%2C%0A)%0A%0Afunc%20handleWeatherData(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20location%20%3A%3D%20extractLocation(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Call%20external%20weather%20API%0A%20%20%20%20apiURL%20%3A%3D%20fmt.Sprintf(%22https%3A%2F%2Fapi.weather.com%2Fv1%2Fcurrent%3Flocation%3D%25s%26key%3D%25s%22%2C%20%0A%20%20%20%20%20%20%20%20url.QueryEscape(location)%2C%20os.Getenv(%22WEATHER_API_KEY%22))%0A%20%20%20%20%0A%20%20%20%20resp%2C%20err%20%3A%3D%20http.Get(apiURL)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22weather%20API%20error%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20resp.Body.Close()%0A%0A%20%20%20%20body%2C%20err%20%3A%3D%20io.ReadAll(resp.Body)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20response%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(body)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Content%20Types%0A%0AResources%20can%20serve%20different%20types%20of%20content%20with%20appropriate%20MIME%20types.%0A%0A%23%23%23%20Text%20Content%0A%0A%60%60%60go%0Afunc%20handleTextResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20content%20%3A%3D%20%22This%20is%20plain%20text%20content%22%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22text%2Fplain%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20content%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20JSON%20Content%0A%0A%60%60%60go%0Afunc%20handleJSONResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(%5B%5Dmcp.ResourceContents%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22message%22%3A%20%22Hello%2C%20World!%22%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22success%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Binary%20Content%0A%0A%60%60%60go%0Afunc%20handleImageResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20imageData%2C%20err%20%3A%3D%20os.ReadFile(%22logo.png%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Encode%20binary%20data%20as%20base64%0A%20%20%20%20encoded%20%3A%3D%20base64.StdEncoding.EncodeToString(imageData)%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22image%2Fpng%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Blob%3A%20%20%20%20%20encoded%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multiple%20Content%20Types%0A%0AA%20single%20resource%20can%20return%20multiple%20content%20representations%3A%0A%0A%60%60%60go%0Afunc%20handleMultiFormatResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%22John%20Doe%22%2C%0A%20%20%20%20%20%20%20%20%22age%22%3A%20%2030%2C%0A%20%20%20%20%20%20%20%20%22city%22%3A%20%22New%20York%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20JSON%20representation%0A%20%20%20%20jsonData%2C%20_%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Text%20representation%20%20%0A%20%20%20%20textData%20%3A%3D%20fmt.Sprintf(%22Name%3A%20%25s%5CnAge%3A%20%25d%5CnCity%3A%20%25s%22%2C%20%0A%20%20%20%20%20%20%20%20data%5B%22name%22%5D%2C%20data%5B%22age%22%5D%2C%20data%5B%22city%22%5D)%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22text%2Fplain%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20textData%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AProper%20error%20handling%20ensures%20robust%20resource%20access%3A%0A%0A%23%23%23%20Common%20Error%20Patterns%0A%0A%60%60%60go%0Afunc%20handleResourceWithErrors(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Validate%20URI%20format%0A%20%20%20%20if%20!isValidURI(req.Params.URI)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20URI%20format%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20permissions%0A%20%20%20%20if%20!hasPermission(ctx%2C%20req.Params.URI)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22access%20denied%20to%20resource%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20resource%20not%20found%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchResourceData(req.Params.URI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20ErrResourceNotFound)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22resource%20not%20found%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20resource%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Timeout%20Handling%0A%0A%60%60%60go%0Afunc%20handleResourceWithTimeout(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20timeout%20context%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20context%20in%20operations%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchDataWithContext(ctx%2C%20req.Params.URI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.DeadlineExceeded)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22resource%20fetch%20timeout%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Resource%20Listing%0A%0AImplement%20resource%20discovery%20for%20clients%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Resource%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20multiple%20resources%0A%20%20%20%20resources%20%3A%3D%20%5B%5Dstruct%20%7B%0A%20%20%20%20%20%20%20%20uri%20%20%20%20%20%20%20%20%20string%0A%20%20%20%20%20%20%20%20name%20%20%20%20%20%20%20%20string%0A%20%20%20%20%20%20%20%20description%20string%0A%20%20%20%20%20%20%20%20mimeType%20%20%20%20string%0A%20%20%20%20%20%20%20%20handler%20%20%20%20%20server.ResourceHandler%0A%20%20%20%20%7D%7B%0A%20%20%20%20%20%20%20%20%7B%22docs%3A%2F%2Freadme%22%2C%20%22README%22%2C%20%22Project%20documentation%22%2C%20%22text%2Fmarkdown%22%2C%20handleReadme%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22config%3A%2F%2Fapp%22%2C%20%22App%20Config%22%2C%20%22Application%20settings%22%2C%20%22application%2Fjson%22%2C%20handleConfig%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22users%3A%2F%2F%7Bid%7D%22%2C%20%22User%20Profile%22%2C%20%22User%20information%22%2C%20%22application%2Fjson%22%2C%20handleUser%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20for%20_%2C%20r%20%3A%3D%20range%20resources%20%7B%0A%20%20%20%20%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.NewResource(r.uri%2C%20r.name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(r.description)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(r.mimeType)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20r.handler%2C%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%7D%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%60%60%60%0A%0A%23%23%20Caching%20Resources%0A%0AImplement%20caching%20for%20expensive%20resources%3A%0A%0A%60%60%60go%0Atype%20CachedResourceHandler%20struct%20%7B%0A%20%20%20%20cache%20map%5Bstring%5DcacheEntry%0A%20%20%20%20mutex%20sync.RWMutex%0A%20%20%20%20ttl%20%20%20time.Duration%0A%7D%0A%0Atype%20cacheEntry%20struct%20%7B%0A%20%20%20%20data%20%20%20%20%20%20*mcp.ReadResourceResult%0A%20%20%20%20timestamp%20time.Time%0A%7D%0A%0Afunc%20(h%20*CachedResourceHandler)%20HandleResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20h.mutex.RLock()%0A%20%20%20%20if%20entry%2C%20exists%20%3A%3D%20h.cache%5Breq.Params.URI%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20time.Since(entry.timestamp)%20%3C%20h.ttl%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20h.mutex.RUnlock()%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20entry.data%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20h.mutex.RUnlock()%0A%0A%20%20%20%20%2F%2F%20Fetch%20fresh%20data%0A%20%20%20%20data%2C%20err%20%3A%3D%20h.fetchFreshData(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Cache%20the%20result%0A%20%20%20%20h.mutex.Lock()%0A%20%20%20%20h.cache%5Breq.Params.URI%5D%20%3D%20cacheEntry%7B%0A%20%20%20%20%20%20%20%20data%3A%20%20%20%20%20%20data%2C%0A%20%20%20%20%20%20%20%20timestamp%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%20%20%20%20h.mutex.Unlock()%0A%0A%20%20%20%20return%20data%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Learn%20to%20implement%20interactive%20functionality%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Create%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20hooks%2C%20middleware%2C%20and%20more",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./resources-BlADHzA9.js"),[]),path:"/servers/resources.html",type:"mdx",filePath:"servers/resources.mdx",content:"%23%20Implementing%20Resources%0A%0AResources%20expose%20data%20to%20LLMs%20in%20a%20read-only%20manner.%20Think%20of%20them%20as%20GET%20endpoints%20that%20provide%20access%20to%20files%2C%20databases%2C%20APIs%2C%20or%20any%20other%20data%20source.%0A%0A%23%23%20Resource%20Fundamentals%0A%0AResources%20in%20MCP%20are%20identified%20by%20URIs%20and%20can%20be%20either%20static%20(fixed%20content)%20or%20dynamic%20(generated%20on-demand).%20They're%20perfect%20for%20giving%20LLMs%20access%20to%20documentation%2C%20configuration%20files%2C%20database%20records%2C%20or%20API%20responses.%0A%0A%23%23%23%20Basic%20Resource%20Structure%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20simple%20resource%0Aresource%20%3A%3D%20mcp.NewResource(%0A%20%20%20%20%22docs%3A%2F%2Freadme%22%2C%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20URI%20-%20unique%20identifier%0A%20%20%20%20%22Project%20README%22%2C%20%20%20%20%20%20%20%20%20%20%2F%2F%20Name%20-%20human-readable%0A%20%20%20%20mcp.WithResourceDescription(%22Main%20project%20documentation%22)%2C%0A%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Static%20Resources%0A%0AStatic%20resources%20have%20fixed%20URIs%20and%20typically%20serve%20predetermined%20content.%0A%0A%23%23%23%20File-Based%20Resources%0A%0AExpose%20files%20from%20your%20filesystem%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22File%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20static%20file%20resource%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22file%3A%2F%2FREADME.md%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Project%20README%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Main%20project%20documentation%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22text%2Fmarkdown%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleReadmeFile%2C%0A%20%20%20%20)%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleReadmeFile(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20content%2C%20err%20%3A%3D%20os.ReadFile(%22README.md%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20README%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22text%2Fmarkdown%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(content)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Configuration%20Resources%0A%0AExpose%20application%20configuration%3A%0A%0A%60%60%60go%0A%2F%2F%20Configuration%20resource%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22config%3A%2F%2Fapp%22%2C%0A%20%20%20%20%20%20%20%20%22Application%20Configuration%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Current%20application%20settings%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleAppConfig%2C%0A)%0A%0Afunc%20handleAppConfig(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20config%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22database_url%22%3A%20os.Getenv(%22DATABASE_URL%22)%2C%0A%20%20%20%20%20%20%20%20%22debug_mode%22%3A%20%20%20os.Getenv(%22DEBUG%22)%20%3D%3D%20%22true%22%2C%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%20%20%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%22features%22%3A%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22authentication%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22caching%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%22logging%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20configJSON%2C%20err%20%3A%3D%20json.Marshal(config)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(configJSON)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Resources%0A%0ADynamic%20resources%20use%20URI%20templates%20with%20parameters%2C%20allowing%20for%20flexible%2C%20parameterized%20access%20to%20data.%0A%0A%23%23%23%20URI%20Templates%0A%0AUse%20%60%7Bparameter%7D%60%20syntax%20for%20dynamic%20parts%3A%0A%0A%60%60%60go%0A%2F%2F%20User%20profile%20resource%20with%20dynamic%20user%20ID%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22users%3A%2F%2F%7Buser_id%7D%22%2C%0A%20%20%20%20%20%20%20%20%22User%20Profile%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22User%20profile%20information%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleUserProfile%2C%0A)%0A%0Afunc%20handleUserProfile(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20user_id%20from%20URI%0A%20%20%20%20userID%20%3A%3D%20extractUserID(req.Params.URI)%20%2F%2F%20%22users%3A%2F%2F123%22%20-%3E%20%22123%22%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Fetch%20user%20data%20(from%20database%2C%20API%2C%20etc.)%0A%20%20%20%20user%2C%20err%20%3A%3D%20getUserFromDB(userID)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22user%20not%20found%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(user)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20extractUserID(uri%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Extract%20ID%20from%20%22users%3A%2F%2F123%22%20format%0A%20%20%20%20parts%20%3A%3D%20strings.Split(uri%2C%20%22%3A%2F%2F%22)%0A%20%20%20%20if%20len(parts)%20%3D%3D%202%20%7B%0A%20%20%20%20%20%20%20%20return%20parts%5B1%5D%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22%22%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Database%20Resources%0A%0AExpose%20database%20records%20dynamically%3A%0A%0A%60%60%60go%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22database%2Fsql%22%0A%20%20%20%20%22encoding%2Fjson%22%0A%20%20%20%20%22fmt%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0A%2F%2F%20Database%20table%20resource%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22db%3A%2F%2F%7Btable%7D%2F%7Bid%7D%22%2C%0A%20%20%20%20%20%20%20%20%22Database%20Record%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Access%20database%20records%20by%20table%20and%20ID%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleDatabaseRecord%2C%0A)%0A%0Afunc%20handleDatabaseRecord(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20table%2C%20id%20%3A%3D%20parseDBURI(req.Params.URI)%20%2F%2F%20%22db%3A%2F%2Fusers%2F123%22%20-%3E%20%22users%22%2C%20%22123%22%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20table%20name%20for%20security%0A%20%20%20%20allowedTables%20%3A%3D%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22users%22%3A%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20%22products%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%22orders%22%3A%20%20%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20!allowedTables%5Btable%5D%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22table%20not%20accessible%3A%20%25s%22%2C%20table)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Query%20database%0A%20%20%20%20query%20%3A%3D%20fmt.Sprintf(%22SELECT%20*%20FROM%20%25s%20WHERE%20id%20%3D%20%3F%22%2C%20table)%0A%20%20%20%20row%20%3A%3D%20db.QueryRowContext(ctx%2C%20query%2C%20id)%0A%20%20%20%20%0A%20%20%20%20var%20data%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20err%20%3A%3D%20scanRowToMap(row%2C%20%26data)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22record%20not%20found%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20API%20Resources%0A%0AProxy%20external%20APIs%20through%20resources%3A%0A%0A%60%60%60go%0A%2F%2F%20Weather%20API%20resource%0As.AddResource(%0A%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%22weather%3A%2F%2F%7Blocation%7D%22%2C%0A%20%20%20%20%20%20%20%20%22Weather%20Data%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Current%20weather%20for%20a%20location%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20handleWeatherData%2C%0A)%0A%0Afunc%20handleWeatherData(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20location%20%3A%3D%20extractLocation(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Call%20external%20weather%20API%0A%20%20%20%20apiURL%20%3A%3D%20fmt.Sprintf(%22https%3A%2F%2Fapi.weather.com%2Fv1%2Fcurrent%3Flocation%3D%25s%26key%3D%25s%22%2C%20%0A%20%20%20%20%20%20%20%20url.QueryEscape(location)%2C%20os.Getenv(%22WEATHER_API_KEY%22))%0A%20%20%20%20%0A%20%20%20%20resp%2C%20err%20%3A%3D%20http.Get(apiURL)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22weather%20API%20error%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20resp.Body.Close()%0A%0A%20%20%20%20body%2C%20err%20%3A%3D%20io.ReadAll(resp.Body)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20response%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(body)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Content%20Types%0A%0AResources%20can%20serve%20different%20types%20of%20content%20with%20appropriate%20MIME%20types.%0A%0A%23%23%23%20Text%20Content%0A%0A%60%60%60go%0Afunc%20handleTextResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20content%20%3A%3D%20%22This%20is%20plain%20text%20content%22%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22text%2Fplain%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20content%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20JSON%20Content%0A%0A%60%60%60go%0Afunc%20handleJSONResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(%5B%5Dmcp.ResourceContents%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22message%22%3A%20%22Hello%2C%20World!%22%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22success%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Binary%20Content%0A%0A%60%60%60go%0Afunc%20handleImageResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20imageData%2C%20err%20%3A%3D%20os.ReadFile(%22logo.png%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Encode%20binary%20data%20as%20base64%0A%20%20%20%20encoded%20%3A%3D%20base64.StdEncoding.EncodeToString(imageData)%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22image%2Fpng%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Blob%3A%20%20%20%20%20encoded%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multiple%20Content%20Types%0A%0AA%20single%20resource%20can%20return%20multiple%20content%20representations%3A%0A%0A%60%60%60go%0Afunc%20handleMultiFormatResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%22John%20Doe%22%2C%0A%20%20%20%20%20%20%20%20%22age%22%3A%20%2030%2C%0A%20%20%20%20%20%20%20%20%22city%22%3A%20%22New%20York%22%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20JSON%20representation%0A%20%20%20%20jsonData%2C%20_%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Text%20representation%20%20%0A%20%20%20%20textData%20%3A%3D%20fmt.Sprintf(%22Name%3A%20%25s%5CnAge%3A%20%25d%5CnCity%3A%20%25s%22%2C%20%0A%20%20%20%20%20%20%20%20data%5B%22name%22%5D%2C%20data%5B%22age%22%5D%2C%20data%5B%22city%22%5D)%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22text%2Fplain%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20textData%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AProper%20error%20handling%20ensures%20robust%20resource%20access%3A%0A%0A%23%23%23%20Common%20Error%20Patterns%0A%0A%60%60%60go%0Afunc%20handleResourceWithErrors(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Validate%20URI%20format%0A%20%20%20%20if%20!isValidURI(req.Params.URI)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20URI%20format%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20permissions%0A%20%20%20%20if%20!hasPermission(ctx%2C%20req.Params.URI)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22access%20denied%20to%20resource%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20resource%20not%20found%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchResourceData(req.Params.URI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20ErrResourceNotFound)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22resource%20not%20found%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20resource%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Timeout%20Handling%0A%0A%60%60%60go%0Afunc%20handleResourceWithTimeout(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20timeout%20context%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20context%20in%20operations%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchDataWithContext(ctx%2C%20req.Params.URI)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.DeadlineExceeded)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22resource%20fetch%20timeout%3A%20%25s%22%2C%20req.Params.URI)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(data)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.ReadResourceResult%7B%0A%20%20%20%20%20%20%20%20Contents%3A%20%5B%5Dmcp.ResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.TextResourceContent%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(jsonData)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Resource%20Listing%0A%0AImplement%20resource%20discovery%20for%20clients%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Resource%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20multiple%20resources%0A%20%20%20%20resources%20%3A%3D%20%5B%5Dstruct%20%7B%0A%20%20%20%20%20%20%20%20uri%20%20%20%20%20%20%20%20%20string%0A%20%20%20%20%20%20%20%20name%20%20%20%20%20%20%20%20string%0A%20%20%20%20%20%20%20%20description%20string%0A%20%20%20%20%20%20%20%20mimeType%20%20%20%20string%0A%20%20%20%20%20%20%20%20handler%20%20%20%20%20server.ResourceHandler%0A%20%20%20%20%7D%7B%0A%20%20%20%20%20%20%20%20%7B%22docs%3A%2F%2Freadme%22%2C%20%22README%22%2C%20%22Project%20documentation%22%2C%20%22text%2Fmarkdown%22%2C%20handleReadme%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22config%3A%2F%2Fapp%22%2C%20%22App%20Config%22%2C%20%22Application%20settings%22%2C%20%22application%2Fjson%22%2C%20handleConfig%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22users%3A%2F%2F%7Bid%7D%22%2C%20%22User%20Profile%22%2C%20%22User%20information%22%2C%20%22application%2Fjson%22%2C%20handleUser%7D%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20for%20_%2C%20r%20%3A%3D%20range%20resources%20%7B%0A%20%20%20%20%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.NewResource(r.uri%2C%20r.name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(r.description)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(r.mimeType)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20r.handler%2C%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%7D%0A%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%60%60%60%0A%0A%23%23%20Caching%20Resources%0A%0AImplement%20caching%20for%20expensive%20resources%3A%0A%0A%60%60%60go%0Atype%20CachedResourceHandler%20struct%20%7B%0A%20%20%20%20cache%20map%5Bstring%5DcacheEntry%0A%20%20%20%20mutex%20sync.RWMutex%0A%20%20%20%20ttl%20%20%20time.Duration%0A%7D%0A%0Atype%20cacheEntry%20struct%20%7B%0A%20%20%20%20data%20%20%20%20%20%20*mcp.ReadResourceResult%0A%20%20%20%20timestamp%20time.Time%0A%7D%0A%0Afunc%20(h%20*CachedResourceHandler)%20HandleResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20h.mutex.RLock()%0A%20%20%20%20if%20entry%2C%20exists%20%3A%3D%20h.cache%5Breq.Params.URI%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20if%20time.Since(entry.timestamp)%20%3C%20h.ttl%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20h.mutex.RUnlock()%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20entry.data%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20h.mutex.RUnlock()%0A%0A%20%20%20%20%2F%2F%20Fetch%20fresh%20data%0A%20%20%20%20data%2C%20err%20%3A%3D%20h.fetchFreshData(ctx%2C%20req)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Cache%20the%20result%0A%20%20%20%20h.mutex.Lock()%0A%20%20%20%20h.cache%5Breq.Params.URI%5D%20%3D%20cacheEntry%7B%0A%20%20%20%20%20%20%20%20data%3A%20%20%20%20%20%20data%2C%0A%20%20%20%20%20%20%20%20timestamp%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%20%20%20%20h.mutex.Unlock()%0A%0A%20%20%20%20return%20data%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BTools%5D(%2Fservers%2Ftools)**%20-%20Learn%20to%20implement%20interactive%20functionality%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Create%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20hooks%2C%20middleware%2C%20and%20more",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./tools-orVoh6Lo.js"),[]),path:"/servers/tools",type:"mdx",filePath:"servers/tools.mdx",content:"%23%20Implementing%20Tools%0A%0ATools%20provide%20functionality%20that%20LLMs%20can%20invoke%20to%20take%20actions%20or%20perform%20computations.%20Think%20of%20them%20as%20function%20calls%20that%20extend%20the%20LLM's%20capabilities.%0A%0A%23%23%20Tool%20Fundamentals%0A%0ATools%20are%20the%20primary%20way%20LLMs%20interact%20with%20your%20server%20to%20perform%20actions.%20They%20have%20structured%20schemas%20that%20define%20parameters%2C%20types%2C%20and%20constraints%2C%20ensuring%20type-safe%20interactions.%0A%0A%23%23%23%20Basic%20Tool%20Structure%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20simple%20tool%0Atool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20mcp.WithDescription(%22Perform%20arithmetic%20operations%22)%2C%0A%20%20%20%20mcp.WithString(%22operation%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Enum(%22add%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22divide%22)%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22The%20arithmetic%20operation%20to%20perform%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required()%2C%20mcp.Description(%22First%20number%22))%2C%0A%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required()%2C%20mcp.Description(%22Second%20number%22))%2C%0A)%0A%60%60%60%0A%0A%23%23%20Tool%20Definition%0A%0A%23%23%23%20Parameter%20Types%0A%0AMCP-Go%20supports%20various%20parameter%20types%20with%20validation%3A%0A%0A%60%60%60go%0A%2F%2F%20String%20parameters%0Amcp.WithString(%22name%22%2C%20%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Description(%22User's%20name%22)%2C%0A%20%20%20%20mcp.MinLength(1)%2C%0A%20%20%20%20mcp.MaxLength(100)%2C%0A)%0A%0A%2F%2F%20Number%20parameters%20%20%0Amcp.WithNumber(%22age%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Description(%22User's%20age%22)%2C%0A%20%20%20%20mcp.Minimum(0)%2C%0A%20%20%20%20mcp.Maximum(150)%2C%0A)%0A%0A%2F%2F%20Integer%20parameters%0Amcp.WithInteger(%22count%22%2C%0A%20%20%20%20mcp.Default(10)%2C%0A%20%20%20%20mcp.Description(%22Number%20of%20items%22)%2C%0A%20%20%20%20mcp.Minimum(1)%2C%0A%20%20%20%20mcp.Maximum(1000)%2C%0A)%0A%0A%2F%2F%20Boolean%20parameters%0Amcp.WithBoolean(%22enabled%22%2C%0A%20%20%20%20mcp.Default(true)%2C%0A%20%20%20%20mcp.Description(%22Whether%20feature%20is%20enabled%22)%2C%0A)%0A%0A%2F%2F%20Array%20parameters%0Amcp.WithArray(%22tags%22%2C%0A%20%20%20%20mcp.Description(%22List%20of%20tags%22)%2C%0A%20%20%20%20mcp.Items(map%5Bstring%5Dany%7B%22type%22%3A%20%22string%22%7D)%2C%0A)%0A%0A%2F%2F%20Object%20parameters%0Amcp.WithObject(%22config%22%2C%0A%20%20%20%20mcp.Description(%22Configuration%20object%22)%2C%0A%20%20%20%20mcp.Properties(map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22timeout%22%3A%20map%5Bstring%5Dany%7B%22type%22%3A%20%22number%22%7D%2C%0A%20%20%20%20%20%20%20%20%22retries%22%3A%20map%5Bstring%5Dany%7B%22type%22%3A%20%22integer%22%7D%2C%0A%20%20%20%20%7D)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Enums%20and%20Constraints%0A%0A%60%60%60go%0A%2F%2F%20Enum%20values%0Amcp.WithString(%22priority%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Enum(%22low%22%2C%20%22medium%22%2C%20%22high%22%2C%20%22critical%22)%2C%0A%20%20%20%20mcp.Description(%22Task%20priority%20level%22)%2C%0A)%0A%0A%2F%2F%20String%20constraints%0Amcp.WithString(%22email%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Pattern(%60%5E%5Ba-zA-Z0-9._%25%2B-%5D%2B%40%5Ba-zA-Z0-9.-%5D%2B%5C.%5Ba-zA-Z%5D%7B2%2C%7D%24%60)%2C%0A%20%20%20%20mcp.Description(%22Valid%20email%20address%22)%2C%0A)%0A%0A%2F%2F%20Number%20constraints%0Amcp.WithNumber(%22price%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Minimum(0)%2C%0A%20%20%20%20mcp.ExclusiveMaximum(10000)%2C%0A%20%20%20%20mcp.Description(%22Product%20price%20in%20USD%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Tool%20Handlers%0A%0ATool%20handlers%20process%20the%20actual%20function%20calls%20from%20LLMs.%20MCP-Go%20provides%20convenient%20helper%20methods%20for%20safe%20parameter%20extraction.%0A%0A%23%23%23%20Parameter%20Extraction%20Methods%0A%0AMCP-Go%20offers%20several%20helper%20methods%20on%20%60CallToolRequest%60%20for%20type-safe%20parameter%20access%3A%0A%0A%60%60%60go%0A%2F%2F%20Required%20parameters%20-%20return%20error%20if%20missing%20or%20wrong%20type%0Aname%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0Aage%2C%20err%20%3A%3D%20req.RequireInt(%22age%22)%20%0Aprice%2C%20err%20%3A%3D%20req.RequireFloat(%22price%22)%0Aenabled%2C%20err%20%3A%3D%20req.RequireBool(%22enabled%22)%0A%0A%2F%2F%20Optional%20parameters%20with%20defaults%0Aname%20%3A%3D%20req.GetString(%22name%22%2C%20%22default%22)%0Acount%20%3A%3D%20req.GetInt(%22count%22%2C%2010)%0Aprice%20%3A%3D%20req.GetFloat(%22price%22%2C%200.0)%0Aenabled%20%3A%3D%20req.GetBool(%22enabled%22%2C%20false)%0A%0A%2F%2F%20Structured%20data%20binding%0Atype%20Config%20struct%20%7B%0A%20%20%20%20Timeout%20int%20%20%20%20%60json%3A%22timeout%22%60%0A%20%20%20%20Retries%20int%20%20%20%20%60json%3A%22retries%22%60%0A%20%20%20%20Debug%20%20%20bool%20%20%20%60json%3A%22debug%22%60%0A%7D%0Avar%20config%20Config%0Aif%20err%20%3A%3D%20req.BindArguments(%26config)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%7D%0A%0A%2F%2F%20Raw%20access%20(for%20backward%20compatibility)%0Aargs%20%3A%3D%20req.GetArguments()%20%2F%2F%20returns%20map%5Bstring%5Dany%0ArawArgs%20%3A%3D%20req.GetRawArguments()%20%2F%2F%20returns%20any%0A%60%60%60%0A%0A%23%23%23%20Basic%20Handler%20Pattern%0A%0A%60%60%60go%0Afunc%20handleCalculate(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20parameters%20using%20helper%20methods%0A%20%20%20%20operation%2C%20err%20%3A%3D%20req.RequireString(%22operation%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20x%2C%20err%20%3A%3D%20req.RequireFloat(%22x%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20y%2C%20err%20%3A%3D%20req.RequireFloat(%22y%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Perform%20calculation%0A%20%20%20%20var%20result%20float64%0A%20%20%20%20switch%20operation%20%7B%0A%20%20%20%20case%20%22add%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20%2B%20y%0A%20%20%20%20case%20%22subtract%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20-%20y%0A%20%20%20%20case%20%22multiply%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20*%20y%0A%20%20%20%20case%20%22divide%22%3A%0A%20%20%20%20%20%20%20%20if%20y%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22division%20by%20zero%22)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20%2F%20y%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22unknown%20operation%3A%20%25s%22%2C%20operation))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20result%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22%25.2f%22%2C%20result))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20File%20Operations%20Tool%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22File%20Tools%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20File%20creation%20tool%0A%20%20%20%20createFileTool%20%3A%3D%20mcp.NewTool(%22create_file%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Create%20a%20new%20file%20with%20content%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22path%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22File%20path%20to%20create%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22content%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22File%20content%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22encoding%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Default(%22utf-8%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Enum(%22utf-8%22%2C%20%22ascii%22%2C%20%22base64%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22File%20encoding%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(createFileTool%2C%20handleCreateFile)%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleCreateFile(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20path%2C%20err%20%3A%3D%20req.RequireString(%22path%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20content%2C%20err%20%3A%3D%20req.RequireString(%22content%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20encoding%20%3A%3D%20req.GetString(%22encoding%22%2C%20%22utf-8%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20path%20for%20security%0A%20%20%20%20if%20strings.Contains(path%2C%20%22..%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22invalid%20path%3A%20directory%20traversal%20not%20allowed%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20different%20encodings%0A%20%20%20%20var%20data%20%5B%5Dbyte%0A%20%20%20%20switch%20encoding%20%7B%0A%20%20%20%20case%20%22utf-8%22%3A%0A%20%20%20%20%20%20%20%20data%20%3D%20%5B%5Dbyte(content)%0A%20%20%20%20case%20%22ascii%22%3A%0A%20%20%20%20%20%20%20%20data%20%3D%20%5B%5Dbyte(content)%0A%20%20%20%20case%20%22base64%22%3A%0A%20%20%20%20%20%20%20%20var%20err%20error%0A%20%20%20%20%20%20%20%20data%2C%20err%20%3D%20base64.StdEncoding.DecodeString(content)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22invalid%20base64%20content%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20file%0A%20%20%20%20if%20err%20%3A%3D%20os.WriteFile(path%2C%20data%2C%200644)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20create%20file%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22File%20created%20successfully%3A%20%25s%22%2C%20path))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Database%20Query%20Tool%0A%0A%60%60%60go%0Afunc%20handleDatabaseQuery(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Define%20struct%20to%20bind%20both%20Query%20and%20Params%0A%20%20%20%20var%20args%20struct%20%7B%0A%20%20%20%20%20%20%20%20Query%20%20string%20%20%20%20%20%20%20%20%60json%3A%22query%22%60%0A%20%20%20%20%20%20%20%20Params%20%5B%5Dinterface%7B%7D%20%60json%3A%22params%22%60%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Bind%20arguments%20to%20the%20struct%0A%20%20%20%20if%20err%20%3A%3D%20req.BindArguments(%26args)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Extract%20values%20from%20the%20bound%20struct%0A%20%20%20%20query%20%3A%3D%20args.Query%0A%20%20%20%20params%20%3A%3D%20args.Params%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20query%20for%20security%20(basic%20example)%0A%20%20%20%20if%20!isSelectQuery(query)%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22only%20SELECT%20queries%20are%20allowed%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Execute%20query%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20rows%2C%20err%20%3A%3D%20db.QueryContext(ctx%2C%20query%2C%20params...)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22query%20failed%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Convert%20results%20to%20JSON%0A%20%20%20%20results%2C%20err%20%3A%3D%20rowsToJSON(rows)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20process%20results%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20resultData%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22query%22%3A%20%20%20query%2C%0A%20%20%20%20%20%20%20%20%22results%22%3A%20results%2C%0A%20%20%20%20%20%20%20%20%22count%22%3A%20%20%20len(results)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(resultData)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20results%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%0Afunc%20isSelectQuery(query%20string)%20bool%20%7B%0A%20%20%20%20trimmed%20%3A%3D%20strings.TrimSpace(strings.ToUpper(query))%0A%20%20%20%20return%20strings.HasPrefix(trimmed%2C%20%22SELECT%22)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Request%20Tool%0A%0A%60%60%60go%0Afunc%20handleHTTPRequest(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20url%2C%20err%20%3A%3D%20req.RequireString(%22url%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20method%2C%20err%20%3A%3D%20req.RequireString(%22method%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20body%20%3A%3D%20req.GetString(%22body%22%2C%20%22%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20headers%20(optional%20object%20parameter)%0A%20%20%20%20var%20headers%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20args%20%3A%3D%20req.GetArguments()%3B%20args%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20h%2C%20ok%20%3A%3D%20args%5B%22headers%22%5D.(map%5Bstring%5Dinterface%7B%7D)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20headers%20%3D%20h%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20HTTP%20request%0A%20%20%20%20httpReq%2C%20err%20%3A%3D%20http.NewRequestWithContext(ctx%2C%20method%2C%20url%2C%20strings.NewReader(body))%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20create%20request%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20headers%0A%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20headers%20%7B%0A%20%20%20%20%20%20%20%20httpReq.Header.Set(key%2C%20fmt.Sprintf(%22%25v%22%2C%20value))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Execute%20request%20with%20timeout%0A%20%20%20%20client%20%3A%3D%20%26http.Client%7BTimeout%3A%2030%20*%20time.Second%7D%0A%20%20%20%20resp%2C%20err%20%3A%3D%20client.Do(httpReq)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22request%20failed%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20defer%20resp.Body.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Read%20response%0A%20%20%20%20respBody%2C%20err%20%3A%3D%20io.ReadAll(resp.Body)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20read%20response%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20resultData%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status_code%22%3A%20resp.StatusCode%2C%0A%20%20%20%20%20%20%20%20%22headers%22%3A%20%20%20%20%20resp.Header%2C%0A%20%20%20%20%20%20%20%20%22body%22%3A%20%20%20%20%20%20%20%20string(respBody)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(resultData)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Argument%20Validation%0A%0A%23%23%23%20Type-Safe%20Parameter%20Extraction%0A%0AMCP-Go%20provides%20helper%20methods%20for%20safe%20parameter%20extraction%3A%0A%0A%60%60%60go%0Afunc%20handleValidatedTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Required%20parameters%20with%20validation%0A%20%20%20%20name%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20age%2C%20err%20%3A%3D%20req.RequireFloat(%22age%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Optional%20parameter%20with%20default%0A%20%20%20%20enabled%20%3A%3D%20req.GetBool(%22enabled%22%2C%20true)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20constraints%0A%20%20%20%20if%20len(name)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22name%20cannot%20be%20empty%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20age%20%3C%200%20%7C%7C%20age%20%3E%20150%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22age%20must%20be%20between%200%20and%20150%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20with%20validated%20parameters%0A%20%20%20%20result%20%3A%3D%20processUser(name%2C%20int(age)%2C%20enabled)%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(result)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Available%20Helper%20Methods%0A%0A%60%60%60go%0A%2F%2F%20Required%20parameters%20(return%20error%20if%20missing%20or%20wrong%20type)%0Aname%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0Aage%2C%20err%20%3A%3D%20req.RequireInt(%22age%22)%0Aprice%2C%20err%20%3A%3D%20req.RequireFloat(%22price%22)%0Aenabled%2C%20err%20%3A%3D%20req.RequireBool(%22enabled%22)%0A%0A%2F%2F%20Optional%20parameters%20with%20defaults%0Aname%20%3A%3D%20req.GetString(%22name%22%2C%20%22default%22)%0Acount%20%3A%3D%20req.GetInt(%22count%22%2C%2010)%0Aprice%20%3A%3D%20req.GetFloat(%22price%22%2C%200.0)%0Aenabled%20%3A%3D%20req.GetBool(%22enabled%22%2C%20false)%0A%0A%2F%2F%20Structured%20data%20binding%0Atype%20UserData%20struct%20%7B%0A%20%20%20%20Name%20string%20%60json%3A%22name%22%60%0A%20%20%20%20Age%20%20int%20%20%20%20%60json%3A%22age%22%60%0A%7D%0Avar%20user%20UserData%0Aif%20err%20%3A%3D%20req.BindArguments(%26user)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%7D%0A%60%60%60%0A%60%60%60%0A%0A%23%23%23%20Custom%20Validation%20Functions%0A%0A%60%60%60go%0Afunc%20validateEmail(email%20string)%20error%20%7B%0A%20%20%20%20emailRegex%20%3A%3D%20regexp.MustCompile(%60%5E%5Ba-zA-Z0-9._%25%2B-%5D%2B%40%5Ba-zA-Z0-9.-%5D%2B%5C.%5Ba-zA-Z%5D%7B2%2C%7D%24%60)%0A%20%20%20%20if%20!emailRegex.MatchString(email)%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22invalid%20email%20format%22)%0A%20%20%20%20%7D%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20validateURL(url%20string)%20error%20%7B%0A%20%20%20%20parsed%2C%20err%20%3A%3D%20url.Parse(url)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22invalid%20URL%20format%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20parsed.Scheme%20!%3D%20%22http%22%20%26%26%20parsed.Scheme%20!%3D%20%22https%22%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22URL%20must%20use%20http%20or%20https%20scheme%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Result%20Types%0A%0A%23%23%23%20Text%20Results%0A%0A%60%60%60go%0Afunc%20handleTextTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20message%20%3A%3D%20%22Operation%20completed%20successfully%22%0A%20%20%20%20return%20mcp.NewToolResultText(message)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20JSON%20Results%0A%0A%60%60%60go%0Afunc%20handleJSONTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%20%20%22success%22%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%22data%22%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22processed%22%3A%2042%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22errors%22%3A%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(result)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multiple%20Content%20Types%0A%0A%60%60%60go%0Afunc%20handleMultiContentTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%22John%20Doe%22%2C%0A%20%20%20%20%20%20%20%20%22age%22%3A%20%2030%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22User%20information%20retrieved%20successfully%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22Name%3A%20%25s%2C%20Age%3A%20%25d%22%2C%20data%5B%22name%22%5D%2C%20data%5B%22age%22%5D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Results%0A%0A%60%60%60go%0Afunc%20handleToolWithErrors(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20For%20validation%20errors%2C%20return%20error%20result%20(not%20Go%20error)%0A%20%20%20%20name%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20business%20logic%20errors%2C%20also%20return%20error%20result%0A%20%20%20%20if%20someCondition%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22invalid%20input%3A%20%22%20%2B%20reason)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20system%20errors%2C%20you%20can%20return%20Go%20errors%0A%20%20%20%20if%20systemError%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22system%20failure%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Or%20return%20structured%20error%20information%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22Operation%20failed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20IsError%3A%20true%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Tool%20Annotations%0A%0AProvide%20hints%20to%20help%20LLMs%20use%20your%20tools%20effectively%3A%0A%0A%60%60%60go%0Atool%20%3A%3D%20mcp.NewTool(%22search_database%22%2C%0A%20%20%20%20mcp.WithDescription(%22Search%20the%20product%20database%22)%2C%0A%20%20%20%20mcp.WithString(%22query%22%2C%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Search%20query%20(supports%20wildcards%20with%20*)%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22limit%22%2C%0A%20%20%20%20%20%20%20%20mcp.DefaultNumber(10)%2C%0A%20%20%20%20%20%20%20%20mcp.Minimum(1)%2C%0A%20%20%20%20%20%20%20%20mcp.Maximum(100)%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Maximum%20number%20of%20results%20to%20return%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithArray(%22categories%22%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Filter%20by%20product%20categories%22)%2C%0A%20%20%20%20%20%20%20%20mcp.Items(map%5Bstring%5Dany%7B%22type%22%3A%20%22string%22%7D)%2C%0A%20%20%20%20)%2C%0A)%0A%0As.AddTool(tool%2C%20handleSearchDatabase)%0A%60%60%60%0A%0A%23%23%20Advanced%20Tool%20Patterns%0A%0A%23%23%23%20Streaming%20Results%0A%0AFor%20long-running%20operations%2C%20consider%20streaming%20results%3A%0A%0A%60%60%60go%0Afunc%20handleStreamingTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20For%20operations%20that%20take%20time%2C%20provide%20progress%20updates%0A%20%20%20%20results%20%3A%3D%20%5B%5Dstring%7B%7D%0A%20%20%20%20%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Simulate%20work%0A%20%20%20%20%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20cancellation%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20results%20%3D%20append(results%2C%20fmt.Sprintf(%22Processed%20item%20%25d%22%2C%20i%2B1))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20resultData%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%22completed%22%2C%0A%20%20%20%20%20%20%20%20%22results%22%3A%20results%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(resultData)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Conditional%20Tools%0A%0ATools%20that%20are%20only%20available%20under%20certain%20conditions%3A%0A%0A%60%60%60go%0Afunc%20addConditionalTools(s%20*server.MCPServer%2C%20userRole%20string)%20%7B%0A%20%20%20%20%2F%2F%20Admin-only%20tools%0A%20%20%20%20if%20userRole%20%3D%3D%20%22admin%22%20%7B%0A%20%20%20%20%20%20%20%20adminTool%20%3A%3D%20mcp.NewTool(%22delete_user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Delete%20a%20user%20account%20(admin%20only)%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22user_id%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20s.AddTool(adminTool%2C%20handleDeleteUser)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20User%20tools%20available%20to%20all%0A%20%20%20%20userTool%20%3A%3D%20mcp.NewTool(%22get_profile%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20user%20profile%20information%22)%2C%0A%20%20%20%20)%0A%20%20%20%20s.AddTool(userTool%2C%20handleGetProfile)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Learn%20to%20create%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20typed%20tools%2C%20middleware%2C%20and%20hooks%0A-%20**%5BResources%5D(%2Fservers%2Fresources)**%20-%20Learn%20about%20exposing%20data%20sources",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./tools-orVoh6Lo.js"),[]),path:"/servers/tools.html",type:"mdx",filePath:"servers/tools.mdx",content:"%23%20Implementing%20Tools%0A%0ATools%20provide%20functionality%20that%20LLMs%20can%20invoke%20to%20take%20actions%20or%20perform%20computations.%20Think%20of%20them%20as%20function%20calls%20that%20extend%20the%20LLM's%20capabilities.%0A%0A%23%23%20Tool%20Fundamentals%0A%0ATools%20are%20the%20primary%20way%20LLMs%20interact%20with%20your%20server%20to%20perform%20actions.%20They%20have%20structured%20schemas%20that%20define%20parameters%2C%20types%2C%20and%20constraints%2C%20ensuring%20type-safe%20interactions.%0A%0A%23%23%23%20Basic%20Tool%20Structure%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20simple%20tool%0Atool%20%3A%3D%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20mcp.WithDescription(%22Perform%20arithmetic%20operations%22)%2C%0A%20%20%20%20mcp.WithString(%22operation%22%2C%20%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Enum(%22add%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22divide%22)%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22The%20arithmetic%20operation%20to%20perform%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required()%2C%20mcp.Description(%22First%20number%22))%2C%0A%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required()%2C%20mcp.Description(%22Second%20number%22))%2C%0A)%0A%60%60%60%0A%0A%23%23%20Tool%20Definition%0A%0A%23%23%23%20Parameter%20Types%0A%0AMCP-Go%20supports%20various%20parameter%20types%20with%20validation%3A%0A%0A%60%60%60go%0A%2F%2F%20String%20parameters%0Amcp.WithString(%22name%22%2C%20%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Description(%22User's%20name%22)%2C%0A%20%20%20%20mcp.MinLength(1)%2C%0A%20%20%20%20mcp.MaxLength(100)%2C%0A)%0A%0A%2F%2F%20Number%20parameters%20%20%0Amcp.WithNumber(%22age%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Description(%22User's%20age%22)%2C%0A%20%20%20%20mcp.Minimum(0)%2C%0A%20%20%20%20mcp.Maximum(150)%2C%0A)%0A%0A%2F%2F%20Integer%20parameters%0Amcp.WithInteger(%22count%22%2C%0A%20%20%20%20mcp.Default(10)%2C%0A%20%20%20%20mcp.Description(%22Number%20of%20items%22)%2C%0A%20%20%20%20mcp.Minimum(1)%2C%0A%20%20%20%20mcp.Maximum(1000)%2C%0A)%0A%0A%2F%2F%20Boolean%20parameters%0Amcp.WithBoolean(%22enabled%22%2C%0A%20%20%20%20mcp.Default(true)%2C%0A%20%20%20%20mcp.Description(%22Whether%20feature%20is%20enabled%22)%2C%0A)%0A%0A%2F%2F%20Array%20parameters%0Amcp.WithArray(%22tags%22%2C%0A%20%20%20%20mcp.Description(%22List%20of%20tags%22)%2C%0A%20%20%20%20mcp.Items(map%5Bstring%5Dany%7B%22type%22%3A%20%22string%22%7D)%2C%0A)%0A%0A%2F%2F%20Object%20parameters%0Amcp.WithObject(%22config%22%2C%0A%20%20%20%20mcp.Description(%22Configuration%20object%22)%2C%0A%20%20%20%20mcp.Properties(map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22timeout%22%3A%20map%5Bstring%5Dany%7B%22type%22%3A%20%22number%22%7D%2C%0A%20%20%20%20%20%20%20%20%22retries%22%3A%20map%5Bstring%5Dany%7B%22type%22%3A%20%22integer%22%7D%2C%0A%20%20%20%20%7D)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Enums%20and%20Constraints%0A%0A%60%60%60go%0A%2F%2F%20Enum%20values%0Amcp.WithString(%22priority%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Enum(%22low%22%2C%20%22medium%22%2C%20%22high%22%2C%20%22critical%22)%2C%0A%20%20%20%20mcp.Description(%22Task%20priority%20level%22)%2C%0A)%0A%0A%2F%2F%20String%20constraints%0Amcp.WithString(%22email%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Pattern(%60%5E%5Ba-zA-Z0-9._%25%2B-%5D%2B%40%5Ba-zA-Z0-9.-%5D%2B%5C.%5Ba-zA-Z%5D%7B2%2C%7D%24%60)%2C%0A%20%20%20%20mcp.Description(%22Valid%20email%20address%22)%2C%0A)%0A%0A%2F%2F%20Number%20constraints%0Amcp.WithNumber(%22price%22%2C%0A%20%20%20%20mcp.Required()%2C%0A%20%20%20%20mcp.Minimum(0)%2C%0A%20%20%20%20mcp.ExclusiveMaximum(10000)%2C%0A%20%20%20%20mcp.Description(%22Product%20price%20in%20USD%22)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Tool%20Handlers%0A%0ATool%20handlers%20process%20the%20actual%20function%20calls%20from%20LLMs.%20MCP-Go%20provides%20convenient%20helper%20methods%20for%20safe%20parameter%20extraction.%0A%0A%23%23%23%20Parameter%20Extraction%20Methods%0A%0AMCP-Go%20offers%20several%20helper%20methods%20on%20%60CallToolRequest%60%20for%20type-safe%20parameter%20access%3A%0A%0A%60%60%60go%0A%2F%2F%20Required%20parameters%20-%20return%20error%20if%20missing%20or%20wrong%20type%0Aname%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0Aage%2C%20err%20%3A%3D%20req.RequireInt(%22age%22)%20%0Aprice%2C%20err%20%3A%3D%20req.RequireFloat(%22price%22)%0Aenabled%2C%20err%20%3A%3D%20req.RequireBool(%22enabled%22)%0A%0A%2F%2F%20Optional%20parameters%20with%20defaults%0Aname%20%3A%3D%20req.GetString(%22name%22%2C%20%22default%22)%0Acount%20%3A%3D%20req.GetInt(%22count%22%2C%2010)%0Aprice%20%3A%3D%20req.GetFloat(%22price%22%2C%200.0)%0Aenabled%20%3A%3D%20req.GetBool(%22enabled%22%2C%20false)%0A%0A%2F%2F%20Structured%20data%20binding%0Atype%20Config%20struct%20%7B%0A%20%20%20%20Timeout%20int%20%20%20%20%60json%3A%22timeout%22%60%0A%20%20%20%20Retries%20int%20%20%20%20%60json%3A%22retries%22%60%0A%20%20%20%20Debug%20%20%20bool%20%20%20%60json%3A%22debug%22%60%0A%7D%0Avar%20config%20Config%0Aif%20err%20%3A%3D%20req.BindArguments(%26config)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%7D%0A%0A%2F%2F%20Raw%20access%20(for%20backward%20compatibility)%0Aargs%20%3A%3D%20req.GetArguments()%20%2F%2F%20returns%20map%5Bstring%5Dany%0ArawArgs%20%3A%3D%20req.GetRawArguments()%20%2F%2F%20returns%20any%0A%60%60%60%0A%0A%23%23%23%20Basic%20Handler%20Pattern%0A%0A%60%60%60go%0Afunc%20handleCalculate(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20parameters%20using%20helper%20methods%0A%20%20%20%20operation%2C%20err%20%3A%3D%20req.RequireString(%22operation%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20x%2C%20err%20%3A%3D%20req.RequireFloat(%22x%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20y%2C%20err%20%3A%3D%20req.RequireFloat(%22y%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Perform%20calculation%0A%20%20%20%20var%20result%20float64%0A%20%20%20%20switch%20operation%20%7B%0A%20%20%20%20case%20%22add%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20%2B%20y%0A%20%20%20%20case%20%22subtract%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20-%20y%0A%20%20%20%20case%20%22multiply%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20*%20y%0A%20%20%20%20case%20%22divide%22%3A%0A%20%20%20%20%20%20%20%20if%20y%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22division%20by%20zero%22)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20%2F%20y%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22unknown%20operation%3A%20%25s%22%2C%20operation))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20result%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22%25.2f%22%2C%20result))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20File%20Operations%20Tool%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22File%20Tools%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20File%20creation%20tool%0A%20%20%20%20createFileTool%20%3A%3D%20mcp.NewTool(%22create_file%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Create%20a%20new%20file%20with%20content%22)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22path%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22File%20path%20to%20create%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22content%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22File%20content%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20mcp.WithString(%22encoding%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Default(%22utf-8%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Enum(%22utf-8%22%2C%20%22ascii%22%2C%20%22base64%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22File%20encoding%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(createFileTool%2C%20handleCreateFile)%0A%20%20%20%20server.ServeStdio(s)%0A%7D%0A%0Afunc%20handleCreateFile(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20path%2C%20err%20%3A%3D%20req.RequireString(%22path%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20content%2C%20err%20%3A%3D%20req.RequireString(%22content%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20encoding%20%3A%3D%20req.GetString(%22encoding%22%2C%20%22utf-8%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20path%20for%20security%0A%20%20%20%20if%20strings.Contains(path%2C%20%22..%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22invalid%20path%3A%20directory%20traversal%20not%20allowed%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20different%20encodings%0A%20%20%20%20var%20data%20%5B%5Dbyte%0A%20%20%20%20switch%20encoding%20%7B%0A%20%20%20%20case%20%22utf-8%22%3A%0A%20%20%20%20%20%20%20%20data%20%3D%20%5B%5Dbyte(content)%0A%20%20%20%20case%20%22ascii%22%3A%0A%20%20%20%20%20%20%20%20data%20%3D%20%5B%5Dbyte(content)%0A%20%20%20%20case%20%22base64%22%3A%0A%20%20%20%20%20%20%20%20var%20err%20error%0A%20%20%20%20%20%20%20%20data%2C%20err%20%3D%20base64.StdEncoding.DecodeString(content)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22invalid%20base64%20content%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20file%0A%20%20%20%20if%20err%20%3A%3D%20os.WriteFile(path%2C%20data%2C%200644)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20create%20file%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22File%20created%20successfully%3A%20%25s%22%2C%20path))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Database%20Query%20Tool%0A%0A%60%60%60go%0Afunc%20handleDatabaseQuery(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Define%20struct%20to%20bind%20both%20Query%20and%20Params%0A%20%20%20%20var%20args%20struct%20%7B%0A%20%20%20%20%20%20%20%20Query%20%20string%20%20%20%20%20%20%20%20%60json%3A%22query%22%60%0A%20%20%20%20%20%20%20%20Params%20%5B%5Dinterface%7B%7D%20%60json%3A%22params%22%60%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Bind%20arguments%20to%20the%20struct%0A%20%20%20%20if%20err%20%3A%3D%20req.BindArguments(%26args)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Extract%20values%20from%20the%20bound%20struct%0A%20%20%20%20query%20%3A%3D%20args.Query%0A%20%20%20%20params%20%3A%3D%20args.Params%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20query%20for%20security%20(basic%20example)%0A%20%20%20%20if%20!isSelectQuery(query)%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22only%20SELECT%20queries%20are%20allowed%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Execute%20query%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20rows%2C%20err%20%3A%3D%20db.QueryContext(ctx%2C%20query%2C%20params...)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22query%20failed%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Convert%20results%20to%20JSON%0A%20%20%20%20results%2C%20err%20%3A%3D%20rowsToJSON(rows)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20process%20results%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20resultData%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22query%22%3A%20%20%20query%2C%0A%20%20%20%20%20%20%20%20%22results%22%3A%20results%2C%0A%20%20%20%20%20%20%20%20%22count%22%3A%20%20%20len(results)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(resultData)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20results%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%0Afunc%20isSelectQuery(query%20string)%20bool%20%7B%0A%20%20%20%20trimmed%20%3A%3D%20strings.TrimSpace(strings.ToUpper(query))%0A%20%20%20%20return%20strings.HasPrefix(trimmed%2C%20%22SELECT%22)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20HTTP%20Request%20Tool%0A%0A%60%60%60go%0Afunc%20handleHTTPRequest(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20url%2C%20err%20%3A%3D%20req.RequireString(%22url%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20method%2C%20err%20%3A%3D%20req.RequireString(%22method%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20body%20%3A%3D%20req.GetString(%22body%22%2C%20%22%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20headers%20(optional%20object%20parameter)%0A%20%20%20%20var%20headers%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20if%20args%20%3A%3D%20req.GetArguments()%3B%20args%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20if%20h%2C%20ok%20%3A%3D%20args%5B%22headers%22%5D.(map%5Bstring%5Dinterface%7B%7D)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20headers%20%3D%20h%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20HTTP%20request%0A%20%20%20%20httpReq%2C%20err%20%3A%3D%20http.NewRequestWithContext(ctx%2C%20method%2C%20url%2C%20strings.NewReader(body))%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20create%20request%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20headers%0A%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20headers%20%7B%0A%20%20%20%20%20%20%20%20httpReq.Header.Set(key%2C%20fmt.Sprintf(%22%25v%22%2C%20value))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Execute%20request%20with%20timeout%0A%20%20%20%20client%20%3A%3D%20%26http.Client%7BTimeout%3A%2030%20*%20time.Second%7D%0A%20%20%20%20resp%2C%20err%20%3A%3D%20client.Do(httpReq)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22request%20failed%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20defer%20resp.Body.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Read%20response%0A%20%20%20%20respBody%2C%20err%20%3A%3D%20io.ReadAll(resp.Body)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20read%20response%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20resultData%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status_code%22%3A%20resp.StatusCode%2C%0A%20%20%20%20%20%20%20%20%22headers%22%3A%20%20%20%20%20resp.Header%2C%0A%20%20%20%20%20%20%20%20%22body%22%3A%20%20%20%20%20%20%20%20string(respBody)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(resultData)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Argument%20Validation%0A%0A%23%23%23%20Type-Safe%20Parameter%20Extraction%0A%0AMCP-Go%20provides%20helper%20methods%20for%20safe%20parameter%20extraction%3A%0A%0A%60%60%60go%0Afunc%20handleValidatedTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Required%20parameters%20with%20validation%0A%20%20%20%20name%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20age%2C%20err%20%3A%3D%20req.RequireFloat(%22age%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Optional%20parameter%20with%20default%0A%20%20%20%20enabled%20%3A%3D%20req.GetBool(%22enabled%22%2C%20true)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Validate%20constraints%0A%20%20%20%20if%20len(name)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22name%20cannot%20be%20empty%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20age%20%3C%200%20%7C%7C%20age%20%3E%20150%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22age%20must%20be%20between%200%20and%20150%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20with%20validated%20parameters%0A%20%20%20%20result%20%3A%3D%20processUser(name%2C%20int(age)%2C%20enabled)%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(result)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Available%20Helper%20Methods%0A%0A%60%60%60go%0A%2F%2F%20Required%20parameters%20(return%20error%20if%20missing%20or%20wrong%20type)%0Aname%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0Aage%2C%20err%20%3A%3D%20req.RequireInt(%22age%22)%0Aprice%2C%20err%20%3A%3D%20req.RequireFloat(%22price%22)%0Aenabled%2C%20err%20%3A%3D%20req.RequireBool(%22enabled%22)%0A%0A%2F%2F%20Optional%20parameters%20with%20defaults%0Aname%20%3A%3D%20req.GetString(%22name%22%2C%20%22default%22)%0Acount%20%3A%3D%20req.GetInt(%22count%22%2C%2010)%0Aprice%20%3A%3D%20req.GetFloat(%22price%22%2C%200.0)%0Aenabled%20%3A%3D%20req.GetBool(%22enabled%22%2C%20false)%0A%0A%2F%2F%20Structured%20data%20binding%0Atype%20UserData%20struct%20%7B%0A%20%20%20%20Name%20string%20%60json%3A%22name%22%60%0A%20%20%20%20Age%20%20int%20%20%20%20%60json%3A%22age%22%60%0A%7D%0Avar%20user%20UserData%0Aif%20err%20%3A%3D%20req.BindArguments(%26user)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%7D%0A%60%60%60%0A%60%60%60%0A%0A%23%23%23%20Custom%20Validation%20Functions%0A%0A%60%60%60go%0Afunc%20validateEmail(email%20string)%20error%20%7B%0A%20%20%20%20emailRegex%20%3A%3D%20regexp.MustCompile(%60%5E%5Ba-zA-Z0-9._%25%2B-%5D%2B%40%5Ba-zA-Z0-9.-%5D%2B%5C.%5Ba-zA-Z%5D%7B2%2C%7D%24%60)%0A%20%20%20%20if%20!emailRegex.MatchString(email)%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22invalid%20email%20format%22)%0A%20%20%20%20%7D%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20validateURL(url%20string)%20error%20%7B%0A%20%20%20%20parsed%2C%20err%20%3A%3D%20url.Parse(url)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22invalid%20URL%20format%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20parsed.Scheme%20!%3D%20%22http%22%20%26%26%20parsed.Scheme%20!%3D%20%22https%22%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22URL%20must%20use%20http%20or%20https%20scheme%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Result%20Types%0A%0A%23%23%23%20Text%20Results%0A%0A%60%60%60go%0Afunc%20handleTextTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20message%20%3A%3D%20%22Operation%20completed%20successfully%22%0A%20%20%20%20return%20mcp.NewToolResultText(message)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20JSON%20Results%0A%0A%60%60%60go%0Afunc%20handleJSONTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%20%20%22success%22%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%22data%22%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22processed%22%3A%2042%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22errors%22%3A%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(result)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multiple%20Content%20Types%0A%0A%60%60%60go%0Afunc%20handleMultiContentTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22name%22%3A%20%22John%20Doe%22%2C%0A%20%20%20%20%20%20%20%20%22age%22%3A%20%2030%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22User%20information%20retrieved%20successfully%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20fmt.Sprintf(%22Name%3A%20%25s%2C%20Age%3A%20%25d%22%2C%20data%5B%22name%22%5D%2C%20data%5B%22age%22%5D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Results%0A%0A%60%60%60go%0Afunc%20handleToolWithErrors(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20For%20validation%20errors%2C%20return%20error%20result%20(not%20Go%20error)%0A%20%20%20%20name%2C%20err%20%3A%3D%20req.RequireString(%22name%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20business%20logic%20errors%2C%20also%20return%20error%20result%0A%20%20%20%20if%20someCondition%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22invalid%20input%3A%20%22%20%2B%20reason)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20system%20errors%2C%20you%20can%20return%20Go%20errors%0A%20%20%20%20if%20systemError%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22system%20failure%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Or%20return%20structured%20error%20information%0A%20%20%20%20return%20%26mcp.CallToolResult%7B%0A%20%20%20%20%20%20%20%20Content%3A%20%5B%5Dmcp.Content%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Type%3A%20%22text%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%22Operation%20failed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20IsError%3A%20true%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Tool%20Annotations%0A%0AProvide%20hints%20to%20help%20LLMs%20use%20your%20tools%20effectively%3A%0A%0A%60%60%60go%0Atool%20%3A%3D%20mcp.NewTool(%22search_database%22%2C%0A%20%20%20%20mcp.WithDescription(%22Search%20the%20product%20database%22)%2C%0A%20%20%20%20mcp.WithString(%22query%22%2C%0A%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Search%20query%20(supports%20wildcards%20with%20*)%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithNumber(%22limit%22%2C%0A%20%20%20%20%20%20%20%20mcp.DefaultNumber(10)%2C%0A%20%20%20%20%20%20%20%20mcp.Minimum(1)%2C%0A%20%20%20%20%20%20%20%20mcp.Maximum(100)%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Maximum%20number%20of%20results%20to%20return%22)%2C%0A%20%20%20%20)%2C%0A%20%20%20%20mcp.WithArray(%22categories%22%2C%0A%20%20%20%20%20%20%20%20mcp.Description(%22Filter%20by%20product%20categories%22)%2C%0A%20%20%20%20%20%20%20%20mcp.Items(map%5Bstring%5Dany%7B%22type%22%3A%20%22string%22%7D)%2C%0A%20%20%20%20)%2C%0A)%0A%0As.AddTool(tool%2C%20handleSearchDatabase)%0A%60%60%60%0A%0A%23%23%20Advanced%20Tool%20Patterns%0A%0A%23%23%23%20Streaming%20Results%0A%0AFor%20long-running%20operations%2C%20consider%20streaming%20results%3A%0A%0A%60%60%60go%0Afunc%20handleStreamingTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20For%20operations%20that%20take%20time%2C%20provide%20progress%20updates%0A%20%20%20%20results%20%3A%3D%20%5B%5Dstring%7B%7D%0A%20%20%20%20%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Simulate%20work%0A%20%20%20%20%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20cancellation%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20results%20%3D%20append(results%2C%20fmt.Sprintf(%22Processed%20item%20%25d%22%2C%20i%2B1))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20resultData%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%22completed%22%2C%0A%20%20%20%20%20%20%20%20%22results%22%3A%20results%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20jsonData%2C%20err%20%3A%3D%20json.Marshal(resultData)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20marshal%20result%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(string(jsonData))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Conditional%20Tools%0A%0ATools%20that%20are%20only%20available%20under%20certain%20conditions%3A%0A%0A%60%60%60go%0Afunc%20addConditionalTools(s%20*server.MCPServer%2C%20userRole%20string)%20%7B%0A%20%20%20%20%2F%2F%20Admin-only%20tools%0A%20%20%20%20if%20userRole%20%3D%3D%20%22admin%22%20%7B%0A%20%20%20%20%20%20%20%20adminTool%20%3A%3D%20mcp.NewTool(%22delete_user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Delete%20a%20user%20account%20(admin%20only)%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22user_id%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20s.AddTool(adminTool%2C%20handleDeleteUser)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20User%20tools%20available%20to%20all%0A%20%20%20%20userTool%20%3A%3D%20mcp.NewTool(%22get_profile%22%2C%0A%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20user%20profile%20information%22)%2C%0A%20%20%20%20)%0A%20%20%20%20s.AddTool(userTool%2C%20handleGetProfile)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BPrompts%5D(%2Fservers%2Fprompts)**%20-%20Learn%20to%20create%20reusable%20interaction%20templates%0A-%20**%5BAdvanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20typed%20tools%2C%20middleware%2C%20and%20hooks%0A-%20**%5BResources%5D(%2Fservers%2Fresources)**%20-%20Learn%20about%20exposing%20data%20sources",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./http-CpPbneSV.js"),[]),path:"/transports/http",type:"mdx",filePath:"transports/http.mdx",content:"%23%20StreamableHTTP%20Transport%0A%0AStreamableHTTP%20transport%20provides%20traditional%20request%2Fresponse%20communication%20for%20MCP%20servers%2C%20perfect%20for%20REST-like%20interactions%2C%20stateless%20clients%2C%20and%20integration%20with%20existing%20web%20infrastructure.%0A%0A%23%23%20Use%20Cases%0A%0AStreamableHTTP%20transport%20excels%20in%20scenarios%20requiring%3A%0A%0A-%20**Web%20services**%3A%20Traditional%20REST%20API%20patterns%0A-%20**Stateless%20interactions**%3A%20Each%20request%20is%20independent%0A-%20**Load%20balancing**%3A%20Distribute%20requests%20across%20multiple%20servers%0A-%20**Caching**%3A%20Leverage%20HTTP%20caching%20mechanisms%0A-%20**Integration**%3A%20Work%20with%20existing%20HTTP%20infrastructure%0A-%20**Public%20APIs**%3A%20Expose%20MCP%20functionality%20as%20web%20APIs%0A%0A**Example%20applications%3A**%0A-%20Microservice%20architectures%0A-%20Public%20API%20endpoints%0A-%20Integration%20with%20API%20gateways%0A-%20Cached%20data%20services%0A-%20Rate-limited%20services%0A-%20Multi-tenant%20applications%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20StreamableHTTP%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22net%2Fhttp%22%0A%20%20%20%20%22strings%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22StreamableHTTP%20API%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true%2C%20true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20RESTful%20tools%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20user%20information%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22user_id%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleGetUser%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22create_user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Create%20a%20new%20user%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22name%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22email%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithNumber(%22age%22%2C%20mcp.Min(0))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleCreateUser%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22search_users%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Search%20users%20with%20filters%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22query%22%2C%20mcp.Description(%22Search%20query%22))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithNumber(%22limit%22%2C%20mcp.DefaultNumber(10)%2C%20mcp.Max(100))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithNumber(%22offset%22%2C%20mcp.DefaultNumber(0)%2C%20mcp.Min(0))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSearchUsers%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20resources%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22users%3A%2F%2F%7Buser_id%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22User%20Profile%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22User%20profile%20data%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleUserResource%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20StreamableHTTP%20server%0A%20%20%20%20log.Println(%22Starting%20StreamableHTTP%20server%20on%20%3A8080%22)%0A%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20if%20err%20%3A%3D%20httpServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleGetUser(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20userID%20%3A%3D%20req.GetString(%22user_id%22%2C%20%22%22)%0A%20%20%20%20if%20userID%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22user_id%20is%20required%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Simulate%20database%20lookup%0A%20%20%20%20user%2C%20err%20%3A%3D%20getUserFromDB(userID)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22user%20not%20found%3A%20%25s%22%2C%20userID)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%60%7B%22id%22%3A%22%25s%22%2C%22name%22%3A%22%25s%22%2C%22email%22%3A%22%25s%22%2C%22age%22%3A%25d%7D%60%2C%20%0A%20%20%20%20%20%20%20%20user.ID%2C%20user.Name%2C%20user.Email%2C%20user.Age))%2C%20nil%0A%7D%0A%0Afunc%20handleCreateUser(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20name%20%3A%3D%20req.GetString(%22name%22%2C%20%22%22)%0A%20%20%20%20email%20%3A%3D%20req.GetString(%22email%22%2C%20%22%22)%0A%20%20%20%20age%20%3A%3D%20req.GetInt(%22age%22%2C%200)%0A%0A%20%20%20%20if%20name%20%3D%3D%20%22%22%20%7C%7C%20email%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22name%20and%20email%20are%20required%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Validate%20input%0A%20%20%20%20if%20!isValidEmail(email)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20email%20format%3A%20%25s%22%2C%20email)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20user%0A%20%20%20%20user%20%3A%3D%20%26User%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20generateID()%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%20%20%20%20email%2C%0A%20%20%20%20%20%20%20%20Age%3A%20%20%20%20%20%20%20age%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20saveUserToDB(user)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20user%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%60%7B%22id%22%3A%22%25s%22%2C%22message%22%3A%22User%20created%20successfully%22%2C%22user%22%3A%7B%22id%22%3A%22%25s%22%2C%22name%22%3A%22%25s%22%2C%22email%22%3A%22%25s%22%2C%22age%22%3A%25d%7D%7D%60%2C%0A%20%20%20%20%20%20%20%20user.ID%2C%20user.ID%2C%20user.Name%2C%20user.Email%2C%20user.Age))%2C%20nil%0A%7D%0A%0A%2F%2F%20Helper%20functions%20and%20types%20for%20the%20examples%0Atype%20User%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20%20string%20%20%20%20%60json%3A%22id%22%60%0A%20%20%20%20Name%20%20%20%20%20%20string%20%20%20%20%60json%3A%22name%22%60%0A%20%20%20%20Email%20%20%20%20%20string%20%20%20%20%60json%3A%22email%22%60%0A%20%20%20%20Age%20%20%20%20%20%20%20int%20%20%20%20%20%20%20%60json%3A%22age%22%60%0A%20%20%20%20CreatedAt%20time.Time%20%60json%3A%22created_at%22%60%0A%7D%0A%0Afunc%20getUserFromDB(userID%20string)%20(*User%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20%26User%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20userID%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%22John%20Doe%22%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%22john%40example.com%22%2C%0A%20%20%20%20%20%20%20%20Age%3A%20%20%2030%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20isValidEmail(email%20string)%20bool%20%7B%0A%20%20%20%20return%20strings.Contains(email%2C%20%22%40%22)%20%26%26%20strings.Contains(email%2C%20%22.%22)%0A%7D%0A%0Afunc%20generateID()%20string%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20fmt.Sprintf(%22user_%25d%22%2C%20time.Now().UnixNano())%0A%7D%0A%0Afunc%20saveUserToDB(user%20*User)%20error%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20handleSearchUsers(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20query%20%3A%3D%20req.GetString(%22query%22%2C%20%22%22)%0A%20%20%20%20limit%20%3A%3D%20req.GetInt(%22limit%22%2C%2010)%0A%20%20%20%20offset%20%3A%3D%20req.GetInt(%22offset%22%2C%200)%0A%0A%20%20%20%20%2F%2F%20Search%20users%20with%20pagination%0A%20%20%20%20users%2C%20total%2C%20err%20%3A%3D%20searchUsersInDB(query%2C%20limit%2C%20offset)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22search%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%60%7B%22users%22%3A%5B%7B%22id%22%3A%221%22%2C%22name%22%3A%22John%20Doe%22%2C%22email%22%3A%22john%40example.com%22%2C%22age%22%3A30%7D%2C%7B%22id%22%3A%222%22%2C%22name%22%3A%22Jane%20Smith%22%2C%22email%22%3A%22jane%40example.com%22%2C%22age%22%3A25%7D%5D%2C%22total%22%3A%25d%2C%22limit%22%3A%25d%2C%22offset%22%3A%25d%2C%22query%22%3A%22%25s%22%7D%60%2C%0A%20%20%20%20%20%20%20%20total%2C%20limit%2C%20offset%2C%20query))%2C%20nil%0A%7D%0A%0Afunc%20handleUserResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(%5B%5Dmcp.ResourceContents%2C%20error)%20%7B%0A%20%20%20%20userID%20%3A%3D%20extractUserIDFromURI(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20user%2C%20err%20%3A%3D%20getUserFromDB(userID)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22user%20not%20found%3A%20%25s%22%2C%20userID)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20fmt.Sprintf(%60%7B%22id%22%3A%22%25s%22%2C%22name%22%3A%22%25s%22%2C%22email%22%3A%22%25s%22%2C%22age%22%3A%25d%7D%60%2C%20user.ID%2C%20user.Name%2C%20user.Email%2C%20user.Age)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0A%2F%2F%20Additional%20helper%20functions%0A%0Afunc%20searchUsersInDB(query%20string%2C%20limit%2C%20offset%20int)%20(%5B%5D*User%2C%20int%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20users%20%3A%3D%20%5B%5D*User%7B%0A%20%20%20%20%20%20%20%20%7BID%3A%20%221%22%2C%20Name%3A%20%22John%20Doe%22%2C%20Email%3A%20%22john%40example.com%22%2C%20Age%3A%2030%7D%2C%0A%20%20%20%20%20%20%20%20%7BID%3A%20%222%22%2C%20Name%3A%20%22Jane%20Smith%22%2C%20Email%3A%20%22jane%40example.com%22%2C%20Age%3A%2025%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20return%20users%2C%20len(users)%2C%20nil%0A%7D%0A%0Afunc%20extractUserIDFromURI(uri%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Extract%20user%20ID%20from%20URI%20like%20%22users%3A%2F%2F123%22%0A%20%20%20%20if%20len(uri)%20%3E%208%20%26%26%20uri%5B%3A8%5D%20%3D%3D%20%22users%3A%2F%2F%22%20%7B%0A%20%20%20%20%20%20%20%20return%20uri%5B8%3A%5D%0A%20%20%20%20%7D%0A%20%20%20%20return%20uri%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20StreamableHTTP%20Configuration%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Advanced%20StreamableHTTP%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true%2C%20true)%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithLogging()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20comprehensive%20tools%20and%20resources%0A%20%20%20%20addCRUDTools(s)%0A%20%20%20%20addBatchTools(s)%0A%20%20%20%20addAnalyticsTools(s)%0A%0A%20%20%20%20log.Println(%22Starting%20advanced%20StreamableHTTP%20server%20on%20%3A8080%22)%0A%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s%2C%0A%20%20%20%20%20%20%20%20server.WithEndpointPath(%22%2Fapi%2Fv1%2Fmcp%22)%2C%0A%20%20%20%20%20%20%20%20server.WithHeartbeatInterval(30*time.Second)%2C%0A%20%20%20%20%20%20%20%20server.WithStateLess(false)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20if%20err%20%3A%3D%20httpServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20advanced%20example%0Afunc%20addCRUDTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20CRUD%20tools%0A%7D%0A%0Afunc%20addBatchTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20batch%20processing%20tools%0A%7D%0A%0Afunc%20addAnalyticsTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20analytics%20tools%0A%7D%0A%0Afunc%20logToolCall(sessionID%2C%20toolName%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20failed%3A%20%25v%22%2C%20toolName%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20completed%20in%20%25v%22%2C%20toolName%2C%20duration)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20logResourceRead(sessionID%2C%20uri%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Resource%20read%20%25s%20failed%3A%20%25v%22%2C%20uri%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Resource%20read%20%25s%20completed%20in%20%25v%22%2C%20uri%2C%20duration)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20addStreamableHTTPMiddleware(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Authentication%20middleware%0A%20%20%20%20s.AddToolMiddleware(func(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Extract%20and%20validate%20auth%20token%0A%20%20%20%20%20%20%20%20%20%20%20%20token%20%3A%3D%20extractAuthToken(ctx)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20token%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22authentication%20required%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20user%2C%20err%20%3A%3D%20validateToken(token)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20token%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20user%20to%20context%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx%20%3D%20context.WithValue(ctx%2C%20%22user%22%2C%20user)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Rate%20limiting%20middleware%0A%20%20%20%20s.AddToolMiddleware(func(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clientIP%20%3A%3D%20getClientIP(ctx)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!rateLimiter.Allow(clientIP)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22rate%20limit%20exceeded%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Caching%20middleware%0A%20%20%20%20s.AddResourceMiddleware(func(next%20server.ResourceHandler)%20server.ResourceHandler%20%7B%0A%20%20%20%20%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20cache%20first%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20cached%20%3A%3D%20getFromCache(req.Params.URI)%3B%20cached%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Cache%20successful%20results%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setCache(req.Params.URI%2C%20result%2C%205*time.Minute)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%20Endpoints%0A%0A%23%23%23%20Standard%20MCP%20Endpoints%0A%0AWhen%20you%20start%20a%20StreamableHTTP%20MCP%20server%2C%20it%20automatically%20creates%20these%20endpoints%3A%0A%0A%60%60%60%0APOST%20%2Fmcp%2Finitialize%20%20%20%20%20-%20Initialize%20MCP%20session%0APOST%20%2Fmcp%2Ftools%2Flist%20%20%20%20%20-%20List%20available%20tools%0APOST%20%2Fmcp%2Ftools%2Fcall%20%20%20%20%20-%20Call%20a%20tool%0APOST%20%2Fmcp%2Fresources%2Flist%20-%20List%20available%20resources%0APOST%20%2Fmcp%2Fresources%2Fread%20-%20Read%20a%20resource%0APOST%20%2Fmcp%2Fprompts%2Flist%20%20%20-%20List%20available%20prompts%0APOST%20%2Fmcp%2Fprompts%2Fget%20%20%20%20-%20Get%20a%20prompt%0AGET%20%20%2Fmcp%2Fhealth%20%20%20%20%20%20%20%20%20-%20Health%20check%0AGET%20%20%2Fmcp%2Fcapabilities%20%20%20-%20Server%20capabilities%0A%60%60%60%0A%0A%23%23%23%20Custom%20Endpoints%0A%0AAdd%20custom%20HTTP%20endpoints%20alongside%20MCP%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Custom%20StreamableHTTP%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20HTTP%20server%20with%20custom%20routes%0A%20%20%20%20mux%20%3A%3D%20http.NewServeMux()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20MCP%20endpoints%0A%20%20%20%20server.AddMCPRoutes(mux%2C%20s%2C%20%22%2Fmcp%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20custom%20endpoints%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fstatus%22%2C%20handleStatus)%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fmetrics%22%2C%20handleMetrics)%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fusers%22%2C%20handleUsersAPI)%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fupload%22%2C%20handleFileUpload)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20middleware%0A%20%20%20%20handler%20%3A%3D%20addMiddleware(mux)%0A%20%20%20%20%0A%20%20%20%20log.Println(%22Starting%20custom%20StreamableHTTP%20server%20on%20%3A8080%22)%0A%20%20%20%20if%20err%20%3A%3D%20http.ListenAndServe(%22%3A8080%22%2C%20handler)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleStatus(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20status%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%20%20%22healthy%22%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%22uptime%22%3A%20%20%20%20time.Since(startTime).String()%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20w.Header().Set(%22Content-Type%22%2C%20%22application%2Fjson%22)%0A%20%20%20%20json.NewEncoder(w).Encode(status)%0A%7D%0A%0Afunc%20handleMetrics(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20metrics%20%3A%3D%20collectMetrics()%0A%20%20%20%20%0A%20%20%20%20w.Header().Set(%22Content-Type%22%2C%20%22application%2Fjson%22)%0A%20%20%20%20json.NewEncoder(w).Encode(metrics)%0A%7D%0A%0Afunc%20handleUsersAPI(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20switch%20r.Method%20%7B%0A%20%20%20%20case%20%22GET%22%3A%0A%20%20%20%20%20%20%20%20handleListUsers(w%2C%20r)%0A%20%20%20%20case%20%22POST%22%3A%0A%20%20%20%20%20%20%20%20handleCreateUserAPI(w%2C%20r)%0A%20%20%20%20case%20%22PUT%22%3A%0A%20%20%20%20%20%20%20%20handleUpdateUser(w%2C%20r)%0A%20%20%20%20case%20%22DELETE%22%3A%0A%20%20%20%20%20%20%20%20handleDeleteUser(w%2C%20r)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20http.Error(w%2C%20%22Method%20not%20allowed%22%2C%20http.StatusMethodNotAllowed)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Request%2FResponse%20Patterns%0A%0A%23%23%23%23%20Standard%20MCP%20Request%0A%0A%60%60%60json%0APOST%20%2Fmcp%2Ftools%2Fcall%0AContent-Type%3A%20application%2Fjson%0A%0A%7B%0A%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%22id%22%3A%201%2C%0A%20%20%22method%22%3A%20%22tools%2Fcall%22%2C%0A%20%20%22params%22%3A%20%7B%0A%20%20%20%20%22name%22%3A%20%22search_users%22%2C%0A%20%20%20%20%22arguments%22%3A%20%7B%0A%20%20%20%20%20%20%22query%22%3A%20%22john%22%2C%0A%20%20%20%20%20%20%22limit%22%3A%2010%2C%0A%20%20%20%20%20%20%22offset%22%3A%200%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Standard%20MCP%20Response%0A%0A%60%60%60json%0A%7B%0A%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%22id%22%3A%201%2C%0A%20%20%22result%22%3A%20%7B%0A%20%20%20%20%22content%22%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22type%22%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%22text%22%3A%20%22%7B%5C%22users%5C%22%3A%5B...%5D%2C%5C%22total%5C%22%3A25%2C%5C%22limit%5C%22%3A10%2C%5C%22offset%5C%22%3A0%7D%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%5D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Error%20Response%0A%0A%60%60%60json%0A%7B%0A%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%22id%22%3A%201%2C%0A%20%20%22error%22%3A%20%7B%0A%20%20%20%20%22code%22%3A%20-32602%2C%0A%20%20%20%20%22message%22%3A%20%22Invalid%20params%22%2C%0A%20%20%20%20%22data%22%3A%20%7B%0A%20%20%20%20%20%20%22details%22%3A%20%22user_id%20is%20required%22%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Session%20Management%0A%0A%23%23%23%20Stateful%20vs%20Stateless%0A%0A%23%23%23%23%20Stateless%20Design%20(Recommended)%0A%0A%60%60%60go%0A%2F%2F%20Each%20request%20is%20independent%0Afunc%20handleStatelessTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20all%20needed%20information%20from%20request%0A%20%20%20%20userID%20%3A%3D%20extractUserFromToken(ctx)%0A%20%20%20%20params%20%3A%3D%20req.Params.Arguments%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20without%20relying%20on%20server%20state%0A%20%20%20%20result%2C%20err%20%3A%3D%20processRequest(userID%2C%20params)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultJSON(result)%2C%20nil%0A%7D%0A%0A%2F%2F%20Use%20external%20storage%20for%20persistence%0Afunc%20getUserPreferences(userID%20string)%20(map%5Bstring%5Dinterface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Load%20from%20database%2C%20cache%2C%20etc.%0A%20%20%20%20return%20loadFromRedis(fmt.Sprintf(%22user%3A%25s%3Aprefs%22%2C%20userID))%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Stateful%20Design%20(When%20Needed)%0A%0A%60%60%60go%0Atype%20HTTPSessionManager%20struct%20%7B%0A%20%20%20%20sessions%20map%5Bstring%5D*HTTPSession%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%20%20%20%20cleanup%20%20*time.Ticker%0A%7D%0A%0Atype%20HTTPSession%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20%20%20%20string%0A%20%20%20%20UserID%20%20%20%20%20%20string%0A%20%20%20%20CreatedAt%20%20%20time.Time%0A%20%20%20%20LastAccess%20%20time.Time%0A%20%20%20%20Data%20%20%20%20%20%20%20%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20ExpiresAt%20%20%20time.Time%0A%7D%0A%0Afunc%20NewHTTPSessionManager()%20*HTTPSessionManager%20%7B%0A%20%20%20%20sm%20%3A%3D%20%26HTTPSessionManager%7B%0A%20%20%20%20%20%20%20%20sessions%3A%20make(map%5Bstring%5D*HTTPSession)%2C%0A%20%20%20%20%20%20%20%20cleanup%3A%20%20time.NewTicker(1%20*%20time.Minute)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20go%20sm.cleanupExpiredSessions()%0A%20%20%20%20return%20sm%0A%7D%0A%0Afunc%20(sm%20*HTTPSessionManager)%20CreateSession(userID%20string)%20*HTTPSession%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20session%20%3A%3D%20%26HTTPSession%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20%20generateSessionID()%2C%0A%20%20%20%20%20%20%20%20UserID%3A%20%20%20%20%20userID%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20%20time.Now()%2C%0A%20%20%20%20%20%20%20%20LastAccess%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20Data%3A%20%20%20%20%20%20%20make(map%5Bstring%5Dinterface%7B%7D)%2C%0A%20%20%20%20%20%20%20%20ExpiresAt%3A%20%20time.Now().Add(30%20*%20time.Minute)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20sm.sessions%5Bsession.ID%5D%20%3D%20session%0A%20%20%20%20return%20session%0A%7D%0A%0Afunc%20(sm%20*HTTPSessionManager)%20GetSession(sessionID%20string)%20(*HTTPSession%2C%20bool)%20%7B%0A%20%20%20%20sm.mutex.RLock()%0A%20%20%20%20defer%20sm.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20session%2C%20exists%20%3A%3D%20sm.sessions%5BsessionID%5D%0A%20%20%20%20if%20!exists%20%7C%7C%20time.Now().After(session.ExpiresAt)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Update%20last%20access%0A%20%20%20%20session.LastAccess%20%3D%20time.Now()%0A%20%20%20%20session.ExpiresAt%20%3D%20time.Now().Add(30%20*%20time.Minute)%0A%20%20%20%20%0A%20%20%20%20return%20session%2C%20true%0A%7D%0A%0Afunc%20(sm%20*HTTPSessionManager)%20cleanupExpiredSessions()%20%7B%0A%20%20%20%20for%20range%20sm.cleanup.C%20%7B%0A%20%20%20%20%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20%20%20%20%20now%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20id%2C%20session%20%3A%3D%20range%20sm.sessions%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20now.After(session.ExpiresAt)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete(sm.sessions%2C%20id)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20sm.mutex.Unlock()%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Authentication%20and%20Authorization%0A%0A%60%60%60go%0Atype%20AuthMiddleware%20struct%20%7B%0A%20%20%20%20jwtSecret%20%5B%5Dbyte%0A%20%20%20%20userStore%20UserStore%0A%7D%0A%0Afunc%20NewAuthMiddleware(secret%20%5B%5Dbyte%2C%20store%20UserStore)%20*AuthMiddleware%20%7B%0A%20%20%20%20return%20%26AuthMiddleware%7B%0A%20%20%20%20%20%20%20%20jwtSecret%3A%20secret%2C%0A%20%20%20%20%20%20%20%20userStore%3A%20store%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*AuthMiddleware)%20Middleware(next%20http.Handler)%20http.Handler%20%7B%0A%20%20%20%20return%20http.HandlerFunc(func(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Extract%20token%20from%20Authorization%20header%0A%20%20%20%20%20%20%20%20authHeader%20%3A%3D%20r.Header.Get(%22Authorization%22)%0A%20%20%20%20%20%20%20%20if%20!strings.HasPrefix(authHeader%2C%20%22Bearer%20%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20http.Error(w%2C%20%22Missing%20or%20invalid%20authorization%20header%22%2C%20http.StatusUnauthorized)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20token%20%3A%3D%20strings.TrimPrefix(authHeader%2C%20%22Bearer%20%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Validate%20JWT%20token%0A%20%20%20%20%20%20%20%20claims%2C%20err%20%3A%3D%20m.validateJWT(token)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20http.Error(w%2C%20%22Invalid%20token%22%2C%20http.StatusUnauthorized)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Load%20user%20information%0A%20%20%20%20%20%20%20%20user%2C%20err%20%3A%3D%20m.userStore.GetUser(claims.UserID)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20http.Error(w%2C%20%22User%20not%20found%22%2C%20http.StatusUnauthorized)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20user%20to%20request%20context%0A%20%20%20%20%20%20%20%20ctx%20%3A%3D%20context.WithValue(r.Context()%2C%20%22user%22%2C%20user)%0A%20%20%20%20%20%20%20%20next.ServeHTTP(w%2C%20r.WithContext(ctx))%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(m%20*AuthMiddleware)%20validateJWT(tokenString%20string)%20(*Claims%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Note%3A%20This%20example%20uses%20a%20hypothetical%20JWT%20library%0A%20%20%20%20%2F%2F%20In%20practice%2C%20you%20would%20use%20a%20real%20JWT%20library%20like%20github.com%2Fgolang-jwt%2Fjwt%0A%20%20%20%20token%2C%20err%20%3A%3D%20jwt.ParseWithClaims(tokenString%2C%20%26Claims%7B%7D%2C%20func(token%20*jwt.Token)%20(interface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20m.jwtSecret%2C%20nil%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20claims%2C%20ok%20%3A%3D%20token.Claims.(*Claims)%3B%20ok%20%26%26%20token.Valid%20%7B%0A%20%20%20%20%20%20%20%20return%20claims%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20token%22)%0A%7D%0A%0Atype%20Claims%20struct%20%7B%0A%20%20%20%20UserID%20string%20%60json%3A%22user_id%22%60%0A%20%20%20%20Role%20%20%20string%20%60json%3A%22role%22%60%0A%20%20%20%20jwt.StandardClaims%0A%7D%0A%60%60%60%0A%0A%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Learn%20about%20embedded%20scenarios%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Build%20MCP%20clients%20for%20HTTP%20transport%0A-%20**%5BServer%20Basics%5D(%2Fservers%2Fbasics)**%20-%20Review%20fundamental%20server%20concepts",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./http-CpPbneSV.js"),[]),path:"/transports/http.html",type:"mdx",filePath:"transports/http.mdx",content:"%23%20StreamableHTTP%20Transport%0A%0AStreamableHTTP%20transport%20provides%20traditional%20request%2Fresponse%20communication%20for%20MCP%20servers%2C%20perfect%20for%20REST-like%20interactions%2C%20stateless%20clients%2C%20and%20integration%20with%20existing%20web%20infrastructure.%0A%0A%23%23%20Use%20Cases%0A%0AStreamableHTTP%20transport%20excels%20in%20scenarios%20requiring%3A%0A%0A-%20**Web%20services**%3A%20Traditional%20REST%20API%20patterns%0A-%20**Stateless%20interactions**%3A%20Each%20request%20is%20independent%0A-%20**Load%20balancing**%3A%20Distribute%20requests%20across%20multiple%20servers%0A-%20**Caching**%3A%20Leverage%20HTTP%20caching%20mechanisms%0A-%20**Integration**%3A%20Work%20with%20existing%20HTTP%20infrastructure%0A-%20**Public%20APIs**%3A%20Expose%20MCP%20functionality%20as%20web%20APIs%0A%0A**Example%20applications%3A**%0A-%20Microservice%20architectures%0A-%20Public%20API%20endpoints%0A-%20Integration%20with%20API%20gateways%0A-%20Cached%20data%20services%0A-%20Rate-limited%20services%0A-%20Multi-tenant%20applications%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20StreamableHTTP%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22net%2Fhttp%22%0A%20%20%20%20%22strings%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22StreamableHTTP%20API%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true%2C%20true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20RESTful%20tools%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20user%20information%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22user_id%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleGetUser%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22create_user%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Create%20a%20new%20user%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22name%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22email%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithNumber(%22age%22%2C%20mcp.Min(0))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleCreateUser%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22search_users%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Search%20users%20with%20filters%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22query%22%2C%20mcp.Description(%22Search%20query%22))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithNumber(%22limit%22%2C%20mcp.DefaultNumber(10)%2C%20mcp.Max(100))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithNumber(%22offset%22%2C%20mcp.DefaultNumber(0)%2C%20mcp.Min(0))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSearchUsers%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20resources%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22users%3A%2F%2F%7Buser_id%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22User%20Profile%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22User%20profile%20data%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleUserResource%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20StreamableHTTP%20server%0A%20%20%20%20log.Println(%22Starting%20StreamableHTTP%20server%20on%20%3A8080%22)%0A%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20if%20err%20%3A%3D%20httpServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleGetUser(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20userID%20%3A%3D%20req.GetString(%22user_id%22%2C%20%22%22)%0A%20%20%20%20if%20userID%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22user_id%20is%20required%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Simulate%20database%20lookup%0A%20%20%20%20user%2C%20err%20%3A%3D%20getUserFromDB(userID)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22user%20not%20found%3A%20%25s%22%2C%20userID)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%60%7B%22id%22%3A%22%25s%22%2C%22name%22%3A%22%25s%22%2C%22email%22%3A%22%25s%22%2C%22age%22%3A%25d%7D%60%2C%20%0A%20%20%20%20%20%20%20%20user.ID%2C%20user.Name%2C%20user.Email%2C%20user.Age))%2C%20nil%0A%7D%0A%0Afunc%20handleCreateUser(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20name%20%3A%3D%20req.GetString(%22name%22%2C%20%22%22)%0A%20%20%20%20email%20%3A%3D%20req.GetString(%22email%22%2C%20%22%22)%0A%20%20%20%20age%20%3A%3D%20req.GetInt(%22age%22%2C%200)%0A%0A%20%20%20%20if%20name%20%3D%3D%20%22%22%20%7C%7C%20email%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22name%20and%20email%20are%20required%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Validate%20input%0A%20%20%20%20if%20!isValidEmail(email)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20email%20format%3A%20%25s%22%2C%20email)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20user%0A%20%20%20%20user%20%3A%3D%20%26User%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20generateID()%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%20%20%20%20email%2C%0A%20%20%20%20%20%20%20%20Age%3A%20%20%20%20%20%20%20age%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20time.Now()%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20err%20%3A%3D%20saveUserToDB(user)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20create%20user%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%60%7B%22id%22%3A%22%25s%22%2C%22message%22%3A%22User%20created%20successfully%22%2C%22user%22%3A%7B%22id%22%3A%22%25s%22%2C%22name%22%3A%22%25s%22%2C%22email%22%3A%22%25s%22%2C%22age%22%3A%25d%7D%7D%60%2C%0A%20%20%20%20%20%20%20%20user.ID%2C%20user.ID%2C%20user.Name%2C%20user.Email%2C%20user.Age))%2C%20nil%0A%7D%0A%0A%2F%2F%20Helper%20functions%20and%20types%20for%20the%20examples%0Atype%20User%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20%20string%20%20%20%20%60json%3A%22id%22%60%0A%20%20%20%20Name%20%20%20%20%20%20string%20%20%20%20%60json%3A%22name%22%60%0A%20%20%20%20Email%20%20%20%20%20string%20%20%20%20%60json%3A%22email%22%60%0A%20%20%20%20Age%20%20%20%20%20%20%20int%20%20%20%20%20%20%20%60json%3A%22age%22%60%0A%20%20%20%20CreatedAt%20time.Time%20%60json%3A%22created_at%22%60%0A%7D%0A%0Afunc%20getUserFromDB(userID%20string)%20(*User%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20%26User%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20userID%2C%0A%20%20%20%20%20%20%20%20Name%3A%20%20%22John%20Doe%22%2C%0A%20%20%20%20%20%20%20%20Email%3A%20%22john%40example.com%22%2C%0A%20%20%20%20%20%20%20%20Age%3A%20%20%2030%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20isValidEmail(email%20string)%20bool%20%7B%0A%20%20%20%20return%20strings.Contains(email%2C%20%22%40%22)%20%26%26%20strings.Contains(email%2C%20%22.%22)%0A%7D%0A%0Afunc%20generateID()%20string%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20fmt.Sprintf(%22user_%25d%22%2C%20time.Now().UnixNano())%0A%7D%0A%0Afunc%20saveUserToDB(user%20*User)%20error%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20handleSearchUsers(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20query%20%3A%3D%20req.GetString(%22query%22%2C%20%22%22)%0A%20%20%20%20limit%20%3A%3D%20req.GetInt(%22limit%22%2C%2010)%0A%20%20%20%20offset%20%3A%3D%20req.GetInt(%22offset%22%2C%200)%0A%0A%20%20%20%20%2F%2F%20Search%20users%20with%20pagination%0A%20%20%20%20users%2C%20total%2C%20err%20%3A%3D%20searchUsersInDB(query%2C%20limit%2C%20offset)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22search%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%60%7B%22users%22%3A%5B%7B%22id%22%3A%221%22%2C%22name%22%3A%22John%20Doe%22%2C%22email%22%3A%22john%40example.com%22%2C%22age%22%3A30%7D%2C%7B%22id%22%3A%222%22%2C%22name%22%3A%22Jane%20Smith%22%2C%22email%22%3A%22jane%40example.com%22%2C%22age%22%3A25%7D%5D%2C%22total%22%3A%25d%2C%22limit%22%3A%25d%2C%22offset%22%3A%25d%2C%22query%22%3A%22%25s%22%7D%60%2C%0A%20%20%20%20%20%20%20%20total%2C%20limit%2C%20offset%2C%20query))%2C%20nil%0A%7D%0A%0Afunc%20handleUserResource(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(%5B%5Dmcp.ResourceContents%2C%20error)%20%7B%0A%20%20%20%20userID%20%3A%3D%20extractUserIDFromURI(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20user%2C%20err%20%3A%3D%20getUserFromDB(userID)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22user%20not%20found%3A%20%25s%22%2C%20userID)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20fmt.Sprintf(%60%7B%22id%22%3A%22%25s%22%2C%22name%22%3A%22%25s%22%2C%22email%22%3A%22%25s%22%2C%22age%22%3A%25d%7D%60%2C%20user.ID%2C%20user.Name%2C%20user.Email%2C%20user.Age)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0A%2F%2F%20Additional%20helper%20functions%0A%0Afunc%20searchUsersInDB(query%20string%2C%20limit%2C%20offset%20int)%20(%5B%5D*User%2C%20int%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20users%20%3A%3D%20%5B%5D*User%7B%0A%20%20%20%20%20%20%20%20%7BID%3A%20%221%22%2C%20Name%3A%20%22John%20Doe%22%2C%20Email%3A%20%22john%40example.com%22%2C%20Age%3A%2030%7D%2C%0A%20%20%20%20%20%20%20%20%7BID%3A%20%222%22%2C%20Name%3A%20%22Jane%20Smith%22%2C%20Email%3A%20%22jane%40example.com%22%2C%20Age%3A%2025%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20return%20users%2C%20len(users)%2C%20nil%0A%7D%0A%0Afunc%20extractUserIDFromURI(uri%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Extract%20user%20ID%20from%20URI%20like%20%22users%3A%2F%2F123%22%0A%20%20%20%20if%20len(uri)%20%3E%208%20%26%26%20uri%5B%3A8%5D%20%3D%3D%20%22users%3A%2F%2F%22%20%7B%0A%20%20%20%20%20%20%20%20return%20uri%5B8%3A%5D%0A%20%20%20%20%7D%0A%20%20%20%20return%20uri%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20StreamableHTTP%20Configuration%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Advanced%20StreamableHTTP%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true%2C%20true)%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithLogging()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20comprehensive%20tools%20and%20resources%0A%20%20%20%20addCRUDTools(s)%0A%20%20%20%20addBatchTools(s)%0A%20%20%20%20addAnalyticsTools(s)%0A%0A%20%20%20%20log.Println(%22Starting%20advanced%20StreamableHTTP%20server%20on%20%3A8080%22)%0A%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s%2C%0A%20%20%20%20%20%20%20%20server.WithEndpointPath(%22%2Fapi%2Fv1%2Fmcp%22)%2C%0A%20%20%20%20%20%20%20%20server.WithHeartbeatInterval(30*time.Second)%2C%0A%20%20%20%20%20%20%20%20server.WithStateLess(false)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20if%20err%20%3A%3D%20httpServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20advanced%20example%0Afunc%20addCRUDTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20CRUD%20tools%0A%7D%0A%0Afunc%20addBatchTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20batch%20processing%20tools%0A%7D%0A%0Afunc%20addAnalyticsTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20analytics%20tools%0A%7D%0A%0Afunc%20logToolCall(sessionID%2C%20toolName%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20failed%3A%20%25v%22%2C%20toolName%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Tool%20%25s%20completed%20in%20%25v%22%2C%20toolName%2C%20duration)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20logResourceRead(sessionID%2C%20uri%20string%2C%20duration%20time.Duration%2C%20err%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Resource%20read%20%25s%20failed%3A%20%25v%22%2C%20uri%2C%20err)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Resource%20read%20%25s%20completed%20in%20%25v%22%2C%20uri%2C%20duration)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20addStreamableHTTPMiddleware(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Authentication%20middleware%0A%20%20%20%20s.AddToolMiddleware(func(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Extract%20and%20validate%20auth%20token%0A%20%20%20%20%20%20%20%20%20%20%20%20token%20%3A%3D%20extractAuthToken(ctx)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20token%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22authentication%20required%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20user%2C%20err%20%3A%3D%20validateToken(token)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20token%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Add%20user%20to%20context%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx%20%3D%20context.WithValue(ctx%2C%20%22user%22%2C%20user)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Rate%20limiting%20middleware%0A%20%20%20%20s.AddToolMiddleware(func(next%20server.ToolHandler)%20server.ToolHandler%20%7B%0A%20%20%20%20%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clientIP%20%3A%3D%20getClientIP(ctx)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!rateLimiter.Allow(clientIP)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22rate%20limit%20exceeded%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Caching%20middleware%0A%20%20%20%20s.AddResourceMiddleware(func(next%20server.ResourceHandler)%20server.ResourceHandler%20%7B%0A%20%20%20%20%20%20%20%20return%20func(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(*mcp.ReadResourceResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20cache%20first%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20cached%20%3A%3D%20getFromCache(req.Params.URI)%3B%20cached%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20next(ctx%2C%20req)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Cache%20successful%20results%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setCache(req.Params.URI%2C%20result%2C%205*time.Minute)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%20Endpoints%0A%0A%23%23%23%20Standard%20MCP%20Endpoints%0A%0AWhen%20you%20start%20a%20StreamableHTTP%20MCP%20server%2C%20it%20automatically%20creates%20these%20endpoints%3A%0A%0A%60%60%60%0APOST%20%2Fmcp%2Finitialize%20%20%20%20%20-%20Initialize%20MCP%20session%0APOST%20%2Fmcp%2Ftools%2Flist%20%20%20%20%20-%20List%20available%20tools%0APOST%20%2Fmcp%2Ftools%2Fcall%20%20%20%20%20-%20Call%20a%20tool%0APOST%20%2Fmcp%2Fresources%2Flist%20-%20List%20available%20resources%0APOST%20%2Fmcp%2Fresources%2Fread%20-%20Read%20a%20resource%0APOST%20%2Fmcp%2Fprompts%2Flist%20%20%20-%20List%20available%20prompts%0APOST%20%2Fmcp%2Fprompts%2Fget%20%20%20%20-%20Get%20a%20prompt%0AGET%20%20%2Fmcp%2Fhealth%20%20%20%20%20%20%20%20%20-%20Health%20check%0AGET%20%20%2Fmcp%2Fcapabilities%20%20%20-%20Server%20capabilities%0A%60%60%60%0A%0A%23%23%23%20Custom%20Endpoints%0A%0AAdd%20custom%20HTTP%20endpoints%20alongside%20MCP%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Custom%20StreamableHTTP%20Server%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20HTTP%20server%20with%20custom%20routes%0A%20%20%20%20mux%20%3A%3D%20http.NewServeMux()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20MCP%20endpoints%0A%20%20%20%20server.AddMCPRoutes(mux%2C%20s%2C%20%22%2Fmcp%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20custom%20endpoints%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fstatus%22%2C%20handleStatus)%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fmetrics%22%2C%20handleMetrics)%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fusers%22%2C%20handleUsersAPI)%0A%20%20%20%20mux.HandleFunc(%22%2Fapi%2Fupload%22%2C%20handleFileUpload)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20middleware%0A%20%20%20%20handler%20%3A%3D%20addMiddleware(mux)%0A%20%20%20%20%0A%20%20%20%20log.Println(%22Starting%20custom%20StreamableHTTP%20server%20on%20%3A8080%22)%0A%20%20%20%20if%20err%20%3A%3D%20http.ListenAndServe(%22%3A8080%22%2C%20handler)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleStatus(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20status%20%3A%3D%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%20%20%22healthy%22%2C%0A%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%20%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%22uptime%22%3A%20%20%20%20time.Since(startTime).String()%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20w.Header().Set(%22Content-Type%22%2C%20%22application%2Fjson%22)%0A%20%20%20%20json.NewEncoder(w).Encode(status)%0A%7D%0A%0Afunc%20handleMetrics(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20metrics%20%3A%3D%20collectMetrics()%0A%20%20%20%20%0A%20%20%20%20w.Header().Set(%22Content-Type%22%2C%20%22application%2Fjson%22)%0A%20%20%20%20json.NewEncoder(w).Encode(metrics)%0A%7D%0A%0Afunc%20handleUsersAPI(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20switch%20r.Method%20%7B%0A%20%20%20%20case%20%22GET%22%3A%0A%20%20%20%20%20%20%20%20handleListUsers(w%2C%20r)%0A%20%20%20%20case%20%22POST%22%3A%0A%20%20%20%20%20%20%20%20handleCreateUserAPI(w%2C%20r)%0A%20%20%20%20case%20%22PUT%22%3A%0A%20%20%20%20%20%20%20%20handleUpdateUser(w%2C%20r)%0A%20%20%20%20case%20%22DELETE%22%3A%0A%20%20%20%20%20%20%20%20handleDeleteUser(w%2C%20r)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20http.Error(w%2C%20%22Method%20not%20allowed%22%2C%20http.StatusMethodNotAllowed)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Request%2FResponse%20Patterns%0A%0A%23%23%23%23%20Standard%20MCP%20Request%0A%0A%60%60%60json%0APOST%20%2Fmcp%2Ftools%2Fcall%0AContent-Type%3A%20application%2Fjson%0A%0A%7B%0A%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%22id%22%3A%201%2C%0A%20%20%22method%22%3A%20%22tools%2Fcall%22%2C%0A%20%20%22params%22%3A%20%7B%0A%20%20%20%20%22name%22%3A%20%22search_users%22%2C%0A%20%20%20%20%22arguments%22%3A%20%7B%0A%20%20%20%20%20%20%22query%22%3A%20%22john%22%2C%0A%20%20%20%20%20%20%22limit%22%3A%2010%2C%0A%20%20%20%20%20%20%22offset%22%3A%200%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Standard%20MCP%20Response%0A%0A%60%60%60json%0A%7B%0A%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%22id%22%3A%201%2C%0A%20%20%22result%22%3A%20%7B%0A%20%20%20%20%22content%22%3A%20%5B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%22type%22%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%22text%22%3A%20%22%7B%5C%22users%5C%22%3A%5B...%5D%2C%5C%22total%5C%22%3A25%2C%5C%22limit%5C%22%3A10%2C%5C%22offset%5C%22%3A0%7D%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%5D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Error%20Response%0A%0A%60%60%60json%0A%7B%0A%20%20%22jsonrpc%22%3A%20%222.0%22%2C%0A%20%20%22id%22%3A%201%2C%0A%20%20%22error%22%3A%20%7B%0A%20%20%20%20%22code%22%3A%20-32602%2C%0A%20%20%20%20%22message%22%3A%20%22Invalid%20params%22%2C%0A%20%20%20%20%22data%22%3A%20%7B%0A%20%20%20%20%20%20%22details%22%3A%20%22user_id%20is%20required%22%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Session%20Management%0A%0A%23%23%23%20Stateful%20vs%20Stateless%0A%0A%23%23%23%23%20Stateless%20Design%20(Recommended)%0A%0A%60%60%60go%0A%2F%2F%20Each%20request%20is%20independent%0Afunc%20handleStatelessTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20all%20needed%20information%20from%20request%0A%20%20%20%20userID%20%3A%3D%20extractUserFromToken(ctx)%0A%20%20%20%20params%20%3A%3D%20req.Params.Arguments%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20without%20relying%20on%20server%20state%0A%20%20%20%20result%2C%20err%20%3A%3D%20processRequest(userID%2C%20params)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultJSON(result)%2C%20nil%0A%7D%0A%0A%2F%2F%20Use%20external%20storage%20for%20persistence%0Afunc%20getUserPreferences(userID%20string)%20(map%5Bstring%5Dinterface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Load%20from%20database%2C%20cache%2C%20etc.%0A%20%20%20%20return%20loadFromRedis(fmt.Sprintf(%22user%3A%25s%3Aprefs%22%2C%20userID))%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Stateful%20Design%20(When%20Needed)%0A%0A%60%60%60go%0Atype%20HTTPSessionManager%20struct%20%7B%0A%20%20%20%20sessions%20map%5Bstring%5D*HTTPSession%0A%20%20%20%20mutex%20%20%20%20sync.RWMutex%0A%20%20%20%20cleanup%20%20*time.Ticker%0A%7D%0A%0Atype%20HTTPSession%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20%20%20%20string%0A%20%20%20%20UserID%20%20%20%20%20%20string%0A%20%20%20%20CreatedAt%20%20%20time.Time%0A%20%20%20%20LastAccess%20%20time.Time%0A%20%20%20%20Data%20%20%20%20%20%20%20%20map%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20ExpiresAt%20%20%20time.Time%0A%7D%0A%0Afunc%20NewHTTPSessionManager()%20*HTTPSessionManager%20%7B%0A%20%20%20%20sm%20%3A%3D%20%26HTTPSessionManager%7B%0A%20%20%20%20%20%20%20%20sessions%3A%20make(map%5Bstring%5D*HTTPSession)%2C%0A%20%20%20%20%20%20%20%20cleanup%3A%20%20time.NewTicker(1%20*%20time.Minute)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20go%20sm.cleanupExpiredSessions()%0A%20%20%20%20return%20sm%0A%7D%0A%0Afunc%20(sm%20*HTTPSessionManager)%20CreateSession(userID%20string)%20*HTTPSession%20%7B%0A%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20defer%20sm.mutex.Unlock()%0A%20%20%20%20%0A%20%20%20%20session%20%3A%3D%20%26HTTPSession%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20%20%20generateSessionID()%2C%0A%20%20%20%20%20%20%20%20UserID%3A%20%20%20%20%20userID%2C%0A%20%20%20%20%20%20%20%20CreatedAt%3A%20%20time.Now()%2C%0A%20%20%20%20%20%20%20%20LastAccess%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20Data%3A%20%20%20%20%20%20%20make(map%5Bstring%5Dinterface%7B%7D)%2C%0A%20%20%20%20%20%20%20%20ExpiresAt%3A%20%20time.Now().Add(30%20*%20time.Minute)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20sm.sessions%5Bsession.ID%5D%20%3D%20session%0A%20%20%20%20return%20session%0A%7D%0A%0Afunc%20(sm%20*HTTPSessionManager)%20GetSession(sessionID%20string)%20(*HTTPSession%2C%20bool)%20%7B%0A%20%20%20%20sm.mutex.RLock()%0A%20%20%20%20defer%20sm.mutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20session%2C%20exists%20%3A%3D%20sm.sessions%5BsessionID%5D%0A%20%20%20%20if%20!exists%20%7C%7C%20time.Now().After(session.ExpiresAt)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Update%20last%20access%0A%20%20%20%20session.LastAccess%20%3D%20time.Now()%0A%20%20%20%20session.ExpiresAt%20%3D%20time.Now().Add(30%20*%20time.Minute)%0A%20%20%20%20%0A%20%20%20%20return%20session%2C%20true%0A%7D%0A%0Afunc%20(sm%20*HTTPSessionManager)%20cleanupExpiredSessions()%20%7B%0A%20%20%20%20for%20range%20sm.cleanup.C%20%7B%0A%20%20%20%20%20%20%20%20sm.mutex.Lock()%0A%20%20%20%20%20%20%20%20now%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20id%2C%20session%20%3A%3D%20range%20sm.sessions%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20now.After(session.ExpiresAt)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete(sm.sessions%2C%20id)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20sm.mutex.Unlock()%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Authentication%20and%20Authorization%0A%0A%60%60%60go%0Atype%20AuthMiddleware%20struct%20%7B%0A%20%20%20%20jwtSecret%20%5B%5Dbyte%0A%20%20%20%20userStore%20UserStore%0A%7D%0A%0Afunc%20NewAuthMiddleware(secret%20%5B%5Dbyte%2C%20store%20UserStore)%20*AuthMiddleware%20%7B%0A%20%20%20%20return%20%26AuthMiddleware%7B%0A%20%20%20%20%20%20%20%20jwtSecret%3A%20secret%2C%0A%20%20%20%20%20%20%20%20userStore%3A%20store%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*AuthMiddleware)%20Middleware(next%20http.Handler)%20http.Handler%20%7B%0A%20%20%20%20return%20http.HandlerFunc(func(w%20http.ResponseWriter%2C%20r%20*http.Request)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Extract%20token%20from%20Authorization%20header%0A%20%20%20%20%20%20%20%20authHeader%20%3A%3D%20r.Header.Get(%22Authorization%22)%0A%20%20%20%20%20%20%20%20if%20!strings.HasPrefix(authHeader%2C%20%22Bearer%20%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20http.Error(w%2C%20%22Missing%20or%20invalid%20authorization%20header%22%2C%20http.StatusUnauthorized)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20token%20%3A%3D%20strings.TrimPrefix(authHeader%2C%20%22Bearer%20%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Validate%20JWT%20token%0A%20%20%20%20%20%20%20%20claims%2C%20err%20%3A%3D%20m.validateJWT(token)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20http.Error(w%2C%20%22Invalid%20token%22%2C%20http.StatusUnauthorized)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Load%20user%20information%0A%20%20%20%20%20%20%20%20user%2C%20err%20%3A%3D%20m.userStore.GetUser(claims.UserID)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20http.Error(w%2C%20%22User%20not%20found%22%2C%20http.StatusUnauthorized)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20user%20to%20request%20context%0A%20%20%20%20%20%20%20%20ctx%20%3A%3D%20context.WithValue(r.Context()%2C%20%22user%22%2C%20user)%0A%20%20%20%20%20%20%20%20next.ServeHTTP(w%2C%20r.WithContext(ctx))%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(m%20*AuthMiddleware)%20validateJWT(tokenString%20string)%20(*Claims%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Note%3A%20This%20example%20uses%20a%20hypothetical%20JWT%20library%0A%20%20%20%20%2F%2F%20In%20practice%2C%20you%20would%20use%20a%20real%20JWT%20library%20like%20github.com%2Fgolang-jwt%2Fjwt%0A%20%20%20%20token%2C%20err%20%3A%3D%20jwt.ParseWithClaims(tokenString%2C%20%26Claims%7B%7D%2C%20func(token%20*jwt.Token)%20(interface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20m.jwtSecret%2C%20nil%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20claims%2C%20ok%20%3A%3D%20token.Claims.(*Claims)%3B%20ok%20%26%26%20token.Valid%20%7B%0A%20%20%20%20%20%20%20%20return%20claims%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20token%22)%0A%7D%0A%0Atype%20Claims%20struct%20%7B%0A%20%20%20%20UserID%20string%20%60json%3A%22user_id%22%60%0A%20%20%20%20Role%20%20%20string%20%60json%3A%22role%22%60%0A%20%20%20%20jwt.StandardClaims%0A%7D%0A%60%60%60%0A%0A%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Learn%20about%20embedded%20scenarios%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Build%20MCP%20clients%20for%20HTTP%20transport%0A-%20**%5BServer%20Basics%5D(%2Fservers%2Fbasics)**%20-%20Review%20fundamental%20server%20concepts",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./index-D78lGPhN.js"),[]),path:"/transports",type:"mdx",filePath:"transports/index.mdx",content:"%23%20Transport%20Options%0A%0AMCP-Go%20supports%20multiple%20transport%20methods%20to%20fit%20different%20deployment%20scenarios%20and%20integration%20patterns.%20Choose%20the%20right%20transport%20based%20on%20your%20use%20case%2C%20performance%20requirements%2C%20and%20client%20capabilities.%0A%0A%23%23%20Overview%0A%0ATransport%20layers%20handle%20the%20communication%20between%20MCP%20clients%20and%20servers.%20Each%20transport%20has%20different%20characteristics%20and%20is%20optimized%20for%20specific%20scenarios%3A%0A%0A-%20**%5BSTDIO%5D(%2Ftransports%2Fstdio)**%20-%20Standard%20input%2Foutput%20for%20command-line%20tools%0A-%20**%5BSSE%5D(%2Ftransports%2Fsse)**%20-%20Server-Sent%20Events%20for%20web%20applications%20%20%0A-%20**%5BStreamableHTTP%5D(%2Ftransports%2Fhttp)**%20-%20Traditional%20HTTP%20for%20REST-like%20interactions%0A-%20**%5BIn-Process%5D(%2Ftransports%2Finprocess)**%20-%20Direct%20integration%20for%20embedded%20scenarios%0A%0A%23%23%20Transport%20Comparison%0A%0A%7C%20Transport%20%7C%20Use%20Case%20%7C%20Pros%20%7C%20Cons%20%7C%0A%7C-----------%7C----------%7C------%7C------%7C%0A%7C%20**STDIO**%20%7C%20CLI%20tools%2C%20desktop%20apps%20%7C%20Simple%2C%20secure%2C%20no%20network%20%7C%20Single%20client%2C%20local%20only%20%7C%0A%7C%20**SSE**%20%7C%20Web%20apps%2C%20real-time%20%7C%20Multi-client%2C%20real-time%2C%20web-friendly%20%7C%20HTTP%20overhead%2C%20one-way%20streaming%20%7C%0A%7C%20**StreamableHTTP**%20%7C%20Web%20services%2C%20APIs%20%7C%20Standard%20protocol%2C%20caching%2C%20load%20balancing%20%7C%20No%20real-time%2C%20more%20complex%20%7C%0A%7C%20**In-Process**%20%7C%20Embedded%2C%20testing%20%7C%20No%20serialization%2C%20fastest%20%7C%20Same%20process%20only%20%7C%0A%0A%23%23%20Quick%20Example%0A%0AThe%20same%20server%20code%20works%20with%20any%20transport%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22os%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%20(transport-agnostic)%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Multi-Transport%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20simple%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22echo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Echo%20back%20the%20input%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22message%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleEcho%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Choose%20transport%20based%20on%20environment%0A%20%20%20%20transport%20%3A%3D%20os.Getenv(%22MCP_TRANSPORT%22)%0A%20%20%20%20port%20%3A%3D%20os.Getenv(%22PORT%22)%0A%20%20%20%20if%20port%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20port%20%3D%20%228080%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20switch%20transport%20%7B%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Starting%20SSE%20server%20on%20port%20%25s%5Cn%22%2C%20port)%0A%20%20%20%20%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20%20%20%20%20sseServer.Start(%22%3A%22%20%2B%20port)%0A%20%20%20%20case%20%22streamablehttp%22%3A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Starting%20StreamableHTTP%20server%20on%20port%20%25s%5Cn%22%2C%20port)%0A%20%20%20%20%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20%20%20%20%20httpServer.Start(%22%3A%22%20%2B%20port)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20fmt.Println(%22Starting%20STDIO%20server%22)%0A%20%20%20%20%20%20%20%20server.ServeStdio(s)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleEcho(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20message%2C%20err%20%3A%3D%20req.RequireString(%22message%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Echo%3A%20%25s%22%2C%20message))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Choosing%20the%20Right%20Transport%0A%0A%23%23%23%20STDIO%20Transport%0A**Best%20for%3A**%0A-%20Command-line%20tools%20and%20utilities%0A-%20Desktop%20application%20integrations%0A-%20Local%20development%20and%20testing%0A-%20Single-user%20scenarios%0A%0A**Example%20use%20cases%3A**%0A-%20File%20system%20tools%20for%20IDEs%0A-%20Local%20database%20utilities%0A-%20Development%20workflow%20automation%0A-%20System%20administration%20tools%0A%0A%23%23%23%20SSE%20Transport%20%20%0A**Best%20for%3A**%0A-%20Web%20applications%20requiring%20real-time%20updates%0A-%20Browser-based%20LLM%20interfaces%0A-%20Multi-user%20collaborative%20tools%0A-%20Dashboard%20and%20monitoring%20applications%0A%0A**Example%20use%20cases%3A**%0A-%20Web-based%20chat%20interfaces%0A-%20Real-time%20data%20visualization%0A-%20Collaborative%20document%20editing%0A-%20Live%20system%20monitoring%0A%0A%23%23%23%20StreamableHTTP%20Transport%0A**Best%20for%3A**%0A-%20Traditional%20web%20services%0A-%20REST%20API%20integrations%0A-%20Load-balanced%20deployments%0A-%20Stateless%20interactions%0A%0A**Example%20use%20cases%3A**%0A-%20Microservice%20architectures%0A-%20Public%20API%20endpoints%0A-%20Integration%20with%20existing%20HTTP%20infrastructure%0A-%20Cached%20or%20rate-limited%20services%0A%0A%23%23%23%20In-Process%20Transport%0A**Best%20for%3A**%0A-%20Embedded%20MCP%20servers%0A-%20Testing%20and%20development%0A-%20High-performance%20scenarios%0A-%20Library%20integrations%0A%0A**Example%20use%20cases%3A**%0A-%20Testing%20MCP%20implementations%0A-%20Embedded%20analytics%20engines%0A-%20High-frequency%20trading%20systems%0A-%20Real-time%20game%20servers%0A%0A%23%23%20Transport%20Configuration%0A%0A%23%23%23%20Environment-Based%20Selection%0A%0A%60%60%60go%0Afunc%20startServer(s%20*server.MCPServer)%20error%20%7B%0A%20%20%20%20switch%20os.Getenv(%22MCP_TRANSPORT%22)%20%7B%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20%20%20%20%20return%20sseServer.Start(getPort())%0A%20%20%20%20case%20%22streamablehttp%22%3A%0A%20%20%20%20%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20%20%20%20%20return%20httpServer.Start(getPort())%0A%20%20%20%20case%20%22inprocess%22%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20In-process%20transport%20doesn't%20use%20network%20ports%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20would%20typically%20be%20used%20differently%20in%20practice%0A%20%20%20%20%20%20%20%20client%20%3A%3D%20client.NewInProcessClient(s)%0A%20%20%20%20%20%20%20%20defer%20client.Close()%0A%20%20%20%20%20%20%20%20%2F%2F%20Keep%20the%20process%20running%0A%20%20%20%20%20%20%20%20select%20%7B%7D%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20server.ServeStdio(s)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20getPort()%20string%20%7B%0A%20%20%20%20if%20port%20%3A%3D%20os.Getenv(%22PORT%22)%3B%20port%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%3A%22%20%2B%20port%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22%3A8080%22%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multi-Transport%20Server%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Multi-Transport%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20your%20tools%2C%20resources%2C%20prompts...%0A%20%20%20%20setupServer(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20multiple%20transports%20concurrently%20with%20proper%20error%20handling%0A%20%20%20%20errChan%20%3A%3D%20make(chan%20error%2C%203)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20log.Println(%22Starting%20STDIO%20server...%22)%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22STDIO%20server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22STDIO%20server%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20log.Println(%22Starting%20SSE%20server%20on%20%3A8080...%22)%0A%20%20%20%20%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20sseServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22SSE%20server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22SSE%20server%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20log.Println(%22Starting%20StreamableHTTP%20server%20on%20%3A8081...%22)%0A%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20if%20err%20%3A%3D%20httpServer.Start(%22%3A8081%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22StreamableHTTP%20server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22StreamableHTTP%20server%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20any%20server%20to%20fail%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20err%20%3A%3D%20%3C-errChan%3A%0A%20%20%20%20%20%20%20%20log.Printf(%22Server%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20function%20for%20the%20multi-transport%20example%0Afunc%20setupServer(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20tools%2C%20resources%2C%20etc.%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%20Considerations%0A%0A%23%23%23%20Latency%20Comparison%0A-%20**In-Process**%3A%20~1%CE%BCs%20(no%20serialization)%0A-%20**STDIO**%3A%20~100%CE%BCs%20(local%20pipes)%0A-%20**HTTP%2FSSE**%3A%20~1-10ms%20(network%20%2B%20HTTP%20overhead)%0A%0A%23%23%23%20Throughput%20Comparison%0A-%20**In-Process**%3A%20Limited%20by%20CPU%2Fmemory%0A-%20**STDIO**%3A%20Limited%20by%20pipe%20buffers%20(~64KB)%0A-%20**HTTP%2FSSE**%3A%20Limited%20by%20network%20bandwidth%0A%0A%23%23%23%20Memory%20Usage%0A-%20**In-Process**%3A%20Shared%20memory%20space%0A-%20**STDIO**%3A%20Minimal%20overhead%0A-%20**HTTP%2FSSE**%3A%20Connection%20pooling%2C%20request%20buffering%0A%0A%23%23%20Security%20Considerations%0A%0A%23%23%23%20STDIO%20Transport%0A-%20**Pros**%3A%20No%20network%20exposure%2C%20process%20isolation%0A-%20**Cons**%3A%20Inherits%20parent%20process%20permissions%0A-%20**Best%20practices**%3A%20Validate%20all%20inputs%2C%20use%20least%20privilege%0A%0A%23%23%23%20Network%20Transports%20(SSE%2FHTTP)%0A-%20**Authentication**%3A%20Implement%20proper%20auth%20middleware%0A-%20**Authorization**%3A%20Validate%20permissions%20per%20request%0A-%20**Rate%20limiting**%3A%20Prevent%20abuse%20and%20DoS%0A-%20**HTTPS**%3A%20Always%20use%20TLS%20in%20production%0A%0A%60%60%60go%0A%2F%2F%20Example%20with%20security%20middleware%0As%20%3A%3D%20server.NewMCPServer(%22Secure%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolMiddleware(authMiddleware)%2C%0A%20%20%20%20server.WithToolMiddleware(rateLimitMiddleware)%2C%0A%20%20%20%20server.WithRecovery()%2C%0A)%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0AExplore%20each%20transport%20in%20detail%3A%0A%0A-%20**%5BSTDIO%20Transport%5D(%2Ftransports%2Fstdio)**%20-%20Command-line%20integration%0A-%20**%5BSSE%20Transport%5D(%2Ftransports%2Fsse)**%20-%20Real-time%20web%20applications%0A-%20**%5BStreamableHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Traditional%20web%20services%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Embedded%20scenarios",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./index-D78lGPhN.js"),[]),path:"/transports.html",type:"mdx",filePath:"transports/index.mdx",content:"%23%20Transport%20Options%0A%0AMCP-Go%20supports%20multiple%20transport%20methods%20to%20fit%20different%20deployment%20scenarios%20and%20integration%20patterns.%20Choose%20the%20right%20transport%20based%20on%20your%20use%20case%2C%20performance%20requirements%2C%20and%20client%20capabilities.%0A%0A%23%23%20Overview%0A%0ATransport%20layers%20handle%20the%20communication%20between%20MCP%20clients%20and%20servers.%20Each%20transport%20has%20different%20characteristics%20and%20is%20optimized%20for%20specific%20scenarios%3A%0A%0A-%20**%5BSTDIO%5D(%2Ftransports%2Fstdio)**%20-%20Standard%20input%2Foutput%20for%20command-line%20tools%0A-%20**%5BSSE%5D(%2Ftransports%2Fsse)**%20-%20Server-Sent%20Events%20for%20web%20applications%20%20%0A-%20**%5BStreamableHTTP%5D(%2Ftransports%2Fhttp)**%20-%20Traditional%20HTTP%20for%20REST-like%20interactions%0A-%20**%5BIn-Process%5D(%2Ftransports%2Finprocess)**%20-%20Direct%20integration%20for%20embedded%20scenarios%0A%0A%23%23%20Transport%20Comparison%0A%0A%7C%20Transport%20%7C%20Use%20Case%20%7C%20Pros%20%7C%20Cons%20%7C%0A%7C-----------%7C----------%7C------%7C------%7C%0A%7C%20**STDIO**%20%7C%20CLI%20tools%2C%20desktop%20apps%20%7C%20Simple%2C%20secure%2C%20no%20network%20%7C%20Single%20client%2C%20local%20only%20%7C%0A%7C%20**SSE**%20%7C%20Web%20apps%2C%20real-time%20%7C%20Multi-client%2C%20real-time%2C%20web-friendly%20%7C%20HTTP%20overhead%2C%20one-way%20streaming%20%7C%0A%7C%20**StreamableHTTP**%20%7C%20Web%20services%2C%20APIs%20%7C%20Standard%20protocol%2C%20caching%2C%20load%20balancing%20%7C%20No%20real-time%2C%20more%20complex%20%7C%0A%7C%20**In-Process**%20%7C%20Embedded%2C%20testing%20%7C%20No%20serialization%2C%20fastest%20%7C%20Same%20process%20only%20%7C%0A%0A%23%23%20Quick%20Example%0A%0AThe%20same%20server%20code%20works%20with%20any%20transport%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22os%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%20(transport-agnostic)%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Multi-Transport%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20a%20simple%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22echo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Echo%20back%20the%20input%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22message%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleEcho%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Choose%20transport%20based%20on%20environment%0A%20%20%20%20transport%20%3A%3D%20os.Getenv(%22MCP_TRANSPORT%22)%0A%20%20%20%20port%20%3A%3D%20os.Getenv(%22PORT%22)%0A%20%20%20%20if%20port%20%3D%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20port%20%3D%20%228080%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20switch%20transport%20%7B%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Starting%20SSE%20server%20on%20port%20%25s%5Cn%22%2C%20port)%0A%20%20%20%20%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20%20%20%20%20sseServer.Start(%22%3A%22%20%2B%20port)%0A%20%20%20%20case%20%22streamablehttp%22%3A%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Starting%20StreamableHTTP%20server%20on%20port%20%25s%5Cn%22%2C%20port)%0A%20%20%20%20%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20%20%20%20%20httpServer.Start(%22%3A%22%20%2B%20port)%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20fmt.Println(%22Starting%20STDIO%20server%22)%0A%20%20%20%20%20%20%20%20server.ServeStdio(s)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleEcho(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20message%2C%20err%20%3A%3D%20req.RequireString(%22message%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Echo%3A%20%25s%22%2C%20message))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Choosing%20the%20Right%20Transport%0A%0A%23%23%23%20STDIO%20Transport%0A**Best%20for%3A**%0A-%20Command-line%20tools%20and%20utilities%0A-%20Desktop%20application%20integrations%0A-%20Local%20development%20and%20testing%0A-%20Single-user%20scenarios%0A%0A**Example%20use%20cases%3A**%0A-%20File%20system%20tools%20for%20IDEs%0A-%20Local%20database%20utilities%0A-%20Development%20workflow%20automation%0A-%20System%20administration%20tools%0A%0A%23%23%23%20SSE%20Transport%20%20%0A**Best%20for%3A**%0A-%20Web%20applications%20requiring%20real-time%20updates%0A-%20Browser-based%20LLM%20interfaces%0A-%20Multi-user%20collaborative%20tools%0A-%20Dashboard%20and%20monitoring%20applications%0A%0A**Example%20use%20cases%3A**%0A-%20Web-based%20chat%20interfaces%0A-%20Real-time%20data%20visualization%0A-%20Collaborative%20document%20editing%0A-%20Live%20system%20monitoring%0A%0A%23%23%23%20StreamableHTTP%20Transport%0A**Best%20for%3A**%0A-%20Traditional%20web%20services%0A-%20REST%20API%20integrations%0A-%20Load-balanced%20deployments%0A-%20Stateless%20interactions%0A%0A**Example%20use%20cases%3A**%0A-%20Microservice%20architectures%0A-%20Public%20API%20endpoints%0A-%20Integration%20with%20existing%20HTTP%20infrastructure%0A-%20Cached%20or%20rate-limited%20services%0A%0A%23%23%23%20In-Process%20Transport%0A**Best%20for%3A**%0A-%20Embedded%20MCP%20servers%0A-%20Testing%20and%20development%0A-%20High-performance%20scenarios%0A-%20Library%20integrations%0A%0A**Example%20use%20cases%3A**%0A-%20Testing%20MCP%20implementations%0A-%20Embedded%20analytics%20engines%0A-%20High-frequency%20trading%20systems%0A-%20Real-time%20game%20servers%0A%0A%23%23%20Transport%20Configuration%0A%0A%23%23%23%20Environment-Based%20Selection%0A%0A%60%60%60go%0Afunc%20startServer(s%20*server.MCPServer)%20error%20%7B%0A%20%20%20%20switch%20os.Getenv(%22MCP_TRANSPORT%22)%20%7B%0A%20%20%20%20case%20%22sse%22%3A%0A%20%20%20%20%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20%20%20%20%20return%20sseServer.Start(getPort())%0A%20%20%20%20case%20%22streamablehttp%22%3A%0A%20%20%20%20%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20%20%20%20%20return%20httpServer.Start(getPort())%0A%20%20%20%20case%20%22inprocess%22%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Note%3A%20In-process%20transport%20doesn't%20use%20network%20ports%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20would%20typically%20be%20used%20differently%20in%20practice%0A%20%20%20%20%20%20%20%20client%20%3A%3D%20client.NewInProcessClient(s)%0A%20%20%20%20%20%20%20%20defer%20client.Close()%0A%20%20%20%20%20%20%20%20%2F%2F%20Keep%20the%20process%20running%0A%20%20%20%20%20%20%20%20select%20%7B%7D%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20server.ServeStdio(s)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20getPort()%20string%20%7B%0A%20%20%20%20if%20port%20%3A%3D%20os.Getenv(%22PORT%22)%3B%20port%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%3A%22%20%2B%20port%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22%3A8080%22%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Multi-Transport%20Server%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Multi-Transport%22%2C%20%221.0.0%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20your%20tools%2C%20resources%2C%20prompts...%0A%20%20%20%20setupServer(s)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20multiple%20transports%20concurrently%20with%20proper%20error%20handling%0A%20%20%20%20errChan%20%3A%3D%20make(chan%20error%2C%203)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20log.Println(%22Starting%20STDIO%20server...%22)%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22STDIO%20server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22STDIO%20server%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20log.Println(%22Starting%20SSE%20server%20on%20%3A8080...%22)%0A%20%20%20%20%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20sseServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22SSE%20server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22SSE%20server%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20log.Println(%22Starting%20StreamableHTTP%20server%20on%20%3A8081...%22)%0A%20%20%20%20httpServer%20%3A%3D%20server.NewStreamableHTTPServer(s)%0A%20%20%20%20if%20err%20%3A%3D%20httpServer.Start(%22%3A8081%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22StreamableHTTP%20server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22StreamableHTTP%20server%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20any%20server%20to%20fail%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20err%20%3A%3D%20%3C-errChan%3A%0A%20%20%20%20%20%20%20%20log.Printf(%22Server%20failed%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20function%20for%20the%20multi-transport%20example%0Afunc%20setupServer(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20tools%2C%20resources%2C%20etc.%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%20Considerations%0A%0A%23%23%23%20Latency%20Comparison%0A-%20**In-Process**%3A%20~1%CE%BCs%20(no%20serialization)%0A-%20**STDIO**%3A%20~100%CE%BCs%20(local%20pipes)%0A-%20**HTTP%2FSSE**%3A%20~1-10ms%20(network%20%2B%20HTTP%20overhead)%0A%0A%23%23%23%20Throughput%20Comparison%0A-%20**In-Process**%3A%20Limited%20by%20CPU%2Fmemory%0A-%20**STDIO**%3A%20Limited%20by%20pipe%20buffers%20(~64KB)%0A-%20**HTTP%2FSSE**%3A%20Limited%20by%20network%20bandwidth%0A%0A%23%23%23%20Memory%20Usage%0A-%20**In-Process**%3A%20Shared%20memory%20space%0A-%20**STDIO**%3A%20Minimal%20overhead%0A-%20**HTTP%2FSSE**%3A%20Connection%20pooling%2C%20request%20buffering%0A%0A%23%23%20Security%20Considerations%0A%0A%23%23%23%20STDIO%20Transport%0A-%20**Pros**%3A%20No%20network%20exposure%2C%20process%20isolation%0A-%20**Cons**%3A%20Inherits%20parent%20process%20permissions%0A-%20**Best%20practices**%3A%20Validate%20all%20inputs%2C%20use%20least%20privilege%0A%0A%23%23%23%20Network%20Transports%20(SSE%2FHTTP)%0A-%20**Authentication**%3A%20Implement%20proper%20auth%20middleware%0A-%20**Authorization**%3A%20Validate%20permissions%20per%20request%0A-%20**Rate%20limiting**%3A%20Prevent%20abuse%20and%20DoS%0A-%20**HTTPS**%3A%20Always%20use%20TLS%20in%20production%0A%0A%60%60%60go%0A%2F%2F%20Example%20with%20security%20middleware%0As%20%3A%3D%20server.NewMCPServer(%22Secure%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20server.WithToolMiddleware(authMiddleware)%2C%0A%20%20%20%20server.WithToolMiddleware(rateLimitMiddleware)%2C%0A%20%20%20%20server.WithRecovery()%2C%0A)%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0AExplore%20each%20transport%20in%20detail%3A%0A%0A-%20**%5BSTDIO%20Transport%5D(%2Ftransports%2Fstdio)**%20-%20Command-line%20integration%0A-%20**%5BSSE%20Transport%5D(%2Ftransports%2Fsse)**%20-%20Real-time%20web%20applications%0A-%20**%5BStreamableHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Traditional%20web%20services%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Embedded%20scenarios",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./inprocess-BqccRk3g.js"),[]),path:"/transports/inprocess",type:"mdx",filePath:"transports/inprocess.mdx",content:"%23%20In-Process%20Transport%0A%0AIn-process%20transport%20enables%20direct%20integration%20of%20MCP%20servers%20within%20the%20same%20process%2C%20eliminating%20network%20overhead%20and%20providing%20seamless%20integration%20for%20embedded%20scenarios.%0A%0A%23%23%20Use%20Cases%0A%0AIn-process%20transport%20is%20perfect%20for%3A%0A%0A-%20**Embedded%20servers**%3A%20MCP%20functionality%20within%20existing%20applications%0A-%20**Testing%20and%20development**%3A%20Fast%2C%20reliable%20testing%20without%20network%20overhead%0A-%20**Library%20integrations**%3A%20MCP%20as%20a%20library%20component%0A-%20**Single-process%20architectures**%3A%20Monolithic%20applications%20with%20MCP%20capabilities%0A%0A**Example%20applications%3A**%0A-%20Desktop%20applications%20with%20plugin%20architectures%0A-%20Testing%20frameworks%0A-%20Embedded%20analytics%20engines%0A-%20Game%20engines%20with%20AI%20tool%20integration%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20In-Process%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Calculator%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20calculator%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Perform%20basic%20mathematical%20calculations%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22operation%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Enum(%22add%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22divide%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22The%20operation%20to%20perform%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required()%2C%20mcp.Description(%22First%20number%22))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required()%2C%20mcp.Description(%22Second%20number%22))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleCalculate%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20in-process%20client%0A%20%20%20%20mcpClient%2C%20err%20%3A%3D%20client.NewInProcessClient(s)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20mcpClient.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%0A%20%20%20%20_%2C%20err%20%3D%20mcpClient.Initialize(ctx%2C%20mcp.InitializeRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.InitializeRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ProtocolVersion%3A%20%222024-11-05%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Capabilities%3A%20mcp.ClientCapabilities%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Tools%3A%20%26mcp.ToolsCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ClientInfo%3A%20mcp.Implementation%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%22test-client%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Version%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20the%20calculator%0A%20%20%20%20result%2C%20err%20%3A%3D%20mcpClient.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22calculate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22operation%22%3A%20%22add%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22x%22%3A%20%20%20%20%20%20%20%20%2010.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22y%22%3A%20%20%20%20%20%20%20%20%205.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Extract%20text%20from%20the%20first%20content%20item%0A%20%20%20%20if%20len(result.Content)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20if%20textContent%2C%20ok%20%3A%3D%20mcp.AsTextContent(result.Content%5B0%5D)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Result%3A%20%25s%5Cn%22%2C%20textContent.Text)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleCalculate(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20operation%20%3A%3D%20req.GetString(%22operation%22%2C%20%22%22)%0A%20%20%20%20x%20%3A%3D%20req.GetFloat(%22x%22%2C%200)%0A%20%20%20%20y%20%3A%3D%20req.GetFloat(%22y%22%2C%200)%0A%0A%20%20%20%20var%20result%20float64%0A%20%20%20%20switch%20operation%20%7B%0A%20%20%20%20case%20%22add%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20%2B%20y%0A%20%20%20%20case%20%22subtract%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20-%20y%0A%20%20%20%20case%20%22multiply%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20*%20y%0A%20%20%20%20case%20%22divide%22%3A%0A%20%20%20%20%20%20%20%20if%20y%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22division%20by%20zero%22)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20%2F%20y%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20operation%3A%20%25s%22%2C%20operation)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22%25.2f%22%2C%20result))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Embedded%20Application%20Integration%0A%0A%60%60%60go%0A%2F%2F%20Embedded%20MCP%20server%20in%20a%20larger%20application%0Atype%20Application%20struct%20%7B%0A%20%20%20%20mcpServer%20*server.MCPServer%0A%20%20%20%20mcpClient%20*client.InProcessClient%0A%20%20%20%20config%20%20%20%20*Config%0A%7D%0A%0Afunc%20NewApplication(config%20*Config)%20*Application%20%7B%0A%20%20%20%20app%20%3A%3D%20%26Application%7B%0A%20%20%20%20%20%20%20%20config%3A%20config%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20embedded%20MCP%20server%0A%20%20%20%20app.mcpServer%20%3D%20server.NewMCPServer(%22Embedded%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20application-specific%20tools%0A%20%20%20%20app.addApplicationTools()%0A%0A%20%20%20%20%2F%2F%20Create%20in-process%20client%20for%20internal%20use%0A%20%20%20%20var%20err%20error%0A%20%20%20%20app.mcpClient%2C%20err%20%3D%20client.NewInProcessClient(app.mcpServer)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20panic(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20app%0A%7D%0A%0Atype%20Config%20struct%20%7B%0A%20%20%20%20AppName%20string%0A%20%20%20%20Debug%20%20%20bool%0A%7D%0A%0Afunc%20(app%20*Application)%20addApplicationTools()%20%7B%0A%20%20%20%20%2F%2F%20Application%20status%20tool%0A%20%20%20%20app.mcpServer.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_app_status%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20current%20application%20status%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%60%7B%22app_name%22%3A%22%25s%22%2C%22debug%22%3A%25t%2C%22status%22%3A%22running%22%7D%60%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20app.config.AppName%2C%20app.config.Debug))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Configuration%20tool%0A%20%20%20%20app.mcpServer.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22update_config%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Update%20application%20configuration%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22key%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22value%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20key%20%3A%3D%20req.GetString(%22key%22%2C%20%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20value%20%3A%3D%20req.GetString(%22value%22%2C%20%22%22)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20configuration%20based%20on%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20switch%20key%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22debug%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20app.config.Debug%20%3D%20value%20%3D%3D%20%22true%22%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22app_name%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20app.config.AppName%20%3D%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22unknown%20config%20key%3A%20%25s%22%2C%20key))%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Updated%20%25s%20to%20%25s%22%2C%20key%2C%20value))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%7D%0A%0Afunc%20(app%20*Application)%20ProcessWithMCP(ctx%20context.Context%2C%20operation%20string)%20(interface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Use%20MCP%20tools%20internally%20for%20processing%0A%20%20%20%20result%2C%20err%20%3A%3D%20app.mcpClient.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22calculate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22operation%22%3A%20operation%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22x%22%3A%20%20%20%20%20%20%20%20%2010.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22y%22%3A%20%20%20%20%20%20%20%20%205.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Extract%20text%20from%20the%20first%20content%20item%0A%20%20%20%20if%20len(result.Content)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20if%20textContent%2C%20ok%20%3A%3D%20mcp.AsTextContent(result.Content%5B0%5D)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20textContent.Text%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%22no%20result%22%2C%20nil%0A%7D%0A%0A%2F%2F%20Usage%20example%0Afunc%20main()%20%7B%0A%20%20%20%20config%20%3A%3D%20%26Config%7B%0A%20%20%20%20%20%20%20%20AppName%3A%20%22My%20App%22%2C%0A%20%20%20%20%20%20%20%20Debug%3A%20%20%20true%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20app%20%3A%3D%20NewApplication(config)%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20the%20embedded%20MCP%20client%0A%20%20%20%20_%2C%20err%20%3A%3D%20app.mcpClient.Initialize(ctx%2C%20mcp.InitializeRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.InitializeRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ProtocolVersion%3A%20%222024-11-05%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Capabilities%3A%20mcp.ClientCapabilities%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Tools%3A%20%26mcp.ToolsCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ClientInfo%3A%20mcp.Implementation%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%22embedded-client%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Version%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20MCP%20functionality%20within%20the%20application%0A%20%20%20%20result%2C%20err%20%3A%3D%20app.ProcessWithMCP(ctx%2C%20%22add%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Application%20result%3A%20%25v%5Cn%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Build%20MCP%20clients%20for%20all%20transports%0A-%20**%5BHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Learn%20about%20web-based%20scenarios%0A-%20**%5BServer%20Advanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20production-ready%20features",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./inprocess-BqccRk3g.js"),[]),path:"/transports/inprocess.html",type:"mdx",filePath:"transports/inprocess.mdx",content:"%23%20In-Process%20Transport%0A%0AIn-process%20transport%20enables%20direct%20integration%20of%20MCP%20servers%20within%20the%20same%20process%2C%20eliminating%20network%20overhead%20and%20providing%20seamless%20integration%20for%20embedded%20scenarios.%0A%0A%23%23%20Use%20Cases%0A%0AIn-process%20transport%20is%20perfect%20for%3A%0A%0A-%20**Embedded%20servers**%3A%20MCP%20functionality%20within%20existing%20applications%0A-%20**Testing%20and%20development**%3A%20Fast%2C%20reliable%20testing%20without%20network%20overhead%0A-%20**Library%20integrations**%3A%20MCP%20as%20a%20library%20component%0A-%20**Single-process%20architectures**%3A%20Monolithic%20applications%20with%20MCP%20capabilities%0A%0A**Example%20applications%3A**%0A-%20Desktop%20applications%20with%20plugin%20architectures%0A-%20Testing%20frameworks%0A-%20Embedded%20analytics%20engines%0A-%20Game%20engines%20with%20AI%20tool%20integration%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20In-Process%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20server%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Calculator%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20calculator%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22calculate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Perform%20basic%20mathematical%20calculations%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22operation%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Enum(%22add%22%2C%20%22subtract%22%2C%20%22multiply%22%2C%20%22divide%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22The%20operation%20to%20perform%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithNumber(%22x%22%2C%20mcp.Required()%2C%20mcp.Description(%22First%20number%22))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithNumber(%22y%22%2C%20mcp.Required()%2C%20mcp.Description(%22Second%20number%22))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleCalculate%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20in-process%20client%0A%20%20%20%20mcpClient%2C%20err%20%3A%3D%20client.NewInProcessClient(s)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20mcpClient.Close()%0A%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%0A%20%20%20%20_%2C%20err%20%3D%20mcpClient.Initialize(ctx%2C%20mcp.InitializeRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.InitializeRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ProtocolVersion%3A%20%222024-11-05%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Capabilities%3A%20mcp.ClientCapabilities%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Tools%3A%20%26mcp.ToolsCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ClientInfo%3A%20mcp.Implementation%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%22test-client%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Version%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20the%20calculator%0A%20%20%20%20result%2C%20err%20%3A%3D%20mcpClient.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22calculate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22operation%22%3A%20%22add%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22x%22%3A%20%20%20%20%20%20%20%20%2010.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22y%22%3A%20%20%20%20%20%20%20%20%205.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Extract%20text%20from%20the%20first%20content%20item%0A%20%20%20%20if%20len(result.Content)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20if%20textContent%2C%20ok%20%3A%3D%20mcp.AsTextContent(result.Content%5B0%5D)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Result%3A%20%25s%5Cn%22%2C%20textContent.Text)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleCalculate(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20operation%20%3A%3D%20req.GetString(%22operation%22%2C%20%22%22)%0A%20%20%20%20x%20%3A%3D%20req.GetFloat(%22x%22%2C%200)%0A%20%20%20%20y%20%3A%3D%20req.GetFloat(%22y%22%2C%200)%0A%0A%20%20%20%20var%20result%20float64%0A%20%20%20%20switch%20operation%20%7B%0A%20%20%20%20case%20%22add%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20%2B%20y%0A%20%20%20%20case%20%22subtract%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20-%20y%0A%20%20%20%20case%20%22multiply%22%3A%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20*%20y%0A%20%20%20%20case%20%22divide%22%3A%0A%20%20%20%20%20%20%20%20if%20y%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(%22division%20by%20zero%22)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20result%20%3D%20x%20%2F%20y%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20operation%3A%20%25s%22%2C%20operation)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22%25.2f%22%2C%20result))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Embedded%20Application%20Integration%0A%0A%60%60%60go%0A%2F%2F%20Embedded%20MCP%20server%20in%20a%20larger%20application%0Atype%20Application%20struct%20%7B%0A%20%20%20%20mcpServer%20*server.MCPServer%0A%20%20%20%20mcpClient%20*client.InProcessClient%0A%20%20%20%20config%20%20%20%20*Config%0A%7D%0A%0Afunc%20NewApplication(config%20*Config)%20*Application%20%7B%0A%20%20%20%20app%20%3A%3D%20%26Application%7B%0A%20%20%20%20%20%20%20%20config%3A%20config%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Create%20embedded%20MCP%20server%0A%20%20%20%20app.mcpServer%20%3D%20server.NewMCPServer(%22Embedded%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20application-specific%20tools%0A%20%20%20%20app.addApplicationTools()%0A%0A%20%20%20%20%2F%2F%20Create%20in-process%20client%20for%20internal%20use%0A%20%20%20%20var%20err%20error%0A%20%20%20%20app.mcpClient%2C%20err%20%3D%20client.NewInProcessClient(app.mcpServer)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20panic(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20app%0A%7D%0A%0Atype%20Config%20struct%20%7B%0A%20%20%20%20AppName%20string%0A%20%20%20%20Debug%20%20%20bool%0A%7D%0A%0Afunc%20(app%20*Application)%20addApplicationTools()%20%7B%0A%20%20%20%20%2F%2F%20Application%20status%20tool%0A%20%20%20%20app.mcpServer.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22get_app_status%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Get%20current%20application%20status%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%60%7B%22app_name%22%3A%22%25s%22%2C%22debug%22%3A%25t%2C%22status%22%3A%22running%22%7D%60%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20app.config.AppName%2C%20app.config.Debug))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Configuration%20tool%0A%20%20%20%20app.mcpServer.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22update_config%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Update%20application%20configuration%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22key%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22value%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20key%20%3A%3D%20req.GetString(%22key%22%2C%20%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20value%20%3A%3D%20req.GetString(%22value%22%2C%20%22%22)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20configuration%20based%20on%20key%0A%20%20%20%20%20%20%20%20%20%20%20%20switch%20key%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22debug%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20app.config.Debug%20%3D%20value%20%3D%3D%20%22true%22%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22app_name%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20app.config.AppName%20%3D%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22unknown%20config%20key%3A%20%25s%22%2C%20key))%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Updated%20%25s%20to%20%25s%22%2C%20key%2C%20value))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%7D%0A%0Afunc%20(app%20*Application)%20ProcessWithMCP(ctx%20context.Context%2C%20operation%20string)%20(interface%7B%7D%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Use%20MCP%20tools%20internally%20for%20processing%0A%20%20%20%20result%2C%20err%20%3A%3D%20app.mcpClient.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22calculate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22operation%22%3A%20operation%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22x%22%3A%20%20%20%20%20%20%20%20%2010.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22y%22%3A%20%20%20%20%20%20%20%20%205.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Extract%20text%20from%20the%20first%20content%20item%0A%20%20%20%20if%20len(result.Content)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20if%20textContent%2C%20ok%20%3A%3D%20mcp.AsTextContent(result.Content%5B0%5D)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20textContent.Text%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20%22no%20result%22%2C%20nil%0A%7D%0A%0A%2F%2F%20Usage%20example%0Afunc%20main()%20%7B%0A%20%20%20%20config%20%3A%3D%20%26Config%7B%0A%20%20%20%20%20%20%20%20AppName%3A%20%22My%20App%22%2C%0A%20%20%20%20%20%20%20%20Debug%3A%20%20%20true%2C%0A%20%20%20%20%7D%0A%0A%20%20%20%20app%20%3A%3D%20NewApplication(config)%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Initialize%20the%20embedded%20MCP%20client%0A%20%20%20%20_%2C%20err%20%3A%3D%20app.mcpClient.Initialize(ctx%2C%20mcp.InitializeRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.InitializeRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ProtocolVersion%3A%20%222024-11-05%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Capabilities%3A%20mcp.ClientCapabilities%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Tools%3A%20%26mcp.ToolsCapability%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ClientInfo%3A%20mcp.Implementation%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%22embedded-client%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Version%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Use%20MCP%20functionality%20within%20the%20application%0A%20%20%20%20result%2C%20err%20%3A%3D%20app.ProcessWithMCP(ctx%2C%20%22add%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20fmt.Printf(%22Application%20result%3A%20%25v%5Cn%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Build%20MCP%20clients%20for%20all%20transports%0A-%20**%5BHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Learn%20about%20web-based%20scenarios%0A-%20**%5BServer%20Advanced%20Features%5D(%2Fservers%2Fadvanced)**%20-%20Explore%20production-ready%20features",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./sse-C2TsRAzn.js"),[]),path:"/transports/sse",type:"mdx",filePath:"transports/sse.mdx",content:"%23%20SSE%20Transport%0A%0AServer-Sent%20Events%20(SSE)%20transport%20enables%20real-time%2C%20web-friendly%20communication%20between%20MCP%20clients%20and%20servers.%20Perfect%20for%20web%20applications%20that%20need%20live%20updates%20and%20multi-client%20support.%0A%0A%23%23%20Use%20Cases%0A%0ASSE%20transport%20is%20ideal%20for%3A%0A%0A-%20**Web%20applications**%3A%20Browser-based%20LLM%20interfaces%0A-%20**Real-time%20dashboards**%3A%20Live%20data%20monitoring%20and%20visualization%0A-%20**Collaborative%20tools**%3A%20Multi-user%20environments%20with%20shared%20state%0A-%20**Streaming%20responses**%3A%20Long-running%20operations%20with%20progress%20updates%0A-%20**Event-driven%20systems**%3A%20Applications%20that%20need%20server-initiated%20communication%0A%0A**Example%20applications%3A**%0A-%20Web-based%20chat%20interfaces%20with%20LLMs%0A-%20Real-time%20analytics%20dashboards%0A-%20Collaborative%20document%20editing%0A-%20Live%20system%20monitoring%20tools%0A-%20Streaming%20data%20processing%20interfaces%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20SSE%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22SSE%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true%2C%20true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20real-time%20tools%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22stream_data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Stream%20data%20with%20real-time%20updates%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22source%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithNumber(%22count%22%2C%20mcp.DefaultNumber(10))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleStreamData%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22monitor_system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Monitor%20system%20metrics%20in%20real-time%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithNumber(%22duration%22%2C%20mcp.DefaultNumber(60))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSystemMonitor%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20dynamic%20resources%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22metrics%3A%2F%2Fcurrent%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Current%20System%20Metrics%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Real-time%20system%20metrics%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleCurrentMetrics%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20SSE%20server%0A%20%20%20%20log.Println(%22Starting%20SSE%20server%20on%20%3A8080%22)%0A%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20if%20err%20%3A%3D%20sseServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleStreamData(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20source%20%3A%3D%20req.GetString(%22source%22%2C%20%22%22)%0A%20%20%20%20count%20%3A%3D%20req.GetInt(%22count%22%2C%2010)%0A%0A%20%20%20%20%2F%2F%20Get%20server%20from%20context%20for%20notifications%0A%20%20%20%20mcpServer%20%3A%3D%20server.ServerFromContext(ctx)%0A%0A%20%20%20%20%2F%2F%20Stream%20data%20with%20progress%20updates%0A%20%20%20%20var%20results%20%5B%5Dmap%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20count%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20cancellation%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Simulate%20data%20processing%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20generateData(source%2C%20i)%0A%20%20%20%20%20%20%20%20results%20%3D%20append(results%2C%20data)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Send%20progress%20notification%0A%20%20%20%20%20%20%20%20if%20mcpServer%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20err%20%3A%3D%20mcpServer.SendNotificationToClient(ctx%2C%20%22notifications%2Fprogress%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22progress%22%3A%20i%20%2B%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22total%22%3A%20%20%20%20count%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20fmt.Sprintf(%22Processed%20%25d%2F%25d%20items%20from%20%25s%22%2C%20i%2B1%2C%20count%2C%20source)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20send%20notification%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%60%7B%22source%22%3A%22%25s%22%2C%22results%22%3A%25v%2C%22count%22%3A%25d%7D%60%2C%20%0A%20%20%20%20%20%20%20%20source%2C%20results%2C%20len(results)))%2C%20nil%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20examples%0Afunc%20generateData(source%20string%2C%20index%20int)%20map%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20return%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22source%22%3A%20source%2C%0A%20%20%20%20%20%20%20%20%22index%22%3A%20%20index%2C%0A%20%20%20%20%20%20%20%20%22value%22%3A%20%20fmt.Sprintf(%22data_%25d%22%2C%20index)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleSystemMonitor(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20duration%20%3A%3D%20req.GetInt(%22duration%22%2C%2060)%0A%20%20%20%20%0A%20%20%20%20mcpServer%20%3A%3D%20server.ServerFromContext(ctx)%0A%0A%20%20%20%20%2F%2F%20Monitor%20system%20for%20specified%20duration%0A%20%20%20%20ticker%20%3A%3D%20time.NewTicker(5%20*%20time.Second)%0A%20%20%20%20defer%20ticker.Stop()%0A%0A%20%20%20%20timeout%20%3A%3D%20time.After(time.Duration(duration)%20*%20time.Second)%0A%20%20%20%20var%20metrics%20%5B%5Dmap%5Bstring%5Dinterface%7B%7D%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20case%20%3C-timeout%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%60%7B%22duration%22%3A%25d%2C%22metrics%22%3A%25v%2C%22samples%22%3A%25d%7D%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20duration%2C%20metrics%2C%20len(metrics)))%2C%20nil%0A%20%20%20%20%20%20%20%20case%20%3C-ticker.C%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Collect%20current%20metrics%0A%20%20%20%20%20%20%20%20%20%20%20%20currentMetrics%20%3A%3D%20collectSystemMetrics()%0A%20%20%20%20%20%20%20%20%20%20%20%20metrics%20%3D%20append(metrics%2C%20currentMetrics)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Send%20real-time%20update%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20mcpServer%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20err%20%3A%3D%20mcpServer.SendNotificationToClient(ctx%2C%20%22system_metrics%22%2C%20currentMetrics)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20send%20system%20metrics%20notification%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20collectSystemMetrics()%20map%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22cpu%22%3A%20%20%20%2050.5%2C%0A%20%20%20%20%20%20%20%20%22memory%22%3A%2075.2%2C%0A%20%20%20%20%20%20%20%20%22disk%22%3A%20%20%2030.1%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleCurrentMetrics(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(%5B%5Dmcp.ResourceContents%2C%20error)%20%7B%0A%20%20%20%20metrics%20%3A%3D%20collectSystemMetrics()%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20fmt.Sprintf(%60%7B%22cpu%22%3A%25.1f%2C%22memory%22%3A%25.1f%2C%22disk%22%3A%25.1f%7D%60%2C%20metrics%5B%22cpu%22%5D%2C%20metrics%5B%22memory%22%5D%2C%20metrics%5B%22disk%22%5D)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20SSE%20Configuration%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Advanced%20SSE%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true%2C%20true)%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithLogging()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20collaborative%20tools%0A%20%20%20%20addCollaborativeTools(s)%0A%20%20%20%20addRealTimeResources(s)%0A%0A%20%20%20%20log.Println(%22Starting%20advanced%20SSE%20server%20on%20%3A8080%22)%0A%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s%2C%0A%20%20%20%20%20%20%20%20server.WithStaticBasePath(%22%2Fmcp%22)%2C%0A%20%20%20%20%20%20%20%20server.WithKeepAliveInterval(30*time.Second)%2C%0A%20%20%20%20%20%20%20%20server.WithBaseURL(%22http%3A%2F%2Flocalhost%3A8080%22)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20if%20err%20%3A%3D%20sseServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20advanced%20example%0Afunc%20addRealTimeResources(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20real-time%20resources%0A%7D%0A%0Afunc%20addCollaborativeTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Shared%20document%20editing%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22edit_document%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Edit%20a%20shared%20document%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22doc_id%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22operation%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithObject(%22data%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleDocumentEdit%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Real-time%20chat%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22send_message%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Send%20a%20message%20to%20all%20connected%20clients%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22message%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22channel%22%2C%20mcp.DefaultString(%22general%22))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSendMessage%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Live%20data%20updates%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22subscribe_updates%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Subscribe%20to%20real-time%20data%20updates%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22topic%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithArray(%22filters%22%2C%20mcp.Description(%22Optional%20filters%22))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSubscribeUpdates%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Configuration%0A%0A%23%23%23%20SSE%20Server%20Options%0A%0AThe%20SSE%20server%20can%20be%20configured%20with%20various%20options%3A%0A%0A%60%60%60go%0AsseServer%20%3A%3D%20server.NewSSEServer(s%2C%0A%20%20%20%20%2F%2F%20Set%20the%20base%20path%20for%20SSE%20endpoints%0A%20%20%20%20server.WithStaticBasePath(%22%2Fapi%2Fmcp%22)%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Configure%20keep-alive%20interval%0A%20%20%20%20server.WithKeepAliveInterval(30*time.Second)%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20base%20URL%20for%20client%20connections%0A%20%20%20%20server.WithBaseURL(%22http%3A%2F%2Flocalhost%3A8080%22)%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Configure%20SSE%20and%20message%20endpoints%0A%20%20%20%20server.WithSSEEndpoint(%22%2Fsse%22)%2C%0A%20%20%20%20server.WithMessageEndpoint(%22%2Fmessage%22)%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20context%20function%20for%20request%20processing%0A%20%20%20%20server.WithSSEContextFunc(func(ctx%20context.Context%2C%20r%20*http.Request)%20context.Context%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20custom%20context%20values%20from%20headers%0A%20%20%20%20%20%20%20%20return%20ctx%0A%20%20%20%20%7D)%2C%0A)%0A%60%60%60%0A%0A**Resulting%20endpoints%3A**%0A-%20SSE%20stream%3A%20%60http%3A%2F%2Flocalhost%3A8080%2Fapi%2Fmcp%2Fsse%60%0A-%20Message%20endpoint%3A%20%60http%3A%2F%2Flocalhost%3A8080%2Fapi%2Fmcp%2Fmessage%60%0A%0A%23%23%20Real-Time%20Notifications%0A%0ASSE%20transport%20enables%20real-time%20server-to-client%20communication%20through%20notifications.%20Use%20the%20server%20context%20to%20send%20notifications%3A%0A%0A%60%60%60go%0Afunc%20handleRealtimeTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20the%20MCP%20server%20from%20context%0A%20%20%20%20mcpServer%20%3A%3D%20server.ServerFromContext(ctx)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Send%20a%20notification%20to%20the%20client%0A%20%20%20%20if%20mcpServer%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20err%20%3A%3D%20mcpServer.SendNotificationToClient(ctx%2C%20%22custom_event%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%22Real-time%20update%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20send%20notification%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(%60%7B%22status%22%3A%22notification_sent%22%7D%60)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Session%20Management%0A%0AThe%20SSE%20server%20automatically%20handles%20session%20management.%20You%20can%20send%20events%20to%20specific%20sessions%20using%20the%20server's%20notification%20methods%3A%0A%0A%60%60%60go%0A%2F%2F%20Send%20notification%20to%20current%20client%20session%0AmcpServer.SendNotificationToClient(ctx%2C%20%22progress_update%22%2C%20progressData)%0A%0A%2F%2F%20Send%20notification%20to%20all%20connected%20clients%20(if%20supported)%0A%2F%2F%20Note%3A%20Check%20the%20server%20implementation%20for%20broadcast%20capabilities%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Learn%20about%20traditional%20web%20service%20patterns%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Explore%20embedded%20scenarios%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Build%20MCP%20clients%20for%20different%20transports",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./sse-C2TsRAzn.js"),[]),path:"/transports/sse.html",type:"mdx",filePath:"transports/sse.mdx",content:"%23%20SSE%20Transport%0A%0AServer-Sent%20Events%20(SSE)%20transport%20enables%20real-time%2C%20web-friendly%20communication%20between%20MCP%20clients%20and%20servers.%20Perfect%20for%20web%20applications%20that%20need%20live%20updates%20and%20multi-client%20support.%0A%0A%23%23%20Use%20Cases%0A%0ASSE%20transport%20is%20ideal%20for%3A%0A%0A-%20**Web%20applications**%3A%20Browser-based%20LLM%20interfaces%0A-%20**Real-time%20dashboards**%3A%20Live%20data%20monitoring%20and%20visualization%0A-%20**Collaborative%20tools**%3A%20Multi-user%20environments%20with%20shared%20state%0A-%20**Streaming%20responses**%3A%20Long-running%20operations%20with%20progress%20updates%0A-%20**Event-driven%20systems**%3A%20Applications%20that%20need%20server-initiated%20communication%0A%0A**Example%20applications%3A**%0A-%20Web-based%20chat%20interfaces%20with%20LLMs%0A-%20Real-time%20analytics%20dashboards%0A-%20Collaborative%20document%20editing%0A-%20Live%20system%20monitoring%20tools%0A-%20Streaming%20data%20processing%20interfaces%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20SSE%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22SSE%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true%2C%20true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20real-time%20tools%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22stream_data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Stream%20data%20with%20real-time%20updates%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22source%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithNumber(%22count%22%2C%20mcp.DefaultNumber(10))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleStreamData%2C%0A%20%20%20%20)%0A%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22monitor_system%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Monitor%20system%20metrics%20in%20real-time%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithNumber(%22duration%22%2C%20mcp.DefaultNumber(60))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSystemMonitor%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20dynamic%20resources%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22metrics%3A%2F%2Fcurrent%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Current%20System%20Metrics%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Real-time%20system%20metrics%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22application%2Fjson%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleCurrentMetrics%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20SSE%20server%0A%20%20%20%20log.Println(%22Starting%20SSE%20server%20on%20%3A8080%22)%0A%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s)%0A%20%20%20%20if%20err%20%3A%3D%20sseServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleStreamData(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20source%20%3A%3D%20req.GetString(%22source%22%2C%20%22%22)%0A%20%20%20%20count%20%3A%3D%20req.GetInt(%22count%22%2C%2010)%0A%0A%20%20%20%20%2F%2F%20Get%20server%20from%20context%20for%20notifications%0A%20%20%20%20mcpServer%20%3A%3D%20server.ServerFromContext(ctx)%0A%0A%20%20%20%20%2F%2F%20Stream%20data%20with%20progress%20updates%0A%20%20%20%20var%20results%20%5B%5Dmap%5Bstring%5Dinterface%7B%7D%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20count%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20cancellation%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Simulate%20data%20processing%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20generateData(source%2C%20i)%0A%20%20%20%20%20%20%20%20results%20%3D%20append(results%2C%20data)%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Send%20progress%20notification%0A%20%20%20%20%20%20%20%20if%20mcpServer%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20err%20%3A%3D%20mcpServer.SendNotificationToClient(ctx%2C%20%22notifications%2Fprogress%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22progress%22%3A%20i%20%2B%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22total%22%3A%20%20%20%20count%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%20fmt.Sprintf(%22Processed%20%25d%2F%25d%20items%20from%20%25s%22%2C%20i%2B1%2C%20count%2C%20source)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20send%20notification%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%60%7B%22source%22%3A%22%25s%22%2C%22results%22%3A%25v%2C%22count%22%3A%25d%7D%60%2C%20%0A%20%20%20%20%20%20%20%20source%2C%20results%2C%20len(results)))%2C%20nil%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20examples%0Afunc%20generateData(source%20string%2C%20index%20int)%20map%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20return%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22source%22%3A%20source%2C%0A%20%20%20%20%20%20%20%20%22index%22%3A%20%20index%2C%0A%20%20%20%20%20%20%20%20%22value%22%3A%20%20fmt.Sprintf(%22data_%25d%22%2C%20index)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleSystemMonitor(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20duration%20%3A%3D%20req.GetInt(%22duration%22%2C%2060)%0A%20%20%20%20%0A%20%20%20%20mcpServer%20%3A%3D%20server.ServerFromContext(ctx)%0A%0A%20%20%20%20%2F%2F%20Monitor%20system%20for%20specified%20duration%0A%20%20%20%20ticker%20%3A%3D%20time.NewTicker(5%20*%20time.Second)%0A%20%20%20%20defer%20ticker.Stop()%0A%0A%20%20%20%20timeout%20%3A%3D%20time.After(time.Duration(duration)%20*%20time.Second)%0A%20%20%20%20var%20metrics%20%5B%5Dmap%5Bstring%5Dinterface%7B%7D%0A%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20case%20%3C-timeout%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%60%7B%22duration%22%3A%25d%2C%22metrics%22%3A%25v%2C%22samples%22%3A%25d%7D%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20duration%2C%20metrics%2C%20len(metrics)))%2C%20nil%0A%20%20%20%20%20%20%20%20case%20%3C-ticker.C%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Collect%20current%20metrics%0A%20%20%20%20%20%20%20%20%20%20%20%20currentMetrics%20%3A%3D%20collectSystemMetrics()%0A%20%20%20%20%20%20%20%20%20%20%20%20metrics%20%3D%20append(metrics%2C%20currentMetrics)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Send%20real-time%20update%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20mcpServer%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20err%20%3A%3D%20mcpServer.SendNotificationToClient(ctx%2C%20%22system_metrics%22%2C%20currentMetrics)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20send%20system%20metrics%20notification%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20collectSystemMetrics()%20map%5Bstring%5Dinterface%7B%7D%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%22cpu%22%3A%20%20%20%2050.5%2C%0A%20%20%20%20%20%20%20%20%22memory%22%3A%2075.2%2C%0A%20%20%20%20%20%20%20%20%22disk%22%3A%20%20%2030.1%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleCurrentMetrics(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(%5B%5Dmcp.ResourceContents%2C%20error)%20%7B%0A%20%20%20%20metrics%20%3A%3D%20collectSystemMetrics()%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20fmt.Sprintf(%60%7B%22cpu%22%3A%25.1f%2C%22memory%22%3A%25.1f%2C%22disk%22%3A%25.1f%7D%60%2C%20metrics%5B%22cpu%22%5D%2C%20metrics%5B%22memory%22%5D%2C%20metrics%5B%22disk%22%5D)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20SSE%20Configuration%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Advanced%20SSE%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true%2C%20true)%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithLogging()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20collaborative%20tools%0A%20%20%20%20addCollaborativeTools(s)%0A%20%20%20%20addRealTimeResources(s)%0A%0A%20%20%20%20log.Println(%22Starting%20advanced%20SSE%20server%20on%20%3A8080%22)%0A%20%20%20%20sseServer%20%3A%3D%20server.NewSSEServer(s%2C%0A%20%20%20%20%20%20%20%20server.WithStaticBasePath(%22%2Fmcp%22)%2C%0A%20%20%20%20%20%20%20%20server.WithKeepAliveInterval(30*time.Second)%2C%0A%20%20%20%20%20%20%20%20server.WithBaseURL(%22http%3A%2F%2Flocalhost%3A8080%22)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20if%20err%20%3A%3D%20sseServer.Start(%22%3A8080%22)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20advanced%20example%0Afunc%20addRealTimeResources(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%20-%20would%20add%20real-time%20resources%0A%7D%0A%0Afunc%20addCollaborativeTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Shared%20document%20editing%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22edit_document%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Edit%20a%20shared%20document%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22doc_id%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22operation%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithObject(%22data%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleDocumentEdit%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Real-time%20chat%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22send_message%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Send%20a%20message%20to%20all%20connected%20clients%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22message%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22channel%22%2C%20mcp.DefaultString(%22general%22))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSendMessage%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Live%20data%20updates%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22subscribe_updates%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Subscribe%20to%20real-time%20data%20updates%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22topic%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithArray(%22filters%22%2C%20mcp.Description(%22Optional%20filters%22))%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleSubscribeUpdates%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Configuration%0A%0A%23%23%23%20SSE%20Server%20Options%0A%0AThe%20SSE%20server%20can%20be%20configured%20with%20various%20options%3A%0A%0A%60%60%60go%0AsseServer%20%3A%3D%20server.NewSSEServer(s%2C%0A%20%20%20%20%2F%2F%20Set%20the%20base%20path%20for%20SSE%20endpoints%0A%20%20%20%20server.WithStaticBasePath(%22%2Fapi%2Fmcp%22)%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Configure%20keep-alive%20interval%0A%20%20%20%20server.WithKeepAliveInterval(30*time.Second)%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20base%20URL%20for%20client%20connections%0A%20%20%20%20server.WithBaseURL(%22http%3A%2F%2Flocalhost%3A8080%22)%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Configure%20SSE%20and%20message%20endpoints%0A%20%20%20%20server.WithSSEEndpoint(%22%2Fsse%22)%2C%0A%20%20%20%20server.WithMessageEndpoint(%22%2Fmessage%22)%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20context%20function%20for%20request%20processing%0A%20%20%20%20server.WithSSEContextFunc(func(ctx%20context.Context%2C%20r%20*http.Request)%20context.Context%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20custom%20context%20values%20from%20headers%0A%20%20%20%20%20%20%20%20return%20ctx%0A%20%20%20%20%7D)%2C%0A)%0A%60%60%60%0A%0A**Resulting%20endpoints%3A**%0A-%20SSE%20stream%3A%20%60http%3A%2F%2Flocalhost%3A8080%2Fapi%2Fmcp%2Fsse%60%0A-%20Message%20endpoint%3A%20%60http%3A%2F%2Flocalhost%3A8080%2Fapi%2Fmcp%2Fmessage%60%0A%0A%23%23%20Real-Time%20Notifications%0A%0ASSE%20transport%20enables%20real-time%20server-to-client%20communication%20through%20notifications.%20Use%20the%20server%20context%20to%20send%20notifications%3A%0A%0A%60%60%60go%0Afunc%20handleRealtimeTool(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20the%20MCP%20server%20from%20context%0A%20%20%20%20mcpServer%20%3A%3D%20server.ServerFromContext(ctx)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Send%20a%20notification%20to%20the%20client%0A%20%20%20%20if%20mcpServer%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20err%20%3A%3D%20mcpServer.SendNotificationToClient(ctx%2C%20%22custom_event%22%2C%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%22Real-time%20update%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now().Unix()%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20send%20notification%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mcp.NewToolResultText(%60%7B%22status%22%3A%22notification_sent%22%7D%60)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Session%20Management%0A%0AThe%20SSE%20server%20automatically%20handles%20session%20management.%20You%20can%20send%20events%20to%20specific%20sessions%20using%20the%20server's%20notification%20methods%3A%0A%0A%60%60%60go%0A%2F%2F%20Send%20notification%20to%20current%20client%20session%0AmcpServer.SendNotificationToClient(ctx%2C%20%22progress_update%22%2C%20progressData)%0A%0A%2F%2F%20Send%20notification%20to%20all%20connected%20clients%20(if%20supported)%0A%2F%2F%20Note%3A%20Check%20the%20server%20implementation%20for%20broadcast%20capabilities%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Learn%20about%20traditional%20web%20service%20patterns%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Explore%20embedded%20scenarios%0A-%20**%5BClient%20Development%5D(%2Fclients)**%20-%20Build%20MCP%20clients%20for%20different%20transports",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./stdio-BSnDBDSC.js"),[]),path:"/transports/stdio",type:"mdx",filePath:"transports/stdio.mdx",content:"%23%20STDIO%20Transport%0A%0ASTDIO%20(Standard%20Input%2FOutput)%20transport%20is%20the%20most%20common%20MCP%20transport%20method%2C%20perfect%20for%20command-line%20tools%2C%20desktop%20applications%2C%20and%20local%20integrations.%0A%0A%23%23%20Use%20Cases%0A%0ASTDIO%20transport%20excels%20in%20scenarios%20where%3A%0A%0A-%20**Command-line%20tools**%3A%20CLI%20utilities%20that%20LLMs%20can%20invoke%0A-%20**Desktop%20applications**%3A%20IDE%20plugins%2C%20text%20editors%2C%20local%20tools%0A-%20**Subprocess%20communication**%3A%20Parent%20processes%20managing%20MCP%20servers%0A-%20**Local%20development**%3A%20Testing%20and%20debugging%20MCP%20implementations%0A-%20**Single-user%20scenarios**%3A%20Personal%20productivity%20tools%0A%0A**Example%20applications%3A**%0A-%20File%20system%20browsers%20for%20IDEs%0A-%20Local%20database%20query%20tools%0A-%20Git%20repository%20analyzers%0A-%20System%20monitoring%20utilities%0A-%20Development%20workflow%20automation%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20STDIO%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22os%22%0A%20%20%20%20%22path%2Ffilepath%22%0A%20%20%20%20%22strings%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22File%20Tools%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true%2C%20true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20file%20listing%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22list_files%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22List%20files%20in%20a%20directory%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22path%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Directory%20path%20to%20list%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithBoolean(%22recursive%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.DefaultBool(false)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22List%20files%20recursively%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleListFiles%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20file%20content%20resource%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22file%3A%2F%2F%7Bpath%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22File%20Content%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Read%20file%20contents%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22text%2Fplain%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleFileContent%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20STDIO%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Fprintf(os.Stderr%2C%20%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleListFiles(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20path%2C%20err%20%3A%3D%20req.RequireString(%22path%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20recursive%2C%20err%20%3A%3D%20req.RequireBool(%22recursive%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Security%3A%20validate%20path%0A%20%20%20%20if%20!isValidPath(path)%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22invalid%20path%3A%20%25s%22%2C%20path))%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20files%2C%20err%20%3A%3D%20listFiles(path%2C%20recursive)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20list%20files%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%60%7B%22path%22%3A%22%25s%22%2C%22files%22%3A%25v%2C%22count%22%3A%25d%2C%22recursive%22%3A%25t%7D%60%2C%20%0A%20%20%20%20%20%20%20%20path%2C%20files%2C%20len(files)%2C%20recursive))%2C%20nil%0A%7D%0A%0Afunc%20handleFileContent(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(%5B%5Dmcp.ResourceContents%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20path%20from%20URI%3A%20%22file%3A%2F%2F%2Fpath%2Fto%2Ffile%22%20-%3E%20%22%2Fpath%2Fto%2Ffile%22%0A%20%20%20%20path%20%3A%3D%20extractPathFromURI(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20if%20!isValidPath(path)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20path%3A%20%25s%22%2C%20path)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%2C%20err%20%3A%3D%20os.ReadFile(path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20file%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20detectMIMEType(path)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(content)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20isValidPath(path%20string)%20bool%20%7B%0A%20%20%20%20%2F%2F%20Clean%20the%20path%20to%20resolve%20any%20.%20or%20..%20components%0A%20%20%20%20clean%20%3A%3D%20filepath.Clean(path)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20for%20directory%20traversal%20patterns%0A%20%20%20%20if%20strings.Contains(clean%2C%20%22..%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20absolute%20paths%2C%20ensure%20they're%20within%20a%20safe%20base%20directory%0A%20%20%20%20if%20filepath.IsAbs(clean)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Define%20safe%20base%20directories%20(adjust%20as%20needed%20for%20your%20use%20case)%0A%20%20%20%20%20%20%20%20safeBaseDirs%20%3A%3D%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2Ftmp%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2Fvar%2Ftmp%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2Fhome%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2FUsers%22%2C%20%2F%2F%20macOS%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20the%20path%20starts%20with%20any%20safe%20base%20directory%0A%20%20%20%20%20%20%20%20for%20_%2C%20baseDir%20%3A%3D%20range%20safeBaseDirs%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20strings.HasPrefix(clean%2C%20baseDir)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20relative%20paths%2C%20ensure%20they%20don't%20escape%20the%20current%20directory%0A%20%20%20%20return%20!strings.HasPrefix(clean%2C%20%22..%22)%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20examples%0Afunc%20listFiles(path%20string%2C%20recursive%20bool)%20(%5B%5Dstring%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20%5B%5Dstring%7B%22file1.txt%22%2C%20%22file2.txt%22%7D%2C%20nil%0A%7D%0A%0Afunc%20extractPathFromURI(uri%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Extract%20path%20from%20URI%3A%20%22file%3A%2F%2F%2Fpath%2Fto%2Ffile%22%20-%3E%20%22%2Fpath%2Fto%2Ffile%22%0A%20%20%20%20if%20strings.HasPrefix(uri%2C%20%22file%3A%2F%2F%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20strings.TrimPrefix(uri%2C%20%22file%3A%2F%2F%22)%0A%20%20%20%20%7D%0A%20%20%20%20return%20uri%0A%7D%0A%0Afunc%20detectMIMEType(path%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Simple%20MIME%20type%20detection%20based%20on%20extension%0A%20%20%20%20ext%20%3A%3D%20filepath.Ext(path)%0A%20%20%20%20switch%20ext%20%7B%0A%20%20%20%20case%20%22.txt%22%3A%0A%20%20%20%20%20%20%20%20return%20%22text%2Fplain%22%0A%20%20%20%20case%20%22.json%22%3A%0A%20%20%20%20%20%20%20%20return%20%22application%2Fjson%22%0A%20%20%20%20case%20%22.html%22%3A%0A%20%20%20%20%20%20%20%20return%20%22text%2Fhtml%22%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20%22application%2Foctet-stream%22%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20STDIO%20Server%0A%0A%60%60%60go%0Apackage%20main%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22os%22%0A%20%20%20%20%22os%2Fsignal%22%0A%20%20%20%20%22syscall%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Advanced%20CLI%20Tool%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true%2C%20true)%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithLogging()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20comprehensive%20tools%0A%20%20%20%20addSystemTools(s)%0A%20%20%20%20addFileTools(s)%0A%20%20%20%20addGitTools(s)%0A%20%20%20%20addDatabaseTools(s)%0A%0A%20%20%20%20%2F%2F%20Handle%20graceful%20shutdown%0A%20%20%20%20setupGracefulShutdown(s)%0A%0A%20%20%20%20%2F%2F%20Start%20with%20error%20handling%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Server%20error%3A%20%25v%22%2C%20err))%0A%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20advanced%20example%0Afunc%20logToFile(message%20string)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20log.Println(message)%0A%7D%0A%0Afunc%20logError(message%20string)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20log.Printf(%22ERROR%3A%20%25s%22%2C%20message)%0A%7D%0A%0Afunc%20addSystemTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20addFileTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20addGitTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20addDatabaseTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20setupGracefulShutdown(s%20*server.MCPServer)%20%7B%0A%20%20%20%20c%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(c%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%3C-c%0A%20%20%20%20%20%20%20%20logToFile(%22Received%20shutdown%20signal%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%205*time.Second)%0A%20%20%20%20%20%20%20%20defer%20cancel()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20s.Shutdown(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Shutdown%20error%3A%20%25v%22%2C%20err))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20os.Exit(0)%0A%20%20%20%20%7D()%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Integration%0A%0A%23%23%23%20How%20LLM%20Applications%20Connect%0A%0ALLM%20applications%20typically%20connect%20to%20STDIO%20MCP%20servers%20by%3A%0A%0A1.%20**Spawning%20the%20process**%3A%20Starting%20your%20server%20as%20a%20subprocess%0A2.%20**Pipe%20communication**%3A%20Using%20stdin%2Fstdout%20for%20JSON-RPC%20messages%0A3.%20**Lifecycle%20management**%3A%20Handling%20process%20startup%2C%20shutdown%2C%20and%20errors%0A%0A%23%23%23%20Claude%20Desktop%20Integration%0A%0AConfigure%20your%20STDIO%20server%20in%20Claude%20Desktop%3A%0A%0A%60%60%60json%0A%7B%0A%20%20%22mcpServers%22%3A%20%7B%0A%20%20%20%20%22file-tools%22%3A%20%7B%0A%20%20%20%20%20%20%22command%22%3A%20%22go%22%2C%0A%20%20%20%20%20%20%22args%22%3A%20%5B%22run%22%2C%20%22%2Fpath%2Fto%2Fyour%2Fserver%2Fmain.go%22%5D%2C%0A%20%20%20%20%20%20%22env%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22LOG_LEVEL%22%3A%20%22info%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A**macOS**%3A%20%60~%2FLibrary%2FApplication%20Support%2FClaude%2Fclaude_desktop_config.json%60%0A**Windows**%3A%20%60%25APPDATA%25%5CClaude%5Cclaude_desktop_config.json%60%0A%0A%23%23%23%20Custom%20Client%20Integration%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22time%22%0A%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20STDIO%20client%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20nil%20%2F*%20inherit%20env%20*%2F%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20%2F%2F%20Initialize%20connection%0A%20%20%20%20_%2C%20err%20%3D%20c.Initialize(ctx%2C%20mcp.InitializeRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.InitializeRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ProtocolVersion%3A%20mcp.LATEST_PROTOCOL_VERSION%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ClientInfo%3A%20mcp.Implementation%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%22test-client%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Version%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx%2C%20mcp.ListToolsRequest%7B%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22-%20%25s%3A%20%25s%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20tool%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22list_files%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22path%22%3A%20%20%20%20%20%20%22.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22recursive%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Customizing%20Subprocess%20Execution%0A%0AIf%20you%20need%20more%20control%20over%20how%20a%20sub-process%20is%20spawned%20when%20creating%20a%20new%20STDIO%20client%2C%20you%20can%20use%0A%60NewStdioMCPClientWithOptions%60%20instead%20of%20%60NewStdioMCPClient%60.%0A%0ABy%20passing%20the%20%60WithCommandFunc%60%20option%2C%20you%20can%20supply%20a%20custom%20factory%20function%20to%20create%20the%20%60exec.Cmd%60%20that%20launches%0Athe%20server.%20This%20allows%20configuration%20of%20environment%20variables%2C%20working%20directories%2C%20and%20system-level%20process%20attributes.%0A%0AReferring%20to%20the%20previous%20example%2C%20we%20can%20replace%20the%20line%20that%20creates%20the%20client%3A%0A%0A%60%60%60go%0Ac%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%22go%22%2C%20nil%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A)%0A%60%60%60%0A%0AWith%20the%20options-aware%20version%3A%0A%0A%60%60%60go%0Ac%2C%20err%20%3A%3D%20client.NewStdioMCPClientWithOptions(%0A%09%22go%22%2C%0A%09nil%2C%0A%09%5B%5Dstring%20%7B%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%7D%2C%0A%09transport.WithCommandFunc(func(ctx%20context.Context%2C%20command%20string%2C%20args%20%5B%5Dstring%2C%20env%20%5B%5Dstring)%20(*exec.Cmd%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20cmd%20%3A%3D%20exec.CommandContext(ctx%2C%20command%2C%20args...)%0A%20%20%20%20%20%20%20%20cmd.Env%20%3D%20env%20%2F%2F%20Explicit%20environment%20for%20the%20subprocess.%0A%20%20%20%20%20%20%20%20cmd.Dir%20%3D%20%22%2Fvar%2Fsandbox%2Fmcp-server%22%20%2F%2F%20Working%20directory%20(not%20isolated%20unless%20paired%20with%20chroot%20or%20namespace).%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Apply%20low-level%20process%20isolation%20and%20privilege%20dropping.%0A%20%20%20%20%20%20%20%20cmd.SysProcAttr%20%3D%20%26syscall.SysProcAttr%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Drop%20to%20non-root%20user%20(e.g.%2C%20user%2Fgroup%20ID%201001)%0A%20%20%20%20%20%20%20%20%20%20%20%20Credential%3A%20%26syscall.Credential%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Uid%3A%201001%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Gid%3A%201001%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20File%20system%20isolation%3A%20only%20works%20if%20running%20as%20root.%0A%20%20%20%20%20%20%20%20%20%20%20%20Chroot%3A%20%22%2Fvar%2Fsandbox%2Fmcp-server%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Linux%20namespace%20isolation%20(Linux%20only)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Prevents%20access%20to%20other%20processes%2C%20mounts%2C%20IPC%2C%20networks%2C%20etc.%0A%20%20%20%20%20%20%20%20%20%20%20%20Cloneflags%3A%20syscall.CLONE_NEWIPC%20%7C%20%2F%2F%20Isolate%20inter-process%20comms%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20syscall.CLONE_NEWNS%20%20%7C%20%2F%2F%20Isolate%20filesystem%20mounts%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20syscall.CLONE_NEWPID%20%7C%20%2F%2F%20Isolate%20PID%20namespace%20(child%20sees%20itself%20as%20PID%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20syscall.CLONE_NEWUTS%20%7C%20%2F%2F%20Isolate%20hostname%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20syscall.CLONE_NEWNET%2C%20%20%2F%2F%20Isolate%20networking%20(optional)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%09%09return%20cmd%2C%20nil%0A%09%7D)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Debugging%0A%0A%23%23%23%20Command%20Line%20Testing%0A%0ATest%20your%20STDIO%20server%20directly%20from%20the%20command%20line%3A%0A%0A%60%60%60bash%0A%23%20Start%20your%20server%0Ago%20run%20main.go%0A%0A%23%20Send%20initialization%20request%0Aecho%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A1%2C%22method%22%3A%22initialize%22%2C%22params%22%3A%7B%22protocolVersion%22%3A%222024-11-05%22%2C%22capabilities%22%3A%7B%22tools%22%3A%7B%7D%7D%2C%22clientInfo%22%3A%7B%22name%22%3A%22test%22%2C%22version%22%3A%221.0.0%22%7D%7D%7D'%20%7C%20go%20run%20main.go%0A%0A%23%20List%20tools%0Aecho%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A2%2C%22method%22%3A%22tools%2Flist%22%2C%22params%22%3A%7B%7D%7D'%20%7C%20go%20run%20main.go%0A%0A%23%20Call%20a%20tool%0Aecho%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A3%2C%22method%22%3A%22tools%2Fcall%22%2C%22params%22%3A%7B%22name%22%3A%22list_files%22%2C%22arguments%22%3A%7B%22path%22%3A%22.%22%2C%22recursive%22%3Afalse%7D%7D%7D'%20%7C%20go%20run%20main.go%0A%60%60%60%0A%0A%23%23%23%20Interactive%20Testing%20Script%0A%0A%60%60%60bash%0A%23!%2Fbin%2Fbash%0A%0A%23%20interactive_test.sh%0ASERVER_CMD%3D%22go%20run%20main.go%22%0A%0Aecho%20%22Starting%20MCP%20STDIO%20server%20test...%22%0A%0A%23%20Function%20to%20send%20JSON-RPC%20request%0Asend_request()%20%7B%0A%20%20%20%20local%20request%3D%22%241%22%0A%20%20%20%20echo%20%22Sending%3A%20%24request%22%0A%20%20%20%20echo%20%22%24request%22%20%7C%20%24SERVER_CMD%0A%20%20%20%20echo%20%22---%22%0A%7D%0A%0A%23%20Initialize%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A1%2C%22method%22%3A%22initialize%22%2C%22params%22%3A%7B%22protocolVersion%22%3A%222024-11-05%22%2C%22capabilities%22%3A%7B%22tools%22%3A%7B%7D%7D%2C%22clientInfo%22%3A%7B%22name%22%3A%22test%22%2C%22version%22%3A%221.0.0%22%7D%7D%7D'%0A%0A%23%20List%20tools%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A2%2C%22method%22%3A%22tools%2Flist%22%2C%22params%22%3A%7B%7D%7D'%0A%0A%23%20List%20resources%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A3%2C%22method%22%3A%22resources%2Flist%22%2C%22params%22%3A%7B%7D%7D'%0A%0A%23%20Call%20tool%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A4%2C%22method%22%3A%22tools%2Fcall%22%2C%22params%22%3A%7B%22name%22%3A%22list_files%22%2C%22arguments%22%3A%7B%22path%22%3A%22.%22%2C%22recursive%22%3Afalse%7D%7D%7D'%0A%0Aecho%20%22Test%20completed.%22%0A%60%60%60%0A%0A%23%23%23%20Debug%20Logging%0A%0AAdd%20debug%20logging%20to%20your%20STDIO%20server%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Setup%20debug%20logging%0A%20%20%20%20logFile%2C%20err%20%3A%3D%20os.OpenFile(%22mcp-server.log%22%2C%20os.O_CREATE%7Cos.O_WRONLY%7Cos.O_APPEND%2C%200666)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20logFile.Close()%0A%0A%20%20%20%20logger%20%3A%3D%20log.New(logFile%2C%20%22%5BMCP%5D%20%22%2C%20log.LstdFlags%7Clog.Lshortfile)%0A%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Debug%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithLogging()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tools%20with%20debug%20logging%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22debug_echo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Echo%20with%20debug%20logging%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22message%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20message%20%3A%3D%20req.GetString(%22message%22%2C%20%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20logger.Printf(%22Echo%20tool%20called%20with%20message%3A%20%25s%22%2C%20message)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Echo%3A%20%25s%22%2C%20message))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%0A%20%20%20%20logger.Println(%22Starting%20STDIO%20server...%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20logger.Printf(%22Server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20MCP%20Inspector%20Integration%0A%0AUse%20the%20MCP%20Inspector%20for%20visual%20debugging%3A%0A%0A%60%60%60bash%0A%23%20Install%20MCP%20Inspector%0Anpm%20install%20-g%20%40modelcontextprotocol%2Finspector%0A%0A%23%20Run%20your%20server%20with%20inspector%0Amcp-inspector%20go%20run%20main.go%0A%60%60%60%0A%0AThis%20opens%20a%20web%20interface%20where%20you%20can%3A%0A-%20View%20available%20tools%20and%20resources%0A-%20Test%20tool%20calls%20interactively%0A-%20Inspect%20request%2Fresponse%20messages%0A-%20Debug%20protocol%20issues%0A%0A%23%23%20Error%20Handling%0A%0A%23%23%23%20Robust%20Error%20Handling%0A%0A%60%60%60go%0Afunc%20handleToolWithErrors(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Validate%20required%20parameters%0A%20%20%20%20path%2C%20err%20%3A%3D%20req.RequireString(%22path%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22path%20parameter%20is%20required%20and%20must%20be%20a%20string%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Validate%20path%20security%0A%20%20%20%20if%20!isValidPath(path)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20or%20unsafe%20path%3A%20%25s%22%2C%20path)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Check%20if%20path%20exists%0A%20%20%20%20if%20_%2C%20err%20%3A%3D%20os.Stat(path)%3B%20os.IsNotExist(err)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22path%20does%20not%20exist%3A%20%25s%22%2C%20path)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Handle%20context%20cancellation%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20default%3A%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Perform%20operation%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20performOperation(ctx%2C%20path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Log%20error%20for%20debugging%0A%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Operation%20failed%20for%20path%20%25s%3A%20%25v%22%2C%20path%2C%20err))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20user-friendly%20error%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.DeadlineExceeded)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22operation%20timed%20out%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22operation%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22%25v%22%2C%20result))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Process%20Management%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Handle%20panics%20gracefully%0A%20%20%20%20defer%20func()%20%7B%0A%20%20%20%20%20%20%20%20if%20r%20%3A%3D%20recover()%3B%20r%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Server%20panic%3A%20%25v%22%2C%20r))%0A%20%20%20%20%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Robust%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%20%2F%2F%20Built-in%20panic%20recovery%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Setup%20signal%20handling%0A%20%20%20%20setupSignalHandling()%0A%0A%20%20%20%20%2F%2F%20Start%20server%20with%20retry%20logic%0A%20%20%20%20for%20attempts%20%3A%3D%200%3B%20attempts%20%3C%203%3B%20attempts%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Server%20attempt%20%25d%20failed%3A%20%25v%22%2C%20attempts%2B1%2C%20err))%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20attempts%20%3D%3D%202%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(time.Second%20*%20time.Duration(attempts%2B1))%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20setupSignalHandling()%20%7B%0A%20%20%20%20c%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(c%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20sig%20%3A%3D%20%3C-c%0A%20%20%20%20%20%20%20%20logToFile(fmt.Sprintf(%22Received%20signal%3A%20%25v%22%2C%20sig))%0A%20%20%20%20%20%20%20%20os.Exit(0)%0A%20%20%20%20%7D()%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%20Optimization%0A%0A%23%23%23%20Efficient%20Resource%20Usage%0A%0A%60%60%60go%0A%2F%2F%20Use%20connection%20pooling%20for%20database%20tools%0Avar%20dbPool%20*sql.DB%0A%0Afunc%20init()%20%7B%0A%20%20%20%20var%20err%20error%0A%20%20%20%20dbPool%2C%20err%20%3D%20sql.Open(%22sqlite3%22%2C%20%22data.db%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20dbPool.SetMaxOpenConns(10)%0A%20%20%20%20dbPool.SetMaxIdleConns(5)%0A%20%20%20%20dbPool.SetConnMaxLifetime(time.Hour)%0A%7D%0A%0A%2F%2F%20Cache%20frequently%20accessed%20data%0Avar%20fileCache%20%3D%20make(map%5Bstring%5DcacheEntry)%0Avar%20cacheMutex%20sync.RWMutex%0A%0Atype%20cacheEntry%20struct%20%7B%0A%20%20%20%20content%20%20%20string%0A%20%20%20%20timestamp%20time.Time%0A%7D%0A%0Afunc%20getCachedFile(path%20string)%20(string%2C%20bool)%20%7B%0A%20%20%20%20cacheMutex.RLock()%0A%20%20%20%20defer%20cacheMutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20entry%2C%20exists%20%3A%3D%20fileCache%5Bpath%5D%0A%20%20%20%20if%20!exists%20%7C%7C%20time.Since(entry.timestamp)%20%3E%205*time.Minute%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20entry.content%2C%20true%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Memory%20Management%0A%0A%60%60%60go%0Afunc%20handleLargeFile(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20path%20%3A%3D%20req.GetString(%22path%22%2C%20%22%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Stream%20large%20files%20instead%20of%20loading%20into%20memory%0A%20%20%20%20file%2C%20err%20%3A%3D%20os.Open(path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20file.Close()%0A%0A%20%20%20%20%2F%2F%20Process%20in%20chunks%0A%20%20%20%20const%20chunkSize%20%3D%2064%20*%201024%0A%20%20%20%20buffer%20%3A%3D%20make(%5B%5Dbyte%2C%20chunkSize)%0A%20%20%20%20%0A%20%20%20%20var%20result%20strings.Builder%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20n%2C%20err%20%3A%3D%20file.Read(buffer)%0A%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20io.EOF%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20chunk%0A%20%20%20%20%20%20%20%20processed%20%3A%3D%20processChunk(buffer%5B%3An%5D)%0A%20%20%20%20%20%20%20%20result.WriteString(processed)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20cancellation%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(result.String())%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BSSE%20Transport%5D(%2Ftransports%2Fsse)**%20-%20Learn%20about%20real-time%20web%20communication%0A-%20**%5BHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Explore%20traditional%20web%20service%20patterns%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Understand%20embedded%20scenarios",lastUpdatedAt:1752044619e3},{lazy:()=>P2(()=>import("./stdio-BSnDBDSC.js"),[]),path:"/transports/stdio.html",type:"mdx",filePath:"transports/stdio.mdx",content:"%23%20STDIO%20Transport%0A%0ASTDIO%20(Standard%20Input%2FOutput)%20transport%20is%20the%20most%20common%20MCP%20transport%20method%2C%20perfect%20for%20command-line%20tools%2C%20desktop%20applications%2C%20and%20local%20integrations.%0A%0A%23%23%20Use%20Cases%0A%0ASTDIO%20transport%20excels%20in%20scenarios%20where%3A%0A%0A-%20**Command-line%20tools**%3A%20CLI%20utilities%20that%20LLMs%20can%20invoke%0A-%20**Desktop%20applications**%3A%20IDE%20plugins%2C%20text%20editors%2C%20local%20tools%0A-%20**Subprocess%20communication**%3A%20Parent%20processes%20managing%20MCP%20servers%0A-%20**Local%20development**%3A%20Testing%20and%20debugging%20MCP%20implementations%0A-%20**Single-user%20scenarios**%3A%20Personal%20productivity%20tools%0A%0A**Example%20applications%3A**%0A-%20File%20system%20browsers%20for%20IDEs%0A-%20Local%20database%20query%20tools%0A-%20Git%20repository%20analyzers%0A-%20System%20monitoring%20utilities%0A-%20Development%20workflow%20automation%0A%0A%23%23%20Implementation%0A%0A%23%23%23%20Basic%20STDIO%20Server%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22os%22%0A%20%20%20%20%22path%2Ffilepath%22%0A%20%20%20%20%22strings%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22File%20Tools%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true%2C%20true)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20file%20listing%20tool%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22list_files%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22List%20files%20in%20a%20directory%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22path%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Required()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22Directory%20path%20to%20list%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithBoolean(%22recursive%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.DefaultBool(false)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mcp.Description(%22List%20files%20recursively%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleListFiles%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20file%20content%20resource%0A%20%20%20%20s.AddResource(%0A%20%20%20%20%20%20%20%20mcp.NewResource(%0A%20%20%20%20%20%20%20%20%20%20%20%20%22file%3A%2F%2F%7Bpath%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22File%20Content%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithResourceDescription(%22Read%20file%20contents%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithMIMEType(%22text%2Fplain%22)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20handleFileContent%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Start%20STDIO%20server%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20fmt.Fprintf(os.Stderr%2C%20%22Server%20error%3A%20%25v%5Cn%22%2C%20err)%0A%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20handleListFiles(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20path%2C%20err%20%3A%3D%20req.RequireString(%22path%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20recursive%2C%20err%20%3A%3D%20req.RequireBool(%22recursive%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(err.Error())%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Security%3A%20validate%20path%0A%20%20%20%20if%20!isValidPath(path)%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22invalid%20path%3A%20%25s%22%2C%20path))%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20files%2C%20err%20%3A%3D%20listFiles(path%2C%20recursive)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20mcp.NewToolResultError(fmt.Sprintf(%22failed%20to%20list%20files%3A%20%25v%22%2C%20err))%2C%20nil%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%60%7B%22path%22%3A%22%25s%22%2C%22files%22%3A%25v%2C%22count%22%3A%25d%2C%22recursive%22%3A%25t%7D%60%2C%20%0A%20%20%20%20%20%20%20%20path%2C%20files%2C%20len(files)%2C%20recursive))%2C%20nil%0A%7D%0A%0Afunc%20handleFileContent(ctx%20context.Context%2C%20req%20mcp.ReadResourceRequest)%20(%5B%5Dmcp.ResourceContents%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Extract%20path%20from%20URI%3A%20%22file%3A%2F%2F%2Fpath%2Fto%2Ffile%22%20-%3E%20%22%2Fpath%2Fto%2Ffile%22%0A%20%20%20%20path%20%3A%3D%20extractPathFromURI(req.Params.URI)%0A%20%20%20%20%0A%20%20%20%20if%20!isValidPath(path)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20path%3A%20%25s%22%2C%20path)%0A%20%20%20%20%7D%0A%0A%20%20%20%20content%2C%20err%20%3A%3D%20os.ReadFile(path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20read%20file%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20%5B%5Dmcp.ResourceContents%7B%0A%20%20%20%20%20%20%20%20mcp.TextResourceContents%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20URI%3A%20%20%20%20%20%20req.Params.URI%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20MIMEType%3A%20detectMIMEType(path)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Text%3A%20%20%20%20%20string(content)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20isValidPath(path%20string)%20bool%20%7B%0A%20%20%20%20%2F%2F%20Clean%20the%20path%20to%20resolve%20any%20.%20or%20..%20components%0A%20%20%20%20clean%20%3A%3D%20filepath.Clean(path)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20for%20directory%20traversal%20patterns%0A%20%20%20%20if%20strings.Contains(clean%2C%20%22..%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20absolute%20paths%2C%20ensure%20they're%20within%20a%20safe%20base%20directory%0A%20%20%20%20if%20filepath.IsAbs(clean)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Define%20safe%20base%20directories%20(adjust%20as%20needed%20for%20your%20use%20case)%0A%20%20%20%20%20%20%20%20safeBaseDirs%20%3A%3D%20%5B%5Dstring%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2Ftmp%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2Fvar%2Ftmp%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2Fhome%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2FUsers%22%2C%20%2F%2F%20macOS%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20if%20the%20path%20starts%20with%20any%20safe%20base%20directory%0A%20%20%20%20%20%20%20%20for%20_%2C%20baseDir%20%3A%3D%20range%20safeBaseDirs%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20strings.HasPrefix(clean%2C%20baseDir)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20For%20relative%20paths%2C%20ensure%20they%20don't%20escape%20the%20current%20directory%0A%20%20%20%20return%20!strings.HasPrefix(clean%2C%20%22..%22)%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20examples%0Afunc%20listFiles(path%20string%2C%20recursive%20bool)%20(%5B%5Dstring%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20return%20%5B%5Dstring%7B%22file1.txt%22%2C%20%22file2.txt%22%7D%2C%20nil%0A%7D%0A%0Afunc%20extractPathFromURI(uri%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Extract%20path%20from%20URI%3A%20%22file%3A%2F%2F%2Fpath%2Fto%2Ffile%22%20-%3E%20%22%2Fpath%2Fto%2Ffile%22%0A%20%20%20%20if%20strings.HasPrefix(uri%2C%20%22file%3A%2F%2F%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20strings.TrimPrefix(uri%2C%20%22file%3A%2F%2F%22)%0A%20%20%20%20%7D%0A%20%20%20%20return%20uri%0A%7D%0A%0Afunc%20detectMIMEType(path%20string)%20string%20%7B%0A%20%20%20%20%2F%2F%20Simple%20MIME%20type%20detection%20based%20on%20extension%0A%20%20%20%20ext%20%3A%3D%20filepath.Ext(path)%0A%20%20%20%20switch%20ext%20%7B%0A%20%20%20%20case%20%22.txt%22%3A%0A%20%20%20%20%20%20%20%20return%20%22text%2Fplain%22%0A%20%20%20%20case%20%22.json%22%3A%0A%20%20%20%20%20%20%20%20return%20%22application%2Fjson%22%0A%20%20%20%20case%20%22.html%22%3A%0A%20%20%20%20%20%20%20%20return%20%22text%2Fhtml%22%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20%22application%2Foctet-stream%22%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Advanced%20STDIO%20Server%0A%0A%60%60%60go%0Apackage%20main%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22os%22%0A%20%20%20%20%22os%2Fsignal%22%0A%20%20%20%20%22syscall%22%0A%20%20%20%20%22time%22%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fserver%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Advanced%20CLI%20Tool%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithResourceCapabilities(true%2C%20true)%2C%0A%20%20%20%20%20%20%20%20server.WithPromptCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithLogging()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20comprehensive%20tools%0A%20%20%20%20addSystemTools(s)%0A%20%20%20%20addFileTools(s)%0A%20%20%20%20addGitTools(s)%0A%20%20%20%20addDatabaseTools(s)%0A%0A%20%20%20%20%2F%2F%20Handle%20graceful%20shutdown%0A%20%20%20%20setupGracefulShutdown(s)%0A%0A%20%20%20%20%2F%2F%20Start%20with%20error%20handling%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Server%20error%3A%20%25v%22%2C%20err))%0A%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Helper%20functions%20for%20the%20advanced%20example%0Afunc%20logToFile(message%20string)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20log.Println(message)%0A%7D%0A%0Afunc%20logError(message%20string)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%20%20%20%20log.Printf(%22ERROR%3A%20%25s%22%2C%20message)%0A%7D%0A%0Afunc%20addSystemTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20addFileTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20addGitTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20addDatabaseTools(s%20*server.MCPServer)%20%7B%0A%20%20%20%20%2F%2F%20Placeholder%20implementation%0A%7D%0A%0Afunc%20setupGracefulShutdown(s%20*server.MCPServer)%20%7B%0A%20%20%20%20c%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(c%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%3C-c%0A%20%20%20%20%20%20%20%20logToFile(%22Received%20shutdown%20signal%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%205*time.Second)%0A%20%20%20%20%20%20%20%20defer%20cancel()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20s.Shutdown(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Shutdown%20error%3A%20%25v%22%2C%20err))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20os.Exit(0)%0A%20%20%20%20%7D()%0A%7D%0A%60%60%60%0A%0A%23%23%20Client%20Integration%0A%0A%23%23%23%20How%20LLM%20Applications%20Connect%0A%0ALLM%20applications%20typically%20connect%20to%20STDIO%20MCP%20servers%20by%3A%0A%0A1.%20**Spawning%20the%20process**%3A%20Starting%20your%20server%20as%20a%20subprocess%0A2.%20**Pipe%20communication**%3A%20Using%20stdin%2Fstdout%20for%20JSON-RPC%20messages%0A3.%20**Lifecycle%20management**%3A%20Handling%20process%20startup%2C%20shutdown%2C%20and%20errors%0A%0A%23%23%23%20Claude%20Desktop%20Integration%0A%0AConfigure%20your%20STDIO%20server%20in%20Claude%20Desktop%3A%0A%0A%60%60%60json%0A%7B%0A%20%20%22mcpServers%22%3A%20%7B%0A%20%20%20%20%22file-tools%22%3A%20%7B%0A%20%20%20%20%20%20%22command%22%3A%20%22go%22%2C%0A%20%20%20%20%20%20%22args%22%3A%20%5B%22run%22%2C%20%22%2Fpath%2Fto%2Fyour%2Fserver%2Fmain.go%22%5D%2C%0A%20%20%20%20%20%20%22env%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22LOG_LEVEL%22%3A%20%22info%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%60%60%60%0A%0A**macOS**%3A%20%60~%2FLibrary%2FApplication%20Support%2FClaude%2Fclaude_desktop_config.json%60%0A**Windows**%3A%20%60%25APPDATA%25%5CClaude%5Cclaude_desktop_config.json%60%0A%0A%23%23%23%20Custom%20Client%20Integration%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%22time%22%0A%0A%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fclient%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fmcp-go%2Fmcp%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20STDIO%20client%0A%20%20%20%20c%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%20%20%20%20%22go%22%2C%20nil%20%2F*%20inherit%20env%20*%2F%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A%20%20%20%20)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20c.Close()%0A%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(context.Background()%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20%2F%2F%20Initialize%20connection%0A%20%20%20%20_%2C%20err%20%3D%20c.Initialize(ctx%2C%20mcp.InitializeRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.InitializeRequestParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ProtocolVersion%3A%20mcp.LATEST_PROTOCOL_VERSION%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ClientInfo%3A%20mcp.Implementation%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%20%20%20%22test-client%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Version%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20List%20available%20tools%0A%20%20%20%20tools%2C%20err%20%3A%3D%20c.ListTools(ctx%2C%20mcp.ListToolsRequest%7B%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Available%20tools%3A%20%25d%22%2C%20len(tools.Tools))%0A%20%20%20%20for%20_%2C%20tool%20%3A%3D%20range%20tools.Tools%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22-%20%25s%3A%20%25s%22%2C%20tool.Name%2C%20tool.Description)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Call%20a%20tool%0A%20%20%20%20result%2C%20err%20%3A%3D%20c.CallTool(ctx%2C%20mcp.CallToolRequest%7B%0A%20%20%20%20%20%20%20%20Params%3A%20mcp.CallToolParams%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20%22list_files%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Arguments%3A%20map%5Bstring%5Dinterface%7B%7D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22path%22%3A%20%20%20%20%20%20%22.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22recursive%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20log.Printf(%22Tool%20result%3A%20%25%2Bv%22%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%23%23%20Customizing%20Subprocess%20Execution%0A%0AIf%20you%20need%20more%20control%20over%20how%20a%20sub-process%20is%20spawned%20when%20creating%20a%20new%20STDIO%20client%2C%20you%20can%20use%0A%60NewStdioMCPClientWithOptions%60%20instead%20of%20%60NewStdioMCPClient%60.%0A%0ABy%20passing%20the%20%60WithCommandFunc%60%20option%2C%20you%20can%20supply%20a%20custom%20factory%20function%20to%20create%20the%20%60exec.Cmd%60%20that%20launches%0Athe%20server.%20This%20allows%20configuration%20of%20environment%20variables%2C%20working%20directories%2C%20and%20system-level%20process%20attributes.%0A%0AReferring%20to%20the%20previous%20example%2C%20we%20can%20replace%20the%20line%20that%20creates%20the%20client%3A%0A%0A%60%60%60go%0Ac%2C%20err%20%3A%3D%20client.NewStdioClient(%0A%20%20%20%20%22go%22%2C%20nil%2C%20%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%2C%0A)%0A%60%60%60%0A%0AWith%20the%20options-aware%20version%3A%0A%0A%60%60%60go%0Ac%2C%20err%20%3A%3D%20client.NewStdioMCPClientWithOptions(%0A%09%22go%22%2C%0A%09nil%2C%0A%09%5B%5Dstring%20%7B%22run%22%2C%20%22%2Fpath%2Fto%2Fserver%2Fmain.go%22%7D%2C%0A%09transport.WithCommandFunc(func(ctx%20context.Context%2C%20command%20string%2C%20args%20%5B%5Dstring%2C%20env%20%5B%5Dstring)%20(*exec.Cmd%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20cmd%20%3A%3D%20exec.CommandContext(ctx%2C%20command%2C%20args...)%0A%20%20%20%20%20%20%20%20cmd.Env%20%3D%20env%20%2F%2F%20Explicit%20environment%20for%20the%20subprocess.%0A%20%20%20%20%20%20%20%20cmd.Dir%20%3D%20%22%2Fvar%2Fsandbox%2Fmcp-server%22%20%2F%2F%20Working%20directory%20(not%20isolated%20unless%20paired%20with%20chroot%20or%20namespace).%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Apply%20low-level%20process%20isolation%20and%20privilege%20dropping.%0A%20%20%20%20%20%20%20%20cmd.SysProcAttr%20%3D%20%26syscall.SysProcAttr%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Drop%20to%20non-root%20user%20(e.g.%2C%20user%2Fgroup%20ID%201001)%0A%20%20%20%20%20%20%20%20%20%20%20%20Credential%3A%20%26syscall.Credential%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Uid%3A%201001%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Gid%3A%201001%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20File%20system%20isolation%3A%20only%20works%20if%20running%20as%20root.%0A%20%20%20%20%20%20%20%20%20%20%20%20Chroot%3A%20%22%2Fvar%2Fsandbox%2Fmcp-server%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Linux%20namespace%20isolation%20(Linux%20only)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Prevents%20access%20to%20other%20processes%2C%20mounts%2C%20IPC%2C%20networks%2C%20etc.%0A%20%20%20%20%20%20%20%20%20%20%20%20Cloneflags%3A%20syscall.CLONE_NEWIPC%20%7C%20%2F%2F%20Isolate%20inter-process%20comms%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20syscall.CLONE_NEWNS%20%20%7C%20%2F%2F%20Isolate%20filesystem%20mounts%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20syscall.CLONE_NEWPID%20%7C%20%2F%2F%20Isolate%20PID%20namespace%20(child%20sees%20itself%20as%20PID%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20syscall.CLONE_NEWUTS%20%7C%20%2F%2F%20Isolate%20hostname%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20syscall.CLONE_NEWNET%2C%20%20%2F%2F%20Isolate%20networking%20(optional)%0A%20%20%20%20%20%20%20%20%7D%0A%0A%09%09return%20cmd%2C%20nil%0A%09%7D)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Debugging%0A%0A%23%23%23%20Command%20Line%20Testing%0A%0ATest%20your%20STDIO%20server%20directly%20from%20the%20command%20line%3A%0A%0A%60%60%60bash%0A%23%20Start%20your%20server%0Ago%20run%20main.go%0A%0A%23%20Send%20initialization%20request%0Aecho%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A1%2C%22method%22%3A%22initialize%22%2C%22params%22%3A%7B%22protocolVersion%22%3A%222024-11-05%22%2C%22capabilities%22%3A%7B%22tools%22%3A%7B%7D%7D%2C%22clientInfo%22%3A%7B%22name%22%3A%22test%22%2C%22version%22%3A%221.0.0%22%7D%7D%7D'%20%7C%20go%20run%20main.go%0A%0A%23%20List%20tools%0Aecho%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A2%2C%22method%22%3A%22tools%2Flist%22%2C%22params%22%3A%7B%7D%7D'%20%7C%20go%20run%20main.go%0A%0A%23%20Call%20a%20tool%0Aecho%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A3%2C%22method%22%3A%22tools%2Fcall%22%2C%22params%22%3A%7B%22name%22%3A%22list_files%22%2C%22arguments%22%3A%7B%22path%22%3A%22.%22%2C%22recursive%22%3Afalse%7D%7D%7D'%20%7C%20go%20run%20main.go%0A%60%60%60%0A%0A%23%23%23%20Interactive%20Testing%20Script%0A%0A%60%60%60bash%0A%23!%2Fbin%2Fbash%0A%0A%23%20interactive_test.sh%0ASERVER_CMD%3D%22go%20run%20main.go%22%0A%0Aecho%20%22Starting%20MCP%20STDIO%20server%20test...%22%0A%0A%23%20Function%20to%20send%20JSON-RPC%20request%0Asend_request()%20%7B%0A%20%20%20%20local%20request%3D%22%241%22%0A%20%20%20%20echo%20%22Sending%3A%20%24request%22%0A%20%20%20%20echo%20%22%24request%22%20%7C%20%24SERVER_CMD%0A%20%20%20%20echo%20%22---%22%0A%7D%0A%0A%23%20Initialize%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A1%2C%22method%22%3A%22initialize%22%2C%22params%22%3A%7B%22protocolVersion%22%3A%222024-11-05%22%2C%22capabilities%22%3A%7B%22tools%22%3A%7B%7D%7D%2C%22clientInfo%22%3A%7B%22name%22%3A%22test%22%2C%22version%22%3A%221.0.0%22%7D%7D%7D'%0A%0A%23%20List%20tools%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A2%2C%22method%22%3A%22tools%2Flist%22%2C%22params%22%3A%7B%7D%7D'%0A%0A%23%20List%20resources%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A3%2C%22method%22%3A%22resources%2Flist%22%2C%22params%22%3A%7B%7D%7D'%0A%0A%23%20Call%20tool%0Asend_request%20'%7B%22jsonrpc%22%3A%222.0%22%2C%22id%22%3A4%2C%22method%22%3A%22tools%2Fcall%22%2C%22params%22%3A%7B%22name%22%3A%22list_files%22%2C%22arguments%22%3A%7B%22path%22%3A%22.%22%2C%22recursive%22%3Afalse%7D%7D%7D'%0A%0Aecho%20%22Test%20completed.%22%0A%60%60%60%0A%0A%23%23%23%20Debug%20Logging%0A%0AAdd%20debug%20logging%20to%20your%20STDIO%20server%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Setup%20debug%20logging%0A%20%20%20%20logFile%2C%20err%20%3A%3D%20os.OpenFile(%22mcp-server.log%22%2C%20os.O_CREATE%7Cos.O_WRONLY%7Cos.O_APPEND%2C%200666)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20defer%20logFile.Close()%0A%0A%20%20%20%20logger%20%3A%3D%20log.New(logFile%2C%20%22%5BMCP%5D%20%22%2C%20log.LstdFlags%7Clog.Lshortfile)%0A%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Debug%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithToolCapabilities(true)%2C%0A%20%20%20%20%20%20%20%20server.WithLogging()%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Add%20tools%20with%20debug%20logging%0A%20%20%20%20s.AddTool(%0A%20%20%20%20%20%20%20%20mcp.NewTool(%22debug_echo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithDescription(%22Echo%20with%20debug%20logging%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20mcp.WithString(%22message%22%2C%20mcp.Required())%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20func(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20message%20%3A%3D%20req.GetString(%22message%22%2C%20%22%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20logger.Printf(%22Echo%20tool%20called%20with%20message%3A%20%25s%22%2C%20message)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22Echo%3A%20%25s%22%2C%20message))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20)%0A%0A%20%20%20%20logger.Println(%22Starting%20STDIO%20server...%22)%0A%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20logger.Printf(%22Server%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%20MCP%20Inspector%20Integration%0A%0AUse%20the%20MCP%20Inspector%20for%20visual%20debugging%3A%0A%0A%60%60%60bash%0A%23%20Install%20MCP%20Inspector%0Anpm%20install%20-g%20%40modelcontextprotocol%2Finspector%0A%0A%23%20Run%20your%20server%20with%20inspector%0Amcp-inspector%20go%20run%20main.go%0A%60%60%60%0A%0AThis%20opens%20a%20web%20interface%20where%20you%20can%3A%0A-%20View%20available%20tools%20and%20resources%0A-%20Test%20tool%20calls%20interactively%0A-%20Inspect%20request%2Fresponse%20messages%0A-%20Debug%20protocol%20issues%0A%0A%23%23%20Error%20Handling%0A%0A%23%23%23%20Robust%20Error%20Handling%0A%0A%60%60%60go%0Afunc%20handleToolWithErrors(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Validate%20required%20parameters%0A%20%20%20%20path%2C%20err%20%3A%3D%20req.RequireString(%22path%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22path%20parameter%20is%20required%20and%20must%20be%20a%20string%22)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Validate%20path%20security%0A%20%20%20%20if%20!isValidPath(path)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20or%20unsafe%20path%3A%20%25s%22%2C%20path)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Check%20if%20path%20exists%0A%20%20%20%20if%20_%2C%20err%20%3A%3D%20os.Stat(path)%3B%20os.IsNotExist(err)%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22path%20does%20not%20exist%3A%20%25s%22%2C%20path)%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Handle%20context%20cancellation%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20default%3A%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Perform%20operation%20with%20timeout%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%0A%20%20%20%20result%2C%20err%20%3A%3D%20performOperation(ctx%2C%20path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Log%20error%20for%20debugging%0A%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Operation%20failed%20for%20path%20%25s%3A%20%25v%22%2C%20path%2C%20err))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20user-friendly%20error%0A%20%20%20%20%20%20%20%20if%20errors.Is(err%2C%20context.DeadlineExceeded)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22operation%20timed%20out%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22operation%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(fmt.Sprintf(%22%25v%22%2C%20result))%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Process%20Management%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Handle%20panics%20gracefully%0A%20%20%20%20defer%20func()%20%7B%0A%20%20%20%20%20%20%20%20if%20r%20%3A%3D%20recover()%3B%20r%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Server%20panic%3A%20%25v%22%2C%20r))%0A%20%20%20%20%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%0A%20%20%20%20s%20%3A%3D%20server.NewMCPServer(%22Robust%20Server%22%2C%20%221.0.0%22%2C%0A%20%20%20%20%20%20%20%20server.WithRecovery()%2C%20%2F%2F%20Built-in%20panic%20recovery%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Setup%20signal%20handling%0A%20%20%20%20setupSignalHandling()%0A%0A%20%20%20%20%2F%2F%20Start%20server%20with%20retry%20logic%0A%20%20%20%20for%20attempts%20%3A%3D%200%3B%20attempts%20%3C%203%3B%20attempts%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20server.ServeStdio(s)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logError(fmt.Sprintf(%22Server%20attempt%20%25d%20failed%3A%20%25v%22%2C%20attempts%2B1%2C%20err))%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20attempts%20%3D%3D%202%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20os.Exit(1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(time.Second%20*%20time.Duration(attempts%2B1))%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20setupSignalHandling()%20%7B%0A%20%20%20%20c%20%3A%3D%20make(chan%20os.Signal%2C%201)%0A%20%20%20%20signal.Notify(c%2C%20os.Interrupt%2C%20syscall.SIGTERM)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20sig%20%3A%3D%20%3C-c%0A%20%20%20%20%20%20%20%20logToFile(fmt.Sprintf(%22Received%20signal%3A%20%25v%22%2C%20sig))%0A%20%20%20%20%20%20%20%20os.Exit(0)%0A%20%20%20%20%7D()%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%20Optimization%0A%0A%23%23%23%20Efficient%20Resource%20Usage%0A%0A%60%60%60go%0A%2F%2F%20Use%20connection%20pooling%20for%20database%20tools%0Avar%20dbPool%20*sql.DB%0A%0Afunc%20init()%20%7B%0A%20%20%20%20var%20err%20error%0A%20%20%20%20dbPool%2C%20err%20%3D%20sql.Open(%22sqlite3%22%2C%20%22data.db%22)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20dbPool.SetMaxOpenConns(10)%0A%20%20%20%20dbPool.SetMaxIdleConns(5)%0A%20%20%20%20dbPool.SetConnMaxLifetime(time.Hour)%0A%7D%0A%0A%2F%2F%20Cache%20frequently%20accessed%20data%0Avar%20fileCache%20%3D%20make(map%5Bstring%5DcacheEntry)%0Avar%20cacheMutex%20sync.RWMutex%0A%0Atype%20cacheEntry%20struct%20%7B%0A%20%20%20%20content%20%20%20string%0A%20%20%20%20timestamp%20time.Time%0A%7D%0A%0Afunc%20getCachedFile(path%20string)%20(string%2C%20bool)%20%7B%0A%20%20%20%20cacheMutex.RLock()%0A%20%20%20%20defer%20cacheMutex.RUnlock()%0A%20%20%20%20%0A%20%20%20%20entry%2C%20exists%20%3A%3D%20fileCache%5Bpath%5D%0A%20%20%20%20if%20!exists%20%7C%7C%20time.Since(entry.timestamp)%20%3E%205*time.Minute%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%2C%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20entry.content%2C%20true%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Memory%20Management%0A%0A%60%60%60go%0Afunc%20handleLargeFile(ctx%20context.Context%2C%20req%20mcp.CallToolRequest)%20(*mcp.CallToolResult%2C%20error)%20%7B%0A%20%20%20%20path%20%3A%3D%20req.GetString(%22path%22%2C%20%22%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Stream%20large%20files%20instead%20of%20loading%20into%20memory%0A%20%20%20%20file%2C%20err%20%3A%3D%20os.Open(path)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20file.Close()%0A%0A%20%20%20%20%2F%2F%20Process%20in%20chunks%0A%20%20%20%20const%20chunkSize%20%3D%2064%20*%201024%0A%20%20%20%20buffer%20%3A%3D%20make(%5B%5Dbyte%2C%20chunkSize)%0A%20%20%20%20%0A%20%20%20%20var%20result%20strings.Builder%0A%20%20%20%20for%20%7B%0A%20%20%20%20%20%20%20%20n%2C%20err%20%3A%3D%20file.Read(buffer)%0A%20%20%20%20%20%20%20%20if%20err%20%3D%3D%20io.EOF%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20chunk%0A%20%20%20%20%20%20%20%20processed%20%3A%3D%20processChunk(buffer%5B%3An%5D)%0A%20%20%20%20%20%20%20%20result.WriteString(processed)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20cancellation%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20mcp.NewToolResultText(result.String())%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20**%5BSSE%20Transport%5D(%2Ftransports%2Fsse)**%20-%20Learn%20about%20real-time%20web%20communication%0A-%20**%5BHTTP%20Transport%5D(%2Ftransports%2Fhttp)**%20-%20Explore%20traditional%20web%20service%20patterns%0A-%20**%5BIn-Process%20Transport%5D(%2Ftransports%2Finprocess)**%20-%20Understand%20embedded%20scenarios",lastUpdatedAt:1752044619e3}];var jc={background5:"var(--vocs-color_background5)",border:"var(--vocs-color_border)",border2:"var(--vocs-color_border2)"},bp={default:"system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",mono:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},wp={default:"var(--vocs-fontFamily_default)",mono:"var(--vocs-fontFamily_mono)"},ti={4:"var(--vocs-space_4)",8:"var(--vocs-space_8)",24:"var(--vocs-space_24)"},ic={horizontalPadding:"var(--vocs-content_horizontalPadding)",verticalPadding:"var(--vocs-content_verticalPadding)",width:"var(--vocs-content_width)"};function pg(t){var n,i,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(n=0;n<l;n++)t[n]&&(i=pg(t[n]))&&(a&&(a+=" "),a+=i)}else for(i in t)t[i]&&(a&&(a+=" "),a+=i);return a}function l2(){for(var t,n,i=0,a="",l=arguments.length;i<l;i++)(t=arguments[i])&&(n=pg(t))&&(a&&(a+=" "),a+=n);return a}function T5(t){var n=t.match(/^var\((.*)\)$/);return n?n[1]:t}function Ie(t,n){var i={};{var a=t;for(var l in a){var A=a[l];A!=null&&(i[T5(l)]=A)}}return Object.defineProperty(i,"toString",{value:function(){return Object.keys(this).map(f=>"".concat(f,":").concat(this[f])).join(";")},writable:!1}),i}var R5="var(--vocs_ExternalLink_iconUrl)",b5="vocs_ExternalLink";const w5=D.forwardRef(({className:t,children:n,hideExternalIcon:i,href:a,...l},A)=>{const{basePath:u}=C0(),f=u;return g.jsx("a",{ref:A,className:l2(t,i||typeof n!="string"?void 0:b5),href:a,target:"_blank",rel:"noopener noreferrer",style:Ie({[R5]:`url(${f}/.vocs/icons/arrow-diagonal.svg)`}),...l,children:n})});var Ep="vocs_Link",Mp="vocs_Link_accent",Pp="vocs_Link_styleless",Hc=new Map,ka=new WeakMap,Np=0,E5=void 0;function M5(t){return t?(ka.has(t)||(Np+=1,ka.set(t,Np.toString())),ka.get(t)):"0"}function P5(t){return Object.keys(t).sort().filter(n=>t[n]!==void 0).map(n=>`${n}_${n==="root"?M5(t.root):t[n]}`).toString()}function N5(t){const n=P5(t);let i=Hc.get(n);if(!i){const a=new Map;let l;const A=new IntersectionObserver(u=>{u.forEach(f=>{var C;const m=f.isIntersecting&&l.some(h=>f.intersectionRatio>=h);t.trackVisibility&&typeof f.isVisible>"u"&&(f.isVisible=m),(C=a.get(f.target))==null||C.forEach(h=>{h(m,f)})})},t);l=A.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),i={id:n,observer:A,elements:a},Hc.set(n,i)}return i}function _5(t,n,i={},a=E5){if(typeof window.IntersectionObserver>"u"&&a!==void 0){const C=t.getBoundingClientRect();return n(a,{isIntersecting:a,target:t,intersectionRatio:typeof i.threshold=="number"?i.threshold:0,time:0,boundingClientRect:C,intersectionRect:C,rootBounds:C}),()=>{}}const{id:l,observer:A,elements:u}=N5(i),f=u.get(t)||[];return u.has(t)||u.set(t,f),f.push(n),A.observe(t),function(){f.splice(f.indexOf(n),1),f.length===0&&(u.delete(t),A.unobserve(t)),u.size===0&&(A.disconnect(),Hc.delete(l))}}function gg({threshold:t,delay:n,trackVisibility:i,rootMargin:a,root:l,triggerOnce:A,skip:u,initialInView:f,fallbackInView:C,onChange:m}={}){var h;const[p,v]=D.useState(null),x=D.useRef(m),[y,B]=D.useState({inView:!!f,entry:void 0});x.current=m,D.useEffect(()=>{if(u||!p)return;let R;return R=_5(p,(M,N)=>{B({inView:M,entry:N}),x.current&&x.current(M,N),N.isIntersecting&&A&&R&&(R(),R=void 0)},{root:l,rootMargin:a,threshold:t,trackVisibility:i,delay:n},C),()=>{R&&R()}},[Array.isArray(t)?t.toString():t,p,l,a,A,u,i,C,n]);const F=(h=y.entry)==null?void 0:h.target,T=D.useRef(void 0);!p&&F&&!A&&!u&&T.current!==F&&(T.current=F,B({inView:!!f,entry:void 0}));const w=[v,y.inView,y.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}function L5(...t){return n=>{k5(n,...t)}}function k5(t,...n){n.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}const Pn=D.forwardRef((t,n)=>{const i=()=>{var A;return(A=Fu.find(u=>u.path===t.to))==null?void 0:A.lazy()},{ref:a,inView:l}=gg();return D.useEffect(()=>{l&&i()},[l]),g.jsx(On,{ref:L5(n,a),...t})}),Be=D.forwardRef((t,n)=>{const{hideExternalIcon:i,href:a,variant:l="accent"}=t,{pathname:A}=i0();if(a!=null&&a.match(/^(www|https?)/))return g.jsx(w5,{...t,ref:n,className:l2(t.className,Ep,l==="accent"&&Mp,l==="styleless"&&Pp),hideExternalIcon:i});const[u,f]=(a||"").split("#"),C=`${u||A}${f?`#${f}`:""}`;return g.jsx(Pn,{...t,ref:n,className:l2(t.className,Ep,l==="accent"&&Mp,l==="styleless"&&Pp),to:C})});var I5="vocs_NotFound",q5="vocs_NotFound_divider",O5="vocs_H1",hg="vocs_Heading",Dg="vocs_Heading_slugTarget";function jn({level:t,...n}){const i=`h${t}`;return g.jsxs(i,{...n,id:void 0,className:l2(n.className,hg),children:[g.jsx("div",{id:n.id,className:Dg}),n.children]})}function vg(t){return g.jsx(jn,{...t,className:l2(t.className,O5),level:1})}var j5="vocs_Paragraph";function xg(t){return g.jsx("p",{...t,className:l2(t.className,j5)})}function H5(){return g.jsxs("div",{className:I5,children:[g.jsx(vg,{children:"Page Not Found"}),g.jsx("div",{style:{height:ti[24]}}),g.jsx("hr",{className:q5}),g.jsx("div",{style:{height:ti[24]}}),g.jsx(xg,{children:"The page you were looking for could not be found."}),g.jsx("div",{style:{height:ti[8]}}),g.jsx(Be,{href:"/",children:"Go to Home Page"})]})}var U5="var(--vocs_Banner_bannerBackgroundColor)",z5="var(--vocs_Banner_bannerHeight)",W5="var(--vocs_Banner_bannerTextColor)",G5="vocs_Banner",V5="vocs_Banner_content",Y5="vocs_Banner_inner",$5="vocs_Banner_closeButton";const K5=Object.getPrototypeOf(Z5).constructor;async function Z5(t,n){return new K5(String(t))(n)}function X5(t,n){return new Function(String(t))(n)}function kr(t,n){if(t==null)return{};var i={},a=Object.keys(t),l,A;for(A=0;A<a.length;A++)l=a[A],!(n.indexOf(l)>=0)&&(i[l]=t[l]);return i}var Q5=["color"],J5=D.forwardRef(function(t,n){var i=t.color,a=i===void 0?"currentColor":i,l=kr(t,Q5);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),D.createElement("path",{d:"M6.85355 3.14645C7.04882 3.34171 7.04882 3.65829 6.85355 3.85355L3.70711 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H3.70711L6.85355 11.1464C7.04882 11.3417 7.04882 11.6583 6.85355 11.8536C6.65829 12.0488 6.34171 12.0488 6.14645 11.8536L2.14645 7.85355C1.95118 7.65829 1.95118 7.34171 2.14645 7.14645L6.14645 3.14645C6.34171 2.95118 6.65829 2.95118 6.85355 3.14645Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),e6=["color"],t6=D.forwardRef(function(t,n){var i=t.color,a=i===void 0?"currentColor":i,l=kr(t,e6);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),D.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),r6=["color"],n6=D.forwardRef(function(t,n){var i=t.color,a=i===void 0?"currentColor":i,l=kr(t,r6);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),D.createElement("path",{d:"M12.8536 2.85355C13.0488 2.65829 13.0488 2.34171 12.8536 2.14645C12.6583 1.95118 12.3417 1.95118 12.1464 2.14645L7.5 6.79289L2.85355 2.14645C2.65829 1.95118 2.34171 1.95118 2.14645 2.14645C1.95118 2.34171 1.95118 2.65829 2.14645 2.85355L6.79289 7.5L2.14645 12.1464C1.95118 12.3417 1.95118 12.6583 2.14645 12.8536C2.34171 13.0488 2.65829 13.0488 2.85355 12.8536L7.5 8.20711L12.1464 12.8536C12.3417 13.0488 12.6583 13.0488 12.8536 12.8536C13.0488 12.6583 13.0488 12.3417 12.8536 12.1464L8.20711 7.5L12.8536 2.85355Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),o6=["color"],i6=D.forwardRef(function(t,n){var i=t.color,a=i===void 0?"currentColor":i,l=kr(t,o6);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),D.createElement("path",{d:"M3.5 2C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V6H8.5C8.22386 6 8 5.77614 8 5.5V2H3.5ZM9 2.70711L11.2929 5H9V2.70711ZM2 2.5C2 1.67157 2.67157 1 3.5 1H8.5C8.63261 1 8.75979 1.05268 8.85355 1.14645L12.8536 5.14645C12.9473 5.24021 13 5.36739 13 5.5V12.5C13 13.3284 12.3284 14 11.5 14H3.5C2.67157 14 2 13.3284 2 12.5V2.5Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),a6=["color"],s6=D.forwardRef(function(t,n){var i=t.color,a=i===void 0?"currentColor":i,l=kr(t,a6);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),D.createElement("path",{d:"M1.5 5.25C1.91421 5.25 2.25 4.91421 2.25 4.5C2.25 4.08579 1.91421 3.75 1.5 3.75C1.08579 3.75 0.75 4.08579 0.75 4.5C0.75 4.91421 1.08579 5.25 1.5 5.25ZM4 4.5C4 4.22386 4.22386 4 4.5 4H13.5C13.7761 4 14 4.22386 14 4.5C14 4.77614 13.7761 5 13.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM4.5 7C4.22386 7 4 7.22386 4 7.5C4 7.77614 4.22386 8 4.5 8H13.5C13.7761 8 14 7.77614 14 7.5C14 7.22386 13.7761 7 13.5 7H4.5ZM4.5 10C4.22386 10 4 10.2239 4 10.5C4 10.7761 4.22386 11 4.5 11H13.5C13.7761 11 14 10.7761 14 10.5C14 10.2239 13.7761 10 13.5 10H4.5ZM2.25 7.5C2.25 7.91421 1.91421 8.25 1.5 8.25C1.08579 8.25 0.75 7.91421 0.75 7.5C0.75 7.08579 1.08579 6.75 1.5 6.75C1.91421 6.75 2.25 7.08579 2.25 7.5ZM1.5 11.25C1.91421 11.25 2.25 10.9142 2.25 10.5C2.25 10.0858 1.91421 9.75 1.5 9.75C1.08579 9.75 0.75 10.0858 0.75 10.5C0.75 10.9142 1.08579 11.25 1.5 11.25Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),l6=["color"],Tu=D.forwardRef(function(t,n){var i=t.color,a=i===void 0?"currentColor":i,l=kr(t,l6);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),D.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),A6=["color"],c6=D.forwardRef(function(t,n){var i=t.color,a=i===void 0?"currentColor":i,l=kr(t,A6);return D.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l,{ref:n}),D.createElement("path",{d:"M12.1464 1.14645C12.3417 0.951184 12.6583 0.951184 12.8535 1.14645L14.8535 3.14645C15.0488 3.34171 15.0488 3.65829 14.8535 3.85355L10.9109 7.79618C10.8349 7.87218 10.7471 7.93543 10.651 7.9835L6.72359 9.94721C6.53109 10.0435 6.29861 10.0057 6.14643 9.85355C5.99425 9.70137 5.95652 9.46889 6.05277 9.27639L8.01648 5.34897C8.06455 5.25283 8.1278 5.16507 8.2038 5.08907L12.1464 1.14645ZM12.5 2.20711L8.91091 5.79618L7.87266 7.87267L8.12731 8.12732L10.2038 7.08907L13.7929 3.5L12.5 2.20711ZM9.99998 2L8.99998 3H4.9C4.47171 3 4.18056 3.00039 3.95552 3.01877C3.73631 3.03668 3.62421 3.06915 3.54601 3.10899C3.35785 3.20487 3.20487 3.35785 3.10899 3.54601C3.06915 3.62421 3.03669 3.73631 3.01878 3.95552C3.00039 4.18056 3 4.47171 3 4.9V11.1C3 11.5283 3.00039 11.8194 3.01878 12.0445C3.03669 12.2637 3.06915 12.3758 3.10899 12.454C3.20487 12.6422 3.35785 12.7951 3.54601 12.891C3.62421 12.9309 3.73631 12.9633 3.95552 12.9812C4.18056 12.9996 4.47171 13 4.9 13H11.1C11.5283 13 11.8194 12.9996 12.0445 12.9812C12.2637 12.9633 12.3758 12.9309 12.454 12.891C12.6422 12.7951 12.7951 12.6422 12.891 12.454C12.9309 12.3758 12.9633 12.2637 12.9812 12.0445C12.9996 11.8194 13 11.5283 13 11.1V6.99998L14 5.99998V11.1V11.1207C14 11.5231 14 11.8553 13.9779 12.1259C13.9549 12.407 13.9057 12.6653 13.782 12.908C13.5903 13.2843 13.2843 13.5903 12.908 13.782C12.6653 13.9057 12.407 13.9549 12.1259 13.9779C11.8553 14 11.5231 14 11.1207 14H11.1H4.9H4.87934C4.47686 14 4.14468 14 3.87409 13.9779C3.59304 13.9549 3.33469 13.9057 3.09202 13.782C2.7157 13.5903 2.40973 13.2843 2.21799 12.908C2.09434 12.6653 2.04506 12.407 2.0221 12.1259C1.99999 11.8553 1.99999 11.5231 2 11.1207V11.1206V11.1V4.9V4.87935V4.87932V4.87931C1.99999 4.47685 1.99999 4.14468 2.0221 3.87409C2.04506 3.59304 2.09434 3.33469 2.21799 3.09202C2.40973 2.71569 2.7157 2.40973 3.09202 2.21799C3.33469 2.09434 3.59304 2.04506 3.87409 2.0221C4.14468 1.99999 4.47685 1.99999 4.87932 2H4.87935H4.9H9.99998Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))});function Mr(t,n){if(typeof t!="object"||t===null)return t;if(Array.isArray(t))return t.map((a,l)=>Mr(a,l));const i=t.props.children?{...t.props,children:Mr(t.props.children)}:t.props;return n0.createElement(t.type,{...i,key:n})}function u6({hide:t}){const{banner:n}=C0(),i=D.useMemo(()=>{const a=(n==null?void 0:n.content)??"";if(!a)return null;if(typeof a!="string")return()=>Mr(a);const{default:l}=X5(a,{...cy,Fragment:D.Fragment});return l},[n]);return i?g.jsx("div",{className:l2(G5),style:Ie({[U5]:n==null?void 0:n.backgroundColor,[W5]:n==null?void 0:n.textColor}),children:g.jsxs("div",{className:l2(Y5),children:[g.jsx("div",{className:l2(V5),children:g.jsx(i,{})}),(n==null?void 0:n.dismissable)!=="false"&&g.jsx("button",{className:l2($5),onClick:t,type:"button",children:g.jsx(n6,{width:14,height:14})})]})}):null}var f6="vocs_Content";function yg({children:t,className:n}){return g.jsx("article",{className:l2(n,f6),children:t})}const d6=({children:t})=>t,m6=({children:t})=>t,Ru=({children:t})=>t;function Bg({items:t,pathname:n}){const i=n.replace(/\.html$/,""),a=[];for(const l of t)(l.link&&i.startsWith(l.match||l.link)||l.items&&Bg({items:l.items,pathname:n}).length>0)&&a.push(l.id);return a}function Ai({items:t,pathname:n}){return D.useMemo(()=>Bg({items:t,pathname:n}),[t,n])}function rr(){const t=D.useContext(Sg);if(!t)throw new Error("`usePageData` must be used within `PageDataContext.Provider`.");return t}const Sg=D.createContext(void 0);function Ss(){const{pathname:t}=i0(),n=C0(),{sidebar:i}=n;if(!i)return{items:[]};if(Array.isArray(i))return{items:i};const a=D.useMemo(()=>{const l=Object.keys(i).filter(A=>t.startsWith(A));return l[l.length-1]},[i,t]);return a?Array.isArray(i[a])?{key:a,items:i[a]}:{...i[a],key:a}:{items:[]}}function nr(){const{aiCta:t}=C0(),n=Ss(),{frontmatter:i}=rr(),{layout:a,showLogo:l,showAiCta:A,showOutline:u,showSidebar:f,showTopNav:C}=i||{},m=a??"docs";return{layout:m,get showLogo(){return typeof l<"u"?l:!0},get showAiCta(){return typeof A<"u"?A:t===!1?!1:m==="docs"},get showOutline(){return typeof u<"u"?u:m==="docs"},get showSidebar(){return n.items.length===0?!1:typeof f<"u"?f:!(m==="minimal"||m==="landing")},get showTopNav(){return typeof C<"u"?C:!0}}}function C2(t,n,{checkForDefaultPrevented:i=!0}={}){return function(l){if(t==null||t(l),i===!1||!l.defaultPrevented)return n==null?void 0:n(l)}}function _p(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function ci(...t){return n=>{let i=!1;const a=t.map(l=>{const A=_p(l,n);return!i&&typeof A=="function"&&(i=!0),A});if(i)return()=>{for(let l=0;l<a.length;l++){const A=a[l];typeof A=="function"?A():_p(t[l],null)}}}}function o0(...t){return D.useCallback(ci(...t),t)}function C6(t,n){const i=D.createContext(n),a=A=>{const{children:u,...f}=A,C=D.useMemo(()=>f,Object.values(f));return g.jsx(i.Provider,{value:C,children:u})};a.displayName=t+"Provider";function l(A){const u=D.useContext(i);if(u)return u;if(n!==void 0)return n;throw new Error(`\`${A}\` must be used within \`${t}\``)}return[a,l]}function qe(t,n=[]){let i=[];function a(A,u){const f=D.createContext(u),C=i.length;i=[...i,u];const m=p=>{var T;const{scope:v,children:x,...y}=p,B=((T=v==null?void 0:v[t])==null?void 0:T[C])||f,F=D.useMemo(()=>y,Object.values(y));return g.jsx(B.Provider,{value:F,children:x})};m.displayName=A+"Provider";function h(p,v){var B;const x=((B=v==null?void 0:v[t])==null?void 0:B[C])||f,y=D.useContext(x);if(y)return y;if(u!==void 0)return u;throw new Error(`\`${p}\` must be used within \`${A}\``)}return[m,h]}const l=()=>{const A=i.map(u=>D.createContext(u));return function(f){const C=(f==null?void 0:f[t])||A;return D.useMemo(()=>({[`__scope${t}`]:{...f,[t]:C}}),[f,C])}};return l.scopeName=t,[a,p6(l,...n)]}function p6(...t){const n=t[0];if(t.length===1)return n;const i=()=>{const a=t.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(A){const u=a.reduce((f,{useScope:C,scopeName:m})=>{const p=C(A)[`__scope${m}`];return{...f,...p}},{});return D.useMemo(()=>({[`__scope${n.scopeName}`]:u}),[u])}};return i.scopeName=n.scopeName,i}var Se=globalThis!=null&&globalThis.document?D.useLayoutEffect:()=>{},g6=vs[" useId ".trim().toString()]||(()=>{}),h6=0;function xe(t){const[n,i]=D.useState(g6());return Se(()=>{i(a=>a??String(h6++))},[t]),t||(n?`radix-${n}`:"")}var D6=vs[" useInsertionEffect ".trim().toString()]||Se;function Qe({prop:t,defaultProp:n,onChange:i=()=>{},caller:a}){const[l,A,u]=v6({defaultProp:n,onChange:i}),f=t!==void 0,C=f?t:l;{const h=D.useRef(t!==void 0);D.useEffect(()=>{const p=h.current;p!==f&&console.warn(`${a} is changing from ${p?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=f},[f,a])}const m=D.useCallback(h=>{var p;if(f){const v=x6(h)?h(t):h;v!==t&&((p=u.current)==null||p.call(u,v))}else A(h)},[f,t,A,u]);return[C,m]}function v6({defaultProp:t,onChange:n}){const[i,a]=D.useState(t),l=D.useRef(i),A=D.useRef(n);return D6(()=>{A.current=n},[n]),D.useEffect(()=>{var u;l.current!==i&&((u=A.current)==null||u.call(A,i),l.current=i)},[i,l]),[i,a,A]}function x6(t){return typeof t=="function"}var bu=q3();const Fg=Ds(bu);function Nn(t){const n=y6(t),i=D.forwardRef((a,l)=>{const{children:A,...u}=a,f=D.Children.toArray(A),C=f.find(S6);if(C){const m=C.props.children,h=f.map(p=>p===C?D.Children.count(m)>1?D.Children.only(null):D.isValidElement(m)?m.props.children:null:p);return g.jsx(n,{...u,ref:l,children:D.isValidElement(m)?D.cloneElement(m,void 0,h):null})}return g.jsx(n,{...u,ref:l,children:A})});return i.displayName=`${t}.Slot`,i}function y6(t){const n=D.forwardRef((i,a)=>{const{children:l,...A}=i;if(D.isValidElement(l)){const u=T6(l),f=F6(A,l.props);return l.type!==D.Fragment&&(f.ref=a?ci(a,u):u),D.cloneElement(l,f)}return D.Children.count(l)>1?D.Children.only(null):null});return n.displayName=`${t}.SlotClone`,n}var B6=Symbol("radix.slottable");function S6(t){return D.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===B6}function F6(t,n){const i={...n};for(const a in n){const l=t[a],A=n[a];/^on[A-Z]/.test(a)?l&&A?i[a]=(...f)=>{const C=A(...f);return l(...f),C}:l&&(i[a]=l):a==="style"?i[a]={...l,...A}:a==="className"&&(i[a]=[l,A].filter(Boolean).join(" "))}return{...t,...i}}function T6(t){var a,l;let n=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?t.ref:(n=(l=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:l.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?t.props.ref:t.props.ref||t.ref)}var R6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],E2=R6.reduce((t,n)=>{const i=Nn(`Primitive.${n}`),a=D.forwardRef((l,A)=>{const{asChild:u,...f}=l,C=u?i:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(C,{...f,ref:A})});return a.displayName=`Primitive.${n}`,{...t,[n]:a}},{});function ss(t,n){t&&bu.flushSync(()=>t.dispatchEvent(n))}function I0(t){const n=D.useRef(t);return D.useEffect(()=>{n.current=t}),D.useMemo(()=>(...i)=>{var a;return(a=n.current)==null?void 0:a.call(n,...i)},[])}function b6(t,n=globalThis==null?void 0:globalThis.document){const i=I0(t);D.useEffect(()=>{const a=l=>{l.key==="Escape"&&i(l)};return n.addEventListener("keydown",a,{capture:!0}),()=>n.removeEventListener("keydown",a,{capture:!0})},[i,n])}var w6="DismissableLayer",Uc="dismissableLayer.update",E6="dismissableLayer.pointerDownOutside",M6="dismissableLayer.focusOutside",Lp,Tg=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ui=D.forwardRef((t,n)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:A,onInteractOutside:u,onDismiss:f,...C}=t,m=D.useContext(Tg),[h,p]=D.useState(null),v=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=D.useState({}),y=o0(n,k=>p(k)),B=Array.from(m.layers),[F]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),T=B.indexOf(F),w=h?B.indexOf(h):-1,R=m.layersWithOutsidePointerEventsDisabled.size>0,M=w>=T,N=_6(k=>{const j=k.target,z=[...m.branches].some(r2=>r2.contains(j));!M||z||(l==null||l(k),u==null||u(k),k.defaultPrevented||f==null||f())},v),E=L6(k=>{const j=k.target;[...m.branches].some(r2=>r2.contains(j))||(A==null||A(k),u==null||u(k),k.defaultPrevented||f==null||f())},v);return b6(k=>{w===m.layers.size-1&&(a==null||a(k),!k.defaultPrevented&&f&&(k.preventDefault(),f()))},v),D.useEffect(()=>{if(h)return i&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(Lp=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(h)),m.layers.add(h),kp(),()=>{i&&m.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=Lp)}},[h,v,i,m]),D.useEffect(()=>()=>{h&&(m.layers.delete(h),m.layersWithOutsidePointerEventsDisabled.delete(h),kp())},[h,m]),D.useEffect(()=>{const k=()=>x({});return document.addEventListener(Uc,k),()=>document.removeEventListener(Uc,k)},[]),g.jsx(E2.div,{...C,ref:y,style:{pointerEvents:R?M?"auto":"none":void 0,...t.style},onFocusCapture:C2(t.onFocusCapture,E.onFocusCapture),onBlurCapture:C2(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:C2(t.onPointerDownCapture,N.onPointerDownCapture)})});ui.displayName=w6;var P6="DismissableLayerBranch",N6=D.forwardRef((t,n)=>{const i=D.useContext(Tg),a=D.useRef(null),l=o0(n,a);return D.useEffect(()=>{const A=a.current;if(A)return i.branches.add(A),()=>{i.branches.delete(A)}},[i.branches]),g.jsx(E2.div,{...t,ref:l})});N6.displayName=P6;function _6(t,n=globalThis==null?void 0:globalThis.document){const i=I0(t),a=D.useRef(!1),l=D.useRef(()=>{});return D.useEffect(()=>{const A=f=>{if(f.target&&!a.current){let C=function(){Rg(E6,i,m,{discrete:!0})};const m={originalEvent:f};f.pointerType==="touch"?(n.removeEventListener("click",l.current),l.current=C,n.addEventListener("click",l.current,{once:!0})):C()}else n.removeEventListener("click",l.current);a.current=!1},u=window.setTimeout(()=>{n.addEventListener("pointerdown",A)},0);return()=>{window.clearTimeout(u),n.removeEventListener("pointerdown",A),n.removeEventListener("click",l.current)}},[n,i]),{onPointerDownCapture:()=>a.current=!0}}function L6(t,n=globalThis==null?void 0:globalThis.document){const i=I0(t),a=D.useRef(!1);return D.useEffect(()=>{const l=A=>{A.target&&!a.current&&Rg(M6,i,{originalEvent:A},{discrete:!1})};return n.addEventListener("focusin",l),()=>n.removeEventListener("focusin",l)},[n,i]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function kp(){const t=new CustomEvent(Uc);document.dispatchEvent(t)}function Rg(t,n,i,{discrete:a}){const l=i.originalEvent.target,A=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:i});n&&l.addEventListener(t,n,{once:!0}),a?ss(l,A):l.dispatchEvent(A)}var ac="focusScope.autoFocusOnMount",sc="focusScope.autoFocusOnUnmount",Ip={bubbles:!1,cancelable:!0},k6="FocusScope",Fs=D.forwardRef((t,n)=>{const{loop:i=!1,trapped:a=!1,onMountAutoFocus:l,onUnmountAutoFocus:A,...u}=t,[f,C]=D.useState(null),m=I0(l),h=I0(A),p=D.useRef(null),v=o0(n,B=>C(B)),x=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(a){let B=function(R){if(x.paused||!f)return;const M=R.target;f.contains(M)?p.current=M:Xt(p.current,{select:!0})},F=function(R){if(x.paused||!f)return;const M=R.relatedTarget;M!==null&&(f.contains(M)||Xt(p.current,{select:!0}))},T=function(R){if(document.activeElement===document.body)for(const N of R)N.removedNodes.length>0&&Xt(f)};document.addEventListener("focusin",B),document.addEventListener("focusout",F);const w=new MutationObserver(T);return f&&w.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",B),document.removeEventListener("focusout",F),w.disconnect()}}},[a,f,x.paused]),D.useEffect(()=>{if(f){Op.add(x);const B=document.activeElement;if(!f.contains(B)){const T=new CustomEvent(ac,Ip);f.addEventListener(ac,m),f.dispatchEvent(T),T.defaultPrevented||(I6(U6(bg(f)),{select:!0}),document.activeElement===B&&Xt(f))}return()=>{f.removeEventListener(ac,m),setTimeout(()=>{const T=new CustomEvent(sc,Ip);f.addEventListener(sc,h),f.dispatchEvent(T),T.defaultPrevented||Xt(B??document.body,{select:!0}),f.removeEventListener(sc,h),Op.remove(x)},0)}}},[f,m,h,x]);const y=D.useCallback(B=>{if(!i&&!a||x.paused)return;const F=B.key==="Tab"&&!B.altKey&&!B.ctrlKey&&!B.metaKey,T=document.activeElement;if(F&&T){const w=B.currentTarget,[R,M]=q6(w);R&&M?!B.shiftKey&&T===M?(B.preventDefault(),i&&Xt(R,{select:!0})):B.shiftKey&&T===R&&(B.preventDefault(),i&&Xt(M,{select:!0})):T===w&&B.preventDefault()}},[i,a,x.paused]);return g.jsx(E2.div,{tabIndex:-1,...u,ref:v,onKeyDown:y})});Fs.displayName=k6;function I6(t,{select:n=!1}={}){const i=document.activeElement;for(const a of t)if(Xt(a,{select:n}),document.activeElement!==i)return}function q6(t){const n=bg(t),i=qp(n,t),a=qp(n.reverse(),t);return[i,a]}function bg(t){const n=[],i=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const l=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||l?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)n.push(i.currentNode);return n}function qp(t,n){for(const i of t)if(!O6(i,{upTo:n}))return i}function O6(t,{upTo:n}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(n!==void 0&&t===n)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function j6(t){return t instanceof HTMLInputElement&&"select"in t}function Xt(t,{select:n=!1}={}){if(t&&t.focus){const i=document.activeElement;t.focus({preventScroll:!0}),t!==i&&j6(t)&&n&&t.select()}}var Op=H6();function H6(){let t=[];return{add(n){const i=t[0];n!==i&&(i==null||i.pause()),t=jp(t,n),t.unshift(n)},remove(n){var i;t=jp(t,n),(i=t[0])==null||i.resume()}}}function jp(t,n){const i=[...t],a=i.indexOf(n);return a!==-1&&i.splice(a,1),i}function U6(t){return t.filter(n=>n.tagName!=="A")}var z6="Portal",Ts=D.forwardRef((t,n)=>{var f;const{container:i,...a}=t,[l,A]=D.useState(!1);Se(()=>A(!0),[]);const u=i||l&&((f=globalThis==null?void 0:globalThis.document)==null?void 0:f.body);return u?Fg.createPortal(g.jsx(E2.div,{...a,ref:n}),u):null});Ts.displayName=z6;function W6(t,n){return D.useReducer((i,a)=>n[i][a]??i,t)}var q0=t=>{const{present:n,children:i}=t,a=G6(n),l=typeof i=="function"?i({present:a.isPresent}):D.Children.only(i),A=o0(a.ref,V6(l));return typeof i=="function"||a.isPresent?D.cloneElement(l,{ref:A}):null};q0.displayName="Presence";function G6(t){const[n,i]=D.useState(),a=D.useRef(null),l=D.useRef(t),A=D.useRef("none"),u=t?"mounted":"unmounted",[f,C]=W6(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const m=Ia(a.current);A.current=f==="mounted"?m:"none"},[f]),Se(()=>{const m=a.current,h=l.current;if(h!==t){const v=A.current,x=Ia(m);t?C("MOUNT"):x==="none"||(m==null?void 0:m.display)==="none"?C("UNMOUNT"):C(h&&v!==x?"ANIMATION_OUT":"UNMOUNT"),l.current=t}},[t,C]),Se(()=>{if(n){let m;const h=n.ownerDocument.defaultView??window,p=x=>{const B=Ia(a.current).includes(x.animationName);if(x.target===n&&B&&(C("ANIMATION_END"),!l.current)){const F=n.style.animationFillMode;n.style.animationFillMode="forwards",m=h.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=F)})}},v=x=>{x.target===n&&(A.current=Ia(a.current))};return n.addEventListener("animationstart",v),n.addEventListener("animationcancel",p),n.addEventListener("animationend",p),()=>{h.clearTimeout(m),n.removeEventListener("animationstart",v),n.removeEventListener("animationcancel",p),n.removeEventListener("animationend",p)}}else C("ANIMATION_END")},[n,C]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:D.useCallback(m=>{a.current=m?getComputedStyle(m):null,i(m)},[])}}function Ia(t){return(t==null?void 0:t.animationName)||"none"}function V6(t){var a,l;let n=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?t.ref:(n=(l=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:l.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?t.props.ref:t.props.ref||t.ref)}var lc=0;function wu(){D.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Hp()),document.body.insertAdjacentElement("beforeend",t[1]??Hp()),lc++,()=>{lc===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),lc--}},[])}function Hp(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var $e=function(){return $e=Object.assign||function(n){for(var i,a=1,l=arguments.length;a<l;a++){i=arguments[a];for(var A in i)Object.prototype.hasOwnProperty.call(i,A)&&(n[A]=i[A])}return n},$e.apply(this,arguments)};function wg(t,n){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(i[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(t);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(t,a[l])&&(i[a[l]]=t[a[l]]);return i}function Y6(t,n,i){if(i||arguments.length===2)for(var a=0,l=n.length,A;a<l;a++)(A||!(a in n))&&(A||(A=Array.prototype.slice.call(n,0,a)),A[a]=n[a]);return t.concat(A||Array.prototype.slice.call(n))}var Qa="right-scroll-bar-position",Ja="width-before-scroll-bar",$6="with-scroll-bars-hidden",K6="--removed-body-scroll-bar-size";function Ac(t,n){return typeof t=="function"?t(n):t&&(t.current=n),t}function Z6(t,n){var i=D.useState(function(){return{value:t,callback:n,facade:{get current(){return i.value},set current(a){var l=i.value;l!==a&&(i.value=a,i.callback(a,l))}}}})[0];return i.callback=n,i.facade}var X6=typeof window<"u"?D.useLayoutEffect:D.useEffect,Up=new WeakMap;function Q6(t,n){var i=Z6(null,function(a){return t.forEach(function(l){return Ac(l,a)})});return X6(function(){var a=Up.get(i);if(a){var l=new Set(a),A=new Set(t),u=i.current;l.forEach(function(f){A.has(f)||Ac(f,null)}),A.forEach(function(f){l.has(f)||Ac(f,u)})}Up.set(i,t)},[t]),i}function J6(t){return t}function eS(t,n){n===void 0&&(n=J6);var i=[],a=!1,l={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:t},useMedium:function(A){var u=n(A,a);return i.push(u),function(){i=i.filter(function(f){return f!==u})}},assignSyncMedium:function(A){for(a=!0;i.length;){var u=i;i=[],u.forEach(A)}i={push:function(f){return A(f)},filter:function(){return i}}},assignMedium:function(A){a=!0;var u=[];if(i.length){var f=i;i=[],f.forEach(A),u=i}var C=function(){var h=u;u=[],h.forEach(A)},m=function(){return Promise.resolve().then(C)};m(),i={push:function(h){u.push(h),m()},filter:function(h){return u=u.filter(h),i}}}};return l}function tS(t){t===void 0&&(t={});var n=eS(null);return n.options=$e({async:!0,ssr:!1},t),n}var Eg=function(t){var n=t.sideCar,i=wg(t,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=n.read();if(!a)throw new Error("Sidecar medium not found");return D.createElement(a,$e({},i))};Eg.isSideCarExport=!0;function rS(t,n){return t.useMedium(n),Eg}var Mg=tS(),cc=function(){},Rs=D.forwardRef(function(t,n){var i=D.useRef(null),a=D.useState({onScrollCapture:cc,onWheelCapture:cc,onTouchMoveCapture:cc}),l=a[0],A=a[1],u=t.forwardProps,f=t.children,C=t.className,m=t.removeScrollBar,h=t.enabled,p=t.shards,v=t.sideCar,x=t.noRelative,y=t.noIsolation,B=t.inert,F=t.allowPinchZoom,T=t.as,w=T===void 0?"div":T,R=t.gapMode,M=wg(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=v,E=Q6([i,n]),k=$e($e({},M),l);return D.createElement(D.Fragment,null,h&&D.createElement(N,{sideCar:Mg,removeScrollBar:m,shards:p,noRelative:x,noIsolation:y,inert:B,setCallbacks:A,allowPinchZoom:!!F,lockRef:i,gapMode:R}),u?D.cloneElement(D.Children.only(f),$e($e({},k),{ref:E})):D.createElement(w,$e({},k,{className:C,ref:E}),f))});Rs.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rs.classNames={fullWidth:Ja,zeroRight:Qa};var nS=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function oS(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var n=nS();return n&&t.setAttribute("nonce",n),t}function iS(t,n){t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}function aS(t){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(t)}var sS=function(){var t=0,n=null;return{add:function(i){t==0&&(n=oS())&&(iS(n,i),aS(n)),t++},remove:function(){t--,!t&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},lS=function(){var t=sS();return function(n,i){D.useEffect(function(){return t.add(n),function(){t.remove()}},[n&&i])}},Pg=function(){var t=lS(),n=function(i){var a=i.styles,l=i.dynamic;return t(a,l),null};return n},AS={left:0,top:0,right:0,gap:0},uc=function(t){return parseInt(t||"",10)||0},cS=function(t){var n=window.getComputedStyle(document.body),i=n[t==="padding"?"paddingLeft":"marginLeft"],a=n[t==="padding"?"paddingTop":"marginTop"],l=n[t==="padding"?"paddingRight":"marginRight"];return[uc(i),uc(a),uc(l)]},uS=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return AS;var n=cS(t),i=document.documentElement.clientWidth,a=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,a-i+n[2]-n[0])}},fS=Pg(),En="data-scroll-locked",dS=function(t,n,i,a){var l=t.left,A=t.top,u=t.right,f=t.gap;return i===void 0&&(i="margin"),`
  .`.concat($6,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(f,"px ").concat(a,`;
  }
  body[`).concat(En,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(a,";"),i==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(A,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(a,`;
    `),i==="padding"&&"padding-right: ".concat(f,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qa,` {
    right: `).concat(f,"px ").concat(a,`;
  }
  
  .`).concat(Ja,` {
    margin-right: `).concat(f,"px ").concat(a,`;
  }
  
  .`).concat(Qa," .").concat(Qa,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(Ja," .").concat(Ja,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(En,`] {
    `).concat(K6,": ").concat(f,`px;
  }
`)},zp=function(){var t=parseInt(document.body.getAttribute(En)||"0",10);return isFinite(t)?t:0},mS=function(){D.useEffect(function(){return document.body.setAttribute(En,(zp()+1).toString()),function(){var t=zp()-1;t<=0?document.body.removeAttribute(En):document.body.setAttribute(En,t.toString())}},[])},CS=function(t){var n=t.noRelative,i=t.noImportant,a=t.gapMode,l=a===void 0?"margin":a;mS();var A=D.useMemo(function(){return uS(l)},[l]);return D.createElement(fS,{styles:dS(A,!n,l,i?"":"!important")})},zc=!1;if(typeof window<"u")try{var qa=Object.defineProperty({},"passive",{get:function(){return zc=!0,!0}});window.addEventListener("test",qa,qa),window.removeEventListener("test",qa,qa)}catch{zc=!1}var Bn=zc?{passive:!1}:!1,pS=function(t){return t.tagName==="TEXTAREA"},Ng=function(t,n){if(!(t instanceof Element))return!1;var i=window.getComputedStyle(t);return i[n]!=="hidden"&&!(i.overflowY===i.overflowX&&!pS(t)&&i[n]==="visible")},gS=function(t){return Ng(t,"overflowY")},hS=function(t){return Ng(t,"overflowX")},Wp=function(t,n){var i=n.ownerDocument,a=n;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var l=_g(t,a);if(l){var A=Lg(t,a),u=A[1],f=A[2];if(u>f)return!0}a=a.parentNode}while(a&&a!==i.body);return!1},DS=function(t){var n=t.scrollTop,i=t.scrollHeight,a=t.clientHeight;return[n,i,a]},vS=function(t){var n=t.scrollLeft,i=t.scrollWidth,a=t.clientWidth;return[n,i,a]},_g=function(t,n){return t==="v"?gS(n):hS(n)},Lg=function(t,n){return t==="v"?DS(n):vS(n)},xS=function(t,n){return t==="h"&&n==="rtl"?-1:1},yS=function(t,n,i,a,l){var A=xS(t,window.getComputedStyle(n).direction),u=A*a,f=i.target,C=n.contains(f),m=!1,h=u>0,p=0,v=0;do{var x=Lg(t,f),y=x[0],B=x[1],F=x[2],T=B-F-A*y;(y||T)&&_g(t,f)&&(p+=T,v+=y),f=f.parentNode.host||f.parentNode}while(!C&&f!==document.body||C&&(n.contains(f)||n===f));return(h&&Math.abs(p)<1||!h&&Math.abs(v)<1)&&(m=!0),m},Oa=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Gp=function(t){return[t.deltaX,t.deltaY]},Vp=function(t){return t&&"current"in t?t.current:t},BS=function(t,n){return t[0]===n[0]&&t[1]===n[1]},SS=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},FS=0,Sn=[];function TS(t){var n=D.useRef([]),i=D.useRef([0,0]),a=D.useRef(),l=D.useState(FS++)[0],A=D.useState(Pg)[0],u=D.useRef(t);D.useEffect(function(){u.current=t},[t]),D.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(l));var B=Y6([t.lockRef.current],(t.shards||[]).map(Vp),!0).filter(Boolean);return B.forEach(function(F){return F.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),B.forEach(function(F){return F.classList.remove("allow-interactivity-".concat(l))})}}},[t.inert,t.lockRef.current,t.shards]);var f=D.useCallback(function(B,F){if("touches"in B&&B.touches.length===2||B.type==="wheel"&&B.ctrlKey)return!u.current.allowPinchZoom;var T=Oa(B),w=i.current,R="deltaX"in B?B.deltaX:w[0]-T[0],M="deltaY"in B?B.deltaY:w[1]-T[1],N,E=B.target,k=Math.abs(R)>Math.abs(M)?"h":"v";if("touches"in B&&k==="h"&&E.type==="range")return!1;var j=Wp(k,E);if(!j)return!0;if(j?N=k:(N=k==="v"?"h":"v",j=Wp(k,E)),!j)return!1;if(!a.current&&"changedTouches"in B&&(R||M)&&(a.current=N),!N)return!0;var z=a.current||N;return yS(z,F,B,z==="h"?R:M)},[]),C=D.useCallback(function(B){var F=B;if(!(!Sn.length||Sn[Sn.length-1]!==A)){var T="deltaY"in F?Gp(F):Oa(F),w=n.current.filter(function(N){return N.name===F.type&&(N.target===F.target||F.target===N.shadowParent)&&BS(N.delta,T)})[0];if(w&&w.should){F.cancelable&&F.preventDefault();return}if(!w){var R=(u.current.shards||[]).map(Vp).filter(Boolean).filter(function(N){return N.contains(F.target)}),M=R.length>0?f(F,R[0]):!u.current.noIsolation;M&&F.cancelable&&F.preventDefault()}}},[]),m=D.useCallback(function(B,F,T,w){var R={name:B,delta:F,target:T,should:w,shadowParent:RS(T)};n.current.push(R),setTimeout(function(){n.current=n.current.filter(function(M){return M!==R})},1)},[]),h=D.useCallback(function(B){i.current=Oa(B),a.current=void 0},[]),p=D.useCallback(function(B){m(B.type,Gp(B),B.target,f(B,t.lockRef.current))},[]),v=D.useCallback(function(B){m(B.type,Oa(B),B.target,f(B,t.lockRef.current))},[]);D.useEffect(function(){return Sn.push(A),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:v}),document.addEventListener("wheel",C,Bn),document.addEventListener("touchmove",C,Bn),document.addEventListener("touchstart",h,Bn),function(){Sn=Sn.filter(function(B){return B!==A}),document.removeEventListener("wheel",C,Bn),document.removeEventListener("touchmove",C,Bn),document.removeEventListener("touchstart",h,Bn)}},[]);var x=t.removeScrollBar,y=t.inert;return D.createElement(D.Fragment,null,y?D.createElement(A,{styles:SS(l)}):null,x?D.createElement(CS,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function RS(t){for(var n=null;t!==null;)t instanceof ShadowRoot&&(n=t.host,t=t.host),t=t.parentNode;return n}const bS=rS(Mg,TS);var bs=D.forwardRef(function(t,n){return D.createElement(Rs,$e({},t,{ref:n,sideCar:bS}))});bs.classNames=Rs.classNames;var wS=function(t){if(typeof document>"u")return null;var n=Array.isArray(t)?t[0]:t;return n.ownerDocument.body},Fn=new WeakMap,ja=new WeakMap,Ha={},fc=0,kg=function(t){return t&&(t.host||kg(t.parentNode))},ES=function(t,n){return n.map(function(i){if(t.contains(i))return i;var a=kg(i);return a&&t.contains(a)?a:(console.error("aria-hidden",i,"in not contained inside",t,". Doing nothing"),null)}).filter(function(i){return!!i})},MS=function(t,n,i,a){var l=ES(n,Array.isArray(t)?t:[t]);Ha[i]||(Ha[i]=new WeakMap);var A=Ha[i],u=[],f=new Set,C=new Set(l),m=function(p){!p||f.has(p)||(f.add(p),m(p.parentNode))};l.forEach(m);var h=function(p){!p||C.has(p)||Array.prototype.forEach.call(p.children,function(v){if(f.has(v))h(v);else try{var x=v.getAttribute(a),y=x!==null&&x!=="false",B=(Fn.get(v)||0)+1,F=(A.get(v)||0)+1;Fn.set(v,B),A.set(v,F),u.push(v),B===1&&y&&ja.set(v,!0),F===1&&v.setAttribute(i,"true"),y||v.setAttribute(a,"true")}catch(T){console.error("aria-hidden: cannot operate on ",v,T)}})};return h(n),f.clear(),fc++,function(){u.forEach(function(p){var v=Fn.get(p)-1,x=A.get(p)-1;Fn.set(p,v),A.set(p,x),v||(ja.has(p)||p.removeAttribute(a),ja.delete(p)),x||p.removeAttribute(i)}),fc--,fc||(Fn=new WeakMap,Fn=new WeakMap,ja=new WeakMap,Ha={})}},Eu=function(t,n,i){i===void 0&&(i="data-aria-hidden");var a=Array.from(Array.isArray(t)?t:[t]),l=wS(t);return l?(a.push.apply(a,Array.from(l.querySelectorAll("[aria-live], script"))),MS(a,l,i,"aria-hidden")):function(){return null}},ws="Dialog",[Ig,SN]=qe(ws),[PS,Oe]=Ig(ws),qg=t=>{const{__scopeDialog:n,children:i,open:a,defaultOpen:l,onOpenChange:A,modal:u=!0}=t,f=D.useRef(null),C=D.useRef(null),[m,h]=Qe({prop:a,defaultProp:l??!1,onChange:A,caller:ws});return g.jsx(PS,{scope:n,triggerRef:f,contentRef:C,contentId:xe(),titleId:xe(),descriptionId:xe(),open:m,onOpenChange:h,onOpenToggle:D.useCallback(()=>h(p=>!p),[h]),modal:u,children:i})};qg.displayName=ws;var Og="DialogTrigger",jg=D.forwardRef((t,n)=>{const{__scopeDialog:i,...a}=t,l=Oe(Og,i),A=o0(n,l.triggerRef);return g.jsx(E2.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":Nu(l.open),...a,ref:A,onClick:C2(t.onClick,l.onOpenToggle)})});jg.displayName=Og;var Mu="DialogPortal",[NS,Hg]=Ig(Mu,{forceMount:void 0}),Ug=t=>{const{__scopeDialog:n,forceMount:i,children:a,container:l}=t,A=Oe(Mu,n);return g.jsx(NS,{scope:n,forceMount:i,children:D.Children.map(a,u=>g.jsx(q0,{present:i||A.open,children:g.jsx(Ts,{asChild:!0,container:l,children:u})}))})};Ug.displayName=Mu;var ls="DialogOverlay",zg=D.forwardRef((t,n)=>{const i=Hg(ls,t.__scopeDialog),{forceMount:a=i.forceMount,...l}=t,A=Oe(ls,t.__scopeDialog);return A.modal?g.jsx(q0,{present:a||A.open,children:g.jsx(LS,{...l,ref:n})}):null});zg.displayName=ls;var _S=Nn("DialogOverlay.RemoveScroll"),LS=D.forwardRef((t,n)=>{const{__scopeDialog:i,...a}=t,l=Oe(ls,i);return g.jsx(bs,{as:_S,allowPinchZoom:!0,shards:[l.contentRef],children:g.jsx(E2.div,{"data-state":Nu(l.open),...a,ref:n,style:{pointerEvents:"auto",...a.style}})})}),Pr="DialogContent",Wg=D.forwardRef((t,n)=>{const i=Hg(Pr,t.__scopeDialog),{forceMount:a=i.forceMount,...l}=t,A=Oe(Pr,t.__scopeDialog);return g.jsx(q0,{present:a||A.open,children:A.modal?g.jsx(kS,{...l,ref:n}):g.jsx(IS,{...l,ref:n})})});Wg.displayName=Pr;var kS=D.forwardRef((t,n)=>{const i=Oe(Pr,t.__scopeDialog),a=D.useRef(null),l=o0(n,i.contentRef,a);return D.useEffect(()=>{const A=a.current;if(A)return Eu(A)},[]),g.jsx(Gg,{...t,ref:l,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:C2(t.onCloseAutoFocus,A=>{var u;A.preventDefault(),(u=i.triggerRef.current)==null||u.focus()}),onPointerDownOutside:C2(t.onPointerDownOutside,A=>{const u=A.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0;(u.button===2||f)&&A.preventDefault()}),onFocusOutside:C2(t.onFocusOutside,A=>A.preventDefault())})}),IS=D.forwardRef((t,n)=>{const i=Oe(Pr,t.__scopeDialog),a=D.useRef(!1),l=D.useRef(!1);return g.jsx(Gg,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:A=>{var u,f;(u=t.onCloseAutoFocus)==null||u.call(t,A),A.defaultPrevented||(a.current||(f=i.triggerRef.current)==null||f.focus(),A.preventDefault()),a.current=!1,l.current=!1},onInteractOutside:A=>{var C,m;(C=t.onInteractOutside)==null||C.call(t,A),A.defaultPrevented||(a.current=!0,A.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const u=A.target;((m=i.triggerRef.current)==null?void 0:m.contains(u))&&A.preventDefault(),A.detail.originalEvent.type==="focusin"&&l.current&&A.preventDefault()}})}),Gg=D.forwardRef((t,n)=>{const{__scopeDialog:i,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:A,...u}=t,f=Oe(Pr,i),C=D.useRef(null),m=o0(n,C);return wu(),g.jsxs(g.Fragment,{children:[g.jsx(Fs,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:l,onUnmountAutoFocus:A,children:g.jsx(ui,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":Nu(f.open),...u,ref:m,onDismiss:()=>f.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(jS,{titleId:f.titleId}),g.jsx(US,{contentRef:C,descriptionId:f.descriptionId})]})]})}),Pu="DialogTitle",Vg=D.forwardRef((t,n)=>{const{__scopeDialog:i,...a}=t,l=Oe(Pu,i);return g.jsx(E2.h2,{id:l.titleId,...a,ref:n})});Vg.displayName=Pu;var Yg="DialogDescription",qS=D.forwardRef((t,n)=>{const{__scopeDialog:i,...a}=t,l=Oe(Yg,i);return g.jsx(E2.p,{id:l.descriptionId,...a,ref:n})});qS.displayName=Yg;var $g="DialogClose",OS=D.forwardRef((t,n)=>{const{__scopeDialog:i,...a}=t,l=Oe($g,i);return g.jsx(E2.button,{type:"button",...a,ref:n,onClick:C2(t.onClick,()=>l.onOpenChange(!1))})});OS.displayName=$g;function Nu(t){return t?"open":"closed"}var Kg="DialogTitleWarning",[FN,Zg]=C6(Kg,{contentName:Pr,titleName:Pu,docsSlug:"dialog"}),jS=({titleId:t})=>{const n=Zg(Kg),i=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return D.useEffect(()=>{t&&(document.getElementById(t)||console.error(i))},[i,t]),null},HS="DialogDescriptionWarning",US=({contentRef:t,descriptionId:n})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Zg(HS).contentName}}.`;return D.useEffect(()=>{var A;const l=(A=t.current)==null?void 0:A.getAttribute("aria-describedby");n&&l&&(document.getElementById(n)||console.warn(a))},[a,t,n]),null},Xg=qg,Qg=jg,zS=Ug,WS=zg,GS=Wg,VS=Vg;const YS=async()=>JSON.stringify(await(await fetch("/.vocs/search-index-6cb053c5.json")).json());var r0=function(){return r0=Object.assign||function(n){for(var i,a=1,l=arguments.length;a<l;a++){i=arguments[a];for(var A in i)Object.prototype.hasOwnProperty.call(i,A)&&(n[A]=i[A])}return n},r0.apply(this,arguments)};function $S(t,n,i,a){function l(A){return A instanceof i?A:new i(function(u){u(A)})}return new(i||(i=Promise))(function(A,u){function f(h){try{m(a.next(h))}catch(p){u(p)}}function C(h){try{m(a.throw(h))}catch(p){u(p)}}function m(h){h.done?A(h.value):l(h.value).then(f,C)}m((a=a.apply(t,[])).next())})}function KS(t,n){var i={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},a,l,A,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(h){return C([m,h])}}function C(m){if(a)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(i=0)),i;)try{if(a=1,l&&(A=m[0]&2?l.return:m[0]?l.throw||((A=l.return)&&A.call(l),0):l.next)&&!(A=A.call(l,m[1])).done)return A;switch(l=0,A&&(m=[m[0]&2,A.value]),m[0]){case 0:case 1:A=m;break;case 4:return i.label++,{value:m[1],done:!1};case 5:i.label++,l=m[1],m=[0];continue;case 7:m=i.ops.pop(),i.trys.pop();continue;default:if(A=i.trys,!(A=A.length>0&&A[A.length-1])&&(m[0]===6||m[0]===2)){i=0;continue}if(m[0]===3&&(!A||m[1]>A[0]&&m[1]<A[3])){i.label=m[1];break}if(m[0]===6&&i.label<A[1]){i.label=A[1],A=m;break}if(A&&i.label<A[2]){i.label=A[2],i.ops.push(m);break}A[2]&&i.ops.pop(),i.trys.pop();continue}m=n.call(t,i)}catch(h){m=[6,h],l=0}finally{a=A=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function L2(t){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&t[n],a=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function h0(t,n){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var a=i.call(t),l,A=[],u;try{for(;(n===void 0||n-- >0)&&!(l=a.next()).done;)A.push(l.value)}catch(f){u={error:f}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return A}var ZS="ENTRIES",Jg="KEYS",eh="VALUES",P0="",dc=function(){function t(n,i){var a=n._tree,l=Array.from(a.keys());this.set=n,this._type=i,this._path=l.length>0?[{node:a,keys:l}]:[]}return t.prototype.next=function(){var n=this.dive();return this.backtrack(),n},t.prototype.dive=function(){if(this._path.length===0)return{done:!0,value:void 0};var n=Tn(this._path),i=n.node,a=n.keys;if(Tn(a)===P0)return{done:!1,value:this.result()};var l=i.get(Tn(a));return this._path.push({node:l,keys:Array.from(l.keys())}),this.dive()},t.prototype.backtrack=function(){if(this._path.length!==0){var n=Tn(this._path).keys;n.pop(),!(n.length>0)&&(this._path.pop(),this.backtrack())}},t.prototype.key=function(){return this.set._prefix+this._path.map(function(n){var i=n.keys;return Tn(i)}).filter(function(n){return n!==P0}).join("")},t.prototype.value=function(){return Tn(this._path).node.get(P0)},t.prototype.result=function(){switch(this._type){case eh:return this.value();case Jg:return this.key();default:return[this.key(),this.value()]}},t.prototype[Symbol.iterator]=function(){return this},t}(),Tn=function(t){return t[t.length-1]},XS=function(t,n,i){var a=new Map;if(n===void 0)return a;for(var l=n.length+1,A=l+i,u=new Uint8Array(A*l).fill(i+1),f=0;f<l;++f)u[f]=f;for(var C=1;C<A;++C)u[C*l]=C;return th(t,n,i,a,u,1,l,""),a},th=function(t,n,i,a,l,A,u,f){var C,m,h=A*u;try{e:for(var p=L2(t.keys()),v=p.next();!v.done;v=p.next()){var x=v.value;if(x===P0){var y=l[h-1];y<=i&&a.set(f,[t.get(x),y])}else{for(var B=A,F=0;F<x.length;++F,++B){for(var T=x[F],w=u*B,R=w-u,M=l[w],N=Math.max(0,B-i-1),E=Math.min(u-1,B+i),k=N;k<E;++k){var j=T!==n[k],z=l[R+k]+ +j,r2=l[R+k+1]+1,c2=l[w+k]+1,s2=l[w+k+1]=Math.min(z,r2,c2);s2<M&&(M=s2)}if(M>i)continue e}th(t.get(x),n,i,a,l,B,u,f+x)}}}catch(i2){C={error:i2}}finally{try{v&&!v.done&&(m=p.return)&&m.call(p)}finally{if(C)throw C.error}}},mc=function(){function t(n,i){n===void 0&&(n=new Map),i===void 0&&(i=""),this._size=void 0,this._tree=n,this._prefix=i}return t.prototype.atPrefix=function(n){var i,a;if(!n.startsWith(this._prefix))throw new Error("Mismatched prefix");var l=h0(As(this._tree,n.slice(this._prefix.length)),2),A=l[0],u=l[1];if(A===void 0){var f=h0(_u(u),2),C=f[0],m=f[1];try{for(var h=L2(C.keys()),p=h.next();!p.done;p=h.next()){var v=p.value;if(v!==P0&&v.startsWith(m)){var x=new Map;return x.set(v.slice(m.length),C.get(v)),new t(x,n)}}}catch(y){i={error:y}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}return new t(A,n)},t.prototype.clear=function(){this._size=void 0,this._tree.clear()},t.prototype.delete=function(n){return this._size=void 0,QS(this._tree,n)},t.prototype.entries=function(){return new dc(this,ZS)},t.prototype.forEach=function(n){var i,a;try{for(var l=L2(this),A=l.next();!A.done;A=l.next()){var u=h0(A.value,2),f=u[0],C=u[1];n(f,C,this)}}catch(m){i={error:m}}finally{try{A&&!A.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}},t.prototype.fuzzyGet=function(n,i){return XS(this._tree,n,i)},t.prototype.get=function(n){var i=Wc(this._tree,n);return i!==void 0?i.get(P0):void 0},t.prototype.has=function(n){var i=Wc(this._tree,n);return i!==void 0&&i.has(P0)},t.prototype.keys=function(){return new dc(this,Jg)},t.prototype.set=function(n,i){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;var a=Cc(this._tree,n);return a.set(P0,i),this},Object.defineProperty(t.prototype,"size",{get:function(){if(this._size)return this._size;this._size=0;for(var n=this.entries();!n.next().done;)this._size+=1;return this._size},enumerable:!1,configurable:!0}),t.prototype.update=function(n,i){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;var a=Cc(this._tree,n);return a.set(P0,i(a.get(P0))),this},t.prototype.fetch=function(n,i){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;var a=Cc(this._tree,n),l=a.get(P0);return l===void 0&&a.set(P0,l=i()),l},t.prototype.values=function(){return new dc(this,eh)},t.prototype[Symbol.iterator]=function(){return this.entries()},t.from=function(n){var i,a,l=new t;try{for(var A=L2(n),u=A.next();!u.done;u=A.next()){var f=h0(u.value,2),C=f[0],m=f[1];l.set(C,m)}}catch(h){i={error:h}}finally{try{u&&!u.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}return l},t.fromObject=function(n){return t.from(Object.entries(n))},t}(),As=function(t,n,i){var a,l;if(i===void 0&&(i=[]),n.length===0||t==null)return[t,i];try{for(var A=L2(t.keys()),u=A.next();!u.done;u=A.next()){var f=u.value;if(f!==P0&&n.startsWith(f))return i.push([t,f]),As(t.get(f),n.slice(f.length),i)}}catch(C){a={error:C}}finally{try{u&&!u.done&&(l=A.return)&&l.call(A)}finally{if(a)throw a.error}}return i.push([t,n]),As(void 0,"",i)},Wc=function(t,n){var i,a;if(n.length===0||t==null)return t;try{for(var l=L2(t.keys()),A=l.next();!A.done;A=l.next()){var u=A.value;if(u!==P0&&n.startsWith(u))return Wc(t.get(u),n.slice(u.length))}}catch(f){i={error:f}}finally{try{A&&!A.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}},Cc=function(t,n){var i,a,l=n.length;e:for(var A=0;t&&A<l;){try{for(var u=(i=void 0,L2(t.keys())),f=u.next();!f.done;f=u.next()){var C=f.value;if(C!==P0&&n[A]===C[0]){for(var m=Math.min(l-A,C.length),h=1;h<m&&n[A+h]===C[h];)++h;var p=t.get(C);if(h===C.length)t=p;else{var v=new Map;v.set(C.slice(h),p),t.set(n.slice(A,A+h),v),t.delete(C),t=v}A+=h;continue e}}}catch(y){i={error:y}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}var x=new Map;return t.set(n.slice(A),x),x}return t},QS=function(t,n){var i=h0(As(t,n),2),a=i[0],l=i[1];if(a!==void 0){if(a.delete(P0),a.size===0)rh(l);else if(a.size===1){var A=h0(a.entries().next().value,2),u=A[0],f=A[1];nh(l,u,f)}}},rh=function(t){if(t.length!==0){var n=h0(_u(t),2),i=n[0],a=n[1];if(i.delete(a),i.size===0)rh(t.slice(0,-1));else if(i.size===1){var l=h0(i.entries().next().value,2),A=l[0],u=l[1];A!==P0&&nh(t.slice(0,-1),A,u)}}},nh=function(t,n,i){if(t.length!==0){var a=h0(_u(t),2),l=a[0],A=a[1];l.set(A+n,i),l.delete(A)}},_u=function(t){return t[t.length-1]},Zo,Lu="or",oh="and",JS="and_not",eF=function(){function t(n){if((n==null?void 0:n.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');var i=n.autoVacuum==null||n.autoVacuum===!0?hc:n.autoVacuum;this._options=r0(r0(r0({},gc),n),{autoVacuum:i,searchOptions:r0(r0({},Yp),n.searchOptions||{}),autoSuggestOptions:r0(r0({},iF),n.autoSuggestOptions||{})}),this._index=new mc,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=Vc,this.addFields(this._options.fields)}return t.prototype.add=function(n){var i,a,l,A,u,f,C=this._options,m=C.extractField,h=C.tokenize,p=C.processTerm,v=C.fields,x=C.idField,y=m(n,x);if(y==null)throw new Error('MiniSearch: document does not have ID field "'.concat(x,'"'));if(this._idToShortId.has(y))throw new Error("MiniSearch: duplicate ID ".concat(y));var B=this.addDocumentId(y);this.saveStoredFields(B,n);try{for(var F=L2(v),T=F.next();!T.done;T=F.next()){var w=T.value,R=m(n,w);if(R!=null){var M=h(R.toString(),w),N=this._fieldIds[w],E=new Set(M).size;this.addFieldLength(B,N,this._documentCount-1,E);try{for(var k=(l=void 0,L2(M)),j=k.next();!j.done;j=k.next()){var z=j.value,r2=p(z,w);if(Array.isArray(r2))try{for(var c2=(u=void 0,L2(r2)),s2=c2.next();!s2.done;s2=c2.next()){var i2=s2.value;this.addTerm(N,B,i2)}}catch(Z){u={error:Z}}finally{try{s2&&!s2.done&&(f=c2.return)&&f.call(c2)}finally{if(u)throw u.error}}else r2&&this.addTerm(N,B,r2)}}catch(Z){l={error:Z}}finally{try{j&&!j.done&&(A=k.return)&&A.call(k)}finally{if(l)throw l.error}}}}}catch(Z){i={error:Z}}finally{try{T&&!T.done&&(a=F.return)&&a.call(F)}finally{if(i)throw i.error}}},t.prototype.addAll=function(n){var i,a;try{for(var l=L2(n),A=l.next();!A.done;A=l.next()){var u=A.value;this.add(u)}}catch(f){i={error:f}}finally{try{A&&!A.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}},t.prototype.addAllAsync=function(n,i){var a=this;i===void 0&&(i={});var l=i.chunkSize,A=l===void 0?10:l,u={chunk:[],promise:Promise.resolve()},f=n.reduce(function(h,p,v){var x=h.chunk,y=h.promise;return x.push(p),(v+1)%A===0?{chunk:[],promise:y.then(function(){return new Promise(function(B){return setTimeout(B,0)})}).then(function(){return a.addAll(x)})}:{chunk:x,promise:y}},u),C=f.chunk,m=f.promise;return m.then(function(){return a.addAll(C)})},t.prototype.remove=function(n){var i,a,l,A,u,f,C=this._options,m=C.tokenize,h=C.processTerm,p=C.extractField,v=C.fields,x=C.idField,y=p(n,x);if(y==null)throw new Error('MiniSearch: document does not have ID field "'.concat(x,'"'));var B=this._idToShortId.get(y);if(B==null)throw new Error("MiniSearch: cannot remove document with ID ".concat(y,": it is not in the index"));try{for(var F=L2(v),T=F.next();!T.done;T=F.next()){var w=T.value,R=p(n,w);if(R!=null){var M=m(R.toString(),w),N=this._fieldIds[w],E=new Set(M).size;this.removeFieldLength(B,N,this._documentCount,E);try{for(var k=(l=void 0,L2(M)),j=k.next();!j.done;j=k.next()){var z=j.value,r2=h(z,w);if(Array.isArray(r2))try{for(var c2=(u=void 0,L2(r2)),s2=c2.next();!s2.done;s2=c2.next()){var i2=s2.value;this.removeTerm(N,B,i2)}}catch(Z){u={error:Z}}finally{try{s2&&!s2.done&&(f=c2.return)&&f.call(c2)}finally{if(u)throw u.error}}else r2&&this.removeTerm(N,B,r2)}}catch(Z){l={error:Z}}finally{try{j&&!j.done&&(A=k.return)&&A.call(k)}finally{if(l)throw l.error}}}}}catch(Z){i={error:Z}}finally{try{T&&!T.done&&(a=F.return)&&a.call(F)}finally{if(i)throw i.error}}this._storedFields.delete(B),this._documentIds.delete(B),this._idToShortId.delete(y),this._fieldLength.delete(B),this._documentCount-=1},t.prototype.removeAll=function(n){var i,a;if(n)try{for(var l=L2(n),A=l.next();!A.done;A=l.next()){var u=A.value;this.remove(u)}}catch(f){i={error:f}}finally{try{A&&!A.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new mc,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}},t.prototype.discard=function(n){var i=this,a=this._idToShortId.get(n);if(a==null)throw new Error("MiniSearch: cannot discard document with ID ".concat(n,": it is not in the index"));this._idToShortId.delete(n),this._documentIds.delete(a),this._storedFields.delete(a),(this._fieldLength.get(a)||[]).forEach(function(l,A){i.removeFieldLength(a,A,i._documentCount,l)}),this._fieldLength.delete(a),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()},t.prototype.maybeAutoVacuum=function(){if(this._options.autoVacuum!==!1){var n=this._options.autoVacuum,i=n.minDirtFactor,a=n.minDirtCount,l=n.batchSize,A=n.batchWait;this.conditionalVacuum({batchSize:l,batchWait:A},{minDirtCount:a,minDirtFactor:i})}},t.prototype.discardAll=function(n){var i,a,l=this._options.autoVacuum;try{this._options.autoVacuum=!1;try{for(var A=L2(n),u=A.next();!u.done;u=A.next()){var f=u.value;this.discard(f)}}catch(C){i={error:C}}finally{try{u&&!u.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}}finally{this._options.autoVacuum=l}this.maybeAutoVacuum()},t.prototype.replace=function(n){var i=this._options,a=i.idField,l=i.extractField,A=l(n,a);this.discard(A),this.add(n)},t.prototype.vacuum=function(n){return n===void 0&&(n={}),this.conditionalVacuum(n)},t.prototype.conditionalVacuum=function(n,i){var a=this;return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&i,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(function(){var l=a._enqueuedVacuumConditions;return a._enqueuedVacuumConditions=Vc,a.performVacuuming(n,l)}),this._enqueuedVacuum)):this.vacuumConditionsMet(i)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(n),this._currentVacuum)},t.prototype.performVacuuming=function(n,i){return $S(this,void 0,void 0,function(){var a,l,A,u,f,C,m,h,p,v,x,y,B,F,T,w,R,M,N,E,k,j,z,r2,c2;return KS(this,function(s2){switch(s2.label){case 0:if(a=this._dirtCount,!this.vacuumConditionsMet(i))return[3,10];l=n.batchSize||Gc.batchSize,A=n.batchWait||Gc.batchWait,u=1,s2.label=1;case 1:s2.trys.push([1,7,8,9]),f=L2(this._index),C=f.next(),s2.label=2;case 2:if(C.done)return[3,6];m=h0(C.value,2),h=m[0],p=m[1];try{for(v=(j=void 0,L2(p)),x=v.next();!x.done;x=v.next()){y=h0(x.value,2),B=y[0],F=y[1];try{for(T=(r2=void 0,L2(F)),w=T.next();!w.done;w=T.next())R=h0(w.value,1),M=R[0],!this._documentIds.has(M)&&(F.size<=1?p.delete(B):F.delete(M))}catch(i2){r2={error:i2}}finally{try{w&&!w.done&&(c2=T.return)&&c2.call(T)}finally{if(r2)throw r2.error}}}}catch(i2){j={error:i2}}finally{try{x&&!x.done&&(z=v.return)&&z.call(v)}finally{if(j)throw j.error}}return this._index.get(h).size===0&&this._index.delete(h),u%l!==0?[3,4]:[4,new Promise(function(i2){return setTimeout(i2,A)})];case 3:s2.sent(),s2.label=4;case 4:u+=1,s2.label=5;case 5:return C=f.next(),[3,2];case 6:return[3,9];case 7:return N=s2.sent(),E={error:N},[3,9];case 8:try{C&&!C.done&&(k=f.return)&&k.call(f)}finally{if(E)throw E.error}return[7];case 9:this._dirtCount-=a,s2.label=10;case 10:return[4,null];case 11:return s2.sent(),this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null,[2]}})})},t.prototype.vacuumConditionsMet=function(n){if(n==null)return!0;var i=n.minDirtCount,a=n.minDirtFactor;return i=i||hc.minDirtCount,a=a||hc.minDirtFactor,this.dirtCount>=i&&this.dirtFactor>=a},Object.defineProperty(t.prototype,"isVacuuming",{get:function(){return this._currentVacuum!=null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dirtCount",{get:function(){return this._dirtCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dirtFactor",{get:function(){return this._dirtCount/(1+this._documentCount+this._dirtCount)},enumerable:!1,configurable:!0}),t.prototype.has=function(n){return this._idToShortId.has(n)},t.prototype.getStoredFields=function(n){var i=this._idToShortId.get(n);if(i!=null)return this._storedFields.get(i)},t.prototype.search=function(n,i){var a,l;i===void 0&&(i={});var A=this.executeQuery(n,i),u=[];try{for(var f=L2(A),C=f.next();!C.done;C=f.next()){var m=h0(C.value,2),h=m[0],p=m[1],v=p.score,x=p.terms,y=p.match,B=x.length||1,F={id:this._documentIds.get(h),score:v*B,terms:Object.keys(y),queryTerms:x,match:y};Object.assign(F,this._storedFields.get(h)),(i.filter==null||i.filter(F))&&u.push(F)}}catch(T){a={error:T}}finally{try{C&&!C.done&&(l=f.return)&&l.call(f)}finally{if(a)throw a.error}}return n===t.wildcard&&i.boostDocument==null&&this._options.searchOptions.boostDocument==null||u.sort(Kp),u},t.prototype.autoSuggest=function(n,i){var a,l,A,u;i===void 0&&(i={}),i=r0(r0({},this._options.autoSuggestOptions),i);var f=new Map;try{for(var C=L2(this.search(n,i)),m=C.next();!m.done;m=C.next()){var h=m.value,p=h.score,v=h.terms,x=v.join(" "),y=f.get(x);y!=null?(y.score+=p,y.count+=1):f.set(x,{score:p,terms:v,count:1})}}catch(N){a={error:N}}finally{try{m&&!m.done&&(l=C.return)&&l.call(C)}finally{if(a)throw a.error}}var B=[];try{for(var F=L2(f),T=F.next();!T.done;T=F.next()){var w=h0(T.value,2),y=w[0],R=w[1],p=R.score,v=R.terms,M=R.count;B.push({suggestion:y,terms:v,score:p/M})}}catch(N){A={error:N}}finally{try{T&&!T.done&&(u=F.return)&&u.call(F)}finally{if(A)throw A.error}}return B.sort(Kp),B},Object.defineProperty(t.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"termCount",{get:function(){return this._index.size},enumerable:!1,configurable:!0}),t.loadJSON=function(n,i){if(i==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(n),i)},t.getDefault=function(n){if(gc.hasOwnProperty(n))return pc(gc,n);throw new Error('MiniSearch: unknown option "'.concat(n,'"'))},t.loadJS=function(n,i){var a,l,A,u,f,C,m=n.index,h=n.documentCount,p=n.nextId,v=n.documentIds,x=n.fieldIds,y=n.fieldLength,B=n.averageFieldLength,F=n.storedFields,T=n.dirtCount,w=n.serializationVersion;if(w!==1&&w!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");var R=new t(i);R._documentCount=h,R._nextId=p,R._documentIds=Ua(v),R._idToShortId=new Map,R._fieldIds=x,R._fieldLength=Ua(y),R._avgFieldLength=B,R._storedFields=Ua(F),R._dirtCount=T||0,R._index=new mc;try{for(var M=L2(R._documentIds),N=M.next();!N.done;N=M.next()){var E=h0(N.value,2),k=E[0],j=E[1];R._idToShortId.set(j,k)}}catch(K){a={error:K}}finally{try{N&&!N.done&&(l=M.return)&&l.call(M)}finally{if(a)throw a.error}}try{for(var z=L2(m),r2=z.next();!r2.done;r2=z.next()){var c2=h0(r2.value,2),s2=c2[0],i2=c2[1],Z=new Map;try{for(var u2=(f=void 0,L2(Object.keys(i2))),I=u2.next();!I.done;I=u2.next()){var V=I.value,Q=i2[V];w===1&&(Q=Q.ds),Z.set(parseInt(V,10),Ua(Q))}}catch(K){f={error:K}}finally{try{I&&!I.done&&(C=u2.return)&&C.call(u2)}finally{if(f)throw f.error}}R._index.set(s2,Z)}}catch(K){A={error:K}}finally{try{r2&&!r2.done&&(u=z.return)&&u.call(z)}finally{if(A)throw A.error}}return R},t.prototype.executeQuery=function(n,i){var a=this;if(i===void 0&&(i={}),n===t.wildcard)return this.executeWildcardQuery(i);if(typeof n!="string"){var l=r0(r0(r0({},i),n),{queries:void 0}),A=n.queries.map(function(F){return a.executeQuery(F,l)});return this.combineResults(A,l.combineWith)}var u=this._options,f=u.tokenize,C=u.processTerm,m=u.searchOptions,h=r0(r0({tokenize:f,processTerm:C},m),i),p=h.tokenize,v=h.processTerm,x=p(n).flatMap(function(F){return v(F)}).filter(function(F){return!!F}),y=x.map(oF(h)),B=y.map(function(F){return a.executeQuerySpec(F,h)});return this.combineResults(B,h.combineWith)},t.prototype.executeQuerySpec=function(n,i){var a,l,A,u,f=r0(r0({},this._options.searchOptions),i),C=(f.fields||this._options.fields).reduce(function(V,Q){var K;return r0(r0({},V),(K={},K[Q]=pc(f.boost,Q)||1,K))},{}),m=f.boostDocument,h=f.weights,p=f.maxFuzzy,v=f.bm25,x=r0(r0({},Yp.weights),h),y=x.fuzzy,B=x.prefix,F=this._index.get(n.term),T=this.termResults(n.term,n.term,1,F,C,m,v),w,R;if(n.prefix&&(w=this._index.atPrefix(n.term)),n.fuzzy){var M=n.fuzzy===!0?.2:n.fuzzy,N=M<1?Math.min(p,Math.round(n.term.length*M)):M;N&&(R=this._index.fuzzyGet(n.term,N))}if(w)try{for(var E=L2(w),k=E.next();!k.done;k=E.next()){var j=h0(k.value,2),z=j[0],r2=j[1],c2=z.length-n.term.length;if(c2){R==null||R.delete(z);var s2=B*z.length/(z.length+.3*c2);this.termResults(n.term,z,s2,r2,C,m,v,T)}}}catch(V){a={error:V}}finally{try{k&&!k.done&&(l=E.return)&&l.call(E)}finally{if(a)throw a.error}}if(R)try{for(var i2=L2(R.keys()),Z=i2.next();!Z.done;Z=i2.next()){var z=Z.value,u2=h0(R.get(z),2),I=u2[0],c2=u2[1];if(c2){var s2=y*z.length/(z.length+c2);this.termResults(n.term,z,s2,I,C,m,v,T)}}}catch(V){A={error:V}}finally{try{Z&&!Z.done&&(u=i2.return)&&u.call(i2)}finally{if(A)throw A.error}}return T},t.prototype.executeWildcardQuery=function(n){var i,a,l=new Map,A=r0(r0({},this._options.searchOptions),n);try{for(var u=L2(this._documentIds),f=u.next();!f.done;f=u.next()){var C=h0(f.value,2),m=C[0],h=C[1],p=A.boostDocument?A.boostDocument(h,"",this._storedFields.get(m)):1;l.set(m,{score:p,terms:[],match:{}})}}catch(v){i={error:v}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return l},t.prototype.combineResults=function(n,i){if(i===void 0&&(i=Lu),n.length===0)return new Map;var a=i.toLowerCase();return n.reduce(tF[a])||new Map},t.prototype.toJSON=function(){var n,i,a,l,A=[];try{for(var u=L2(this._index),f=u.next();!f.done;f=u.next()){var C=h0(f.value,2),m=C[0],h=C[1],p={};try{for(var v=(a=void 0,L2(h)),x=v.next();!x.done;x=v.next()){var y=h0(x.value,2),B=y[0],F=y[1];p[B]=Object.fromEntries(F)}}catch(T){a={error:T}}finally{try{x&&!x.done&&(l=v.return)&&l.call(v)}finally{if(a)throw a.error}}A.push([m,p])}}catch(T){n={error:T}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:A,serializationVersion:2}},t.prototype.termResults=function(n,i,a,l,A,u,f,C){var m,h,p,v,x;if(C===void 0&&(C=new Map),l==null)return C;try{for(var y=L2(Object.keys(A)),B=y.next();!B.done;B=y.next()){var F=B.value,T=A[F],w=this._fieldIds[F],R=l.get(w);if(R!=null){var M=R.size,N=this._avgFieldLength[w];try{for(var E=(p=void 0,L2(R.keys())),k=E.next();!k.done;k=E.next()){var j=k.value;if(!this._documentIds.has(j)){this.removeTerm(w,j,i),M-=1;continue}var z=u?u(this._documentIds.get(j),i,this._storedFields.get(j)):1;if(z){var r2=R.get(j),c2=this._fieldLength.get(j)[w],s2=nF(r2,M,this._documentCount,c2,N,f),i2=a*T*z*s2,Z=C.get(j);if(Z){Z.score+=i2,aF(Z.terms,n);var u2=pc(Z.match,i);u2?u2.push(F):Z.match[i]=[F]}else C.set(j,{score:i2,terms:[n],match:(x={},x[i]=[F],x)})}}}catch(I){p={error:I}}finally{try{k&&!k.done&&(v=E.return)&&v.call(E)}finally{if(p)throw p.error}}}}}catch(I){m={error:I}}finally{try{B&&!B.done&&(h=y.return)&&h.call(y)}finally{if(m)throw m.error}}return C},t.prototype.addTerm=function(n,i,a){var l=this._index.fetch(a,Zp),A=l.get(n);if(A==null)A=new Map,A.set(i,1),l.set(n,A);else{var u=A.get(i);A.set(i,(u||0)+1)}},t.prototype.removeTerm=function(n,i,a){if(!this._index.has(a)){this.warnDocumentChanged(i,n,a);return}var l=this._index.fetch(a,Zp),A=l.get(n);A==null||A.get(i)==null?this.warnDocumentChanged(i,n,a):A.get(i)<=1?A.size<=1?l.delete(n):A.delete(i):A.set(i,A.get(i)-1),this._index.get(a).size===0&&this._index.delete(a)},t.prototype.warnDocumentChanged=function(n,i,a){var l,A;try{for(var u=L2(Object.keys(this._fieldIds)),f=u.next();!f.done;f=u.next()){var C=f.value;if(this._fieldIds[C]===i){this._options.logger("warn","MiniSearch: document with ID ".concat(this._documentIds.get(n),' has changed before removal: term "').concat(a,'" was not present in field "').concat(C,'". Removing a document after it has changed can corrupt the index!'),"version_conflict");return}}}catch(m){l={error:m}}finally{try{f&&!f.done&&(A=u.return)&&A.call(u)}finally{if(l)throw l.error}}},t.prototype.addDocumentId=function(n){var i=this._nextId;return this._idToShortId.set(n,i),this._documentIds.set(i,n),this._documentCount+=1,this._nextId+=1,i},t.prototype.addFields=function(n){for(var i=0;i<n.length;i++)this._fieldIds[n[i]]=i},t.prototype.addFieldLength=function(n,i,a,l){var A=this._fieldLength.get(n);A==null&&this._fieldLength.set(n,A=[]),A[i]=l;var u=this._avgFieldLength[i]||0,f=u*a+l;this._avgFieldLength[i]=f/(a+1)},t.prototype.removeFieldLength=function(n,i,a,l){if(a===1){this._avgFieldLength[i]=0;return}var A=this._avgFieldLength[i]*a-l;this._avgFieldLength[i]=A/(a-1)},t.prototype.saveStoredFields=function(n,i){var a,l,A=this._options,u=A.storeFields,f=A.extractField;if(!(u==null||u.length===0)){var C=this._storedFields.get(n);C==null&&this._storedFields.set(n,C={});try{for(var m=L2(u),h=m.next();!h.done;h=m.next()){var p=h.value,v=f(i,p);v!==void 0&&(C[p]=v)}}catch(x){a={error:x}}finally{try{h&&!h.done&&(l=m.return)&&l.call(m)}finally{if(a)throw a.error}}}},t.wildcard=Symbol("*"),t}(),pc=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)?t[n]:void 0},tF=(Zo={},Zo[Lu]=function(t,n){var i,a;try{for(var l=L2(n.keys()),A=l.next();!A.done;A=l.next()){var u=A.value,f=t.get(u);if(f==null)t.set(u,n.get(u));else{var C=n.get(u),m=C.score,h=C.terms,p=C.match;f.score=f.score+m,f.match=Object.assign(f.match,p),$p(f.terms,h)}}}catch(v){i={error:v}}finally{try{A&&!A.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return t},Zo[oh]=function(t,n){var i,a,l=new Map;try{for(var A=L2(n.keys()),u=A.next();!u.done;u=A.next()){var f=u.value,C=t.get(f);if(C!=null){var m=n.get(f),h=m.score,p=m.terms,v=m.match;$p(C.terms,p),l.set(f,{score:C.score+h,terms:C.terms,match:Object.assign(C.match,v)})}}}catch(x){i={error:x}}finally{try{u&&!u.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}return l},Zo[JS]=function(t,n){var i,a;try{for(var l=L2(n.keys()),A=l.next();!A.done;A=l.next()){var u=A.value;t.delete(u)}}catch(f){i={error:f}}finally{try{A&&!A.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return t},Zo),rF={k:1.2,b:.7,d:.5},nF=function(t,n,i,a,l,A){var u=A.k,f=A.b,C=A.d,m=Math.log(1+(i-n+.5)/(n+.5));return m*(C+t*(u+1)/(t+u*(1-f+f*a/l)))},oF=function(t){return function(n,i,a){var l=typeof t.fuzzy=="function"?t.fuzzy(n,i,a):t.fuzzy||!1,A=typeof t.prefix=="function"?t.prefix(n,i,a):t.prefix===!0;return{term:n,fuzzy:l,prefix:A}}},gc={idField:"id",extractField:function(t,n){return t[n]},tokenize:function(t){return t.split(sF)},processTerm:function(t){return t.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[],logger:function(t,n){typeof(console==null?void 0:console[t])=="function"&&console[t](n)},autoVacuum:!0},Yp={combineWith:Lu,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:rF},iF={combineWith:oh,prefix:function(t,n,i){return n===i.length-1}},Gc={batchSize:1e3,batchWait:10},Vc={minDirtFactor:.1,minDirtCount:20},hc=r0(r0({},Gc),Vc),aF=function(t,n){t.includes(n)||t.push(n)},$p=function(t,n){var i,a;try{for(var l=L2(n),A=l.next();!A.done;A=l.next()){var u=A.value;t.includes(u)||t.push(u)}}catch(f){i={error:f}}finally{try{A&&!A.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}},Kp=function(t,n){var i=t.score,a=n.score;return a-i},Zp=function(){return new Map},Ua=function(t){var n,i,a=new Map;try{for(var l=L2(Object.keys(t)),A=l.next();!A.done;A=l.next()){var u=A.value;a.set(parseInt(u,10),t[u])}}catch(f){n={error:f}}finally{try{A&&!A.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return a},sF=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;let Dc;function ih(){const[t,n]=D.useState();return D.useEffect(()=>{(async()=>{Dc||(Dc=YS());const i=await Dc,a=eF.loadJSON(i,{fields:["title","titles","text"],searchOptions:{boost:{title:4,text:2,titles:1},fuzzy:.2,prefix:!0},storeFields:["href","html","isPage","text","title","titles"]});n(a)})()},[]),D.useEffect(()=>{},[]),t}var lF="vocs_DesktopSearch_search",AF="vocs_DesktopSearch_searchCommand",cF="Label",ah=D.forwardRef((t,n)=>g.jsx(E2.label,{...t,ref:n,onMouseDown:i=>{var l;i.target.closest("button, input, select, textarea")||((l=t.onMouseDown)==null||l.call(t,i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));ah.displayName=cF;var uF=ah,es={exports:{}};/*!***************************************************
* mark.js v8.11.1
* https://markjs.io/
* Copyright (c) 2014–2018, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/var fF=es.exports,Xp;function dF(){return Xp||(Xp=1,function(t,n){(function(i,a){t.exports=a()})(fF,function(){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},a=function(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")},l=function(){function m(h,p){for(var v=0;v<p.length;v++){var x=p[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(h,x.key,x)}}return function(h,p,v){return p&&m(h.prototype,p),v&&m(h,v),h}}(),A=Object.assign||function(m){for(var h=1;h<arguments.length;h++){var p=arguments[h];for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(m[v]=p[v])}return m},u=function(){function m(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;a(this,m),this.ctx=h,this.iframes=p,this.exclude=v,this.iframesTimeout=x}return l(m,[{key:"getContexts",value:function(){var p=void 0,v=[];return typeof this.ctx>"u"||!this.ctx?p=[]:NodeList.prototype.isPrototypeOf(this.ctx)?p=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?p=this.ctx:typeof this.ctx=="string"?p=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):p=[this.ctx],p.forEach(function(x){var y=v.filter(function(B){return B.contains(x)}).length>0;v.indexOf(x)===-1&&!y&&v.push(x)}),v}},{key:"getIframeContents",value:function(p,v){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},y=void 0;try{var B=p.contentWindow;if(y=B.document,!B||!y)throw new Error("iframe inaccessible")}catch{x()}y&&v(y)}},{key:"isIframeBlank",value:function(p){var v="about:blank",x=p.getAttribute("src").trim(),y=p.contentWindow.location.href;return y===v&&x!==v&&x}},{key:"observeIframeLoad",value:function(p,v,x){var y=this,B=!1,F=null,T=function w(){if(!B){B=!0,clearTimeout(F);try{y.isIframeBlank(p)||(p.removeEventListener("load",w),y.getIframeContents(p,v,x))}catch{x()}}};p.addEventListener("load",T),F=setTimeout(T,this.iframesTimeout)}},{key:"onIframeReady",value:function(p,v,x){try{p.contentWindow.document.readyState==="complete"?this.isIframeBlank(p)?this.observeIframeLoad(p,v,x):this.getIframeContents(p,v,x):this.observeIframeLoad(p,v,x)}catch{x()}}},{key:"waitForIframes",value:function(p,v){var x=this,y=0;this.forEachIframe(p,function(){return!0},function(B){y++,x.waitForIframes(B.querySelector("html"),function(){--y||v()})},function(B){B||v()})}},{key:"forEachIframe",value:function(p,v,x){var y=this,B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},F=p.querySelectorAll("iframe"),T=F.length,w=0;F=Array.prototype.slice.call(F);var R=function(){--T<=0&&B(w)};T||R(),F.forEach(function(M){m.matches(M,y.exclude)?R():y.onIframeReady(M,function(N){v(M)&&(w++,x(N)),R()},R)})}},{key:"createIterator",value:function(p,v,x){return document.createNodeIterator(p,v,x,!1)}},{key:"createInstanceOnIframe",value:function(p){return new m(p.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(p,v,x){var y=p.compareDocumentPosition(x),B=Node.DOCUMENT_POSITION_PRECEDING;if(y&B)if(v!==null){var F=v.compareDocumentPosition(x),T=Node.DOCUMENT_POSITION_FOLLOWING;if(F&T)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(p){var v=p.previousNode(),x=void 0;return v===null?x=p.nextNode():x=p.nextNode()&&p.nextNode(),{prevNode:v,node:x}}},{key:"checkIframeFilter",value:function(p,v,x,y){var B=!1,F=!1;return y.forEach(function(T,w){T.val===x&&(B=w,F=T.handled)}),this.compareNodeIframe(p,v,x)?(B===!1&&!F?y.push({val:x,handled:!0}):B!==!1&&!F&&(y[B].handled=!0),!0):(B===!1&&y.push({val:x,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(p,v,x,y){var B=this;p.forEach(function(F){F.handled||B.getIframeContents(F.val,function(T){B.createInstanceOnIframe(T).forEachNode(v,x,y)})})}},{key:"iterateThroughNodes",value:function(p,v,x,y,B){for(var F=this,T=this.createIterator(v,p,y),w=[],R=[],M=void 0,N=void 0,E=function(){var j=F.getIteratorNode(T);return N=j.prevNode,M=j.node,M};E();)this.iframes&&this.forEachIframe(v,function(k){return F.checkIframeFilter(M,N,k,w)},function(k){F.createInstanceOnIframe(k).forEachNode(p,function(j){return R.push(j)},y)}),R.push(M);R.forEach(function(k){x(k)}),this.iframes&&this.handleOpenIframes(w,p,x,y),B()}},{key:"forEachNode",value:function(p,v,x){var y=this,B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},F=this.getContexts(),T=F.length;T||B(),F.forEach(function(w){var R=function(){y.iterateThroughNodes(p,w,v,x,function(){--T<=0&&B()})};y.iframes?y.waitForIframes(w,R):R()})}}],[{key:"matches",value:function(p,v){var x=typeof v=="string"?[v]:v,y=p.matches||p.matchesSelector||p.msMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.webkitMatchesSelector;if(y){var B=!1;return x.every(function(F){return y.call(p,F)?(B=!0,!1):!0}),B}else return!1}}]),m}(),f=function(){function m(h){a(this,m),this.ctx=h,this.ie=!1;var p=window.navigator.userAgent;(p.indexOf("MSIE")>-1||p.indexOf("Trident")>-1)&&(this.ie=!0)}return l(m,[{key:"log",value:function(p){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"debug",x=this.opt.log;this.opt.debug&&(typeof x>"u"?"undefined":i(x))==="object"&&typeof x[v]=="function"&&x[v]("mark.js: "+p)}},{key:"escapeStr",value:function(p){return p.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(p){return this.opt.wildcards!=="disabled"&&(p=this.setupWildcardsRegExp(p)),p=this.escapeStr(p),Object.keys(this.opt.synonyms).length&&(p=this.createSynonymsRegExp(p)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(p=this.setupIgnoreJoinersRegExp(p)),this.opt.diacritics&&(p=this.createDiacriticsRegExp(p)),p=this.createMergedBlanksRegExp(p),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(p=this.createJoinersRegExp(p)),this.opt.wildcards!=="disabled"&&(p=this.createWildcardsRegExp(p)),p=this.createAccuracyRegExp(p),p}},{key:"createSynonymsRegExp",value:function(p){var v=this.opt.synonyms,x=this.opt.caseSensitive?"":"i",y=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var B in v)if(v.hasOwnProperty(B)){var F=v[B],T=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(B):this.escapeStr(B),w=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(F):this.escapeStr(F);T!==""&&w!==""&&(p=p.replace(new RegExp("("+this.escapeStr(T)+"|"+this.escapeStr(w)+")","gm"+x),y+("("+this.processSynomyms(T)+"|")+(this.processSynomyms(w)+")")+y))}return p}},{key:"processSynomyms",value:function(p){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(p=this.setupIgnoreJoinersRegExp(p)),p}},{key:"setupWildcardsRegExp",value:function(p){return p=p.replace(/(?:\\)*\?/g,function(v){return v.charAt(0)==="\\"?"?":""}),p.replace(/(?:\\)*\*/g,function(v){return v.charAt(0)==="\\"?"*":""})}},{key:"createWildcardsRegExp",value:function(p){var v=this.opt.wildcards==="withSpaces";return p.replace(/\u0001/g,v?"[\\S\\s]?":"\\S?").replace(/\u0002/g,v?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(p){return p.replace(/[^(|)\\]/g,function(v,x,y){var B=y.charAt(x+1);return/[(|)\\]/.test(B)||B===""?v:v+"\0"})}},{key:"createJoinersRegExp",value:function(p){var v=[],x=this.opt.ignorePunctuation;return Array.isArray(x)&&x.length&&v.push(this.escapeStr(x.join(""))),this.opt.ignoreJoiners&&v.push("\\u00ad\\u200b\\u200c\\u200d"),v.length?p.split(/\u0000+/).join("["+v.join("")+"]*"):p}},{key:"createDiacriticsRegExp",value:function(p){var v=this.opt.caseSensitive?"":"i",x=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],y=[];return p.split("").forEach(function(B){x.every(function(F){if(F.indexOf(B)!==-1){if(y.indexOf(F)>-1)return!1;p=p.replace(new RegExp("["+F+"]","gm"+v),"["+F+"]"),y.push(F)}return!0})}),p}},{key:"createMergedBlanksRegExp",value:function(p){return p.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(p){var v=this,x="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿",y=this.opt.accuracy,B=typeof y=="string"?y:y.value,F=typeof y=="string"?[]:y.limiters,T="";switch(F.forEach(function(w){T+="|"+v.escapeStr(w)}),B){case"partially":default:return"()("+p+")";case"complementary":return T="\\s"+(T||this.escapeStr(x)),"()([^"+T+"]*"+p+"[^"+T+"]*)";case"exactly":return"(^|\\s"+T+")("+p+")(?=$|\\s"+T+")"}}},{key:"getSeparatedKeywords",value:function(p){var v=this,x=[];return p.forEach(function(y){v.opt.separateWordSearch?y.split(" ").forEach(function(B){B.trim()&&x.indexOf(B)===-1&&x.push(B)}):y.trim()&&x.indexOf(y)===-1&&x.push(y)}),{keywords:x.sort(function(y,B){return B.length-y.length}),length:x.length}}},{key:"isNumeric",value:function(p){return Number(parseFloat(p))==p}},{key:"checkRanges",value:function(p){var v=this;if(!Array.isArray(p)||Object.prototype.toString.call(p[0])!=="[object Object]")return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(p),[];var x=[],y=0;return p.sort(function(B,F){return B.start-F.start}).forEach(function(B){var F=v.callNoMatchOnInvalidRanges(B,y),T=F.start,w=F.end,R=F.valid;R&&(B.start=T,B.length=w-T,x.push(B),y=w)}),x}},{key:"callNoMatchOnInvalidRanges",value:function(p,v){var x=void 0,y=void 0,B=!1;return p&&typeof p.start<"u"?(x=parseInt(p.start,10),y=x+parseInt(p.length,10),this.isNumeric(p.start)&&this.isNumeric(p.length)&&y-v>0&&y-x>0?B=!0:(this.log("Ignoring invalid or overlapping range: "+(""+JSON.stringify(p))),this.opt.noMatch(p))):(this.log("Ignoring invalid range: "+JSON.stringify(p)),this.opt.noMatch(p)),{start:x,end:y,valid:B}}},{key:"checkWhitespaceRanges",value:function(p,v,x){var y=void 0,B=!0,F=x.length,T=v-F,w=parseInt(p.start,10)-T;return w=w>F?F:w,y=w+parseInt(p.length,10),y>F&&(y=F,this.log("End range automatically set to the max value of "+F)),w<0||y-w<0||w>F||y>F?(B=!1,this.log("Invalid range: "+JSON.stringify(p)),this.opt.noMatch(p)):x.substring(w,y).replace(/\s+/g,"")===""&&(B=!1,this.log("Skipping whitespace only range: "+JSON.stringify(p)),this.opt.noMatch(p)),{start:w,end:y,valid:B}}},{key:"getTextNodes",value:function(p){var v=this,x="",y=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(B){y.push({start:x.length,end:(x+=B.textContent).length,node:B})},function(B){return v.matchesExclude(B.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){p({value:x,nodes:y})})}},{key:"matchesExclude",value:function(p){return u.matches(p,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(p,v,x){var y=this.opt.element?this.opt.element:"mark",B=p.splitText(v),F=B.splitText(x-v),T=document.createElement(y);return T.setAttribute("data-markjs","true"),this.opt.className&&T.setAttribute("class",this.opt.className),T.textContent=B.textContent,B.parentNode.replaceChild(T,B),F}},{key:"wrapRangeInMappedTextNode",value:function(p,v,x,y,B){var F=this;p.nodes.every(function(T,w){var R=p.nodes[w+1];if(typeof R>"u"||R.start>v){if(!y(T.node))return!1;var M=v-T.start,N=(x>T.end?T.end:x)-T.start,E=p.value.substr(0,T.start),k=p.value.substr(N+T.start);if(T.node=F.wrapRangeInTextNode(T.node,M,N),p.value=E+k,p.nodes.forEach(function(j,z){z>=w&&(p.nodes[z].start>0&&z!==w&&(p.nodes[z].start-=N),p.nodes[z].end-=N)}),x-=N,B(T.node.previousSibling,T.start),x>T.end)v=T.end;else return!1}return!0})}},{key:"wrapMatches",value:function(p,v,x,y,B){var F=this,T=v===0?0:v+1;this.getTextNodes(function(w){w.nodes.forEach(function(R){R=R.node;for(var M=void 0;(M=p.exec(R.textContent))!==null&&M[T]!=="";)if(x(M[T],R)){var N=M.index;if(T!==0)for(var E=1;E<T;E++)N+=M[E].length;R=F.wrapRangeInTextNode(R,N,N+M[T].length),y(R.previousSibling),p.lastIndex=0}}),B()})}},{key:"wrapMatchesAcrossElements",value:function(p,v,x,y,B){var F=this,T=v===0?0:v+1;this.getTextNodes(function(w){for(var R=void 0;(R=p.exec(w.value))!==null&&R[T]!=="";){var M=R.index;if(T!==0)for(var N=1;N<T;N++)M+=R[N].length;var E=M+R[T].length;F.wrapRangeInMappedTextNode(w,M,E,function(k){return x(R[T],k)},function(k,j){p.lastIndex=j,y(k)})}B()})}},{key:"wrapRangeFromIndex",value:function(p,v,x,y){var B=this;this.getTextNodes(function(F){var T=F.value.length;p.forEach(function(w,R){var M=B.checkWhitespaceRanges(w,T,F.value),N=M.start,E=M.end,k=M.valid;k&&B.wrapRangeInMappedTextNode(F,N,E,function(j){return v(j,w,F.value.substring(N,E),R)},function(j){x(j,w)})}),y()})}},{key:"unwrapMatches",value:function(p){for(var v=p.parentNode,x=document.createDocumentFragment();p.firstChild;)x.appendChild(p.removeChild(p.firstChild));v.replaceChild(x,p),this.ie?this.normalizeTextNode(v):v.normalize()}},{key:"normalizeTextNode",value:function(p){if(p){if(p.nodeType===3)for(;p.nextSibling&&p.nextSibling.nodeType===3;)p.nodeValue+=p.nextSibling.nodeValue,p.parentNode.removeChild(p.nextSibling);else this.normalizeTextNode(p.firstChild);this.normalizeTextNode(p.nextSibling)}}},{key:"markRegExp",value:function(p,v){var x=this;this.opt=v,this.log('Searching with expression "'+p+'"');var y=0,B="wrapMatches",F=function(w){y++,x.opt.each(w)};this.opt.acrossElements&&(B="wrapMatchesAcrossElements"),this[B](p,this.opt.ignoreGroups,function(T,w){return x.opt.filter(w,T,y)},F,function(){y===0&&x.opt.noMatch(p),x.opt.done(y)})}},{key:"mark",value:function(p,v){var x=this;this.opt=v;var y=0,B="wrapMatches",F=this.getSeparatedKeywords(typeof p=="string"?[p]:p),T=F.keywords,w=F.length,R=this.opt.caseSensitive?"":"i",M=function N(E){var k=new RegExp(x.createRegExp(E),"gm"+R),j=0;x.log('Searching with expression "'+k+'"'),x[B](k,1,function(z,r2){return x.opt.filter(r2,E,y,j)},function(z){j++,y++,x.opt.each(z)},function(){j===0&&x.opt.noMatch(E),T[w-1]===E?x.opt.done(y):N(T[T.indexOf(E)+1])})};this.opt.acrossElements&&(B="wrapMatchesAcrossElements"),w===0?this.opt.done(y):M(T[0])}},{key:"markRanges",value:function(p,v){var x=this;this.opt=v;var y=0,B=this.checkRanges(p);B&&B.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(B)),this.wrapRangeFromIndex(B,function(F,T,w,R){return x.opt.filter(F,T,w,R)},function(F,T){y++,x.opt.each(F,T)},function(){x.opt.done(y)})):this.opt.done(y)}},{key:"unmark",value:function(p){var v=this;this.opt=p;var x=this.opt.element?this.opt.element:"*";x+="[data-markjs]",this.opt.className&&(x+="."+this.opt.className),this.log('Removal selector "'+x+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(y){v.unwrapMatches(y)},function(y){var B=u.matches(y,x),F=v.matchesExclude(y);return!B||F?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(p){this._opt=A({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},p)},get:function(){return this._opt}},{key:"iterator",get:function(){return new u(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),m}();function C(m){var h=this,p=new f(m);return this.mark=function(v,x){return p.mark(v,x),h},this.markRegExp=function(v,x){return p.markRegExp(v,x),h},this.markRanges=function(v,x){return p.markRanges(v,x),h},this.unmark=function(v){return p.unmark(v),h},this}return C})}(es)),es.exports}var mF=dF();const CF=Ds(mF);function pF(t,n){const[i,a]=D.useState(t);return D.useEffect(()=>{const l=setTimeout(()=>a(t),n);return()=>{clearTimeout(l)}},[t,n]),i}function Yc(t,n){const[i,a]=D.useState();D.useEffect(()=>{const A=gF(t);a(typeof A>"u"||A===null?typeof n=="function"?n():n:A)},[n,t]);const l=D.useCallback(A=>{a(u=>{let f;typeof A=="function"?f=A(u):f=A;try{localStorage.setItem(t,JSON.stringify(f))}catch{}return f})},[t]);return[i,l]}function gF(t){try{const n=localStorage.getItem(t);return typeof n=="string"?JSON.parse(n):void 0}catch{return}}var sh="vocs_utils_visuallyHidden",hF="vocs_Kbd";function lh(t){return g.jsx("kbd",{...t,className:l2(t.className,hF)})}var DF="vocs_KeyboardShortcut",vF="vocs_KeyboardShortcut_kbdGroup";function bn(t){const{description:n,keys:i}=t;return g.jsxs("span",{className:DF,children:[n,g.jsx("span",{className:vF,children:i.map(a=>g.jsx(lh,{children:a},a))})]})}var xF="vocs_SearchDialog",yF="vocs_SearchDialog_overlay",BF="vocs_SearchDialog_searchBox",SF="vocs_SearchDialog_searchInput",za="vocs_SearchDialog_searchInputIcon",FF="vocs_SearchDialog_searchInputIconDesktop",TF="vocs_SearchDialog_searchInputIconMobile",RF="vocs_SearchDialog_results",bF="vocs_SearchDialog_result",wF="vocs_SearchDialog_resultSelected",Qp="vocs_SearchDialog_resultIcon",EF="vocs_SearchDialog_titles",Jp="vocs_SearchDialog_title",MF="vocs_SearchDialog_titleIcon",PF="vocs_SearchDialog_content",e3="vocs_SearchDialog_excerpt",NF="vocs_SearchDialog_searchShortcuts";function Ah(t){const{search:n}=C0(),i=Du(),a=D.useRef(null),l=D.useRef(null),[A,u]=Yc("filterText",""),f=pF(A,200),C=ih(),[m,h]=D.useState(-1),[p,v]=D.useState(!1),[x,y]=Yc("showDetailView",!0),B=D.useMemo(()=>C?f?(h(0),C.search(f,n).slice(0,16)):(h(-1),[]):[],[C,n,f]),F=B.length,T=B[m],w=D.useCallback(()=>{var E,k,j;if(!l.current)return;const R=new Set;for(const z of B)for(const r2 in z.match)R.add(r2);const M=new CF(l.current);M.unmark({done(){M==null||M.markRegExp(_F(R))}});const N=l.current.querySelectorAll(`.${e3}`);for(const z of N)(E=z.querySelector('mark[data-markjs="true"]'))==null||E.scrollIntoView({block:"center"});(j=(k=l.current)==null?void 0:k.firstElementChild)==null||j.scrollIntoView({block:"start"})},[B]);return D.useEffect(()=>{if(!t.open)return;function R(M){var N;switch(M.key){case"ArrowDown":{M.preventDefault(),h(E=>{var z;let k=E+1;k>=F&&(k=0);const j=(z=l.current)==null?void 0:z.children[k];return j==null||j.scrollIntoView({block:"nearest"}),k}),v(!0);break}case"ArrowUp":{M.preventDefault(),h(E=>{var z;let k=E-1;k<0&&(k=F-1);const j=(z=l.current)==null?void 0:z.children[k];return j==null||j.scrollIntoView({block:"nearest"}),k}),v(!0);break}case"Backspace":{if(!M.metaKey)return;M.preventDefault(),u(""),(N=a.current)==null||N.focus();break}case"Enter":{if(M.target instanceof HTMLButtonElement&&M.target.type!=="submit"||!T)return;M.preventDefault(),i(T.href),t.onClose();break}}}return window.addEventListener("keydown",R),()=>{window.removeEventListener("keydown",R)}},[i,F,u,T,t.open,t.onClose]),D.useEffect(()=>{f!==""&&l.current&&w()},[w,f]),g.jsxs(zS,{children:[g.jsx(WS,{className:yF}),g.jsxs(GS,{onOpenAutoFocus:R=>{a.current&&(R.preventDefault(),a.current.focus()),w()},onCloseAutoFocus:()=>{h(0)},className:xF,"aria-describedby":void 0,children:[g.jsx(VS,{className:sh,children:"Search"}),g.jsxs("form",{className:BF,children:[g.jsx("button",{"aria-label":"Close search dialog",type:"button",onClick:()=>t.onClose(),className:TF,children:g.jsx(J5,{className:za,height:20,width:20})}),g.jsx(uF,{htmlFor:"search-input",children:g.jsx(Tu,{"aria-label":"Search",className:l2(za,FF),height:20,width:20})}),g.jsx("input",{ref:a,tabIndex:0,className:SF,id:"search-input",onChange:R=>u(R.target.value),placeholder:"Search",type:"search",value:A}),g.jsx("button",{"aria-label":"Toggle detail view",type:"button",onClick:()=>y(R=>!R),children:g.jsx(s6,{className:za,height:20,width:20})}),g.jsx("button",{"aria-label":"Reset search",type:"button",className:za,onClick:()=>{var R;u(""),(R=a.current)==null||R.focus()},children:"⌫"})]}),g.jsxs("ul",{className:RF,role:B.length?"listbox":void 0,onMouseMove:()=>v(!1),ref:l,children:[f&&B.length===0&&g.jsxs("li",{children:['No results for "',g.jsx("span",{children:f}),'"']}),B.map((R,M)=>{var N;return g.jsx("li",{role:"option",className:l2(bF,M===m&&wF),"aria-selected":M===m,"aria-label":[...R.titles.filter(E=>!!E),R.title].join(" > "),children:g.jsxs(On,{to:R.href,onClick:E=>{E.metaKey||t.onClose()},onMouseEnter:()=>!p&&h(M),onFocus:()=>h(M),children:[g.jsxs("div",{className:EF,children:[R.isPage?g.jsx(i6,{className:Qp}):g.jsx("span",{className:Qp,children:"#"}),R.titles.filter(E=>!!E).map(E=>g.jsxs("span",{className:Jp,children:[g.jsx("span",{dangerouslySetInnerHTML:{__html:E}}),g.jsx(t6,{className:MF})]},E)),g.jsx("span",{className:Jp,children:g.jsx("span",{dangerouslySetInnerHTML:{__html:R.title}})})]}),x&&((N=R.text)==null?void 0:N.trim())&&g.jsx("div",{className:e3,children:g.jsx(yg,{className:PF,children:g.jsx("div",{dangerouslySetInnerHTML:{__html:R.html}})})})]})},R.id)})]}),g.jsxs("div",{className:NF,children:[g.jsx(bn,{description:"Navigate",keys:["↑","↓"]}),g.jsx(bn,{description:"Select",keys:["enter"]}),g.jsx(bn,{description:"Close",keys:["esc"]}),g.jsx(bn,{description:"Reset",keys:["⌘","⌫"]})]})]})]})}function _F(t){return new RegExp([...t].sort((n,i)=>i.length-n.length).map(n=>`(${n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")})`).join("|"),"gi")}function LF(){ih();const[t,n]=D.useState(!1);return D.useEffect(()=>{function i(a){const l=document.activeElement instanceof HTMLElement&&(["input","select","textarea"].includes(document.activeElement.tagName.toLowerCase())||document.activeElement.isContentEditable);a.key==="/"&&!t&&!l?(a.preventDefault(),n(!0)):a.metaKey===!0&&a.key==="k"&&(a.preventDefault(),n(A=>!A))}return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[t]),g.jsxs(Xg,{open:t,onOpenChange:n,children:[g.jsx(Qg,{asChild:!0,children:g.jsxs("button",{className:lF,type:"button",children:[g.jsx(Tu,{style:{marginTop:2}}),"Search...",g.jsx("div",{className:AF,children:g.jsx("div",{style:{background:"currentColor",transform:"rotate(45deg)",width:1.5,borderRadius:2,height:"100%"}})})]})}),g.jsx(Ah,{open:t,onClose:()=>n(!1)})]})}var kF="vocs_DesktopTopNav",IF="vocs_DesktopTopNav_withLogo",qF="vocs_DesktopTopNav_content",OF="vocs_DesktopTopNav_curtain",jF="vocs_DesktopTopNav_group",t3="vocs_DesktopTopNav_item",HF="vocs_DesktopTopNav_logo",UF="vocs_DesktopTopNav_logoWrapper",r3="vocs_DesktopTopNav_section",vc="vocs_Logo",zF="vocs_Logo_logoDark",WF="vocs_Logo_logoLight";function GF({className:t}){const{logoUrl:n}=C0();return n?g.jsx(g.Fragment,{children:typeof n=="string"?g.jsx("img",{alt:"Logo",className:l2(t,vc),src:n}):g.jsxs(g.Fragment,{children:[g.jsx("img",{alt:"Logo",className:l2(t,vc,zF),src:n.dark}),g.jsx("img",{alt:"Logo",className:l2(t,vc,WF),src:n.light})]})}):null}var VF="vocs_NavLogo_logoImage",YF="vocs_NavLogo_title";function ku(){const t=C0();return t.logoUrl?g.jsx(GF,{className:VF}):g.jsx("div",{className:YF,children:t.title})}var $F=D.createContext(void 0);function fi(t){const n=D.useContext($F);return t||n||"ltr"}function di(t){const n=t+"CollectionProvider",[i,a]=qe(n),[l,A]=i(n,{collectionRef:{current:null},itemMap:new Map}),u=B=>{const{scope:F,children:T}=B,w=n0.useRef(null),R=n0.useRef(new Map).current;return g.jsx(l,{scope:F,itemMap:R,collectionRef:w,children:T})};u.displayName=n;const f=t+"CollectionSlot",C=Nn(f),m=n0.forwardRef((B,F)=>{const{scope:T,children:w}=B,R=A(f,T),M=o0(F,R.collectionRef);return g.jsx(C,{ref:M,children:w})});m.displayName=f;const h=t+"CollectionItemSlot",p="data-radix-collection-item",v=Nn(h),x=n0.forwardRef((B,F)=>{const{scope:T,children:w,...R}=B,M=n0.useRef(null),N=o0(F,M),E=A(h,T);return n0.useEffect(()=>(E.itemMap.set(M,{ref:M,...R}),()=>void E.itemMap.delete(M))),g.jsx(v,{[p]:"",ref:N,children:w})});x.displayName=h;function y(B){const F=A(t+"CollectionConsumer",B);return n0.useCallback(()=>{const w=F.collectionRef.current;if(!w)return[];const R=Array.from(w.querySelectorAll(`[${p}]`));return Array.from(F.itemMap.values()).sort((E,k)=>R.indexOf(E.ref.current)-R.indexOf(k.ref.current))},[F.collectionRef,F.itemMap])}return[{Provider:u,Slot:m,ItemSlot:x},y,a]}function KF(t){const n=D.useRef({value:t,previous:t});return D.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}var ZF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),XF="VisuallyHidden",ch=D.forwardRef((t,n)=>g.jsx(E2.span,{...t,ref:n,style:{...ZF,...t.style}}));ch.displayName=XF;var QF=ch,Ir="NavigationMenu",[Iu,uh,JF]=di(Ir),[$c,e1,t1]=di(Ir),[qu,TN]=qe(Ir,[JF,t1]),[r1,Re]=qu(Ir),[n1,o1]=qu(Ir),fh=D.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,value:a,onValueChange:l,defaultValue:A,delayDuration:u=200,skipDelayDuration:f=300,orientation:C="horizontal",dir:m,...h}=t,[p,v]=D.useState(null),x=o0(n,z=>v(z)),y=fi(m),B=D.useRef(0),F=D.useRef(0),T=D.useRef(0),[w,R]=D.useState(!0),[M,N]=Qe({prop:a,onChange:z=>{const r2=z!=="",c2=f>0;r2?(window.clearTimeout(T.current),c2&&R(!1)):(window.clearTimeout(T.current),T.current=window.setTimeout(()=>R(!0),f)),l==null||l(z)},defaultProp:A??"",caller:Ir}),E=D.useCallback(()=>{window.clearTimeout(F.current),F.current=window.setTimeout(()=>N(""),150)},[N]),k=D.useCallback(z=>{window.clearTimeout(F.current),N(z)},[N]),j=D.useCallback(z=>{M===z?window.clearTimeout(F.current):B.current=window.setTimeout(()=>{window.clearTimeout(F.current),N(z)},u)},[M,N,u]);return D.useEffect(()=>()=>{window.clearTimeout(B.current),window.clearTimeout(F.current),window.clearTimeout(T.current)},[]),g.jsx(dh,{scope:i,isRootMenu:!0,value:M,dir:y,orientation:C,rootNavigationMenu:p,onTriggerEnter:z=>{window.clearTimeout(B.current),w?j(z):k(z)},onTriggerLeave:()=>{window.clearTimeout(B.current),E()},onContentEnter:()=>window.clearTimeout(F.current),onContentLeave:E,onItemSelect:z=>{N(r2=>r2===z?"":z)},onItemDismiss:()=>N(""),children:g.jsx(E2.nav,{"aria-label":"Main","data-orientation":C,dir:y,...h,ref:x})})});fh.displayName=Ir;var Kc="NavigationMenuSub",i1=D.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,value:a,onValueChange:l,defaultValue:A,orientation:u="horizontal",...f}=t,C=Re(Kc,i),[m,h]=Qe({prop:a,onChange:l,defaultProp:A??"",caller:Kc});return g.jsx(dh,{scope:i,isRootMenu:!1,value:m,dir:C.dir,orientation:u,rootNavigationMenu:C.rootNavigationMenu,onTriggerEnter:p=>h(p),onItemSelect:p=>h(p),onItemDismiss:()=>h(""),children:g.jsx(E2.div,{"data-orientation":u,...f,ref:n})})});i1.displayName=Kc;var dh=t=>{const{scope:n,isRootMenu:i,rootNavigationMenu:a,dir:l,orientation:A,children:u,value:f,onItemSelect:C,onItemDismiss:m,onTriggerEnter:h,onTriggerLeave:p,onContentEnter:v,onContentLeave:x}=t,[y,B]=D.useState(null),[F,T]=D.useState(new Map),[w,R]=D.useState(null);return g.jsx(r1,{scope:n,isRootMenu:i,rootNavigationMenu:a,value:f,previousValue:KF(f),baseId:xe(),dir:l,orientation:A,viewport:y,onViewportChange:B,indicatorTrack:w,onIndicatorTrackChange:R,onTriggerEnter:I0(h),onTriggerLeave:I0(p),onContentEnter:I0(v),onContentLeave:I0(x),onItemSelect:I0(C),onItemDismiss:I0(m),onViewportContentChange:D.useCallback((M,N)=>{T(E=>(E.set(M,N),new Map(E)))},[]),onViewportContentRemove:D.useCallback(M=>{T(N=>N.has(M)?(N.delete(M),new Map(N)):N)},[]),children:g.jsx(Iu.Provider,{scope:n,children:g.jsx(n1,{scope:n,items:F,children:u})})})},mh="NavigationMenuList",Ch=D.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,...a}=t,l=Re(mh,i),A=g.jsx(E2.ul,{"data-orientation":l.orientation,...a,ref:n});return g.jsx(E2.div,{style:{position:"relative"},ref:l.onIndicatorTrackChange,children:g.jsx(Iu.Slot,{scope:i,children:l.isRootMenu?g.jsx(Bh,{asChild:!0,children:A}):A})})});Ch.displayName=mh;var ph="NavigationMenuItem",[a1,gh]=qu(ph),hh=D.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,value:a,...l}=t,A=xe(),u=a||A||"LEGACY_REACT_AUTO_VALUE",f=D.useRef(null),C=D.useRef(null),m=D.useRef(null),h=D.useRef(()=>{}),p=D.useRef(!1),v=D.useCallback((y="start")=>{if(f.current){h.current();const B=Xc(f.current);B.length&&Hu(y==="start"?B:B.reverse())}},[]),x=D.useCallback(()=>{if(f.current){const y=Xc(f.current);y.length&&(h.current=C1(y))}},[]);return g.jsx(a1,{scope:i,value:u,triggerRef:C,contentRef:f,focusProxyRef:m,wasEscapeCloseRef:p,onEntryKeyDown:v,onFocusProxyEnter:v,onRootContentClose:x,onContentFocusOutside:x,children:g.jsx(E2.li,{...l,ref:n})})});hh.displayName=ph;var Zc="NavigationMenuTrigger",Dh=D.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,disabled:a,...l}=t,A=Re(Zc,t.__scopeNavigationMenu),u=gh(Zc,t.__scopeNavigationMenu),f=D.useRef(null),C=o0(f,u.triggerRef,n),m=Fh(A.baseId,u.value),h=Th(A.baseId,u.value),p=D.useRef(!1),v=D.useRef(!1),x=u.value===A.value;return g.jsxs(g.Fragment,{children:[g.jsx(Iu.ItemSlot,{scope:i,value:u.value,children:g.jsx(Sh,{asChild:!0,children:g.jsx(E2.button,{id:m,disabled:a,"data-disabled":a?"":void 0,"data-state":Uu(x),"aria-expanded":x,"aria-controls":h,...l,ref:C,onPointerEnter:C2(t.onPointerEnter,()=>{v.current=!1,u.wasEscapeCloseRef.current=!1}),onPointerMove:C2(t.onPointerMove,cs(()=>{a||v.current||u.wasEscapeCloseRef.current||p.current||(A.onTriggerEnter(u.value),p.current=!0)})),onPointerLeave:C2(t.onPointerLeave,cs(()=>{a||(A.onTriggerLeave(),p.current=!1)})),onClick:C2(t.onClick,()=>{A.onItemSelect(u.value),v.current=x}),onKeyDown:C2(t.onKeyDown,y=>{const F={horizontal:"ArrowDown",vertical:A.dir==="rtl"?"ArrowLeft":"ArrowRight"}[A.orientation];x&&y.key===F&&(u.onEntryKeyDown(),y.preventDefault())})})})}),x&&g.jsxs(g.Fragment,{children:[g.jsx(QF,{"aria-hidden":!0,tabIndex:0,ref:u.focusProxyRef,onFocus:y=>{const B=u.contentRef.current,F=y.relatedTarget,T=F===f.current,w=B==null?void 0:B.contains(F);(T||!w)&&u.onFocusProxyEnter(T?"start":"end")}}),A.viewport&&g.jsx("span",{"aria-owns":h})]})]})});Dh.displayName=Zc;var s1="NavigationMenuLink",n3="navigationMenu.linkSelect",vh=D.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,active:a,onSelect:l,...A}=t;return g.jsx(Sh,{asChild:!0,children:g.jsx(E2.a,{"data-active":a?"":void 0,"aria-current":a?"page":void 0,...A,ref:n,onClick:C2(t.onClick,u=>{const f=u.target,C=new CustomEvent(n3,{bubbles:!0,cancelable:!0});if(f.addEventListener(n3,m=>l==null?void 0:l(m),{once:!0}),ss(f,C),!C.defaultPrevented&&!u.metaKey){const m=new CustomEvent(ts,{bubbles:!0,cancelable:!0});ss(f,m)}},{checkForDefaultPrevented:!1})})})});vh.displayName=s1;var Ou="NavigationMenuIndicator",l1=D.forwardRef((t,n)=>{const{forceMount:i,...a}=t,l=Re(Ou,t.__scopeNavigationMenu),A=!!l.value;return l.indicatorTrack?Fg.createPortal(g.jsx(q0,{present:i||A,children:g.jsx(A1,{...a,ref:n})}),l.indicatorTrack):null});l1.displayName=Ou;var A1=D.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,...a}=t,l=Re(Ou,i),A=uh(i),[u,f]=D.useState(null),[C,m]=D.useState(null),h=l.orientation==="horizontal",p=!!l.value;D.useEffect(()=>{var B;const y=(B=A().find(F=>F.value===l.value))==null?void 0:B.ref.current;y&&f(y)},[A,l.value]);const v=()=>{u&&m({size:h?u.offsetWidth:u.offsetHeight,offset:h?u.offsetLeft:u.offsetTop})};return Qc(u,v),Qc(l.indicatorTrack,v),C?g.jsx(E2.div,{"aria-hidden":!0,"data-state":p?"visible":"hidden","data-orientation":l.orientation,...a,ref:n,style:{position:"absolute",...h?{left:0,width:C.size+"px",transform:`translateX(${C.offset}px)`}:{top:0,height:C.size+"px",transform:`translateY(${C.offset}px)`},...a.style}}):null}),_n="NavigationMenuContent",xh=D.forwardRef((t,n)=>{const{forceMount:i,...a}=t,l=Re(_n,t.__scopeNavigationMenu),A=gh(_n,t.__scopeNavigationMenu),u=o0(A.contentRef,n),f=A.value===l.value,C={value:A.value,triggerRef:A.triggerRef,focusProxyRef:A.focusProxyRef,wasEscapeCloseRef:A.wasEscapeCloseRef,onContentFocusOutside:A.onContentFocusOutside,onRootContentClose:A.onRootContentClose,...a};return l.viewport?g.jsx(c1,{forceMount:i,...C,ref:u}):g.jsx(q0,{present:i||f,children:g.jsx(yh,{"data-state":Uu(f),...C,ref:u,onPointerEnter:C2(t.onPointerEnter,l.onContentEnter),onPointerLeave:C2(t.onPointerLeave,cs(l.onContentLeave)),style:{pointerEvents:!f&&l.isRootMenu?"none":void 0,...C.style}})})});xh.displayName=_n;var c1=D.forwardRef((t,n)=>{const i=Re(_n,t.__scopeNavigationMenu),{onViewportContentChange:a,onViewportContentRemove:l}=i;return Se(()=>{a(t.value,{ref:n,...t})},[t,n,a]),Se(()=>()=>l(t.value),[t.value,l]),null}),ts="navigationMenu.rootContentDismiss",yh=D.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,value:a,triggerRef:l,focusProxyRef:A,wasEscapeCloseRef:u,onRootContentClose:f,onContentFocusOutside:C,...m}=t,h=Re(_n,i),p=D.useRef(null),v=o0(p,n),x=Fh(h.baseId,a),y=Th(h.baseId,a),B=uh(i),F=D.useRef(null),{onItemDismiss:T}=h;D.useEffect(()=>{const R=p.current;if(h.isRootMenu&&R){const M=()=>{var N;T(),f(),R.contains(document.activeElement)&&((N=l.current)==null||N.focus())};return R.addEventListener(ts,M),()=>R.removeEventListener(ts,M)}},[h.isRootMenu,t.value,l,T,f]);const w=D.useMemo(()=>{const M=B().map(r2=>r2.value);h.dir==="rtl"&&M.reverse();const N=M.indexOf(h.value),E=M.indexOf(h.previousValue),k=a===h.value,j=E===M.indexOf(a);if(!k&&!j)return F.current;const z=(()=>{if(N!==E){if(k&&E!==-1)return N>E?"from-end":"from-start";if(j&&N!==-1)return N>E?"to-start":"to-end"}return null})();return F.current=z,z},[h.previousValue,h.value,h.dir,B,a]);return g.jsx(Bh,{asChild:!0,children:g.jsx(ui,{id:y,"aria-labelledby":x,"data-motion":w,"data-orientation":h.orientation,...m,ref:v,disableOutsidePointerEvents:!1,onDismiss:()=>{var M;const R=new Event(ts,{bubbles:!0,cancelable:!0});(M=p.current)==null||M.dispatchEvent(R)},onFocusOutside:C2(t.onFocusOutside,R=>{var N;C();const M=R.target;(N=h.rootNavigationMenu)!=null&&N.contains(M)&&R.preventDefault()}),onPointerDownOutside:C2(t.onPointerDownOutside,R=>{var k;const M=R.target,N=B().some(j=>{var z;return(z=j.ref.current)==null?void 0:z.contains(M)}),E=h.isRootMenu&&((k=h.viewport)==null?void 0:k.contains(M));(N||E||!h.isRootMenu)&&R.preventDefault()}),onKeyDown:C2(t.onKeyDown,R=>{var E;const M=R.altKey||R.ctrlKey||R.metaKey;if(R.key==="Tab"&&!M){const k=Xc(R.currentTarget),j=document.activeElement,z=k.findIndex(s2=>s2===j),c2=R.shiftKey?k.slice(0,z).reverse():k.slice(z+1,k.length);Hu(c2)?R.preventDefault():(E=A.current)==null||E.focus()}}),onEscapeKeyDown:C2(t.onEscapeKeyDown,R=>{u.current=!0})})})}),ju="NavigationMenuViewport",u1=D.forwardRef((t,n)=>{const{forceMount:i,...a}=t,A=!!Re(ju,t.__scopeNavigationMenu).value;return g.jsx(q0,{present:i||A,children:g.jsx(f1,{...a,ref:n})})});u1.displayName=ju;var f1=D.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,children:a,...l}=t,A=Re(ju,i),u=o0(n,A.onViewportChange),f=o1(_n,t.__scopeNavigationMenu),[C,m]=D.useState(null),[h,p]=D.useState(null),v=C?(C==null?void 0:C.width)+"px":void 0,x=C?(C==null?void 0:C.height)+"px":void 0,y=!!A.value,B=y?A.value:A.previousValue;return Qc(h,()=>{h&&m({width:h.offsetWidth,height:h.offsetHeight})}),g.jsx(E2.div,{"data-state":Uu(y),"data-orientation":A.orientation,...l,ref:u,style:{pointerEvents:!y&&A.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":v,"--radix-navigation-menu-viewport-height":x,...l.style},onPointerEnter:C2(t.onPointerEnter,A.onContentEnter),onPointerLeave:C2(t.onPointerLeave,cs(A.onContentLeave)),children:Array.from(f.items).map(([T,{ref:w,forceMount:R,...M}])=>{const N=B===T;return g.jsx(q0,{present:R||N,children:g.jsx(yh,{...M,ref:ci(w,E=>{N&&E&&p(E)})})},T)})})}),d1="FocusGroup",Bh=D.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,...a}=t,l=Re(d1,i);return g.jsx($c.Provider,{scope:i,children:g.jsx($c.Slot,{scope:i,children:g.jsx(E2.div,{dir:l.dir,...a,ref:n})})})}),o3=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],m1="FocusGroupItem",Sh=D.forwardRef((t,n)=>{const{__scopeNavigationMenu:i,...a}=t,l=e1(i),A=Re(m1,i);return g.jsx($c.ItemSlot,{scope:i,children:g.jsx(E2.button,{...a,ref:n,onKeyDown:C2(t.onKeyDown,u=>{if(["Home","End",...o3].includes(u.key)){let C=l().map(p=>p.ref.current);if([A.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(u.key)&&C.reverse(),o3.includes(u.key)){const p=C.indexOf(u.currentTarget);C=C.slice(p+1)}setTimeout(()=>Hu(C)),u.preventDefault()}})})})});function Xc(t){const n=[],i=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const l=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||l?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)n.push(i.currentNode);return n}function Hu(t){const n=document.activeElement;return t.some(i=>i===n?!0:(i.focus(),document.activeElement!==n))}function C1(t){return t.forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")}),()=>{t.forEach(n=>{const i=n.dataset.tabindex;n.setAttribute("tabindex",i)})}}function Qc(t,n){const i=I0(n);Se(()=>{let a=0;if(t){const l=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(i)});return l.observe(t),()=>{window.cancelAnimationFrame(a),l.unobserve(t)}}},[t,i])}function Uu(t){return t?"open":"closed"}function Fh(t,n){return`${t}-trigger-${n}`}function Th(t,n){return`${t}-content-${n}`}function cs(t){return n=>n.pointerType==="mouse"?t(n):void 0}var p1=fh,g1=Ch,h1=hh,D1=Dh,v1=vh,x1=xh,y1="vocs_NavigationMenu",B1="vocs_NavigationMenu_list",S1="vocs_NavigationMenu_link",F1="vocs_NavigationMenu_item",T1="var(--vocs_NavigationMenu_chevronDownIcon)",R1="vocs_NavigationMenu_trigger vocs_NavigationMenu_link",b1="vocs_NavigationMenu_content";const Rh=t=>g.jsx(p1,{...t,className:l2(t.className,y1)}),bh=t=>g.jsx(g1,{...t,className:l2(t.className,B1)}),Es=({active:t,children:n,className:i,href:a})=>g.jsx(v1,{asChild:!0,children:g.jsx(Be,{"data-active":t,className:l2(i,S1),href:a,variant:"styleless",children:n})}),wh=t=>g.jsx(h1,{...t,className:l2(t.className,F1)}),Eh=({active:t,className:n,...i})=>{const{basePath:a}=C0(),l=a;return g.jsx(D1,{...i,"data-active":t,className:l2(n,R1),style:Ie({[T1]:`url(${l}/.vocs/icons/chevron-down.svg)`})})},Mh=t=>g.jsx(x1,{...t,className:l2(t.className,b1)});Jc.Curtain=w1;function Jc(){var a;const t=C0(),{showLogo:n,showSidebar:i}=nr();return g.jsxs("div",{className:l2(kF,n&&!i&&IF),children:[g.jsx(LF,{}),n&&g.jsx("div",{className:UF,children:g.jsx("div",{className:HF,children:g.jsx(Pn,{to:"/",style:{alignItems:"center",display:"flex",height:"56px",marginTop:"4px"},children:g.jsx(ku,{})})})}),g.jsx("div",{className:r3}),g.jsx("div",{className:r3,children:(((a=t.topNav)==null?void 0:a.length)||0)>0&&g.jsx("div",{className:jF,children:g.jsx(E1,{})})})]})}function w1(){return g.jsx("div",{className:OF})}function E1(){const{topNav:t}=C0();if(!t)return null;const{pathname:n}=i0(),i=Ai({pathname:n,items:t});return g.jsx(Rh,{delayDuration:0,children:g.jsxs(bh,{children:[t.map((a,l)=>a.element?Mr(a.element):a.link?g.jsx(Es,{active:i.includes(a.id),className:t3,href:a.link,children:a.text},l):a.items?g.jsxs(wh,{className:t3,children:[g.jsx(Eh,{active:i.includes(a.id),children:a.text}),g.jsx(Mh,{className:qF,children:g.jsx(M1,{items:a.items})})]},l):null),g.jsx(Ru,{})]})})}function M1({items:t}){const{pathname:n}=i0(),i=Ai({pathname:n,items:t});return g.jsx("ul",{children:t==null?void 0:t.map((a,l)=>g.jsx(Es,{active:i.includes(a.id),href:a.link,children:a.text},l))})}function P1(){const t=rr(),n=C0();return D.useMemo(()=>{const{pattern:i="",text:a="Edit page"}=n.editLink??{};let l="";return typeof i=="function"?l="":t.filePath&&(l=i.replace(/:path/g,t.filePath)),{url:l,text:a}},[n.editLink,t.filePath])}function zu(){const[t,n]=D.useState(!1);return D.useEffect(()=>{n(!0)},[]),t}var N1="vocs_Footer",_1="vocs_Footer_container",L1="vocs_Footer_editLink",k1="vocs_Footer_lastUpdated",I1="vocs_Footer_navigation",i3="vocs_Footer_navigationIcon",q1="vocs_Footer_navigationIcon_left",O1="vocs_Footer_navigationIcon_right",a3="vocs_Footer_navigationItem",j1="vocs_Footer_navigationItem_left",H1="vocs_Footer_navigationItem_right",s3="vocs_Footer_navigationText",l3="vocs_Footer_navigationTextInner",eu="var(--vocs_Icon_size)",U1="vocs_Icon";function U0({className:t,label:n,icon:i,size:a,style:l}){return g.jsx("div",{"aria-label":n,className:l2(U1,t),role:"img",style:{...l,...Ie({[eu]:a})},children:g.jsx(i,{height:a,width:a})})}var z1="vocs_Socials",W1="vocs_Socials_button",G1="vocs_Socials_icon";function V1(){return g.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 127.14 96.36",children:[g.jsx("title",{children:"Discord"}),g.jsx("g",{id:"图层_2","data-name":"图层 2",children:g.jsx("g",{id:"Discord_Logos","data-name":"Discord Logos",children:g.jsx("g",{id:"Discord_Logo_-_Large_-_White","data-name":"Discord Logo - Large - White",children:g.jsx("path",{d:"M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z",fill:"currentColor"})})})})]})}function Y1(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 98 96",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"GitHub"}),g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z",fill:"currentColor"})]})}function $1(){return g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 50 50",children:[g.jsx("title",{children:"Telegram"}),g.jsx("path",{d:"M25 2c12.703 0 23 10.297 23 23S37.703 48 25 48 2 37.703 2 25 12.297 2 25 2zm7.934 32.375c.423-1.298 2.405-14.234 2.65-16.783.074-.772-.17-1.285-.648-1.514-.578-.278-1.434-.139-2.427.219-1.362.491-18.774 7.884-19.78 8.312-.954.405-1.856.847-1.856 1.487 0 .45.267.703 1.003.966.766.273 2.695.858 3.834 1.172 1.097.303 2.346.04 3.046-.395.742-.461 9.305-6.191 9.92-6.693.614-.502 1.104.141.602.644-.502.502-6.38 6.207-7.155 6.997-.941.959-.273 1.953.358 2.351.721.454 5.906 3.932 6.687 4.49.781.558 1.573.811 2.298.811.725 0 1.107-.955 1.468-2.064z",fill:"currentColor"})]})}function K1(){return g.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"Warpcast"}),g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.92028 31.9901H24.0698C28.4371 31.9901 31.9901 28.4373 31.9901 24.0699V7.92053C31.9901 3.55319 28.4371 0.000137329 24.0698 0.000137329H7.92028C3.55304 0.000137329 0 3.55319 0 7.92053V24.0699C0 28.4373 3.55304 31.9901 7.92028 31.9901ZM19.4134 16.048L20.9908 10.124H25.1383L21.2924 23.2218H17.7062L15.9951 17.1397L14.284 23.2218H10.7055L6.85115 10.124H10.999L12.5915 16.0916L14.1891 10.124H17.8309L19.4134 16.048Z",fill:"currentColor"})]})}function Z1(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 1200 1227",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"X"}),g.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z",fill:"currentColor"})]})}const X1={discord:V1,github:Y1,telegram:$1,warpcast:K1,x:Z1},Q1={discord:"18px",github:"17px",telegram:"17px",warpcast:"17px",x:"16px"};function Wu(){const t=C0();return!t.socials||t.socials.length===0?null:g.jsx("div",{className:z1,children:t.socials.map((n,i)=>g.jsxs(D.Fragment,{children:[i!==0&&g.jsx("div",{style:{width:"1px",marginTop:ti[4],marginBottom:ti[4],backgroundColor:jc.border}}),g.jsx("a",{className:W1,href:n.link,target:"_blank",rel:"noopener noreferrer",children:g.jsx(U0,{className:G1,label:n.label,icon:X1[n.icon],size:Q1[n.icon]||"20px"})})]},i))})}function J1(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 72 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"Arrow Left"}),g.jsx("path",{d:"M0.325684 29.7461C0.325684 30.8203 0.813963 31.8457 1.69286 32.6758L26.8882 57.8223C27.7671 58.6524 28.7437 59.043 29.7691 59.043C31.9175 59.043 33.5777 57.4317 33.5777 55.2344C33.5777 54.209 33.2359 53.1836 32.5035 52.5L25.7652 45.5176L9.26126 30.6738L8.38236 32.7734L21.3706 33.7012H67.4644C69.7593 33.7012 71.3706 32.041 71.3706 29.7461C71.3706 27.4512 69.7593 25.791 67.4644 25.791H21.3706L8.38236 26.7188L9.26126 28.8672L25.7652 13.9746L32.5035 6.99221C33.2359 6.30861 33.5777 5.28322 33.5777 4.25782C33.5777 2.06052 31.9175 0.449219 29.7691 0.449219C28.7437 0.449219 27.7671 0.839814 26.8882 1.66991L1.69286 26.8164C0.813963 27.6465 0.325684 28.6719 0.325684 29.7461Z",fill:"currentColor"})]})}function eT(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 72 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"Arrow Right"}),g.jsx("path",{d:"M71.3706 29.7461C71.3706 28.6719 70.8824 27.6465 70.0035 26.8164L44.8081 1.66991C43.9292 0.839814 42.9527 0.449219 41.9273 0.449219C39.7789 0.449219 38.1187 2.06052 38.1187 4.25782C38.1187 5.28322 38.4605 6.30861 39.1929 6.99221L45.9312 13.9746L62.4351 28.8672L63.314 26.7188L50.3257 25.791H4.23196C1.93706 25.791 0.325684 27.4512 0.325684 29.7461C0.325684 32.041 1.93706 33.7012 4.23196 33.7012H50.3257L63.314 32.7734L62.4351 30.6738L45.9312 45.5176L39.1929 52.5C38.4605 53.1836 38.1187 54.209 38.1187 55.2344C38.1187 57.4317 39.7789 59.043 41.9273 59.043C42.9527 59.043 43.9292 58.6524 44.8081 57.8223L70.0035 32.6758C70.8824 31.8457 71.3706 30.8203 71.3706 29.7461Z",fill:"currentColor"})]})}function tT(){const{layout:t}=nr(),n=zu(),i=rr(),a=D.useMemo(()=>i.lastUpdatedAt?new Date(i.lastUpdatedAt):void 0,[i.lastUpdatedAt]),l=D.useMemo(()=>a==null?void 0:a.toISOString(),[a]);return g.jsxs("footer",{className:N1,"data-layout":t,children:[t==="docs"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:_1,children:[g.jsx(rT,{}),n&&i.lastUpdatedAt&&g.jsxs("div",{className:k1,children:["Last updated:"," ",g.jsx("time",{dateTime:l,children:new Intl.DateTimeFormat(void 0,{dateStyle:"short",timeStyle:"short"}).format(a)})]})]}),g.jsx(nT,{})]}),t!=="docs"&&g.jsx(Wu,{}),g.jsx(m6,{})]})}function rT(){const t=P1();return t.url?g.jsx("div",{children:g.jsxs(Be,{className:L1,href:t.url,children:[g.jsx(c6,{})," ",t.text]})}):null}function nT(){const t=zu(),n=Ss(),{pathname:i}=i0(),a=D.useMemo(()=>Ph(n.items||[]).filter(C=>C.link),[n]),l=D.useMemo(()=>a.findIndex(C=>C.link===i),[a,i]),[A,u]=D.useMemo(()=>l<0?[]:l===0?[null,a[l+1]]:l===a.length-1?[a[l-1],null]:[a[l-1],a[l+1]],[l,a]),f=Du();return D.useEffect(()=>{let C=l,m=!1;const h=v=>{if(v.code==="ShiftLeft"&&(m=!0),m){const x=a[C+1],y=a[C-1];v.code==="ArrowRight"&&(x!=null&&x.link)&&(!x.link.match(/^(\.*\/|#)/)?window.open(x.link,"noopener,noreferrer"):f(x.link),C++),v.code==="ArrowLeft"&&(y!=null&&y.link)&&(!y.link.match(/^(\.*\/|#)/)?window.open(y.link,"noopener,noreferrer"):f(y.link),C--)}},p=v=>{v.code==="ShiftLeft"&&(m=!1)};return window.addEventListener("keydown",h),window.addEventListener("keyup",p),()=>{window.removeEventListener("keydown",h),window.removeEventListener("keyup",p)}},[]),t?g.jsxs("div",{className:I1,children:[A?g.jsxs(Be,{className:l2(a3,j1),href:A.link,variant:"styleless",children:[g.jsxs("div",{className:s3,children:[g.jsx("div",{className:l2(i3,q1),style:Ie({[eu]:"0.75em"}),children:g.jsx(U0,{label:"Previous",icon:J1})}),g.jsx("div",{className:l3,children:A.text})]}),g.jsx(bn,{description:"Previous",keys:["shift","←"]})]}):g.jsx("div",{}),u?g.jsxs(Be,{className:l2(a3,H1),href:u.link,variant:"styleless",children:[g.jsxs("div",{className:s3,children:[g.jsx("div",{className:l3,style:{textAlign:"right"},children:u.text}),g.jsx("div",{className:l2(i3,O1),style:Ie({[eu]:"0.75em"}),children:g.jsx(U0,{label:"Next",icon:eT})})]}),g.jsx(bn,{description:"Next",keys:["shift","→"]})]}):g.jsx("div",{})]}):null}function Ph(t){const n=[];for(const i of t)i.link&&n.push(i),i.items&&n.push(...Ph(i.items));return n}var Ms="Collapsible",[oT,Nh]=qe(Ms),[iT,Gu]=oT(Ms),_h=D.forwardRef((t,n)=>{const{__scopeCollapsible:i,open:a,defaultOpen:l,disabled:A,onOpenChange:u,...f}=t,[C,m]=Qe({prop:a,defaultProp:l??!1,onChange:u,caller:Ms});return g.jsx(iT,{scope:i,disabled:A,contentId:xe(),open:C,onOpenToggle:D.useCallback(()=>m(h=>!h),[m]),children:g.jsx(E2.div,{"data-state":Yu(C),"data-disabled":A?"":void 0,...f,ref:n})})});_h.displayName=Ms;var Lh="CollapsibleTrigger",kh=D.forwardRef((t,n)=>{const{__scopeCollapsible:i,...a}=t,l=Gu(Lh,i);return g.jsx(E2.button,{type:"button","aria-controls":l.contentId,"aria-expanded":l.open||!1,"data-state":Yu(l.open),"data-disabled":l.disabled?"":void 0,disabled:l.disabled,...a,ref:n,onClick:C2(t.onClick,l.onOpenToggle)})});kh.displayName=Lh;var Vu="CollapsibleContent",Ih=D.forwardRef((t,n)=>{const{forceMount:i,...a}=t,l=Gu(Vu,t.__scopeCollapsible);return g.jsx(q0,{present:i||l.open,children:({present:A})=>g.jsx(aT,{...a,ref:n,present:A})})});Ih.displayName=Vu;var aT=D.forwardRef((t,n)=>{const{__scopeCollapsible:i,present:a,children:l,...A}=t,u=Gu(Vu,i),[f,C]=D.useState(a),m=D.useRef(null),h=o0(n,m),p=D.useRef(0),v=p.current,x=D.useRef(0),y=x.current,B=u.open||f,F=D.useRef(B),T=D.useRef(void 0);return D.useEffect(()=>{const w=requestAnimationFrame(()=>F.current=!1);return()=>cancelAnimationFrame(w)},[]),Se(()=>{const w=m.current;if(w){T.current=T.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const R=w.getBoundingClientRect();p.current=R.height,x.current=R.width,F.current||(w.style.transitionDuration=T.current.transitionDuration,w.style.animationName=T.current.animationName),C(a)}},[u.open,a]),g.jsx(E2.div,{"data-state":Yu(u.open),"data-disabled":u.disabled?"":void 0,id:u.contentId,hidden:!B,...A,ref:h,style:{"--radix-collapsible-content-height":v?`${v}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...t.style},children:B&&l})});function Yu(t){return t?"open":"closed"}var sT=_h,lT=kh,AT=Ih,je="Accordion",cT=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[$u,uT,fT]=di(je),[Ps,RN]=qe(je,[fT,Nh]),Ku=Nh(),qh=n0.forwardRef((t,n)=>{const{type:i,...a}=t,l=a,A=a;return g.jsx($u.Provider,{scope:t.__scopeAccordion,children:i==="multiple"?g.jsx(pT,{...A,ref:n}):g.jsx(CT,{...l,ref:n})})});qh.displayName=je;var[Oh,dT]=Ps(je),[jh,mT]=Ps(je,{collapsible:!1}),CT=n0.forwardRef((t,n)=>{const{value:i,defaultValue:a,onValueChange:l=()=>{},collapsible:A=!1,...u}=t,[f,C]=Qe({prop:i,defaultProp:a??"",onChange:l,caller:je});return g.jsx(Oh,{scope:t.__scopeAccordion,value:n0.useMemo(()=>f?[f]:[],[f]),onItemOpen:C,onItemClose:n0.useCallback(()=>A&&C(""),[A,C]),children:g.jsx(jh,{scope:t.__scopeAccordion,collapsible:A,children:g.jsx(Hh,{...u,ref:n})})})}),pT=n0.forwardRef((t,n)=>{const{value:i,defaultValue:a,onValueChange:l=()=>{},...A}=t,[u,f]=Qe({prop:i,defaultProp:a??[],onChange:l,caller:je}),C=n0.useCallback(h=>f((p=[])=>[...p,h]),[f]),m=n0.useCallback(h=>f((p=[])=>p.filter(v=>v!==h)),[f]);return g.jsx(Oh,{scope:t.__scopeAccordion,value:u,onItemOpen:C,onItemClose:m,children:g.jsx(jh,{scope:t.__scopeAccordion,collapsible:!0,children:g.jsx(Hh,{...A,ref:n})})})}),[gT,Ns]=Ps(je),Hh=n0.forwardRef((t,n)=>{const{__scopeAccordion:i,disabled:a,dir:l,orientation:A="vertical",...u}=t,f=n0.useRef(null),C=o0(f,n),m=uT(i),p=fi(l)==="ltr",v=C2(t.onKeyDown,x=>{var j;if(!cT.includes(x.key))return;const y=x.target,B=m().filter(z=>{var r2;return!((r2=z.ref.current)!=null&&r2.disabled)}),F=B.findIndex(z=>z.ref.current===y),T=B.length;if(F===-1)return;x.preventDefault();let w=F;const R=0,M=T-1,N=()=>{w=F+1,w>M&&(w=R)},E=()=>{w=F-1,w<R&&(w=M)};switch(x.key){case"Home":w=R;break;case"End":w=M;break;case"ArrowRight":A==="horizontal"&&(p?N():E());break;case"ArrowDown":A==="vertical"&&N();break;case"ArrowLeft":A==="horizontal"&&(p?E():N());break;case"ArrowUp":A==="vertical"&&E();break}const k=w%T;(j=B[k].ref.current)==null||j.focus()});return g.jsx(gT,{scope:i,disabled:a,direction:l,orientation:A,children:g.jsx($u.Slot,{scope:i,children:g.jsx(E2.div,{...u,"data-orientation":A,ref:C,onKeyDown:a?void 0:v})})})}),us="AccordionItem",[hT,Zu]=Ps(us),Uh=n0.forwardRef((t,n)=>{const{__scopeAccordion:i,value:a,...l}=t,A=Ns(us,i),u=dT(us,i),f=Ku(i),C=xe(),m=a&&u.value.includes(a)||!1,h=A.disabled||t.disabled;return g.jsx(hT,{scope:i,open:m,disabled:h,triggerId:C,children:g.jsx(sT,{"data-orientation":A.orientation,"data-state":Yh(m),...f,...l,ref:n,disabled:h,open:m,onOpenChange:p=>{p?u.onItemOpen(a):u.onItemClose(a)}})})});Uh.displayName=us;var zh="AccordionHeader",DT=n0.forwardRef((t,n)=>{const{__scopeAccordion:i,...a}=t,l=Ns(je,i),A=Zu(zh,i);return g.jsx(E2.h3,{"data-orientation":l.orientation,"data-state":Yh(A.open),"data-disabled":A.disabled?"":void 0,...a,ref:n})});DT.displayName=zh;var tu="AccordionTrigger",Wh=n0.forwardRef((t,n)=>{const{__scopeAccordion:i,...a}=t,l=Ns(je,i),A=Zu(tu,i),u=mT(tu,i),f=Ku(i);return g.jsx($u.ItemSlot,{scope:i,children:g.jsx(lT,{"aria-disabled":A.open&&!u.collapsible||void 0,"data-orientation":l.orientation,id:A.triggerId,...f,...a,ref:n})})});Wh.displayName=tu;var Gh="AccordionContent",Vh=n0.forwardRef((t,n)=>{const{__scopeAccordion:i,...a}=t,l=Ns(je,i),A=Zu(Gh,i),u=Ku(i);return g.jsx(AT,{role:"region","aria-labelledby":A.triggerId,"data-orientation":l.orientation,...u,...a,ref:n,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});Vh.displayName=Gh;function Yh(t){return t?"open":"closed"}var vT=qh,xT=Uh,yT=Wh,BT=Vh,ST="vocs_MobileSearch_searchButton";function FT(){const[t,n]=D.useState(!1);return g.jsxs(Xg,{open:t,onOpenChange:n,children:[g.jsx(Qg,{asChild:!0,children:g.jsx("button",{className:ST,type:"button","aria-label":"Search",children:g.jsx(Tu,{height:21,width:21})})}),g.jsx(Ah,{open:t,onClose:()=>n(!1)})]})}var TT="vocs_MobileTopNav",RT="vocs_MobileTopNav_content",bT="vocs_MobileTopNav_curtain",A3="vocs_MobileTopNav_curtainGroup",xc="vocs_MobileTopNav_curtainItem",yc="vocs_MobileTopNav_group",wT="vocs_MobileTopNav_item",ET="vocs_MobileTopNav_logo",$h="vocs_MobileTopNav_menuTrigger",MT="vocs_MobileTopNav_menuTitle",PT="vocs_MobileTopNav_navigation_compact",Kh="vocs_MobileTopNav_navigation",NT="vocs_MobileTopNav_navigationContent",Wa="vocs_MobileTopNav_navigationItem",_T="var(--vocs_MobileTopNav_chevronDownIcon)",LT="var(--vocs_MobileTopNav_chevronUpIcon)",kT="vocs_MobileTopNav_trigger",c3="vocs_MobileTopNav_outlineTrigger",IT="vocs_MobileTopNav_outlinePopover",u3="vocs_MobileTopNav_section",qT="vocs_MobileTopNav_separator",OT="vocs_MobileTopNav_sidebarPopover",jT="vocs_MobileTopNav_topNavPopover",HT="vocs_MobileTopNav_topNavPopoverFooter";function UT(t,n){let i=!1;return()=>{i=!0,setTimeout(()=>{i&&t(),i=!1},n)}}function zT(t){const[n,i]=D.useState(void 0);return Se(()=>{if(t){i({width:t.offsetWidth,height:t.offsetHeight});const a=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const A=l[0];let u,f;if("borderBoxSize"in A){const C=A.borderBoxSize,m=Array.isArray(C)?C[0]:C;u=m.inlineSize,f=m.blockSize}else u=t.offsetWidth,f=t.offsetHeight;i({width:u,height:f})});return a.observe(t,{box:"border-box"}),()=>a.unobserve(t)}else i(void 0)},[t]),n}const WT=["top","right","bottom","left"],Jt=Math.min,se=Math.max,fs=Math.round,Ga=Math.floor,Ze=t=>({x:t,y:t}),GT={left:"right",right:"left",bottom:"top",top:"bottom"},VT={start:"end",end:"start"};function ru(t,n,i){return se(t,Jt(n,i))}function vt(t,n){return typeof t=="function"?t(n):t}function xt(t){return t.split("-")[0]}function Hn(t){return t.split("-")[1]}function Xu(t){return t==="x"?"y":"x"}function Qu(t){return t==="y"?"height":"width"}function Dt(t){return["top","bottom"].includes(xt(t))?"y":"x"}function Ju(t){return Xu(Dt(t))}function YT(t,n,i){i===void 0&&(i=!1);const a=Hn(t),l=Ju(t),A=Qu(l);let u=l==="x"?a===(i?"end":"start")?"right":"left":a==="start"?"bottom":"top";return n.reference[A]>n.floating[A]&&(u=ds(u)),[u,ds(u)]}function $T(t){const n=ds(t);return[nu(t),n,nu(n)]}function nu(t){return t.replace(/start|end/g,n=>VT[n])}function KT(t,n,i){const a=["left","right"],l=["right","left"],A=["top","bottom"],u=["bottom","top"];switch(t){case"top":case"bottom":return i?n?l:a:n?a:l;case"left":case"right":return n?A:u;default:return[]}}function ZT(t,n,i,a){const l=Hn(t);let A=KT(xt(t),i==="start",a);return l&&(A=A.map(u=>u+"-"+l),n&&(A=A.concat(A.map(nu)))),A}function ds(t){return t.replace(/left|right|bottom|top/g,n=>GT[n])}function XT(t){return{top:0,right:0,bottom:0,left:0,...t}}function Zh(t){return typeof t!="number"?XT(t):{top:t,right:t,bottom:t,left:t}}function ms(t){const{x:n,y:i,width:a,height:l}=t;return{width:a,height:l,top:i,left:n,right:n+a,bottom:i+l,x:n,y:i}}function f3(t,n,i){let{reference:a,floating:l}=t;const A=Dt(n),u=Ju(n),f=Qu(u),C=xt(n),m=A==="y",h=a.x+a.width/2-l.width/2,p=a.y+a.height/2-l.height/2,v=a[f]/2-l[f]/2;let x;switch(C){case"top":x={x:h,y:a.y-l.height};break;case"bottom":x={x:h,y:a.y+a.height};break;case"right":x={x:a.x+a.width,y:p};break;case"left":x={x:a.x-l.width,y:p};break;default:x={x:a.x,y:a.y}}switch(Hn(n)){case"start":x[u]-=v*(i&&m?-1:1);break;case"end":x[u]+=v*(i&&m?-1:1);break}return x}const QT=async(t,n,i)=>{const{placement:a="bottom",strategy:l="absolute",middleware:A=[],platform:u}=i,f=A.filter(Boolean),C=await(u.isRTL==null?void 0:u.isRTL(n));let m=await u.getElementRects({reference:t,floating:n,strategy:l}),{x:h,y:p}=f3(m,a,C),v=a,x={},y=0;for(let B=0;B<f.length;B++){const{name:F,fn:T}=f[B],{x:w,y:R,data:M,reset:N}=await T({x:h,y:p,initialPlacement:a,placement:v,strategy:l,middlewareData:x,rects:m,platform:u,elements:{reference:t,floating:n}});h=w??h,p=R??p,x={...x,[F]:{...x[F],...M}},N&&y<=50&&(y++,typeof N=="object"&&(N.placement&&(v=N.placement),N.rects&&(m=N.rects===!0?await u.getElementRects({reference:t,floating:n,strategy:l}):N.rects),{x:h,y:p}=f3(m,v,C)),B=-1)}return{x:h,y:p,placement:v,strategy:l,middlewareData:x}};async function oi(t,n){var i;n===void 0&&(n={});const{x:a,y:l,platform:A,rects:u,elements:f,strategy:C}=t,{boundary:m="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:v=!1,padding:x=0}=vt(n,t),y=Zh(x),F=f[v?p==="floating"?"reference":"floating":p],T=ms(await A.getClippingRect({element:(i=await(A.isElement==null?void 0:A.isElement(F)))==null||i?F:F.contextElement||await(A.getDocumentElement==null?void 0:A.getDocumentElement(f.floating)),boundary:m,rootBoundary:h,strategy:C})),w=p==="floating"?{x:a,y:l,width:u.floating.width,height:u.floating.height}:u.reference,R=await(A.getOffsetParent==null?void 0:A.getOffsetParent(f.floating)),M=await(A.isElement==null?void 0:A.isElement(R))?await(A.getScale==null?void 0:A.getScale(R))||{x:1,y:1}:{x:1,y:1},N=ms(A.convertOffsetParentRelativeRectToViewportRelativeRect?await A.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:w,offsetParent:R,strategy:C}):w);return{top:(T.top-N.top+y.top)/M.y,bottom:(N.bottom-T.bottom+y.bottom)/M.y,left:(T.left-N.left+y.left)/M.x,right:(N.right-T.right+y.right)/M.x}}const JT=t=>({name:"arrow",options:t,async fn(n){const{x:i,y:a,placement:l,rects:A,platform:u,elements:f,middlewareData:C}=n,{element:m,padding:h=0}=vt(t,n)||{};if(m==null)return{};const p=Zh(h),v={x:i,y:a},x=Ju(l),y=Qu(x),B=await u.getDimensions(m),F=x==="y",T=F?"top":"left",w=F?"bottom":"right",R=F?"clientHeight":"clientWidth",M=A.reference[y]+A.reference[x]-v[x]-A.floating[y],N=v[x]-A.reference[x],E=await(u.getOffsetParent==null?void 0:u.getOffsetParent(m));let k=E?E[R]:0;(!k||!await(u.isElement==null?void 0:u.isElement(E)))&&(k=f.floating[R]||A.floating[y]);const j=M/2-N/2,z=k/2-B[y]/2-1,r2=Jt(p[T],z),c2=Jt(p[w],z),s2=r2,i2=k-B[y]-c2,Z=k/2-B[y]/2+j,u2=ru(s2,Z,i2),I=!C.arrow&&Hn(l)!=null&&Z!==u2&&A.reference[y]/2-(Z<s2?r2:c2)-B[y]/2<0,V=I?Z<s2?Z-s2:Z-i2:0;return{[x]:v[x]+V,data:{[x]:u2,centerOffset:Z-u2-V,...I&&{alignmentOffset:V}},reset:I}}}),eR=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(n){var i,a;const{placement:l,middlewareData:A,rects:u,initialPlacement:f,platform:C,elements:m}=n,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:B=!0,...F}=vt(t,n);if((i=A.arrow)!=null&&i.alignmentOffset)return{};const T=xt(l),w=Dt(f),R=xt(f)===f,M=await(C.isRTL==null?void 0:C.isRTL(m.floating)),N=v||(R||!B?[ds(f)]:$T(f)),E=y!=="none";!v&&E&&N.push(...ZT(f,B,y,M));const k=[f,...N],j=await oi(n,F),z=[];let r2=((a=A.flip)==null?void 0:a.overflows)||[];if(h&&z.push(j[T]),p){const u2=YT(l,u,M);z.push(j[u2[0]],j[u2[1]])}if(r2=[...r2,{placement:l,overflows:z}],!z.every(u2=>u2<=0)){var c2,s2;const u2=(((c2=A.flip)==null?void 0:c2.index)||0)+1,I=k[u2];if(I){var i2;const Q=p==="alignment"?w!==Dt(I):!1,K=((i2=r2[0])==null?void 0:i2.overflows[0])>0;if(!Q||K)return{data:{index:u2,overflows:r2},reset:{placement:I}}}let V=(s2=r2.filter(Q=>Q.overflows[0]<=0).sort((Q,K)=>Q.overflows[1]-K.overflows[1])[0])==null?void 0:s2.placement;if(!V)switch(x){case"bestFit":{var Z;const Q=(Z=r2.filter(K=>{if(E){const P=Dt(K.placement);return P===w||P==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(P=>P>0).reduce((P,X)=>P+X,0)]).sort((K,P)=>K[1]-P[1])[0])==null?void 0:Z[0];Q&&(V=Q);break}case"initialPlacement":V=f;break}if(l!==V)return{reset:{placement:V}}}return{}}}};function d3(t,n){return{top:t.top-n.height,right:t.right-n.width,bottom:t.bottom-n.height,left:t.left-n.width}}function m3(t){return WT.some(n=>t[n]>=0)}const tR=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(n){const{rects:i}=n,{strategy:a="referenceHidden",...l}=vt(t,n);switch(a){case"referenceHidden":{const A=await oi(n,{...l,elementContext:"reference"}),u=d3(A,i.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:m3(u)}}}case"escaped":{const A=await oi(n,{...l,altBoundary:!0}),u=d3(A,i.floating);return{data:{escapedOffsets:u,escaped:m3(u)}}}default:return{}}}}};async function rR(t,n){const{placement:i,platform:a,elements:l}=t,A=await(a.isRTL==null?void 0:a.isRTL(l.floating)),u=xt(i),f=Hn(i),C=Dt(i)==="y",m=["left","top"].includes(u)?-1:1,h=A&&C?-1:1,p=vt(n,t);let{mainAxis:v,crossAxis:x,alignmentAxis:y}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return f&&typeof y=="number"&&(x=f==="end"?y*-1:y),C?{x:x*h,y:v*m}:{x:v*m,y:x*h}}const nR=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(n){var i,a;const{x:l,y:A,placement:u,middlewareData:f}=n,C=await rR(n,t);return u===((i=f.offset)==null?void 0:i.placement)&&(a=f.arrow)!=null&&a.alignmentOffset?{}:{x:l+C.x,y:A+C.y,data:{...C,placement:u}}}}},oR=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(n){const{x:i,y:a,placement:l}=n,{mainAxis:A=!0,crossAxis:u=!1,limiter:f={fn:F=>{let{x:T,y:w}=F;return{x:T,y:w}}},...C}=vt(t,n),m={x:i,y:a},h=await oi(n,C),p=Dt(xt(l)),v=Xu(p);let x=m[v],y=m[p];if(A){const F=v==="y"?"top":"left",T=v==="y"?"bottom":"right",w=x+h[F],R=x-h[T];x=ru(w,x,R)}if(u){const F=p==="y"?"top":"left",T=p==="y"?"bottom":"right",w=y+h[F],R=y-h[T];y=ru(w,y,R)}const B=f.fn({...n,[v]:x,[p]:y});return{...B,data:{x:B.x-i,y:B.y-a,enabled:{[v]:A,[p]:u}}}}}},iR=function(t){return t===void 0&&(t={}),{options:t,fn(n){const{x:i,y:a,placement:l,rects:A,middlewareData:u}=n,{offset:f=0,mainAxis:C=!0,crossAxis:m=!0}=vt(t,n),h={x:i,y:a},p=Dt(l),v=Xu(p);let x=h[v],y=h[p];const B=vt(f,n),F=typeof B=="number"?{mainAxis:B,crossAxis:0}:{mainAxis:0,crossAxis:0,...B};if(C){const R=v==="y"?"height":"width",M=A.reference[v]-A.floating[R]+F.mainAxis,N=A.reference[v]+A.reference[R]-F.mainAxis;x<M?x=M:x>N&&(x=N)}if(m){var T,w;const R=v==="y"?"width":"height",M=["top","left"].includes(xt(l)),N=A.reference[p]-A.floating[R]+(M&&((T=u.offset)==null?void 0:T[p])||0)+(M?0:F.crossAxis),E=A.reference[p]+A.reference[R]+(M?0:((w=u.offset)==null?void 0:w[p])||0)-(M?F.crossAxis:0);y<N?y=N:y>E&&(y=E)}return{[v]:x,[p]:y}}}},aR=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(n){var i,a;const{placement:l,rects:A,platform:u,elements:f}=n,{apply:C=()=>{},...m}=vt(t,n),h=await oi(n,m),p=xt(l),v=Hn(l),x=Dt(l)==="y",{width:y,height:B}=A.floating;let F,T;p==="top"||p==="bottom"?(F=p,T=v===(await(u.isRTL==null?void 0:u.isRTL(f.floating))?"start":"end")?"left":"right"):(T=p,F=v==="end"?"top":"bottom");const w=B-h.top-h.bottom,R=y-h.left-h.right,M=Jt(B-h[F],w),N=Jt(y-h[T],R),E=!n.middlewareData.shift;let k=M,j=N;if((i=n.middlewareData.shift)!=null&&i.enabled.x&&(j=R),(a=n.middlewareData.shift)!=null&&a.enabled.y&&(k=w),E&&!v){const r2=se(h.left,0),c2=se(h.right,0),s2=se(h.top,0),i2=se(h.bottom,0);x?j=y-2*(r2!==0||c2!==0?r2+c2:se(h.left,h.right)):k=B-2*(s2!==0||i2!==0?s2+i2:se(h.top,h.bottom))}await C({...n,availableWidth:j,availableHeight:k});const z=await u.getDimensions(f.floating);return y!==z.width||B!==z.height?{reset:{rects:!0}}:{}}}};function _s(){return typeof window<"u"}function Un(t){return Xh(t)?(t.nodeName||"").toLowerCase():"#document"}function le(t){var n;return(t==null||(n=t.ownerDocument)==null?void 0:n.defaultView)||window}function Je(t){var n;return(n=(Xh(t)?t.ownerDocument:t.document)||window.document)==null?void 0:n.documentElement}function Xh(t){return _s()?t instanceof Node||t instanceof le(t).Node:!1}function R0(t){return _s()?t instanceof Element||t instanceof le(t).Element:!1}function Xe(t){return _s()?t instanceof HTMLElement||t instanceof le(t).HTMLElement:!1}function Cs(t){return!_s()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof le(t).ShadowRoot}function mi(t){const{overflow:n,overflowX:i,overflowY:a,display:l}=Fe(t);return/auto|scroll|overlay|hidden|clip/.test(n+a+i)&&!["inline","contents"].includes(l)}function sR(t){return["table","td","th"].includes(Un(t))}function Ls(t){return[":popover-open",":modal"].some(n=>{try{return t.matches(n)}catch{return!1}})}function ef(t){const n=tf(),i=R0(t)?Fe(t):t;return["transform","translate","scale","rotate","perspective"].some(a=>i[a]?i[a]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!n&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!n&&(i.filter?i.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(i.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(i.contain||"").includes(a))}function lR(t){let n=er(t);for(;Xe(n)&&!Ln(n);){if(ef(n))return n;if(Ls(n))return null;n=er(n)}return null}function tf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ln(t){return["html","body","#document"].includes(Un(t))}function Fe(t){return le(t).getComputedStyle(t)}function ks(t){return R0(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function er(t){if(Un(t)==="html")return t;const n=t.assignedSlot||t.parentNode||Cs(t)&&t.host||Je(t);return Cs(n)?n.host:n}function Qh(t){const n=er(t);return Ln(n)?t.ownerDocument?t.ownerDocument.body:t.body:Xe(n)&&mi(n)?n:Qh(n)}function ii(t,n,i){var a;n===void 0&&(n=[]),i===void 0&&(i=!0);const l=Qh(t),A=l===((a=t.ownerDocument)==null?void 0:a.body),u=le(l);if(A){const f=ou(u);return n.concat(u,u.visualViewport||[],mi(l)?l:[],f&&i?ii(f):[])}return n.concat(l,ii(l,[],i))}function ou(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Jh(t){const n=Fe(t);let i=parseFloat(n.width)||0,a=parseFloat(n.height)||0;const l=Xe(t),A=l?t.offsetWidth:i,u=l?t.offsetHeight:a,f=fs(i)!==A||fs(a)!==u;return f&&(i=A,a=u),{width:i,height:a,$:f}}function rf(t){return R0(t)?t:t.contextElement}function Mn(t){const n=rf(t);if(!Xe(n))return Ze(1);const i=n.getBoundingClientRect(),{width:a,height:l,$:A}=Jh(n);let u=(A?fs(i.width):i.width)/a,f=(A?fs(i.height):i.height)/l;return(!u||!Number.isFinite(u))&&(u=1),(!f||!Number.isFinite(f))&&(f=1),{x:u,y:f}}const AR=Ze(0);function eD(t){const n=le(t);return!tf()||!n.visualViewport?AR:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function cR(t,n,i){return n===void 0&&(n=!1),!i||n&&i!==le(t)?!1:n}function Nr(t,n,i,a){n===void 0&&(n=!1),i===void 0&&(i=!1);const l=t.getBoundingClientRect(),A=rf(t);let u=Ze(1);n&&(a?R0(a)&&(u=Mn(a)):u=Mn(t));const f=cR(A,i,a)?eD(A):Ze(0);let C=(l.left+f.x)/u.x,m=(l.top+f.y)/u.y,h=l.width/u.x,p=l.height/u.y;if(A){const v=le(A),x=a&&R0(a)?le(a):a;let y=v,B=ou(y);for(;B&&a&&x!==y;){const F=Mn(B),T=B.getBoundingClientRect(),w=Fe(B),R=T.left+(B.clientLeft+parseFloat(w.paddingLeft))*F.x,M=T.top+(B.clientTop+parseFloat(w.paddingTop))*F.y;C*=F.x,m*=F.y,h*=F.x,p*=F.y,C+=R,m+=M,y=le(B),B=ou(y)}}return ms({width:h,height:p,x:C,y:m})}function nf(t,n){const i=ks(t).scrollLeft;return n?n.left+i:Nr(Je(t)).left+i}function tD(t,n,i){i===void 0&&(i=!1);const a=t.getBoundingClientRect(),l=a.left+n.scrollLeft-(i?0:nf(t,a)),A=a.top+n.scrollTop;return{x:l,y:A}}function uR(t){let{elements:n,rect:i,offsetParent:a,strategy:l}=t;const A=l==="fixed",u=Je(a),f=n?Ls(n.floating):!1;if(a===u||f&&A)return i;let C={scrollLeft:0,scrollTop:0},m=Ze(1);const h=Ze(0),p=Xe(a);if((p||!p&&!A)&&((Un(a)!=="body"||mi(u))&&(C=ks(a)),Xe(a))){const x=Nr(a);m=Mn(a),h.x=x.x+a.clientLeft,h.y=x.y+a.clientTop}const v=u&&!p&&!A?tD(u,C,!0):Ze(0);return{width:i.width*m.x,height:i.height*m.y,x:i.x*m.x-C.scrollLeft*m.x+h.x+v.x,y:i.y*m.y-C.scrollTop*m.y+h.y+v.y}}function fR(t){return Array.from(t.getClientRects())}function dR(t){const n=Je(t),i=ks(t),a=t.ownerDocument.body,l=se(n.scrollWidth,n.clientWidth,a.scrollWidth,a.clientWidth),A=se(n.scrollHeight,n.clientHeight,a.scrollHeight,a.clientHeight);let u=-i.scrollLeft+nf(t);const f=-i.scrollTop;return Fe(a).direction==="rtl"&&(u+=se(n.clientWidth,a.clientWidth)-l),{width:l,height:A,x:u,y:f}}function mR(t,n){const i=le(t),a=Je(t),l=i.visualViewport;let A=a.clientWidth,u=a.clientHeight,f=0,C=0;if(l){A=l.width,u=l.height;const m=tf();(!m||m&&n==="fixed")&&(f=l.offsetLeft,C=l.offsetTop)}return{width:A,height:u,x:f,y:C}}function CR(t,n){const i=Nr(t,!0,n==="fixed"),a=i.top+t.clientTop,l=i.left+t.clientLeft,A=Xe(t)?Mn(t):Ze(1),u=t.clientWidth*A.x,f=t.clientHeight*A.y,C=l*A.x,m=a*A.y;return{width:u,height:f,x:C,y:m}}function C3(t,n,i){let a;if(n==="viewport")a=mR(t,i);else if(n==="document")a=dR(Je(t));else if(R0(n))a=CR(n,i);else{const l=eD(t);a={x:n.x-l.x,y:n.y-l.y,width:n.width,height:n.height}}return ms(a)}function rD(t,n){const i=er(t);return i===n||!R0(i)||Ln(i)?!1:Fe(i).position==="fixed"||rD(i,n)}function pR(t,n){const i=n.get(t);if(i)return i;let a=ii(t,[],!1).filter(f=>R0(f)&&Un(f)!=="body"),l=null;const A=Fe(t).position==="fixed";let u=A?er(t):t;for(;R0(u)&&!Ln(u);){const f=Fe(u),C=ef(u);!C&&f.position==="fixed"&&(l=null),(A?!C&&!l:!C&&f.position==="static"&&!!l&&["absolute","fixed"].includes(l.position)||mi(u)&&!C&&rD(t,u))?a=a.filter(h=>h!==u):l=f,u=er(u)}return n.set(t,a),a}function gR(t){let{element:n,boundary:i,rootBoundary:a,strategy:l}=t;const u=[...i==="clippingAncestors"?Ls(n)?[]:pR(n,this._c):[].concat(i),a],f=u[0],C=u.reduce((m,h)=>{const p=C3(n,h,l);return m.top=se(p.top,m.top),m.right=Jt(p.right,m.right),m.bottom=Jt(p.bottom,m.bottom),m.left=se(p.left,m.left),m},C3(n,f,l));return{width:C.right-C.left,height:C.bottom-C.top,x:C.left,y:C.top}}function hR(t){const{width:n,height:i}=Jh(t);return{width:n,height:i}}function DR(t,n,i){const a=Xe(n),l=Je(n),A=i==="fixed",u=Nr(t,!0,A,n);let f={scrollLeft:0,scrollTop:0};const C=Ze(0);function m(){C.x=nf(l)}if(a||!a&&!A)if((Un(n)!=="body"||mi(l))&&(f=ks(n)),a){const x=Nr(n,!0,A,n);C.x=x.x+n.clientLeft,C.y=x.y+n.clientTop}else l&&m();A&&!a&&l&&m();const h=l&&!a&&!A?tD(l,f):Ze(0),p=u.left+f.scrollLeft-C.x-h.x,v=u.top+f.scrollTop-C.y-h.y;return{x:p,y:v,width:u.width,height:u.height}}function Bc(t){return Fe(t).position==="static"}function p3(t,n){if(!Xe(t)||Fe(t).position==="fixed")return null;if(n)return n(t);let i=t.offsetParent;return Je(t)===i&&(i=i.ownerDocument.body),i}function nD(t,n){const i=le(t);if(Ls(t))return i;if(!Xe(t)){let l=er(t);for(;l&&!Ln(l);){if(R0(l)&&!Bc(l))return l;l=er(l)}return i}let a=p3(t,n);for(;a&&sR(a)&&Bc(a);)a=p3(a,n);return a&&Ln(a)&&Bc(a)&&!ef(a)?i:a||lR(t)||i}const vR=async function(t){const n=this.getOffsetParent||nD,i=this.getDimensions,a=await i(t.floating);return{reference:DR(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function xR(t){return Fe(t).direction==="rtl"}const yR={convertOffsetParentRelativeRectToViewportRelativeRect:uR,getDocumentElement:Je,getClippingRect:gR,getOffsetParent:nD,getElementRects:vR,getClientRects:fR,getDimensions:hR,getScale:Mn,isElement:R0,isRTL:xR};function oD(t,n){return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}function BR(t,n){let i=null,a;const l=Je(t);function A(){var f;clearTimeout(a),(f=i)==null||f.disconnect(),i=null}function u(f,C){f===void 0&&(f=!1),C===void 0&&(C=1),A();const m=t.getBoundingClientRect(),{left:h,top:p,width:v,height:x}=m;if(f||n(),!v||!x)return;const y=Ga(p),B=Ga(l.clientWidth-(h+v)),F=Ga(l.clientHeight-(p+x)),T=Ga(h),R={rootMargin:-y+"px "+-B+"px "+-F+"px "+-T+"px",threshold:se(0,Jt(1,C))||1};let M=!0;function N(E){const k=E[0].intersectionRatio;if(k!==C){if(!M)return u();k?u(!1,k):a=setTimeout(()=>{u(!1,1e-7)},1e3)}k===1&&!oD(m,t.getBoundingClientRect())&&u(),M=!1}try{i=new IntersectionObserver(N,{...R,root:l.ownerDocument})}catch{i=new IntersectionObserver(N,R)}i.observe(t)}return u(!0),A}function SR(t,n,i,a){a===void 0&&(a={});const{ancestorScroll:l=!0,ancestorResize:A=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:C=!1}=a,m=rf(t),h=l||A?[...m?ii(m):[],...ii(n)]:[];h.forEach(T=>{l&&T.addEventListener("scroll",i,{passive:!0}),A&&T.addEventListener("resize",i)});const p=m&&f?BR(m,i):null;let v=-1,x=null;u&&(x=new ResizeObserver(T=>{let[w]=T;w&&w.target===m&&x&&(x.unobserve(n),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var R;(R=x)==null||R.observe(n)})),i()}),m&&!C&&x.observe(m),x.observe(n));let y,B=C?Nr(t):null;C&&F();function F(){const T=Nr(t);B&&!oD(B,T)&&i(),B=T,y=requestAnimationFrame(F)}return i(),()=>{var T;h.forEach(w=>{l&&w.removeEventListener("scroll",i),A&&w.removeEventListener("resize",i)}),p==null||p(),(T=x)==null||T.disconnect(),x=null,C&&cancelAnimationFrame(y)}}const FR=nR,TR=oR,RR=eR,bR=aR,wR=tR,g3=JT,ER=iR,MR=(t,n,i)=>{const a=new Map,l={platform:yR,...i},A={...l.platform,_c:a};return QT(t,n,{...l,platform:A})};var rs=typeof document<"u"?D.useLayoutEffect:D.useEffect;function ps(t,n){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(typeof t=="function"&&t.toString()===n.toString())return!0;let i,a,l;if(t&&n&&typeof t=="object"){if(Array.isArray(t)){if(i=t.length,i!==n.length)return!1;for(a=i;a--!==0;)if(!ps(t[a],n[a]))return!1;return!0}if(l=Object.keys(t),i=l.length,i!==Object.keys(n).length)return!1;for(a=i;a--!==0;)if(!{}.hasOwnProperty.call(n,l[a]))return!1;for(a=i;a--!==0;){const A=l[a];if(!(A==="_owner"&&t.$$typeof)&&!ps(t[A],n[A]))return!1}return!0}return t!==t&&n!==n}function iD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function h3(t,n){const i=iD(t);return Math.round(n*i)/i}function Sc(t){const n=D.useRef(t);return rs(()=>{n.current=t}),n}function aD(t){t===void 0&&(t={});const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:l,elements:{reference:A,floating:u}={},transform:f=!0,whileElementsMounted:C,open:m}=t,[h,p]=D.useState({x:0,y:0,strategy:i,placement:n,middlewareData:{},isPositioned:!1}),[v,x]=D.useState(a);ps(v,a)||x(a);const[y,B]=D.useState(null),[F,T]=D.useState(null),w=D.useCallback(Q=>{Q!==E.current&&(E.current=Q,B(Q))},[]),R=D.useCallback(Q=>{Q!==k.current&&(k.current=Q,T(Q))},[]),M=A||y,N=u||F,E=D.useRef(null),k=D.useRef(null),j=D.useRef(h),z=C!=null,r2=Sc(C),c2=Sc(l),s2=Sc(m),i2=D.useCallback(()=>{if(!E.current||!k.current)return;const Q={placement:n,strategy:i,middleware:v};c2.current&&(Q.platform=c2.current),MR(E.current,k.current,Q).then(K=>{const P={...K,isPositioned:s2.current!==!1};Z.current&&!ps(j.current,P)&&(j.current=P,bu.flushSync(()=>{p(P)}))})},[v,n,i,c2,s2]);rs(()=>{m===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,p(Q=>({...Q,isPositioned:!1})))},[m]);const Z=D.useRef(!1);rs(()=>(Z.current=!0,()=>{Z.current=!1}),[]),rs(()=>{if(M&&(E.current=M),N&&(k.current=N),M&&N){if(r2.current)return r2.current(M,N,i2);i2()}},[M,N,i2,r2,z]);const u2=D.useMemo(()=>({reference:E,floating:k,setReference:w,setFloating:R}),[w,R]),I=D.useMemo(()=>({reference:M,floating:N}),[M,N]),V=D.useMemo(()=>{const Q={position:i,left:0,top:0};if(!I.floating)return Q;const K=h3(I.floating,h.x),P=h3(I.floating,h.y);return f?{...Q,transform:"translate("+K+"px, "+P+"px)",...iD(I.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:K,top:P}},[i,f,I.floating,h.x,h.y]);return D.useMemo(()=>({...h,update:i2,refs:u2,elements:I,floatingStyles:V}),[h,i2,u2,I,V])}const PR=t=>{function n(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:t,fn(i){const{element:a,padding:l}=typeof t=="function"?t(i):t;return a&&n(a)?a.current!=null?g3({element:a.current,padding:l}).fn(i):{}:a?g3({element:a,padding:l}).fn(i):{}}}},sD=(t,n)=>({...FR(t),options:[t,n]}),lD=(t,n)=>({...TR(t),options:[t,n]}),NR=(t,n)=>({...ER(t),options:[t,n]}),_R=(t,n)=>({...RR(t),options:[t,n]}),LR=(t,n)=>({...bR(t),options:[t,n]}),kR=(t,n)=>({...wR(t),options:[t,n]}),AD=(t,n)=>({...PR(t),options:[t,n]});var IR="Arrow",cD=D.forwardRef((t,n)=>{const{children:i,width:a=10,height:l=5,...A}=t;return g.jsx(E2.svg,{...A,ref:n,width:a,height:l,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?i:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});cD.displayName=IR;var qR=cD,of="Popper",[uD,Is]=qe(of),[OR,fD]=uD(of),dD=t=>{const{__scopePopper:n,children:i}=t,[a,l]=D.useState(null);return g.jsx(OR,{scope:n,anchor:a,onAnchorChange:l,children:i})};dD.displayName=of;var mD="PopperAnchor",CD=D.forwardRef((t,n)=>{const{__scopePopper:i,virtualRef:a,...l}=t,A=fD(mD,i),u=D.useRef(null),f=o0(n,u);return D.useEffect(()=>{A.onAnchorChange((a==null?void 0:a.current)||u.current)}),a?null:g.jsx(E2.div,{...l,ref:f})});CD.displayName=mD;var af="PopperContent",[jR,HR]=uD(af),pD=D.forwardRef((t,n)=>{var G2,y2,N2,z2,f0,N0;const{__scopePopper:i,side:a="bottom",sideOffset:l=0,align:A="center",alignOffset:u=0,arrowPadding:f=0,avoidCollisions:C=!0,collisionBoundary:m=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:v=!1,updatePositionStrategy:x="optimized",onPlaced:y,...B}=t,F=fD(af,i),[T,w]=D.useState(null),R=o0(n,be=>w(be)),[M,N]=D.useState(null),E=zT(M),k=(E==null?void 0:E.width)??0,j=(E==null?void 0:E.height)??0,z=a+(A!=="center"?"-"+A:""),r2=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},c2=Array.isArray(m)?m:[m],s2=c2.length>0,i2={padding:r2,boundary:c2.filter(zR),altBoundary:s2},{refs:Z,floatingStyles:u2,placement:I,isPositioned:V,middlewareData:Q}=aD({strategy:"fixed",placement:z,whileElementsMounted:(...be)=>SR(...be,{animationFrame:x==="always"}),elements:{reference:F.anchor},middleware:[sD({mainAxis:l+j,alignmentAxis:u}),C&&lD({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?NR():void 0,...i2}),C&&_R({...i2}),LR({...i2,apply:({elements:be,rects:W0,availableWidth:zn,availableHeight:Wn})=>{const{width:O0,height:Gn}=W0.reference,et=be.floating.style;et.setProperty("--radix-popper-available-width",`${zn}px`),et.setProperty("--radix-popper-available-height",`${Wn}px`),et.setProperty("--radix-popper-anchor-width",`${O0}px`),et.setProperty("--radix-popper-anchor-height",`${Gn}px`)}}),M&&AD({element:M,padding:f}),WR({arrowWidth:k,arrowHeight:j}),v&&kR({strategy:"referenceHidden",...i2})]}),[K,P]=DD(I),X=I0(y);Se(()=>{V&&(X==null||X())},[V,X]);const e2=(G2=Q.arrow)==null?void 0:G2.x,o2=(y2=Q.arrow)==null?void 0:y2.y,f2=((N2=Q.arrow)==null?void 0:N2.centerOffset)!==0,[B2,p2]=D.useState();return Se(()=>{T&&p2(window.getComputedStyle(T).zIndex)},[T]),g.jsx("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...u2,transform:V?u2.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:B2,"--radix-popper-transform-origin":[(z2=Q.transformOrigin)==null?void 0:z2.x,(f0=Q.transformOrigin)==null?void 0:f0.y].join(" "),...((N0=Q.hide)==null?void 0:N0.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:g.jsx(jR,{scope:i,placedSide:K,onArrowChange:N,arrowX:e2,arrowY:o2,shouldHideArrow:f2,children:g.jsx(E2.div,{"data-side":K,"data-align":P,...B,ref:R,style:{...B.style,animation:V?void 0:"none"}})})})});pD.displayName=af;var gD="PopperArrow",UR={top:"bottom",right:"left",bottom:"top",left:"right"},hD=D.forwardRef(function(n,i){const{__scopePopper:a,...l}=n,A=HR(gD,a),u=UR[A.placedSide];return g.jsx("span",{ref:A.onArrowChange,style:{position:"absolute",left:A.arrowX,top:A.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[A.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[A.placedSide],visibility:A.shouldHideArrow?"hidden":void 0},children:g.jsx(qR,{...l,ref:i,style:{...l.style,display:"block"}})})});hD.displayName=gD;function zR(t){return t!==null}var WR=t=>({name:"transformOrigin",options:t,fn(n){var F,T,w;const{placement:i,rects:a,middlewareData:l}=n,u=((F=l.arrow)==null?void 0:F.centerOffset)!==0,f=u?0:t.arrowWidth,C=u?0:t.arrowHeight,[m,h]=DD(i),p={start:"0%",center:"50%",end:"100%"}[h],v=(((T=l.arrow)==null?void 0:T.x)??0)+f/2,x=(((w=l.arrow)==null?void 0:w.y)??0)+C/2;let y="",B="";return m==="bottom"?(y=u?p:`${v}px`,B=`${-C}px`):m==="top"?(y=u?p:`${v}px`,B=`${a.floating.height+C}px`):m==="right"?(y=`${-C}px`,B=u?p:`${x}px`):m==="left"&&(y=`${a.floating.width+C}px`,B=u?p:`${x}px`),{data:{x:y,y:B}}}});function DD(t){const[n,i="center"]=t.split("-");return[n,i]}var vD=dD,sf=CD,xD=pD,yD=hD,Fc="rovingFocusGroup.onEntryFocus",GR={bubbles:!1,cancelable:!0},Ci="RovingFocusGroup",[iu,BD,VR]=di(Ci),[YR,qs]=qe(Ci,[VR]),[$R,KR]=YR(Ci),SD=D.forwardRef((t,n)=>g.jsx(iu.Provider,{scope:t.__scopeRovingFocusGroup,children:g.jsx(iu.Slot,{scope:t.__scopeRovingFocusGroup,children:g.jsx(ZR,{...t,ref:n})})}));SD.displayName=Ci;var ZR=D.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:i,orientation:a,loop:l=!1,dir:A,currentTabStopId:u,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:C,onEntryFocus:m,preventScrollOnEntryFocus:h=!1,...p}=t,v=D.useRef(null),x=o0(n,v),y=fi(A),[B,F]=Qe({prop:u,defaultProp:f??null,onChange:C,caller:Ci}),[T,w]=D.useState(!1),R=I0(m),M=BD(i),N=D.useRef(!1),[E,k]=D.useState(0);return D.useEffect(()=>{const j=v.current;if(j)return j.addEventListener(Fc,R),()=>j.removeEventListener(Fc,R)},[R]),g.jsx($R,{scope:i,orientation:a,dir:y,loop:l,currentTabStopId:B,onItemFocus:D.useCallback(j=>F(j),[F]),onItemShiftTab:D.useCallback(()=>w(!0),[]),onFocusableItemAdd:D.useCallback(()=>k(j=>j+1),[]),onFocusableItemRemove:D.useCallback(()=>k(j=>j-1),[]),children:g.jsx(E2.div,{tabIndex:T||E===0?-1:0,"data-orientation":a,...p,ref:x,style:{outline:"none",...t.style},onMouseDown:C2(t.onMouseDown,()=>{N.current=!0}),onFocus:C2(t.onFocus,j=>{const z=!N.current;if(j.target===j.currentTarget&&z&&!T){const r2=new CustomEvent(Fc,GR);if(j.currentTarget.dispatchEvent(r2),!r2.defaultPrevented){const c2=M().filter(I=>I.focusable),s2=c2.find(I=>I.active),i2=c2.find(I=>I.id===B),u2=[s2,i2,...c2].filter(Boolean).map(I=>I.ref.current);RD(u2,h)}}N.current=!1}),onBlur:C2(t.onBlur,()=>w(!1))})})}),FD="RovingFocusGroupItem",TD=D.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:i,focusable:a=!0,active:l=!1,tabStopId:A,children:u,...f}=t,C=xe(),m=A||C,h=KR(FD,i),p=h.currentTabStopId===m,v=BD(i),{onFocusableItemAdd:x,onFocusableItemRemove:y,currentTabStopId:B}=h;return D.useEffect(()=>{if(a)return x(),()=>y()},[a,x,y]),g.jsx(iu.ItemSlot,{scope:i,id:m,focusable:a,active:l,children:g.jsx(E2.span,{tabIndex:p?0:-1,"data-orientation":h.orientation,...f,ref:n,onMouseDown:C2(t.onMouseDown,F=>{a?h.onItemFocus(m):F.preventDefault()}),onFocus:C2(t.onFocus,()=>h.onItemFocus(m)),onKeyDown:C2(t.onKeyDown,F=>{if(F.key==="Tab"&&F.shiftKey){h.onItemShiftTab();return}if(F.target!==F.currentTarget)return;const T=JR(F,h.orientation,h.dir);if(T!==void 0){if(F.metaKey||F.ctrlKey||F.altKey||F.shiftKey)return;F.preventDefault();let R=v().filter(M=>M.focusable).map(M=>M.ref.current);if(T==="last")R.reverse();else if(T==="prev"||T==="next"){T==="prev"&&R.reverse();const M=R.indexOf(F.currentTarget);R=h.loop?eb(R,M+1):R.slice(M+1)}setTimeout(()=>RD(R))}}),children:typeof u=="function"?u({isCurrentTabStop:p,hasTabStop:B!=null}):u})})});TD.displayName=FD;var XR={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function QR(t,n){return n!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function JR(t,n,i){const a=QR(t.key,i);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return XR[a]}function RD(t,n=!1){const i=document.activeElement;for(const a of t)if(a===i||(a.focus({preventScroll:n}),document.activeElement!==i))return}function eb(t,n){return t.map((i,a)=>t[(n+a)%t.length])}var bD=SD,wD=TD,au=["Enter"," "],tb=["ArrowDown","PageUp","Home"],ED=["ArrowUp","PageDown","End"],rb=[...tb,...ED],nb={ltr:[...au,"ArrowRight"],rtl:[...au,"ArrowLeft"]},ob={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pi="Menu",[ai,ib,ab]=di(pi),[qr,MD]=qe(pi,[ab,Is,qs]),Os=Is(),PD=qs(),[sb,Or]=qr(pi),[lb,gi]=qr(pi),ND=t=>{const{__scopeMenu:n,open:i=!1,children:a,dir:l,onOpenChange:A,modal:u=!0}=t,f=Os(n),[C,m]=D.useState(null),h=D.useRef(!1),p=I0(A),v=fi(l);return D.useEffect(()=>{const x=()=>{h.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>h.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),g.jsx(vD,{...f,children:g.jsx(sb,{scope:n,open:i,onOpenChange:p,content:C,onContentChange:m,children:g.jsx(lb,{scope:n,onClose:D.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:h,dir:v,modal:u,children:a})})})};ND.displayName=pi;var Ab="MenuAnchor",lf=D.forwardRef((t,n)=>{const{__scopeMenu:i,...a}=t,l=Os(i);return g.jsx(sf,{...l,...a,ref:n})});lf.displayName=Ab;var Af="MenuPortal",[cb,_D]=qr(Af,{forceMount:void 0}),LD=t=>{const{__scopeMenu:n,forceMount:i,children:a,container:l}=t,A=Or(Af,n);return g.jsx(cb,{scope:n,forceMount:i,children:g.jsx(q0,{present:i||A.open,children:g.jsx(Ts,{asChild:!0,container:l,children:a})})})};LD.displayName=Af;var ye="MenuContent",[ub,cf]=qr(ye),kD=D.forwardRef((t,n)=>{const i=_D(ye,t.__scopeMenu),{forceMount:a=i.forceMount,...l}=t,A=Or(ye,t.__scopeMenu),u=gi(ye,t.__scopeMenu);return g.jsx(ai.Provider,{scope:t.__scopeMenu,children:g.jsx(q0,{present:a||A.open,children:g.jsx(ai.Slot,{scope:t.__scopeMenu,children:u.modal?g.jsx(fb,{...l,ref:n}):g.jsx(db,{...l,ref:n})})})})}),fb=D.forwardRef((t,n)=>{const i=Or(ye,t.__scopeMenu),a=D.useRef(null),l=o0(n,a);return D.useEffect(()=>{const A=a.current;if(A)return Eu(A)},[]),g.jsx(uf,{...t,ref:l,trapFocus:i.open,disableOutsidePointerEvents:i.open,disableOutsideScroll:!0,onFocusOutside:C2(t.onFocusOutside,A=>A.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>i.onOpenChange(!1)})}),db=D.forwardRef((t,n)=>{const i=Or(ye,t.__scopeMenu);return g.jsx(uf,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>i.onOpenChange(!1)})}),mb=Nn("MenuContent.ScrollLock"),uf=D.forwardRef((t,n)=>{const{__scopeMenu:i,loop:a=!1,trapFocus:l,onOpenAutoFocus:A,onCloseAutoFocus:u,disableOutsidePointerEvents:f,onEntryFocus:C,onEscapeKeyDown:m,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:v,onDismiss:x,disableOutsideScroll:y,...B}=t,F=Or(ye,i),T=gi(ye,i),w=Os(i),R=PD(i),M=ib(i),[N,E]=D.useState(null),k=D.useRef(null),j=o0(n,k,F.onContentChange),z=D.useRef(0),r2=D.useRef(""),c2=D.useRef(0),s2=D.useRef(null),i2=D.useRef("right"),Z=D.useRef(0),u2=y?bs:D.Fragment,I=y?{as:mb,allowPinchZoom:!0}:void 0,V=K=>{var G2,y2;const P=r2.current+K,X=M().filter(N2=>!N2.disabled),e2=document.activeElement,o2=(G2=X.find(N2=>N2.ref.current===e2))==null?void 0:G2.textValue,f2=X.map(N2=>N2.textValue),B2=Tb(f2,P,o2),p2=(y2=X.find(N2=>N2.textValue===B2))==null?void 0:y2.ref.current;(function N2(z2){r2.current=z2,window.clearTimeout(z.current),z2!==""&&(z.current=window.setTimeout(()=>N2(""),1e3))})(P),p2&&setTimeout(()=>p2.focus())};D.useEffect(()=>()=>window.clearTimeout(z.current),[]),wu();const Q=D.useCallback(K=>{var X,e2;return i2.current===((X=s2.current)==null?void 0:X.side)&&bb(K,(e2=s2.current)==null?void 0:e2.area)},[]);return g.jsx(ub,{scope:i,searchRef:r2,onItemEnter:D.useCallback(K=>{Q(K)&&K.preventDefault()},[Q]),onItemLeave:D.useCallback(K=>{var P;Q(K)||((P=k.current)==null||P.focus(),E(null))},[Q]),onTriggerLeave:D.useCallback(K=>{Q(K)&&K.preventDefault()},[Q]),pointerGraceTimerRef:c2,onPointerGraceIntentChange:D.useCallback(K=>{s2.current=K},[]),children:g.jsx(u2,{...I,children:g.jsx(Fs,{asChild:!0,trapped:l,onMountAutoFocus:C2(A,K=>{var P;K.preventDefault(),(P=k.current)==null||P.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:g.jsx(ui,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:m,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:v,onDismiss:x,children:g.jsx(bD,{asChild:!0,...R,dir:T.dir,orientation:"vertical",loop:a,currentTabStopId:N,onCurrentTabStopIdChange:E,onEntryFocus:C2(C,K=>{T.isUsingKeyboardRef.current||K.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(xD,{role:"menu","aria-orientation":"vertical","data-state":QD(F.open),"data-radix-menu-content":"",dir:T.dir,...w,...B,ref:j,style:{outline:"none",...B.style},onKeyDown:C2(B.onKeyDown,K=>{const X=K.target.closest("[data-radix-menu-content]")===K.currentTarget,e2=K.ctrlKey||K.altKey||K.metaKey,o2=K.key.length===1;X&&(K.key==="Tab"&&K.preventDefault(),!e2&&o2&&V(K.key));const f2=k.current;if(K.target!==f2||!rb.includes(K.key))return;K.preventDefault();const p2=M().filter(G2=>!G2.disabled).map(G2=>G2.ref.current);ED.includes(K.key)&&p2.reverse(),Sb(p2)}),onBlur:C2(t.onBlur,K=>{K.currentTarget.contains(K.target)||(window.clearTimeout(z.current),r2.current="")}),onPointerMove:C2(t.onPointerMove,si(K=>{const P=K.target,X=Z.current!==K.clientX;if(K.currentTarget.contains(P)&&X){const e2=K.clientX>Z.current?"right":"left";i2.current=e2,Z.current=K.clientX}}))})})})})})})});kD.displayName=ye;var Cb="MenuGroup",ff=D.forwardRef((t,n)=>{const{__scopeMenu:i,...a}=t;return g.jsx(E2.div,{role:"group",...a,ref:n})});ff.displayName=Cb;var pb="MenuLabel",ID=D.forwardRef((t,n)=>{const{__scopeMenu:i,...a}=t;return g.jsx(E2.div,{...a,ref:n})});ID.displayName=pb;var gs="MenuItem",D3="menu.itemSelect",js=D.forwardRef((t,n)=>{const{disabled:i=!1,onSelect:a,...l}=t,A=D.useRef(null),u=gi(gs,t.__scopeMenu),f=cf(gs,t.__scopeMenu),C=o0(n,A),m=D.useRef(!1),h=()=>{const p=A.current;if(!i&&p){const v=new CustomEvent(D3,{bubbles:!0,cancelable:!0});p.addEventListener(D3,x=>a==null?void 0:a(x),{once:!0}),ss(p,v),v.defaultPrevented?m.current=!1:u.onClose()}};return g.jsx(qD,{...l,ref:C,disabled:i,onClick:C2(t.onClick,h),onPointerDown:p=>{var v;(v=t.onPointerDown)==null||v.call(t,p),m.current=!0},onPointerUp:C2(t.onPointerUp,p=>{var v;m.current||(v=p.currentTarget)==null||v.click()}),onKeyDown:C2(t.onKeyDown,p=>{const v=f.searchRef.current!=="";i||v&&p.key===" "||au.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});js.displayName=gs;var qD=D.forwardRef((t,n)=>{const{__scopeMenu:i,disabled:a=!1,textValue:l,...A}=t,u=cf(gs,i),f=PD(i),C=D.useRef(null),m=o0(n,C),[h,p]=D.useState(!1),[v,x]=D.useState("");return D.useEffect(()=>{const y=C.current;y&&x((y.textContent??"").trim())},[A.children]),g.jsx(ai.ItemSlot,{scope:i,disabled:a,textValue:l??v,children:g.jsx(wD,{asChild:!0,...f,focusable:!a,children:g.jsx(E2.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...A,ref:m,onPointerMove:C2(t.onPointerMove,si(y=>{a?u.onItemLeave(y):(u.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:C2(t.onPointerLeave,si(y=>u.onItemLeave(y))),onFocus:C2(t.onFocus,()=>p(!0)),onBlur:C2(t.onBlur,()=>p(!1))})})})}),gb="MenuCheckboxItem",OD=D.forwardRef((t,n)=>{const{checked:i=!1,onCheckedChange:a,...l}=t;return g.jsx(WD,{scope:t.__scopeMenu,checked:i,children:g.jsx(js,{role:"menuitemcheckbox","aria-checked":hs(i)?"mixed":i,...l,ref:n,"data-state":mf(i),onSelect:C2(l.onSelect,()=>a==null?void 0:a(hs(i)?!0:!i),{checkForDefaultPrevented:!1})})})});OD.displayName=gb;var jD="MenuRadioGroup",[hb,Db]=qr(jD,{value:void 0,onValueChange:()=>{}}),HD=D.forwardRef((t,n)=>{const{value:i,onValueChange:a,...l}=t,A=I0(a);return g.jsx(hb,{scope:t.__scopeMenu,value:i,onValueChange:A,children:g.jsx(ff,{...l,ref:n})})});HD.displayName=jD;var UD="MenuRadioItem",zD=D.forwardRef((t,n)=>{const{value:i,...a}=t,l=Db(UD,t.__scopeMenu),A=i===l.value;return g.jsx(WD,{scope:t.__scopeMenu,checked:A,children:g.jsx(js,{role:"menuitemradio","aria-checked":A,...a,ref:n,"data-state":mf(A),onSelect:C2(a.onSelect,()=>{var u;return(u=l.onValueChange)==null?void 0:u.call(l,i)},{checkForDefaultPrevented:!1})})})});zD.displayName=UD;var df="MenuItemIndicator",[WD,vb]=qr(df,{checked:!1}),GD=D.forwardRef((t,n)=>{const{__scopeMenu:i,forceMount:a,...l}=t,A=vb(df,i);return g.jsx(q0,{present:a||hs(A.checked)||A.checked===!0,children:g.jsx(E2.span,{...l,ref:n,"data-state":mf(A.checked)})})});GD.displayName=df;var xb="MenuSeparator",VD=D.forwardRef((t,n)=>{const{__scopeMenu:i,...a}=t;return g.jsx(E2.div,{role:"separator","aria-orientation":"horizontal",...a,ref:n})});VD.displayName=xb;var yb="MenuArrow",YD=D.forwardRef((t,n)=>{const{__scopeMenu:i,...a}=t,l=Os(i);return g.jsx(yD,{...l,...a,ref:n})});YD.displayName=yb;var Bb="MenuSub",[bN,$D]=qr(Bb),Jo="MenuSubTrigger",KD=D.forwardRef((t,n)=>{const i=Or(Jo,t.__scopeMenu),a=gi(Jo,t.__scopeMenu),l=$D(Jo,t.__scopeMenu),A=cf(Jo,t.__scopeMenu),u=D.useRef(null),{pointerGraceTimerRef:f,onPointerGraceIntentChange:C}=A,m={__scopeMenu:t.__scopeMenu},h=D.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return D.useEffect(()=>h,[h]),D.useEffect(()=>{const p=f.current;return()=>{window.clearTimeout(p),C(null)}},[f,C]),g.jsx(lf,{asChild:!0,...m,children:g.jsx(qD,{id:l.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":l.contentId,"data-state":QD(i.open),...t,ref:ci(n,l.onTriggerChange),onClick:p=>{var v;(v=t.onClick)==null||v.call(t,p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),i.open||i.onOpenChange(!0))},onPointerMove:C2(t.onPointerMove,si(p=>{A.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!i.open&&!u.current&&(A.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{i.onOpenChange(!0),h()},100))})),onPointerLeave:C2(t.onPointerLeave,si(p=>{var x,y;h();const v=(x=i.content)==null?void 0:x.getBoundingClientRect();if(v){const B=(y=i.content)==null?void 0:y.dataset.side,F=B==="right",T=F?-5:5,w=v[F?"left":"right"],R=v[F?"right":"left"];A.onPointerGraceIntentChange({area:[{x:p.clientX+T,y:p.clientY},{x:w,y:v.top},{x:R,y:v.top},{x:R,y:v.bottom},{x:w,y:v.bottom}],side:B}),window.clearTimeout(f.current),f.current=window.setTimeout(()=>A.onPointerGraceIntentChange(null),300)}else{if(A.onTriggerLeave(p),p.defaultPrevented)return;A.onPointerGraceIntentChange(null)}})),onKeyDown:C2(t.onKeyDown,p=>{var x;const v=A.searchRef.current!=="";t.disabled||v&&p.key===" "||nb[a.dir].includes(p.key)&&(i.onOpenChange(!0),(x=i.content)==null||x.focus(),p.preventDefault())})})})});KD.displayName=Jo;var ZD="MenuSubContent",XD=D.forwardRef((t,n)=>{const i=_D(ye,t.__scopeMenu),{forceMount:a=i.forceMount,...l}=t,A=Or(ye,t.__scopeMenu),u=gi(ye,t.__scopeMenu),f=$D(ZD,t.__scopeMenu),C=D.useRef(null),m=o0(n,C);return g.jsx(ai.Provider,{scope:t.__scopeMenu,children:g.jsx(q0,{present:a||A.open,children:g.jsx(ai.Slot,{scope:t.__scopeMenu,children:g.jsx(uf,{id:f.contentId,"aria-labelledby":f.triggerId,...l,ref:m,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var p;u.isUsingKeyboardRef.current&&((p=C.current)==null||p.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:C2(t.onFocusOutside,h=>{h.target!==f.trigger&&A.onOpenChange(!1)}),onEscapeKeyDown:C2(t.onEscapeKeyDown,h=>{u.onClose(),h.preventDefault()}),onKeyDown:C2(t.onKeyDown,h=>{var x;const p=h.currentTarget.contains(h.target),v=ob[u.dir].includes(h.key);p&&v&&(A.onOpenChange(!1),(x=f.trigger)==null||x.focus(),h.preventDefault())})})})})})});XD.displayName=ZD;function QD(t){return t?"open":"closed"}function hs(t){return t==="indeterminate"}function mf(t){return hs(t)?"indeterminate":t?"checked":"unchecked"}function Sb(t){const n=document.activeElement;for(const i of t)if(i===n||(i.focus(),document.activeElement!==n))return}function Fb(t,n){return t.map((i,a)=>t[(n+a)%t.length])}function Tb(t,n,i){const l=n.length>1&&Array.from(n).every(m=>m===n[0])?n[0]:n,A=i?t.indexOf(i):-1;let u=Fb(t,Math.max(A,0));l.length===1&&(u=u.filter(m=>m!==i));const C=u.find(m=>m.toLowerCase().startsWith(l.toLowerCase()));return C!==i?C:void 0}function Rb(t,n){const{x:i,y:a}=t;let l=!1;for(let A=0,u=n.length-1;A<n.length;u=A++){const f=n[A],C=n[u],m=f.x,h=f.y,p=C.x,v=C.y;h>a!=v>a&&i<(p-m)*(a-h)/(v-h)+m&&(l=!l)}return l}function bb(t,n){if(!n)return!1;const i={x:t.clientX,y:t.clientY};return Rb(i,n)}function si(t){return n=>n.pointerType==="mouse"?t(n):void 0}var wb=ND,Eb=lf,Mb=LD,Pb=kD,Nb=ff,_b=ID,Lb=js,kb=OD,Ib=HD,qb=zD,Ob=GD,jb=VD,Hb=YD,Ub=KD,zb=XD,Hs="DropdownMenu",[Wb,wN]=qe(Hs,[MD]),z0=MD(),[Gb,JD]=Wb(Hs),e7=t=>{const{__scopeDropdownMenu:n,children:i,dir:a,open:l,defaultOpen:A,onOpenChange:u,modal:f=!0}=t,C=z0(n),m=D.useRef(null),[h,p]=Qe({prop:l,defaultProp:A??!1,onChange:u,caller:Hs});return g.jsx(Gb,{scope:n,triggerId:xe(),triggerRef:m,contentId:xe(),open:h,onOpenChange:p,onOpenToggle:D.useCallback(()=>p(v=>!v),[p]),modal:f,children:g.jsx(wb,{...C,open:h,onOpenChange:p,dir:a,modal:f,children:i})})};e7.displayName=Hs;var t7="DropdownMenuTrigger",r7=D.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,disabled:a=!1,...l}=t,A=JD(t7,i),u=z0(i);return g.jsx(Eb,{asChild:!0,...u,children:g.jsx(E2.button,{type:"button",id:A.triggerId,"aria-haspopup":"menu","aria-expanded":A.open,"aria-controls":A.open?A.contentId:void 0,"data-state":A.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...l,ref:ci(n,A.triggerRef),onPointerDown:C2(t.onPointerDown,f=>{!a&&f.button===0&&f.ctrlKey===!1&&(A.onOpenToggle(),A.open||f.preventDefault())}),onKeyDown:C2(t.onKeyDown,f=>{a||(["Enter"," "].includes(f.key)&&A.onOpenToggle(),f.key==="ArrowDown"&&A.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(f.key)&&f.preventDefault())})})})});r7.displayName=t7;var Vb="DropdownMenuPortal",n7=t=>{const{__scopeDropdownMenu:n,...i}=t,a=z0(n);return g.jsx(Mb,{...a,...i})};n7.displayName=Vb;var o7="DropdownMenuContent",i7=D.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=JD(o7,i),A=z0(i),u=D.useRef(!1);return g.jsx(Pb,{id:l.contentId,"aria-labelledby":l.triggerId,...A,...a,ref:n,onCloseAutoFocus:C2(t.onCloseAutoFocus,f=>{var C;u.current||(C=l.triggerRef.current)==null||C.focus(),u.current=!1,f.preventDefault()}),onInteractOutside:C2(t.onInteractOutside,f=>{const C=f.detail.originalEvent,m=C.button===0&&C.ctrlKey===!0,h=C.button===2||m;(!l.modal||h)&&(u.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});i7.displayName=o7;var Yb="DropdownMenuGroup",$b=D.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return g.jsx(Nb,{...l,...a,ref:n})});$b.displayName=Yb;var Kb="DropdownMenuLabel",Zb=D.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return g.jsx(_b,{...l,...a,ref:n})});Zb.displayName=Kb;var Xb="DropdownMenuItem",a7=D.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return g.jsx(Lb,{...l,...a,ref:n})});a7.displayName=Xb;var Qb="DropdownMenuCheckboxItem",Jb=D.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return g.jsx(kb,{...l,...a,ref:n})});Jb.displayName=Qb;var ew="DropdownMenuRadioGroup",tw=D.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return g.jsx(Ib,{...l,...a,ref:n})});tw.displayName=ew;var rw="DropdownMenuRadioItem",nw=D.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return g.jsx(qb,{...l,...a,ref:n})});nw.displayName=rw;var ow="DropdownMenuItemIndicator",iw=D.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return g.jsx(Ob,{...l,...a,ref:n})});iw.displayName=ow;var aw="DropdownMenuSeparator",sw=D.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return g.jsx(jb,{...l,...a,ref:n})});sw.displayName=aw;var lw="DropdownMenuArrow",Aw=D.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return g.jsx(Hb,{...l,...a,ref:n})});Aw.displayName=lw;var cw="DropdownMenuSubTrigger",uw=D.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return g.jsx(Ub,{...l,...a,ref:n})});uw.displayName=cw;var fw="DropdownMenuSubContent",dw=D.forwardRef((t,n)=>{const{__scopeDropdownMenu:i,...a}=t,l=z0(i);return g.jsx(zb,{...l,...a,ref:n,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});dw.displayName=fw;var mw=e7,Cw=r7,pw=n7,gw=i7,hw=a7,Us="Popover",[s7,EN]=qe(Us,[Is]),hi=Is(),[Dw,or]=s7(Us),l7=t=>{const{__scopePopover:n,children:i,open:a,defaultOpen:l,onOpenChange:A,modal:u=!1}=t,f=hi(n),C=D.useRef(null),[m,h]=D.useState(!1),[p,v]=Qe({prop:a,defaultProp:l??!1,onChange:A,caller:Us});return g.jsx(vD,{...f,children:g.jsx(Dw,{scope:n,contentId:xe(),triggerRef:C,open:p,onOpenChange:v,onOpenToggle:D.useCallback(()=>v(x=>!x),[v]),hasCustomAnchor:m,onCustomAnchorAdd:D.useCallback(()=>h(!0),[]),onCustomAnchorRemove:D.useCallback(()=>h(!1),[]),modal:u,children:i})})};l7.displayName=Us;var A7="PopoverAnchor",vw=D.forwardRef((t,n)=>{const{__scopePopover:i,...a}=t,l=or(A7,i),A=hi(i),{onCustomAnchorAdd:u,onCustomAnchorRemove:f}=l;return D.useEffect(()=>(u(),()=>f()),[u,f]),g.jsx(sf,{...A,...a,ref:n})});vw.displayName=A7;var c7="PopoverTrigger",u7=D.forwardRef((t,n)=>{const{__scopePopover:i,...a}=t,l=or(c7,i),A=hi(i),u=o0(n,l.triggerRef),f=g.jsx(E2.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":p7(l.open),...a,ref:u,onClick:C2(t.onClick,l.onOpenToggle)});return l.hasCustomAnchor?f:g.jsx(sf,{asChild:!0,...A,children:f})});u7.displayName=c7;var Cf="PopoverPortal",[xw,yw]=s7(Cf,{forceMount:void 0}),f7=t=>{const{__scopePopover:n,forceMount:i,children:a,container:l}=t,A=or(Cf,n);return g.jsx(xw,{scope:n,forceMount:i,children:g.jsx(q0,{present:i||A.open,children:g.jsx(Ts,{asChild:!0,container:l,children:a})})})};f7.displayName=Cf;var kn="PopoverContent",d7=D.forwardRef((t,n)=>{const i=yw(kn,t.__scopePopover),{forceMount:a=i.forceMount,...l}=t,A=or(kn,t.__scopePopover);return g.jsx(q0,{present:a||A.open,children:A.modal?g.jsx(Sw,{...l,ref:n}):g.jsx(Fw,{...l,ref:n})})});d7.displayName=kn;var Bw=Nn("PopoverContent.RemoveScroll"),Sw=D.forwardRef((t,n)=>{const i=or(kn,t.__scopePopover),a=D.useRef(null),l=o0(n,a),A=D.useRef(!1);return D.useEffect(()=>{const u=a.current;if(u)return Eu(u)},[]),g.jsx(bs,{as:Bw,allowPinchZoom:!0,children:g.jsx(m7,{...t,ref:l,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:C2(t.onCloseAutoFocus,u=>{var f;u.preventDefault(),A.current||(f=i.triggerRef.current)==null||f.focus()}),onPointerDownOutside:C2(t.onPointerDownOutside,u=>{const f=u.detail.originalEvent,C=f.button===0&&f.ctrlKey===!0,m=f.button===2||C;A.current=m},{checkForDefaultPrevented:!1}),onFocusOutside:C2(t.onFocusOutside,u=>u.preventDefault(),{checkForDefaultPrevented:!1})})})}),Fw=D.forwardRef((t,n)=>{const i=or(kn,t.__scopePopover),a=D.useRef(!1),l=D.useRef(!1);return g.jsx(m7,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:A=>{var u,f;(u=t.onCloseAutoFocus)==null||u.call(t,A),A.defaultPrevented||(a.current||(f=i.triggerRef.current)==null||f.focus(),A.preventDefault()),a.current=!1,l.current=!1},onInteractOutside:A=>{var C,m;(C=t.onInteractOutside)==null||C.call(t,A),A.defaultPrevented||(a.current=!0,A.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const u=A.target;((m=i.triggerRef.current)==null?void 0:m.contains(u))&&A.preventDefault(),A.detail.originalEvent.type==="focusin"&&l.current&&A.preventDefault()}})}),m7=D.forwardRef((t,n)=>{const{__scopePopover:i,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:A,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:C,onFocusOutside:m,onInteractOutside:h,...p}=t,v=or(kn,i),x=hi(i);return wu(),g.jsx(Fs,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:l,onUnmountAutoFocus:A,children:g.jsx(ui,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:h,onEscapeKeyDown:f,onPointerDownOutside:C,onFocusOutside:m,onDismiss:()=>v.onOpenChange(!1),children:g.jsx(xD,{"data-state":p7(v.open),role:"dialog",id:v.contentId,...x,...p,ref:n,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),C7="PopoverClose",Tw=D.forwardRef((t,n)=>{const{__scopePopover:i,...a}=t,l=or(C7,i);return g.jsx(E2.button,{type:"button",...a,ref:n,onClick:C2(t.onClick,()=>l.onOpenChange(!1))})});Tw.displayName=C7;var Rw="PopoverArrow",bw=D.forwardRef((t,n)=>{const{__scopePopover:i,...a}=t,l=hi(i);return g.jsx(yD,{...l,...a,ref:n})});bw.displayName=Rw;function p7(t){return t?"open":"closed"}var ww=l7,Ew=u7,Mw=f7,Pw=d7,zs="Tabs",[Nw,MN]=qe(zs,[qs]),g7=qs(),[_w,pf]=Nw(zs),h7=D.forwardRef((t,n)=>{const{__scopeTabs:i,value:a,onValueChange:l,defaultValue:A,orientation:u="horizontal",dir:f,activationMode:C="automatic",...m}=t,h=fi(f),[p,v]=Qe({prop:a,onChange:l,defaultProp:A??"",caller:zs});return g.jsx(_w,{scope:i,baseId:xe(),value:p,onValueChange:v,orientation:u,dir:h,activationMode:C,children:g.jsx(E2.div,{dir:h,"data-orientation":u,...m,ref:n})})});h7.displayName=zs;var D7="TabsList",v7=D.forwardRef((t,n)=>{const{__scopeTabs:i,loop:a=!0,...l}=t,A=pf(D7,i),u=g7(i);return g.jsx(bD,{asChild:!0,...u,orientation:A.orientation,dir:A.dir,loop:a,children:g.jsx(E2.div,{role:"tablist","aria-orientation":A.orientation,...l,ref:n})})});v7.displayName=D7;var x7="TabsTrigger",y7=D.forwardRef((t,n)=>{const{__scopeTabs:i,value:a,disabled:l=!1,...A}=t,u=pf(x7,i),f=g7(i),C=F7(u.baseId,a),m=T7(u.baseId,a),h=a===u.value;return g.jsx(wD,{asChild:!0,...f,focusable:!l,active:h,children:g.jsx(E2.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":m,"data-state":h?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:C,...A,ref:n,onMouseDown:C2(t.onMouseDown,p=>{!l&&p.button===0&&p.ctrlKey===!1?u.onValueChange(a):p.preventDefault()}),onKeyDown:C2(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&u.onValueChange(a)}),onFocus:C2(t.onFocus,()=>{const p=u.activationMode!=="manual";!h&&!l&&p&&u.onValueChange(a)})})})});y7.displayName=x7;var B7="TabsContent",S7=D.forwardRef((t,n)=>{const{__scopeTabs:i,value:a,forceMount:l,children:A,...u}=t,f=pf(B7,i),C=F7(f.baseId,a),m=T7(f.baseId,a),h=a===f.value,p=D.useRef(h);return D.useEffect(()=>{const v=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(v)},[]),g.jsx(q0,{present:l||h,children:({present:v})=>g.jsx(E2.div,{"data-state":h?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":C,hidden:!v,id:m,tabIndex:0,...u,ref:n,style:{...t.style,animationDuration:p.current?"0s":void 0},children:v&&A})})});S7.displayName=B7;function F7(t,n){return`${t}-trigger-${n}`}function T7(t,n){return`${t}-content-${n}`}var Lw=h7,kw=v7,Iw=y7,qw=S7,Ow="vocs_AiCtaDropdown",v3="vocs_AiCtaDropdown_buttonLeft vocs_AiCtaDropdown_button vocs_Button_button",jw="vocs_AiCtaDropdown_buttonRight vocs_AiCtaDropdown_button vocs_Button_button",Hw="vocs_AiCtaDropdown_dropdownMenuContent",Uw="vocs_AiCtaDropdown_dropdownMenuItem",Tc="vocs_Button_button",PN="vocs_Button_button_accent";function R7(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"Check"}),g.jsx("path",{d:"M7.49991 0.877045C3.84222 0.877045 0.877075 3.84219 0.877075 7.49988C0.877075 11.1575 3.84222 14.1227 7.49991 14.1227C11.1576 14.1227 14.1227 11.1575 14.1227 7.49988C14.1227 3.84219 11.1576 0.877045 7.49991 0.877045ZM1.82708 7.49988C1.82708 4.36686 4.36689 1.82704 7.49991 1.82704C10.6329 1.82704 13.1727 4.36686 13.1727 7.49988C13.1727 10.6329 10.6329 13.1727 7.49991 13.1727C4.36689 13.1727 1.82708 10.6329 1.82708 7.49988ZM10.1589 5.53774C10.3178 5.31191 10.2636 5.00001 10.0378 4.84109C9.81194 4.68217 9.50004 4.73642 9.34112 4.96225L6.51977 8.97154L5.35681 7.78706C5.16334 7.59002 4.84677 7.58711 4.64973 7.78058C4.45268 7.97404 4.44978 8.29061 4.64325 8.48765L6.22658 10.1003C6.33054 10.2062 6.47617 10.2604 6.62407 10.2483C6.77197 10.2363 6.90686 10.1591 6.99226 10.0377L10.1589 5.53774Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function b7(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"Chevron Down"}),g.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function w7(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"Copy"}),g.jsx("path",{d:"M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function zw(){return g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",children:[g.jsx("title",{children:"OpenAI"}),g.jsx("path",{fill:"currentColor",d:"M22.282 9.821a6 6 0 0 0-.516-4.91a6.05 6.05 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a6 6 0 0 0-3.998 2.9a6.05 6.05 0 0 0 .743 7.097a5.98 5.98 0 0 0 .51 4.911a6.05 6.05 0 0 0 6.515 2.9A6 6 0 0 0 13.26 24a6.06 6.06 0 0 0 5.772-4.206a6 6 0 0 0 3.997-2.9a6.06 6.06 0 0 0-.747-7.073M13.26 22.43a4.48 4.48 0 0 1-2.876-1.04l.141-.081l4.779-2.758a.8.8 0 0 0 .392-.681v-6.737l2.02 1.168a.07.07 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494M3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085l4.783 2.759a.77.77 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646M2.34 7.896a4.5 4.5 0 0 1 2.366-1.973V11.6a.77.77 0 0 0 .388.677l5.815 3.354l-2.02 1.168a.08.08 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.872zm16.597 3.855l-5.833-3.387L15.119 7.2a.08.08 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667m2.01-3.023l-.141-.085l-4.774-2.782a.78.78 0 0 0-.785 0L9.409 9.23V6.897a.07.07 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.8.8 0 0 0-.393.681zm1.097-2.365l2.602-1.5l2.607 1.5v2.999l-2.597 1.5l-2.607-1.5Z"})]})}function Ww(){const{content:t}=rr(),{aiCta:n}=C0(),i=i0(),[a,l]=D.useState(!1);D.useEffect(()=>{if(!a)return;const f=setTimeout(()=>l(!1),1e3);return()=>clearTimeout(f)},[a]);const A=D.useCallback(()=>{l(!0),navigator.clipboard.writeText(t??"")},[t]),u=D.useMemo(()=>{const f=window.location.origin+i.pathname;return typeof n=="object"?n.query({location:f}):`Please research and analyze this page: ${f} so I can ask you questions about it. Once you have read it, prompt me with any questions I have. Do not post content from the page in your response. Any of my follow up questions must reference the site I gave you.`},[n,i.pathname]);return g.jsxs("div",{className:Ow,children:[a?g.jsxs("div",{className:l2(Tc,v3),children:[g.jsx("div",{style:{width:"14px",height:"14px"},children:g.jsx(R7,{})}),"Copied"]}):g.jsxs(Be,{className:l2(Tc,v3),href:`https://chatgpt.com?hints=search&q=${encodeURIComponent(u)}`,variant:"styleless",children:[g.jsx("div",{style:{width:"14px",height:"14px"},children:g.jsx(zw,{})}),"Ask in ChatGPT"]}),g.jsxs(mw,{children:[g.jsx(Cw,{asChild:!0,children:g.jsx("button",{className:l2(Tc,jw),type:"button",children:g.jsx("div",{style:{width:"14px",height:"14px"},children:g.jsx(b7,{})})})}),g.jsx(pw,{children:g.jsx(gw,{align:"end",className:Hw,sideOffset:4,children:g.jsxs(hw,{className:Uw,onClick:A,children:[g.jsx("div",{style:{width:"14px",height:"14px"},children:g.jsx(w7,{})}),"Copy page for LLMs"]})})})]})]})}var Gw="vocs_Outline",Vw="vocs_Outline_nav",Yw="vocs_Outline_heading",$w="vocs_Outline_items",Kw="vocs_Outline_item",Zw="vocs_Outline_link";function E7({minLevel:t=2,maxLevel:n=3,highlightActive:i=!0,onClickItem:a,showTitle:l=!0}={}){const{outlineFooter:A}=C0(),{showOutline:u,showAiCta:f}=nr(),C=typeof u=="number"?t+u-1:n,m=D.useRef(!0),{pathname:h,hash:p}=i0(),[v,x]=D.useState([]);D.useEffect(()=>{if(typeof window>"u")return;const w=Array.from(document.querySelectorAll(`.${hg}`));x(w)},[h]);const y=D.useMemo(()=>v?v.map(w=>{const R=w.querySelector(`.${Dg}`);if(!R)return null;const M=R.getBoundingClientRect(),N=R.id,E=Number(w.tagName[1]),k=w.textContent,j=window.scrollY+M.top;return E<t||E>C?null:{id:N,level:E,slugTargetElement:R,text:k,topOffset:j}}).filter(Boolean):[],[v,C,t]),[B,F]=D.useState(p.replace("#",""));if(D.useEffect(()=>{if(typeof window>"u")return;const w=new IntersectionObserver(([R])=>{var N;if(!m.current)return;const M=R.target.id;if(R.isIntersecting)F(M);else{if(!(R.target.getBoundingClientRect().top>0))return;const j=y.findIndex(r2=>r2.id===B),z=(N=y[j-1])==null?void 0:N.id;F(z)}},{rootMargin:"0px 0px -95% 0px"});for(const R of y)w.observe(R.slugTargetElement);return()=>w.disconnect()},[B,y]),D.useEffect(()=>{if(typeof window>"u")return;const w=new IntersectionObserver(([R])=>{var N;if(!m.current)return;const M=(N=y[y.length-1])==null?void 0:N.id;R.isIntersecting?F(M):B===M&&F(y[y.length-2].id)});return w.observe(document.querySelector("[data-bottom-observer]")),()=>w.disconnect()},[B,y]),D.useEffect(()=>{if(typeof window>"u")return;const w=UT(()=>{var R,M,N;if(m.current){if(window.scrollY===0){F((R=y[0])==null?void 0:R.id);return}if(window.scrollY+document.documentElement.clientHeight>=document.documentElement.scrollHeight){F((M=y[y.length-1])==null?void 0:M.id);return}for(let E=0;E<y.length;E++){const k=y[E];if(window.scrollY<k.topOffset){F((N=y[E-1])==null?void 0:N.id);break}}}},100);return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)},[y]),y.length===0)return null;const T=y.filter(w=>w.level===t);return g.jsxs("aside",{className:Gw,children:[f&&g.jsx(Ww,{}),g.jsxs("nav",{className:Vw,children:[l&&g.jsx("h2",{className:Yw,children:"On this page"}),g.jsx(M7,{activeId:i?B:null,items:y,onClickItem:()=>{a==null||a(),m.current=!1,setTimeout(()=>{m.current=!0},500)},levelItems:T,setActiveId:F})]}),Mr(A)]})}function M7({activeId:t,items:n,levelItems:i,onClickItem:a,setActiveId:l}){return g.jsx("ul",{className:$w,children:i.map(({id:A,level:u,text:f})=>{const C=`#${A}`,m=t===A,h=(()=>{var B;const v=n.findIndex(F=>F.id===A)+1,x=(B=n[v])==null?void 0:B.level;if(x<=u)return null;const y=[];for(let F=v;F<n.length;F++){const T=n[F];if(T.level!==x)break;y.push(T)}return y})();return g.jsxs(D.Fragment,{children:[g.jsx("li",{className:Kw,children:g.jsx(On,{"data-active":m,to:C,onClick:()=>{a==null||a(),l(A)},className:Zw,children:f})}),h&&g.jsx(M7,{activeId:t,levelItems:h,items:n,onClickItem:a,setActiveId:l})]},A)})})}var Xw="vocs_Popover";ke.Root=ww;ke.Trigger=Ew;function ke({children:t,className:n}){return g.jsx(Mw,{children:g.jsx(Pw,{className:l2(Xw,n),sideOffset:12,children:t})})}var Qw="vocs_Sidebar",Jw="vocs_Sidebar_backLink",eE="vocs_Sidebar_divider",tE="vocs_Sidebar_navigation",rE="vocs_Sidebar_group",nE="vocs_Sidebar_logo",oE="vocs_Sidebar_logoWrapper",P7="vocs_Sidebar_section",iE="vocs_Sidebar_level",aE="vocs_Sidebar_levelCollapsed",sE="vocs_Sidebar_levelInset",lE="vocs_Sidebar_footer",AE="vocs_Sidebar_footerContent",cE="vocs_Sidebar_footerCurtain",N7="vocs_Sidebar_items",ei="vocs_Sidebar_item",Va="vocs_Sidebar_disabledItem",uE="vocs_Sidebar_sectionHeader",fE="vocs_Sidebar_sectionHeaderActive",x3="vocs_Sidebar_sectionTitle",dE="vocs_Sidebar_sectionTitleLink",mE="vocs_Sidebar_sectionCollapse",CE="vocs_Sidebar_sectionCollapseActive";function pE(){const[t,n]=D.useState(()=>{if(!(typeof window>"u")){if(localStorage.getItem("vocs.theme")){const i=localStorage.getItem("vocs.theme");if(i)return i}return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}});return D.useEffect(()=>{t&&localStorage.setItem("vocs.theme",t),t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),{setTheme:n,theme:t,toggle(){n(i=>i==="light"?"dark":"light")}}}var gE="vocs_ThemeToggle",y3="vocs_ThemeToggle_themeToggleButton";function hE(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"Moon"}),g.jsx("path",{d:"M2.89998 0.499976C2.89998 0.279062 2.72089 0.0999756 2.49998 0.0999756C2.27906 0.0999756 2.09998 0.279062 2.09998 0.499976V1.09998H1.49998C1.27906 1.09998 1.09998 1.27906 1.09998 1.49998C1.09998 1.72089 1.27906 1.89998 1.49998 1.89998H2.09998V2.49998C2.09998 2.72089 2.27906 2.89998 2.49998 2.89998C2.72089 2.89998 2.89998 2.72089 2.89998 2.49998V1.89998H3.49998C3.72089 1.89998 3.89998 1.72089 3.89998 1.49998C3.89998 1.27906 3.72089 1.09998 3.49998 1.09998H2.89998V0.499976ZM5.89998 3.49998C5.89998 3.27906 5.72089 3.09998 5.49998 3.09998C5.27906 3.09998 5.09998 3.27906 5.09998 3.49998V4.09998H4.49998C4.27906 4.09998 4.09998 4.27906 4.09998 4.49998C4.09998 4.72089 4.27906 4.89998 4.49998 4.89998H5.09998V5.49998C5.09998 5.72089 5.27906 5.89998 5.49998 5.89998C5.72089 5.89998 5.89998 5.72089 5.89998 5.49998V4.89998H6.49998C6.72089 4.89998 6.89998 4.72089 6.89998 4.49998C6.89998 4.27906 6.72089 4.09998 6.49998 4.09998H5.89998V3.49998ZM1.89998 6.49998C1.89998 6.27906 1.72089 6.09998 1.49998 6.09998C1.27906 6.09998 1.09998 6.27906 1.09998 6.49998V7.09998H0.499976C0.279062 7.09998 0.0999756 7.27906 0.0999756 7.49998C0.0999756 7.72089 0.279062 7.89998 0.499976 7.89998H1.09998V8.49998C1.09998 8.72089 1.27906 8.89997 1.49998 8.89997C1.72089 8.89997 1.89998 8.72089 1.89998 8.49998V7.89998H2.49998C2.72089 7.89998 2.89998 7.72089 2.89998 7.49998C2.89998 7.27906 2.72089 7.09998 2.49998 7.09998H1.89998V6.49998ZM8.54406 0.98184L8.24618 0.941586C8.03275 0.917676 7.90692 1.1655 8.02936 1.34194C8.17013 1.54479 8.29981 1.75592 8.41754 1.97445C8.91878 2.90485 9.20322 3.96932 9.20322 5.10022C9.20322 8.37201 6.82247 11.0878 3.69887 11.6097C3.45736 11.65 3.20988 11.6772 2.96008 11.6906C2.74563 11.702 2.62729 11.9535 2.77721 12.1072C2.84551 12.1773 2.91535 12.2458 2.98667 12.3128L3.05883 12.3795L3.31883 12.6045L3.50684 12.7532L3.62796 12.8433L3.81491 12.9742L3.99079 13.089C4.11175 13.1651 4.23536 13.2375 4.36157 13.3059L4.62496 13.4412L4.88553 13.5607L5.18837 13.6828L5.43169 13.7686C5.56564 13.8128 5.70149 13.8529 5.83857 13.8885C5.94262 13.9155 6.04767 13.9401 6.15405 13.9622C6.27993 13.9883 6.40713 14.0109 6.53544 14.0298L6.85241 14.0685L7.11934 14.0892C7.24637 14.0965 7.37436 14.1002 7.50322 14.1002C11.1483 14.1002 14.1032 11.1453 14.1032 7.50023C14.1032 7.25044 14.0893 7.00389 14.0623 6.76131L14.0255 6.48407C13.991 6.26083 13.9453 6.04129 13.8891 5.82642C13.8213 5.56709 13.7382 5.31398 13.6409 5.06881L13.5279 4.80132L13.4507 4.63542L13.3766 4.48666C13.2178 4.17773 13.0353 3.88295 12.8312 3.60423L12.6782 3.40352L12.4793 3.16432L12.3157 2.98361L12.1961 2.85951L12.0355 2.70246L11.8134 2.50184L11.4925 2.24191L11.2483 2.06498L10.9562 1.87446L10.6346 1.68894L10.3073 1.52378L10.1938 1.47176L9.95488 1.3706L9.67791 1.2669L9.42566 1.1846L9.10075 1.09489L8.83599 1.03486L8.54406 0.98184ZM10.4032 5.30023C10.4032 4.27588 10.2002 3.29829 9.83244 2.40604C11.7623 3.28995 13.1032 5.23862 13.1032 7.50023C13.1032 10.593 10.596 13.1002 7.50322 13.1002C6.63646 13.1002 5.81597 12.9036 5.08355 12.5522C6.5419 12.0941 7.81081 11.2082 8.74322 10.0416C8.87963 10.2284 9.10028 10.3497 9.34928 10.3497C9.76349 10.3497 10.0993 10.0139 10.0993 9.59971C10.0993 9.24256 9.84965 8.94373 9.51535 8.86816C9.57741 8.75165 9.63653 8.63334 9.6926 8.51332C9.88358 8.63163 10.1088 8.69993 10.35 8.69993C11.0403 8.69993 11.6 8.14028 11.6 7.44993C11.6 6.75976 11.0406 6.20024 10.3505 6.19993C10.3853 5.90487 10.4032 5.60464 10.4032 5.30023Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function DE(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",children:[g.jsx("title",{children:"Sun"}),g.jsx("path",{d:"M7.5 0C7.77614 0 8 0.223858 8 0.5V2.5C8 2.77614 7.77614 3 7.5 3C7.22386 3 7 2.77614 7 2.5V0.5C7 0.223858 7.22386 0 7.5 0ZM2.1967 2.1967C2.39196 2.00144 2.70854 2.00144 2.90381 2.1967L4.31802 3.61091C4.51328 3.80617 4.51328 4.12276 4.31802 4.31802C4.12276 4.51328 3.80617 4.51328 3.61091 4.31802L2.1967 2.90381C2.00144 2.70854 2.00144 2.39196 2.1967 2.1967ZM0.5 7C0.223858 7 0 7.22386 0 7.5C0 7.77614 0.223858 8 0.5 8H2.5C2.77614 8 3 7.77614 3 7.5C3 7.22386 2.77614 7 2.5 7H0.5ZM2.1967 12.8033C2.00144 12.608 2.00144 12.2915 2.1967 12.0962L3.61091 10.682C3.80617 10.4867 4.12276 10.4867 4.31802 10.682C4.51328 10.8772 4.51328 11.1938 4.31802 11.3891L2.90381 12.8033C2.70854 12.9986 2.39196 12.9986 2.1967 12.8033ZM12.5 7C12.2239 7 12 7.22386 12 7.5C12 7.77614 12.2239 8 12.5 8H14.5C14.7761 8 15 7.77614 15 7.5C15 7.22386 14.7761 7 14.5 7H12.5ZM10.682 4.31802C10.4867 4.12276 10.4867 3.80617 10.682 3.61091L12.0962 2.1967C12.2915 2.00144 12.608 2.00144 12.8033 2.1967C12.9986 2.39196 12.9986 2.70854 12.8033 2.90381L11.3891 4.31802C11.1938 4.51328 10.8772 4.51328 10.682 4.31802ZM8 12.5C8 12.2239 7.77614 12 7.5 12C7.22386 12 7 12.2239 7 12.5V14.5C7 14.7761 7.22386 15 7.5 15C7.77614 15 8 14.7761 8 14.5V12.5ZM10.682 10.682C10.8772 10.4867 11.1938 10.4867 11.3891 10.682L12.8033 12.0962C12.9986 12.2915 12.9986 12.608 12.8033 12.8033C12.608 12.9986 12.2915 12.9986 12.0962 12.8033L10.682 11.3891C10.4867 11.1938 10.4867 10.8772 10.682 10.682ZM5.5 7.5C5.5 6.39543 6.39543 5.5 7.5 5.5C8.60457 5.5 9.5 6.39543 9.5 7.5C9.5 8.60457 8.60457 9.5 7.5 9.5C6.39543 9.5 5.5 8.60457 5.5 7.5ZM7.5 4.5C5.84315 4.5 4.5 5.84315 4.5 7.5C4.5 9.15685 5.84315 10.5 7.5 10.5C9.15685 10.5 10.5 9.15685 10.5 7.5C10.5 5.84315 9.15685 4.5 7.5 4.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function _7(){const{theme:t,setTheme:n}=pE();return!zu()||!t?null:g.jsxs("div",{className:gE,children:[g.jsx("button",{"data-active":t==="light",type:"button",className:y3,onClick:()=>n("light"),children:g.jsx(U0,{label:"Light Mode",icon:DE,size:"16px"})}),g.jsx("button",{"data-active":t==="dark",type:"button",className:y3,onClick:()=>n("dark"),children:g.jsx(U0,{label:"Dark Mode",icon:hE,size:"16px"})})]})}function L7(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"Chevron Right"}),g.jsx("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function k7(t){var h;const{className:n,onClickItem:i}=t,{theme:a}=C0(),{previousPath:l}=rr(),A=D.useRef(null),u=Ss(),[f,C]=D.useState("/");if(D.useEffect(()=>{typeof window>"u"||l&&C(l)},[u.key,u.backLink]),!u)return null;const m=vE(u.items);return g.jsxs("aside",{ref:A,className:l2(Qw,n),children:[g.jsxs("div",{children:[g.jsxs("div",{className:oE,children:[g.jsx("div",{className:nE,children:g.jsx(Pn,{to:"/",style:{alignItems:"center",display:"flex",height:"100%"},children:g.jsx(ku,{})})}),g.jsx("div",{className:eE})]}),g.jsx("nav",{className:tE,children:g.jsxs("div",{className:rE,children:[u.backLink&&g.jsx("section",{className:P7,children:g.jsx("div",{className:N7,children:g.jsxs(Pn,{className:l2(ei,Jw),to:f,children:["←"," ",typeof history<"u"&&((h=history.state)!=null&&h.key)&&f!=="/"?"Back":"Home"]})})}),m.map((p,v)=>g.jsx(q7,{depth:0,item:p,onClick:i,sidebarRef:A},`${p.text}${v}`))]})})]}),g.jsxs("div",{className:lE,children:[g.jsx("div",{className:cE}),g.jsxs("div",{className:AE,children:[g.jsx(Wu,{}),a!=null&&a.colorScheme?null:g.jsx(_7,{})]})]})]},u.key)}function vE(t){const n=[];let i=0;for(const a of t){if(a.items){i=n.push(a);continue}n[i]?n[i].items.push(a):n.push({text:"",items:[a]})}return n}function I7(t,n){return t.find(i=>Er(n,i.link??"")||i.link===n?!0:i.items?I7(i.items,n):!1)}function q7(t){const{depth:n,item:i,onClick:a,sidebarRef:l}=t,A=D.useRef(null),{pathname:u}=i0(),f=DB(i.link||""),C=D.useMemo(()=>i.items?!!I7(i.items,u):!1,[i.items,u]),[m,h]=D.useState(()=>i.link&&f||!i.items||C?!1:!!i.collapsed),p=i.collapsed!==void 0&&i.items!==void 0,v=D.useCallback(B=>{"key"in B&&B.key!=="Enter"||h(F=>!F)},[]),x=D.useCallback(B=>{"key"in B&&B.key!=="Enter"||h(F=>!F)},[]),y=D.useRef(!0);return D.useEffect(()=>{!y.current||(y.current=!1,!Er(u,i.link??""))||requestAnimationFrame(()=>{var w,R,M;const F=((w=A.current)==null?void 0:w.offsetTop)??0,T=((R=l==null?void 0:l.current)==null?void 0:R.clientHeight)??0;F<T||(M=l==null?void 0:l.current)==null||M.scrollTo({top:F-100})})},[i,u,l]),i.items?g.jsxs("section",{ref:A,className:l2(P7,n===0&&i.text&&iE,n===0&&i.text&&m&&aE),children:[i.text&&g.jsxs("div",{className:uE,...p&&!i.link?{role:"button",tabIndex:0,onClick:v,onKeyDown:v}:{},children:[i.text&&(i.link?g.jsx(Be,{"data-active":!!f,onClick:B=>{a==null||a(B),v(B)},className:l2(n===0?[x3,dE]:ei,C&&fE,i.disabled&&Va),href:i.link,variant:"styleless",children:i.text}):g.jsx("div",{className:l2(n===0?x3:ei,i.disabled&&Va),children:i.text})),p&&g.jsx("div",{role:"button",tabIndex:0,onClick:x,onKeyDown:x,children:g.jsx(U0,{className:l2(mE,m&&CE),label:"toggle section",icon:L7,size:"16px"})})]}),!m&&g.jsx("div",{className:l2(N7,n!==0&&sE),children:i.items&&i.items.length>0&&n<5&&i.items.map((B,F)=>g.jsx(q7,{depth:n+1,item:B,onClick:a,sidebarRef:l},`${B.text}${F}`))})]}):g.jsx(g.Fragment,{children:i.link?g.jsx(Be,{ref:A,"data-active":!!f,onClick:a,className:l2(ei,i.disabled&&Va),href:i.link,variant:"styleless",children:i.text}):g.jsx("div",{className:l2(ei,i.disabled&&Va),children:i.text})})}function xE(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"Chevron Up"}),g.jsx("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function O7(){return g.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 79 48",fill:"none",children:[g.jsx("title",{children:"Menu"}),g.jsx("path",{fill:"currentColor",d:"M19.528 47.232h40.87c1.952 0 3.515-1.562 3.515-3.564a3.5 3.5 0 0 0-3.516-3.516H19.528a3.501 3.501 0 0 0-3.515 3.516c0 2.002 1.562 3.564 3.515 3.564ZM12.057 27.262h55.81a3.501 3.501 0 0 0 3.516-3.516 3.501 3.501 0 0 0-3.515-3.515h-55.81a3.501 3.501 0 0 0-3.516 3.515 3.501 3.501 0 0 0 3.515 3.516ZM4.391 7.34H75.29c2.002 0 3.515-1.563 3.515-3.516 0-2.002-1.513-3.564-3.515-3.564H4.39C2.438.26.876 1.822.876 3.824A3.501 3.501 0 0 0 4.39 7.34Z"})]})}su.Curtain=FE;function su(){const t=C0(),{showLogo:n}=nr();return g.jsxs("div",{className:TT,children:[g.jsxs("div",{className:u3,children:[n&&g.jsx("div",{className:yc,children:g.jsx("div",{className:ET,children:g.jsx(Pn,{to:"/",style:{alignItems:"center",display:"flex",height:"100%"},children:g.jsx(ku,{})})})}),t.topNav&&g.jsxs("div",{className:yc,children:[g.jsx(yE,{items:t.topNav}),g.jsx(SE,{items:t.topNav})]})]}),g.jsx("div",{className:u3,children:g.jsx("div",{className:yc,style:{marginRight:"-8px"},children:g.jsx(FT,{})})})]})}function yE({items:t}){const{pathname:n}=i0(),i=Ai({pathname:n,items:t});return g.jsx(Rh,{className:Kh,children:g.jsxs(bh,{children:[t.map((a,l)=>a.element?Mr(a.element):a.link?g.jsx(Es,{active:i==null?void 0:i.includes(a.id),href:a.link,children:a.text},l):g.jsxs(wh,{className:wT,children:[g.jsx(Eh,{active:i==null?void 0:i.includes(a.id),children:a.text}),g.jsx(Mh,{className:RT,children:g.jsx(BE,{items:a.items||[]})})]},l)),g.jsx(Ru,{})]})})}function BE({items:t}){const{pathname:n}=i0(),i=Ai({pathname:n,items:t});return g.jsx("ul",{children:t==null?void 0:t.map((a,l)=>g.jsx(Es,{active:i.includes(a.id),href:a.link,children:a.text},l))})}function SE({items:t}){const[n,i]=D.useState(!1),{showSidebar:a}=nr(),{pathname:l}=i0(),A=Ai({pathname:l,items:t}),u=t.filter(h=>h.id===A[0])[0],{basePath:f,theme:C}=C0(),m=f;return g.jsx("div",{className:l2(Kh,PT),children:g.jsxs(ke.Root,{modal:!0,open:n,onOpenChange:i,children:[g.jsx(ke.Trigger,{className:l2($h,Wa),children:a||u?g.jsxs(g.Fragment,{children:[(u==null?void 0:u.text)??"Menu",g.jsx(U0,{label:"Menu",icon:b7,size:"16px"})]}):g.jsx(U0,{label:"Menu",icon:O7,size:"16px"})}),g.jsxs(ke,{className:jT,children:[g.jsxs(vT,{type:"single",collapsible:!0,style:{display:"flex",flexDirection:"column"},children:[t.map((h,p)=>{var v;return h.element?Mr(h.element):h.link?g.jsx(Be,{"data-active":A.includes(h.id),className:Wa,href:h.link,onClick:()=>i(!1),variant:"styleless",children:h.text},p):g.jsxs(xT,{value:p.toString(),children:[g.jsx(yT,{className:l2(Wa,kT),"data-active":A.includes(h.id),style:Ie({[_T]:`url(${m}/.vocs/icons/chevron-down.svg)`,[LT]:`url(${m}/.vocs/icons/chevron-up.svg)`}),children:h.text}),g.jsx(BT,{className:NT,children:(v=h.items)==null?void 0:v.map((x,y)=>g.jsx(Be,{className:Wa,href:x.link,onClick:()=>i(!1),variant:"styleless",children:x.text},y))})]},p)}),g.jsx(Ru,{})]}),g.jsxs("div",{className:HT,children:[g.jsx(Wu,{}),C!=null&&C.colorScheme?null:g.jsx(_7,{})]})]})]})})}function FE({enableScrollToTop:t}){const{pathname:n}=i0(),{layout:i,showSidebar:a}=nr(),{frontmatter:l={}}=rr(),A=Ss(),[u,f]=D.useState(!1),[C,m]=D.useState(!1),h=D.useMemo(()=>{if(!A||i==="minimal")return;const x=j7({sidebarItems:A.items,pathname:n});return x==null?void 0:x.text},[i,n,A]),p=D.useMemo(()=>{var x;if(!(typeof window>"u"))return(x=document.querySelector(".vocs_Content h1"))==null?void 0:x.textContent},[]),v=h||l.title||p;return g.jsxs("div",{className:bT,children:[g.jsx("div",{className:A3,children:g.jsx("div",{className:xc,children:a?g.jsxs(ke.Root,{modal:!0,open:C,onOpenChange:m,children:[g.jsxs(ke.Trigger,{className:$h,children:[g.jsx(U0,{label:"Menu",icon:O7,size:"13px"}),g.jsx("div",{className:MT,children:v})]}),g.jsx(ke,{className:OT,children:g.jsx(k7,{onClickItem:()=>m(!1)})})]}):v})}),g.jsxs("div",{className:A3,children:[t&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:xc,children:g.jsxs("button",{className:c3,onClick:()=>window.scrollTo({behavior:"smooth",top:0}),type:"button",children:["Top",g.jsx(U0,{label:"Scroll to top",icon:xE,size:"16px"})]})}),g.jsx("div",{className:qT})]}),i==="docs"&&g.jsx("div",{className:xc,children:g.jsxs(ke.Root,{modal:!0,open:u,onOpenChange:f,children:[g.jsxs(ke.Trigger,{className:c3,children:["On this page",g.jsx(U0,{label:"On this page",icon:L7,size:"16px"})]}),g.jsx(ke,{className:IT,children:g.jsx(E7,{onClickItem:()=>f(!1),showTitle:!1})})]})})]})]})}function j7({sidebarItems:t,pathname:n}){const i=n.replace(/(.+)\/$/,"$1");for(const a of t){if((a==null?void 0:a.link)===i)return a;if(a.items){const l=j7({sidebarItems:a.items,pathname:i});if(l)return l}}}var TE="vocs_SkipLink";const H7="vocs-content";function RE(){const{pathname:t}=i0();return g.jsx("a",{className:l2(TE,sh),href:`${t}#${H7}`,children:"Skip to content"})}var bE="vocs_DocsLayout",wE="vocs_DocsLayout_content",EE="vocs_DocsLayout_content_withTopNav",ME="vocs_DocsLayout_content_withSidebar",PE="vocs_DocsLayout_gutterLeft",NE="vocs_DocsLayout_gutterTop",_E="vocs_DocsLayout_gutterTop_offsetLeftGutter",LE="vocs_DocsLayout_gutterTop_sticky",kE="vocs_DocsLayout_gutterTopCurtain",IE="vocs_DocsLayout_gutterTopCurtain_hidden",qE="vocs_DocsLayout_gutterTopCurtain_withSidebar",OE="vocs_DocsLayout_gutterRight",jE="vocs_DocsLayout_gutterRight_withSidebar",HE="vocs_DocsLayout_sidebar";function lu({children:t}){var x,y;const{banner:n,font:i}=C0(),{frontmatter:a={}}=rr(),{content:l}=a,{layout:A,showOutline:u,showSidebar:f,showTopNav:C}=nr(),{ref:m,inView:h}=gg({initialInView:!0,rootMargin:"100px 0px 0px 0px"}),[p,v]=Yc("banner",!0);return g.jsxs("div",{className:bE,"data-layout":A,style:Ie({[z5]:p?n==null?void 0:n.height:void 0,[wp.default]:(x=i==null?void 0:i.default)!=null&&x.google?`${i.default.google}, ${bp.default}`:void 0,[wp.mono]:(y=i==null?void 0:i.mono)!=null&&y.google?`${i.mono.google}, ${bp.mono}`:void 0}),children:[g.jsx(RE,{}),p&&g.jsx(u6,{hide:()=>v(!1)}),f&&g.jsx("div",{className:PE,children:g.jsx(k7,{className:HE})}),C&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{ref:m,className:l2(NE,f&&_E,(A==="minimal"||A==="landing")&&LE),children:[g.jsx(Jc,{}),g.jsx(su,{})]}),g.jsxs("div",{className:l2(kE,f&&qE,(A==="minimal"||A==="landing")&&IE),children:[g.jsx(Jc.Curtain,{}),g.jsx(su.Curtain,{enableScrollToTop:!h})]})]}),u&&g.jsx("div",{className:l2(OE,f&&jE),children:g.jsx(E7,{})}),g.jsxs("div",{id:H7,className:l2(wE,f&&ME,C&&EE),style:Ie({[ic.horizontalPadding]:l==null?void 0:l.horizontalPadding,[ic.width]:l==null?void 0:l.width,[ic.verticalPadding]:l==null?void 0:l.verticalPadding}),children:[g.jsx(yg,{children:t}),g.jsx(tT,{})]}),g.jsx("div",{"data-bottom-observer":!0})]})}const Au={},U7=n0.createContext(Au);function UE(t){const n=n0.useContext(U7);return n0.useMemo(function(){return typeof t=="function"?t(n):{...n,...t}},[n,t])}function zE(t){let n;return t.disableParentContext?n=typeof t.components=="function"?t.components(Au):t.components||Au:n=UE(t.components),n0.createElement(U7.Provider,{value:n},t.children)}var Rc="vocs_Anchor",WE="vocs_Autolink";function GE(t){return t.href?g.jsx(On,{...t,className:l2(t.className,WE),to:t.href}):null}function VE(t){const{children:n,href:i}=t,{pathname:a}=i0();return n&&typeof n=="object"&&"props"in n&&n.props["data-autolink-icon"]?g.jsx(GE,{className:l2(t.className,Rc),...t}):i!=null&&i.match(/^#/)?g.jsx("a",{className:l2(t.className,Rc),...t,href:`${a}${i}`}):g.jsx(Be,{className:l2(t.className,Rc),...t,hideExternalIcon:!0})}var z7="vocs_Callout",W7="vocs_Callout_content",G7="vocs_Callout_icon",YE="vocs_Callout_note",$E="vocs_Callout_info",KE="vocs_Callout_warning",ZE="vocs_Callout_danger",XE="vocs_Callout_tip",QE="vocs_Callout_success";const JE=Object.freeze(Object.defineProperty({__proto__:null,content:W7,danger:ZE,icon:G7,info:$E,note:YE,root:z7,success:QE,tip:XE,warning:KE},Symbol.toStringTag,{value:"Module"}));function B3(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"Exclamation"}),g.jsx("path",{d:"M8.4449 0.608765C8.0183 -0.107015 6.9817 -0.107015 6.55509 0.608766L0.161178 11.3368C-0.275824 12.07 0.252503 13 1.10608 13H13.8939C14.7475 13 15.2758 12.07 14.8388 11.3368L8.4449 0.608765ZM7.4141 1.12073C7.45288 1.05566 7.54712 1.05566 7.5859 1.12073L13.9798 11.8488C14.0196 11.9154 13.9715 12 13.8939 12H1.10608C1.02849 12 0.980454 11.9154 1.02018 11.8488L7.4141 1.12073ZM6.8269 4.48611C6.81221 4.10423 7.11783 3.78663 7.5 3.78663C7.88217 3.78663 8.18778 4.10423 8.1731 4.48612L8.01921 8.48701C8.00848 8.766 7.7792 8.98664 7.5 8.98664C7.2208 8.98664 6.99151 8.766 6.98078 8.48701L6.8269 4.48611ZM8.24989 10.476C8.24989 10.8902 7.9141 11.226 7.49989 11.226C7.08567 11.226 6.74989 10.8902 6.74989 10.476C6.74989 10.0618 7.08567 9.72599 7.49989 9.72599C7.9141 9.72599 8.24989 10.0618 8.24989 10.476Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function S3(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"Info"}),g.jsx("path",{d:"M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function eM(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"Lightning Bolt"}),g.jsx("path",{d:"M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function tM({className:t,children:n,type:i}){return g.jsxs("aside",{className:l2(t,z7,JE[i]),children:[g.jsxs("div",{className:G7,children:[i==="note"&&g.jsx(S3,{}),i==="info"&&g.jsx(S3,{}),i==="warning"&&g.jsx(B3,{}),i==="danger"&&g.jsx(B3,{}),i==="tip"&&g.jsx(eM,{}),i==="success"&&g.jsx(R7,{})]}),g.jsx("div",{className:W7,children:n})]})}var rM="vocs_Aside";function nM(t){const n=l2(t.className,rM);return"data-callout"in t?g.jsx(tM,{className:n,type:t["data-callout"],children:t.children}):g.jsx("aside",{...t,className:n})}var oM="vocs_Blockquote";function iM(t){return g.jsx("blockquote",{...t,className:l2(t.className,oM)})}var aM="vocs_Code";function sM(t){const n=lM(t.children);return g.jsx("code",{...t,className:l2(t.className,aM),children:n})}function lM(t){return Array.isArray(t)?t.map((n,i)=>{var a,l,A;return n.props&&"data-line"in n.props&&typeof n.props.children=="string"&&n.props.children.trim()===""&&((A=(l=(a=t[i+1])==null?void 0:a.props)==null?void 0:l.className)!=null&&A.includes("twoslash-tag-line"))?null:n}).filter(Boolean):t}var AM="vocs_Details";function cM(t){return g.jsx("details",{...t,className:l2(t.className,AM)})}var uM="vocs_Authors",fM="vocs_Authors_authors",dM="vocs_Authors_link",F3="vocs_Authors_separator";function V7(t){const{frontmatter:n}=rr(),{authors:i=n==null?void 0:n.authors,date:a=n==null?void 0:n.date}=t,l=D.useMemo(()=>{if(i)return Array.isArray(i)?i:i.split(",").map(u=>u.trim())},[i]),A=D.useMemo(()=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,[a]);return g.jsxs("div",{className:uM,children:[A,l&&(A?" by ":"By "),g.jsx("span",{className:fM,children:l==null?void 0:l.map((u,f)=>{const{text:C,url:m}=mM(u);return g.jsxs(D.Fragment,{children:[m?g.jsx("a",{className:dM,href:m,target:"_blank",rel:"noopener noreferrer",children:C}):C,f<l.length-2&&g.jsx("span",{className:F3,children:", "}),f<l.length-1&&g.jsx("span",{className:F3,children:" & "})]},f)})})]})}function mM(t){const n=t.match(/\[(.+)\]\((.+)\)/);return n?{text:n[1],url:n[2]}:{text:t,url:void 0}}const T3=[];var CM="vocs_BlogPosts",pM="vocs_BlogPosts_description",gM="vocs_BlogPosts_divider",hM="vocs_BlogPosts_post",DM="vocs_BlogPosts_readMore",vM="vocs_BlogPosts_title";function xM(){return g.jsx("div",{className:CM,children:T3.map((t,n)=>g.jsxs(D.Fragment,{children:[g.jsx("div",{className:hM,children:g.jsxs(Pn,{to:t.path,children:[g.jsx("h2",{className:vM,children:t.title}),g.jsx(V7,{authors:t.authors,date:t.date}),g.jsxs("p",{className:pM,children:[t.description," ",g.jsx("span",{className:DM,children:"[→]"})]})]})}),n<T3.length-1&&g.jsx("hr",{className:gM})]},n))})}var yM="var(--vocs_Sponsors_columns)",BM="var(--vocs_Sponsors_height)",SM="vocs_Sponsors",FM="vocs_Sponsors_title",TM="vocs_Sponsors_row",RM="vocs_Sponsors_column",bM="vocs_Sponsors_sponsor",wM="vocs_Sponsors_image";function EM(){const{sponsors:t}=C0();return g.jsx("div",{className:SM,children:t==null?void 0:t.map((n,i)=>g.jsxs(D.Fragment,{children:[g.jsx("div",{className:FM,children:n.name}),n.items.map((a,l)=>{var A;return g.jsx("div",{className:TM,style:Ie({[yM]:a.length.toString(),[BM]:`${((A=n.height)==null?void 0:A.toString())??"40"}px`}),children:a.map((u,f)=>g.jsx(Be,{className:l2(RM,u?bM:void 0),href:u==null?void 0:u.link,hideExternalIcon:!0,variant:"styleless",children:(u==null?void 0:u.image)&&g.jsx("img",{className:wM,src:u==null?void 0:u.image,alt:u==null?void 0:u.name})},f))},l)})]},i))})}var MM="var(--vocs_AutolinkIcon_iconUrl)",PM="vocs_AutolinkIcon";function NM(t){const{basePath:n}=C0(),i=n;return g.jsx("div",{...t,className:l2(t.className,PM),style:Ie({[MM]:`url(${i}/.vocs/icons/link.svg)`})})}var _M="vocs_Tabs",LM="vocs_Tabs_list",kM="vocs_Tabs_trigger",IM="vocs_Tabs_content";function qM(t){return g.jsx(Lw,{...t,className:l2(t.className,_M)})}function OM(t){return g.jsx(kw,{...t,className:l2(t.className,LM)})}function jM(t){return g.jsx(Iw,{...t,className:l2(t.className,kM)})}function HM(t){return g.jsx(qw,{...t,className:l2(t.className,IM)})}var UM="vocs_CodeGroup";function zM({children:t}){if(!Array.isArray(t))return null;const n=t.map(i=>{const a=i.props["data-title"]?i:i.props.children,{props:l}=a,A=l["data-title"],u=l.children;return{title:A,content:u}});return g.jsxs(qM,{className:UM,defaultValue:n[0].title,children:[g.jsx(OM,{"aria-label":"Code group",children:n.map(({title:i},a)=>g.jsx(jM,{value:i||a.toString(),children:i},i||a.toString()))}),n.map(({title:i,content:a},l)=>{var u,f,C,m;const A=(m=(C=(f=(u=a.props)==null?void 0:u.children)==null?void 0:f.props)==null?void 0:C.className)==null?void 0:m.includes("shiki");return g.jsx(HM,{"data-shiki":A,value:i||l.toString(),children:a},i||l.toString())})]})}var WM="vocs_Div",GM="vocs_Step",Y7="vocs_Step_title",VM="vocs_Step_content",YM="vocs_H2";function $7(t){return g.jsx(jn,{...t,className:l2(t.className,YM),level:2})}var $M="vocs_H3";function K7(t){return g.jsx(jn,{...t,className:l2(t.className,$M),level:3})}var KM="vocs_H4";function Z7(t){return g.jsx(jn,{...t,className:l2(t.className,KM),level:4})}var ZM="vocs_H5";function X7(t){return g.jsx(jn,{...t,className:l2(t.className,ZM),level:5})}var XM="vocs_H6";function Q7(t){return g.jsx(jn,{...t,className:l2(t.className,XM),level:6})}function QM({children:t,className:n,title:i,titleLevel:a=2}){const l=(()=>{if(a===2)return $7;if(a===3)return K7;if(a===4)return Z7;if(a===5)return X7;if(a===6)return Q7;throw new Error("Invalid.")})();return g.jsxs("div",{className:l2(n,GM),children:[typeof i=="string"?g.jsx(l,{className:Y7,children:i}):i,g.jsx("div",{className:VM,children:t})]})}var JM="vocs_Steps";function eP({children:t,className:n}){return g.jsx("div",{className:l2(n,JM),children:t})}function tP({children:t}){return Array.isArray(t)?g.jsx(eP,{children:t.map(({props:n},i)=>{const[a,...l]=Array.isArray(n.children)?n.children:[n.children];return g.jsx(QM,{title:D.cloneElement(a,{className:Y7}),children:l},i)})}):null}var rP="vocs_Subtitle";function nP({children:t}){return g.jsx("div",{className:rP,children:t})}function oP(t){const{layout:n}=nr(),i=l2(t.className,WM);return t.className==="code-group"?g.jsx(zM,{...t,className:i}):"data-authors"in t?g.jsx(V7,{}):"data-blog-posts"in t?g.jsx(xM,{}):"data-sponsors"in t?g.jsx(EM,{}):"data-autolink-icon"in t&&n==="docs"?g.jsx(NM,{...t,className:i}):"data-vocs-steps"in t?g.jsx(tP,{...t,className:i}):t.role==="doc-subtitle"?g.jsx(nP,{...t}):g.jsx("div",{...t,className:i})}var iP="vocs_Figcaption";function aP(t){const n=l2(t.className,iP);return g.jsx("figcaption",{...t,className:n})}var sP="vocs_Figure";function lP(t){const n=l2(t.className,sP);return g.jsx("figure",{...t,className:n})}var AP="vocs_Header";function cP(t){return g.jsx("header",{...t,className:l2(t.className,AP)})}var uP="vocs_HorizontalRule";function fP(t){return g.jsx("hr",{...t,className:l2(t.className,uP)})}var dP="vocs_List",mP="vocs_List_ordered",CP="vocs_List_unordered";function R3({ordered:t,...n}){const i=t?"ol":"ul";return g.jsx(i,{...n,className:l2(n.className,dP,t?mP:CP)})}var pP="vocs_ListItem";function gP(t){return g.jsx("li",{...t,className:l2(t.className,pP)})}function hP(){const t=D.useRef(null),[n,i]=D.useState(!1);D.useEffect(()=>{if(!n)return;const l=setTimeout(()=>i(!1),1e3);return()=>clearTimeout(l)},[n]);function a(){var u;i(!0);const l=(u=t.current)==null?void 0:u.cloneNode(!0),A=l==null?void 0:l.querySelectorAll("button,.line.diff.remove,.twoslash-popup-info-hover,.twoslash-popup-info,.twoslash-meta-line,.twoslash-tag-line");for(const f of A??[])f.remove();navigator.clipboard.writeText(l==null?void 0:l.textContent)}return{copied:n,copy:a,ref:t}}var DP="vocs_CopyButton",vP="vocs_CopyButton_copied";function xP(){return g.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 68 67",children:[g.jsx("title",{children:"Checkmark"}),g.jsx("path",{fill:"currentColor",d:"M26.175 66.121c1.904 0 3.418-.83 4.492-2.49L66.263 7.332c.83-1.27 1.123-2.295 1.123-3.32 0-2.393-1.563-4.004-4.004-4.004-1.758 0-2.734.586-3.809 2.295L25.98 56.209 8.304 32.381c-1.123-1.514-2.198-2.149-3.809-2.149-2.441 0-4.2 1.71-4.2 4.15 0 1.026.44 2.15 1.27 3.224l19.971 25.927c1.367 1.758 2.734 2.588 4.639 2.588Z"})]})}function yP({copy:t,copied:n}){return g.jsx("button",{className:DP,"data-copied":n,onClick:t,type:"button",children:n?g.jsx(U0,{label:"Copied",size:"14px",className:vP,icon:xP}):g.jsx(U0,{label:"Copy",size:"18px",icon:w7})})}var BP="vocs_CodeBlock";function SP(t){return g.jsx("div",{...t,className:l2(t.className,BP)})}function FP(){return g.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("title",{children:"File"}),g.jsx("path",{d:"M4.2 1H4.17741H4.1774C3.86936 0.999988 3.60368 0.999978 3.38609 1.02067C3.15576 1.04257 2.92825 1.09113 2.71625 1.22104C2.51442 1.34472 2.34473 1.51442 2.22104 1.71625C2.09113 1.92825 2.04257 2.15576 2.02067 2.38609C1.99998 2.60367 1.99999 2.86935 2 3.17738V3.1774V3.2V11.8V11.8226V11.8226C1.99999 12.1307 1.99998 12.3963 2.02067 12.6139C2.04257 12.8442 2.09113 13.0717 2.22104 13.2837C2.34473 13.4856 2.51442 13.6553 2.71625 13.779C2.92825 13.9089 3.15576 13.9574 3.38609 13.9793C3.60368 14 3.86937 14 4.17741 14H4.2H10.8H10.8226C11.1306 14 11.3963 14 11.6139 13.9793C11.8442 13.9574 12.0717 13.9089 12.2837 13.779C12.4856 13.6553 12.6553 13.4856 12.779 13.2837C12.9089 13.0717 12.9574 12.8442 12.9793 12.6139C13 12.3963 13 12.1306 13 11.8226V11.8V3.2V3.17741C13 2.86936 13 2.60368 12.9793 2.38609C12.9574 2.15576 12.9089 1.92825 12.779 1.71625C12.6553 1.51442 12.4856 1.34472 12.2837 1.22104C12.0717 1.09113 11.8442 1.04257 11.6139 1.02067C11.3963 0.999978 11.1306 0.999988 10.8226 1H10.8H4.2ZM3.23875 2.07368C3.26722 2.05623 3.32362 2.03112 3.48075 2.01618C3.64532 2.00053 3.86298 2 4.2 2H10.8C11.137 2 11.3547 2.00053 11.5193 2.01618C11.6764 2.03112 11.7328 2.05623 11.7613 2.07368C11.8285 2.11491 11.8851 2.17147 11.9263 2.23875C11.9438 2.26722 11.9689 2.32362 11.9838 2.48075C11.9995 2.64532 12 2.86298 12 3.2V11.8C12 12.137 11.9995 12.3547 11.9838 12.5193C11.9689 12.6764 11.9438 12.7328 11.9263 12.7613C11.8851 12.8285 11.8285 12.8851 11.7613 12.9263C11.7328 12.9438 11.6764 12.9689 11.5193 12.9838C11.3547 12.9995 11.137 13 10.8 13H4.2C3.86298 13 3.64532 12.9995 3.48075 12.9838C3.32362 12.9689 3.26722 12.9438 3.23875 12.9263C3.17147 12.8851 3.11491 12.8285 3.07368 12.7613C3.05624 12.7328 3.03112 12.6764 3.01618 12.5193C3.00053 12.3547 3 12.137 3 11.8V3.2C3 2.86298 3.00053 2.64532 3.01618 2.48075C3.03112 2.32362 3.05624 2.26722 3.07368 2.23875C3.11491 2.17147 3.17147 2.11491 3.23875 2.07368ZM5 10C4.72386 10 4.5 10.2239 4.5 10.5C4.5 10.7761 4.72386 11 5 11H8C8.27614 11 8.5 10.7761 8.5 10.5C8.5 10.2239 8.27614 10 8 10H5ZM4.5 7.5C4.5 7.22386 4.72386 7 5 7H10C10.2761 7 10.5 7.22386 10.5 7.5C10.5 7.77614 10.2761 8 10 8H5C4.72386 8 4.5 7.77614 4.5 7.5ZM5 4C4.72386 4 4.5 4.22386 4.5 4.5C4.5 4.77614 4.72386 5 5 5H10C10.2761 5 10.5 4.77614 10.5 4.5C10.5 4.22386 10.2761 4 10 4H5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function TP(){return g.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 79 95",fill:"none",children:[g.jsx("title",{children:"Terminal"}),g.jsx("path",{fill:"currentColor",d:"M38.281 34.033c0-1.074-.39-2.05-1.22-2.88L6.885 1.171C6.152.39 5.175 0 4.053 0 1.758 0 0 1.709 0 4.004c0 1.074.488 2.1 1.172 2.88l27.295 27.15L1.172 61.181C.488 61.962 0 62.939 0 64.062c0 2.295 1.758 4.004 4.053 4.004 1.123 0 2.1-.39 2.832-1.172l30.176-29.98c.83-.83 1.22-1.807 1.22-2.88Z"}),g.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"8px",d:"M36 75h55"})]})}var RP="vocs_CodeTitle";function bP({children:t,className:n,language:i,...a}){return g.jsxs("div",{...a,className:l2(n,RP),children:[i==="bash"?g.jsx(U0,{label:"Terminal",size:"14px",icon:TP,style:{marginTop:3}}):t.match(/\.(.*)$/)?g.jsx(U0,{label:"File",size:"14px",icon:FP,style:{marginTop:1}}):null,t]})}var wP="vocs_Pre",EP="vocs_Pre_wrapper";function MP({children:t,className:n,...i}){const{copied:a,copy:l,ref:A}=hP();function u(m){return!m||typeof m!="object"?m:"props"in m?{...m,props:{...m.props,children:Array.isArray(m.props.children)?m.props.children.map(u):u(m.props.children)}}:m}const f=D.useMemo(()=>u(t),[t]);return(m=>n!=null&&n.includes("shiki")?g.jsxs(SP,{children:[i["data-title"]&&g.jsx(bP,{language:i["data-lang"],children:i["data-title"]}),m]}):m)(g.jsx("div",{className:l2(EP),children:g.jsxs("pre",{ref:A,...i,className:l2(n,wP),children:[g.jsx(yP,{copied:a,copy:l}),f]})}))}var PP="vocs_Footnotes";function NP(t){return g.jsx("section",{...t,className:l2(t.className,PP)})}var b3="vocs_Section";function _P(t){return"data-footnotes"in t?g.jsx(NP,{...t,className:l2(t.className,b3)}):g.jsx("section",{...t,className:l2(t.className,b3)})}var w3="vocs_Span";function LP(t,n){if(!t||!n)return!1;const i=n.getRootNode==null?void 0:n.getRootNode();if(t.contains(n))return!0;if(i&&Cs(i)){let a=n;for(;a;){if(t===a)return!0;a=a.parentNode||a.host}}return!1}function Ya(t){return(t==null?void 0:t.ownerDocument)||document}function cu(t,n){const i=["mouse","pen"];return i.push("",void 0),i.includes(t)}var _r=typeof document<"u"?D.useLayoutEffect:D.useEffect;const kP={...vs};function $a(t){const n=D.useRef(t);return _r(()=>{n.current=t}),n}const IP=kP.useInsertionEffect,qP=IP||(t=>t());function ns(t){const n=D.useRef(()=>{});return qP(()=>{n.current=t}),D.useCallback(function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return n.current==null?void 0:n.current(...a)},[])}const OP="data-floating-ui-focusable",E3="active",M3="selected",jP={...vs};let P3=!1,HP=0;const N3=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+HP++;function UP(){const[t,n]=D.useState(()=>P3?N3():void 0);return _r(()=>{t==null&&n(N3())},[]),D.useEffect(()=>{P3=!0},[]),t}const zP=jP.useId,J7=zP||UP,WP=D.forwardRef(function(n,i){const{context:{placement:a,elements:{floating:l},middlewareData:{arrow:A,shift:u}},width:f=14,height:C=7,tipRadius:m=0,strokeWidth:h=0,staticOffset:p,stroke:v,d:x,style:{transform:y,...B}={},...F}=n,T=J7(),[w,R]=D.useState(!1);if(_r(()=>{if(!l)return;Fe(l).direction==="rtl"&&R(!0)},[l]),!l)return null;const[M,N]=a.split("-"),E=M==="top"||M==="bottom";let k=p;(E&&u!=null&&u.x||!E&&u!=null&&u.y)&&(k=null);const j=h*2,z=j/2,r2=f/2*(m/-8+1),c2=C/2*m/4,s2=!!x,i2=k&&N==="end"?"bottom":"top";let Z=k&&N==="end"?"right":"left";k&&w&&(Z=N==="end"?"left":"right");const u2=(A==null?void 0:A.x)!=null?k||A.x:"",I=(A==null?void 0:A.y)!=null?k||A.y:"",V=x||"M0,0"+(" H"+f)+(" L"+(f-r2)+","+(C-c2))+(" Q"+f/2+","+C+" "+r2+","+(C-c2))+" Z",Q={top:s2?"rotate(180deg)":"",left:s2?"rotate(90deg)":"rotate(-90deg)",bottom:s2?"":"rotate(180deg)",right:s2?"rotate(-90deg)":"rotate(90deg)"}[M];return g.jsxs("svg",{...F,"aria-hidden":!0,ref:i,width:s2?f:f+j,height:f,viewBox:"0 0 "+f+" "+(C>f?C:f),style:{position:"absolute",pointerEvents:"none",[Z]:u2,[i2]:I,[M]:E||s2?"100%":"calc(100% - "+j/2+"px)",transform:[Q,y].filter(K=>!!K).join(" "),...B},children:[j>0&&g.jsx("path",{clipPath:"url(#"+T+")",fill:"none",stroke:v,strokeWidth:j+(x?0:1),d:V}),g.jsx("path",{stroke:j&&!x?F.fill:"none",d:V}),g.jsx("clipPath",{id:T,children:g.jsx("rect",{x:-z,y:z*(s2?-1:1),width:f+j,height:f})})]})});function GP(){const t=new Map;return{emit(n,i){var a;(a=t.get(n))==null||a.forEach(l=>l(i))},on(n,i){t.has(n)||t.set(n,new Set),t.get(n).add(i)},off(n,i){var a;(a=t.get(n))==null||a.delete(i)}}}const VP=D.createContext(null),YP=D.createContext(null),ev=()=>{var t;return((t=D.useContext(VP))==null?void 0:t.id)||null},tv=()=>D.useContext(YP);function $P(t){return"data-floating-ui-"+t}function Le(t){t.current!==-1&&(clearTimeout(t.current),t.current=-1)}const _3=$P("safe-polygon");function bc(t,n,i){if(i&&!cu(i))return 0;if(typeof t=="number")return t;if(typeof t=="function"){const a=t();return typeof a=="number"?a:a==null?void 0:a[n]}return t==null?void 0:t[n]}function wc(t){return typeof t=="function"?t():t}function KP(t,n){n===void 0&&(n={});const{open:i,onOpenChange:a,dataRef:l,events:A,elements:u}=t,{enabled:f=!0,delay:C=0,handleClose:m=null,mouseOnly:h=!1,restMs:p=0,move:v=!0}=n,x=tv(),y=ev(),B=$a(m),F=$a(C),T=$a(i),w=$a(p),R=D.useRef(),M=D.useRef(-1),N=D.useRef(),E=D.useRef(-1),k=D.useRef(!0),j=D.useRef(!1),z=D.useRef(()=>{}),r2=D.useRef(!1),c2=D.useCallback(()=>{var V;const Q=(V=l.current.openEvent)==null?void 0:V.type;return(Q==null?void 0:Q.includes("mouse"))&&Q!=="mousedown"},[l]);D.useEffect(()=>{if(!f)return;function V(Q){let{open:K}=Q;K||(Le(M),Le(E),k.current=!0,r2.current=!1)}return A.on("openchange",V),()=>{A.off("openchange",V)}},[f,A]),D.useEffect(()=>{if(!f||!B.current||!i)return;function V(K){c2()&&a(!1,K,"hover")}const Q=Ya(u.floating).documentElement;return Q.addEventListener("mouseleave",V),()=>{Q.removeEventListener("mouseleave",V)}},[u.floating,i,a,f,B,c2]);const s2=D.useCallback(function(V,Q,K){Q===void 0&&(Q=!0),K===void 0&&(K="hover");const P=bc(F.current,"close",R.current);P&&!N.current?(Le(M),M.current=window.setTimeout(()=>a(!1,V,K),P)):Q&&(Le(M),a(!1,V,K))},[F,a]),i2=ns(()=>{z.current(),N.current=void 0}),Z=ns(()=>{if(j.current){const V=Ya(u.floating).body;V.style.pointerEvents="",V.removeAttribute(_3),j.current=!1}}),u2=ns(()=>l.current.openEvent?["click","mousedown"].includes(l.current.openEvent.type):!1);D.useEffect(()=>{if(!f)return;function V(e2){if(Le(M),k.current=!1,h&&!cu(R.current)||wc(w.current)>0&&!bc(F.current,"open"))return;const o2=bc(F.current,"open",R.current);o2?M.current=window.setTimeout(()=>{T.current||a(!0,e2,"hover")},o2):i||a(!0,e2,"hover")}function Q(e2){if(u2()){Z();return}z.current();const o2=Ya(u.floating);if(Le(E),r2.current=!1,B.current&&l.current.floatingContext){i||Le(M),N.current=B.current({...l.current.floatingContext,tree:x,x:e2.clientX,y:e2.clientY,onClose(){Z(),i2(),u2()||s2(e2,!0,"safe-polygon")}});const B2=N.current;o2.addEventListener("mousemove",B2),z.current=()=>{o2.removeEventListener("mousemove",B2)};return}(R.current==="touch"?!LP(u.floating,e2.relatedTarget):!0)&&s2(e2)}function K(e2){u2()||l.current.floatingContext&&(B.current==null||B.current({...l.current.floatingContext,tree:x,x:e2.clientX,y:e2.clientY,onClose(){Z(),i2(),u2()||s2(e2)}})(e2))}function P(){Le(M)}function X(e2){u2()||s2(e2,!1)}if(R0(u.domReference)){const e2=u.domReference,o2=u.floating;return i&&e2.addEventListener("mouseleave",K),v&&e2.addEventListener("mousemove",V,{once:!0}),e2.addEventListener("mouseenter",V),e2.addEventListener("mouseleave",Q),o2&&(o2.addEventListener("mouseleave",K),o2.addEventListener("mouseenter",P),o2.addEventListener("mouseleave",X)),()=>{i&&e2.removeEventListener("mouseleave",K),v&&e2.removeEventListener("mousemove",V),e2.removeEventListener("mouseenter",V),e2.removeEventListener("mouseleave",Q),o2&&(o2.removeEventListener("mouseleave",K),o2.removeEventListener("mouseenter",P),o2.removeEventListener("mouseleave",X))}}},[u,f,t,h,v,s2,i2,Z,a,i,T,x,F,B,l,u2,w]),_r(()=>{var V;if(f&&i&&(V=B.current)!=null&&V.__options.blockPointerEvents&&c2()){j.current=!0;const K=u.floating;if(R0(u.domReference)&&K){var Q;const P=Ya(u.floating).body;P.setAttribute(_3,"");const X=u.domReference,e2=x==null||(Q=x.nodesRef.current.find(o2=>o2.id===y))==null||(Q=Q.context)==null?void 0:Q.elements.floating;return e2&&(e2.style.pointerEvents=""),P.style.pointerEvents="none",X.style.pointerEvents="auto",K.style.pointerEvents="auto",()=>{P.style.pointerEvents="",X.style.pointerEvents="",K.style.pointerEvents=""}}}},[f,i,y,u,x,B,c2]),_r(()=>{i||(R.current=void 0,r2.current=!1,i2(),Z())},[i,i2,Z]),D.useEffect(()=>()=>{i2(),Le(M),Le(E),Z()},[f,u.domReference,i2,Z]);const I=D.useMemo(()=>{function V(Q){R.current=Q.pointerType}return{onPointerDown:V,onPointerEnter:V,onMouseMove(Q){const{nativeEvent:K}=Q;function P(){!k.current&&!T.current&&a(!0,K,"hover")}h&&!cu(R.current)||i||wc(w.current)===0||r2.current&&Q.movementX**2+Q.movementY**2<2||(Le(E),R.current==="touch"?P():(r2.current=!0,E.current=window.setTimeout(P,wc(w.current))))}}},[h,a,i,T,w]);return D.useMemo(()=>f?{reference:I}:{},[f,I])}function Ec(t,n){if(!t||!n)return!1;const i=n.getRootNode==null?void 0:n.getRootNode();if(t.contains(n))return!0;if(i&&Cs(i)){let a=n;for(;a;){if(t===a)return!0;a=a.parentNode||a.host}}return!1}function ZP(t){return"composedPath"in t?t.composedPath()[0]:t.target}function XP(t){const{open:n=!1,onOpenChange:i,elements:a}=t,l=J7(),A=D.useRef({}),[u]=D.useState(()=>GP()),f=ev()!=null,[C,m]=D.useState(a.reference),h=ns((x,y,B)=>{A.current.openEvent=x?y:void 0,u.emit("openchange",{open:x,event:y,reason:B,nested:f}),i==null||i(x,y,B)}),p=D.useMemo(()=>({setPositionReference:m}),[]),v=D.useMemo(()=>({reference:C||a.reference||null,floating:a.floating||null,domReference:a.reference}),[C,a.reference,a.floating]);return D.useMemo(()=>({dataRef:A,open:n,onOpenChange:h,elements:v,events:u,floatingId:l,refs:p}),[n,h,v,u,l,p])}function QP(t){t===void 0&&(t={});const{nodeId:n}=t,i=XP({...t,elements:{reference:null,floating:null,...t.elements}}),a=t.rootContext||i,l=a.elements,[A,u]=D.useState(null),[f,C]=D.useState(null),h=(l==null?void 0:l.domReference)||A,p=D.useRef(null),v=tv();_r(()=>{h&&(p.current=h)},[h]);const x=aD({...t,elements:{...l,...f&&{reference:f}}}),y=D.useCallback(R=>{const M=R0(R)?{getBoundingClientRect:()=>R.getBoundingClientRect(),getClientRects:()=>R.getClientRects(),contextElement:R}:R;C(M),x.refs.setReference(M)},[x.refs]),B=D.useCallback(R=>{(R0(R)||R===null)&&(p.current=R,u(R)),(R0(x.refs.reference.current)||x.refs.reference.current===null||R!==null&&!R0(R))&&x.refs.setReference(R)},[x.refs]),F=D.useMemo(()=>({...x.refs,setReference:B,setPositionReference:y,domReference:p}),[x.refs,B,y]),T=D.useMemo(()=>({...x.elements,domReference:h}),[x.elements,h]),w=D.useMemo(()=>({...x,...a,refs:F,elements:T,nodeId:n}),[x,F,T,n,a]);return _r(()=>{a.dataRef.current.floatingContext=w;const R=v==null?void 0:v.nodesRef.current.find(M=>M.id===n);R&&(R.context=w)}),D.useMemo(()=>({...x,context:w,refs:F,elements:T}),[x,F,T,w])}function Mc(t,n,i){const a=new Map,l=i==="item";let A=t;if(l&&t){const{[E3]:u,[M3]:f,...C}=t;A=C}return{...i==="floating"&&{tabIndex:-1,[OP]:""},...A,...n.map(u=>{const f=u?u[i]:null;return typeof f=="function"?t?f(t):null:f}).concat(t).reduce((u,f)=>(f&&Object.entries(f).forEach(C=>{let[m,h]=C;if(!(l&&[E3,M3].includes(m)))if(m.indexOf("on")===0){if(a.has(m)||a.set(m,[]),typeof h=="function"){var p;(p=a.get(m))==null||p.push(h),u[m]=function(){for(var v,x=arguments.length,y=new Array(x),B=0;B<x;B++)y[B]=arguments[B];return(v=a.get(m))==null?void 0:v.map(F=>F(...y)).find(F=>F!==void 0)}}}else u[m]=h}),u),{})}}function JP(t){t===void 0&&(t=[]);const n=t.map(f=>f==null?void 0:f.reference),i=t.map(f=>f==null?void 0:f.floating),a=t.map(f=>f==null?void 0:f.item),l=D.useCallback(f=>Mc(f,t,"reference"),n),A=D.useCallback(f=>Mc(f,t,"floating"),i),u=D.useCallback(f=>Mc(f,t,"item"),a);return D.useMemo(()=>({getReferenceProps:l,getFloatingProps:A,getItemProps:u}),[l,A,u])}function eN(t,n,i){i===void 0&&(i=!0);let a=t.filter(A=>{var u;return A.parentId===n&&((u=A.context)==null?void 0:u.open)}),l=a;for(;l.length;)l=i?t.filter(A=>{var u;return(u=l)==null?void 0:u.some(f=>{var C;return A.parentId===f.id&&((C=A.context)==null?void 0:C.open)})}):t,a=a.concat(l);return a}function L3(t,n){const[i,a]=t;let l=!1;const A=n.length;for(let u=0,f=A-1;u<A;f=u++){const[C,m]=n[u]||[0,0],[h,p]=n[f]||[0,0];m>=a!=p>=a&&i<=(h-C)*(a-m)/(p-m)+C&&(l=!l)}return l}function tN(t,n){return t[0]>=n.x&&t[0]<=n.x+n.width&&t[1]>=n.y&&t[1]<=n.y+n.height}function rN(t){t===void 0&&(t={});const{buffer:n=.5,blockPointerEvents:i=!1,requireIntent:a=!0}=t;let l,A=!1,u=null,f=null,C=performance.now();function m(p,v){const x=performance.now(),y=x-C;if(u===null||f===null||y===0)return u=p,f=v,C=x,null;const B=p-u,F=v-f,w=Math.sqrt(B*B+F*F)/y;return u=p,f=v,C=x,w}const h=p=>{let{x:v,y:x,placement:y,elements:B,onClose:F,nodeId:T,tree:w}=p;return function(M){function N(){clearTimeout(l),F()}if(clearTimeout(l),!B.domReference||!B.floating||y==null||v==null||x==null)return;const{clientX:E,clientY:k}=M,j=[E,k],z=ZP(M),r2=M.type==="mouseleave",c2=Ec(B.floating,z),s2=Ec(B.domReference,z),i2=B.domReference.getBoundingClientRect(),Z=B.floating.getBoundingClientRect(),u2=y.split("-")[0],I=v>Z.right-Z.width/2,V=x>Z.bottom-Z.height/2,Q=tN(j,i2),K=Z.width>i2.width,P=Z.height>i2.height,X=(K?i2:Z).left,e2=(K?i2:Z).right,o2=(P?i2:Z).top,f2=(P?i2:Z).bottom;if(c2&&(A=!0,!r2))return;if(s2&&(A=!1),s2&&!r2){A=!0;return}if(r2&&R0(M.relatedTarget)&&Ec(B.floating,M.relatedTarget)||w&&eN(w.nodesRef.current,T).some(G2=>{let{context:y2}=G2;return y2==null?void 0:y2.open}))return;if(u2==="top"&&x>=i2.bottom-1||u2==="bottom"&&x<=i2.top+1||u2==="left"&&v>=i2.right-1||u2==="right"&&v<=i2.left+1)return N();let B2=[];switch(u2){case"top":B2=[[X,i2.top+1],[X,Z.bottom-1],[e2,Z.bottom-1],[e2,i2.top+1]];break;case"bottom":B2=[[X,Z.top+1],[X,i2.bottom-1],[e2,i2.bottom-1],[e2,Z.top+1]];break;case"left":B2=[[Z.right-1,f2],[Z.right-1,o2],[i2.left+1,o2],[i2.left+1,f2]];break;case"right":B2=[[i2.right-1,f2],[i2.right-1,o2],[Z.left+1,o2],[Z.left+1,f2]];break}function p2(G2){let[y2,N2]=G2;switch(u2){case"top":{const z2=[K?y2+n/2:I?y2+n*4:y2-n*4,N2+n+1],f0=[K?y2-n/2:I?y2+n*4:y2-n*4,N2+n+1],N0=[[Z.left,I||K?Z.bottom-n:Z.top],[Z.right,I?K?Z.bottom-n:Z.top:Z.bottom-n]];return[z2,f0,...N0]}case"bottom":{const z2=[K?y2+n/2:I?y2+n*4:y2-n*4,N2-n],f0=[K?y2-n/2:I?y2+n*4:y2-n*4,N2-n],N0=[[Z.left,I||K?Z.top+n:Z.bottom],[Z.right,I?K?Z.top+n:Z.bottom:Z.top+n]];return[z2,f0,...N0]}case"left":{const z2=[y2+n+1,P?N2+n/2:V?N2+n*4:N2-n*4],f0=[y2+n+1,P?N2-n/2:V?N2+n*4:N2-n*4];return[...[[V||P?Z.right-n:Z.left,Z.top],[V?P?Z.right-n:Z.left:Z.right-n,Z.bottom]],z2,f0]}case"right":{const z2=[y2-n,P?N2+n/2:V?N2+n*4:N2-n*4],f0=[y2-n,P?N2-n/2:V?N2+n*4:N2-n*4],N0=[[V||P?Z.left+n:Z.right,Z.top],[V?P?Z.left+n:Z.right:Z.left+n,Z.bottom]];return[z2,f0,...N0]}}}if(!L3([E,k],B2)){if(A&&!Q)return N();if(!r2&&a){const G2=m(M.clientX,M.clientY);if(G2!==null&&G2<.1)return N()}L3([E,k],p2([v,x]))?!A&&a&&(l=window.setTimeout(N,40)):N()}}};return h.__options={blockPointerEvents:i},h}function nN({children:t,...n}){const[i,a]=t,l=D.useRef(null),[A,u]=D.useState(!1),{context:f,refs:C,floatingStyles:m}=QP({middleware:[AD({element:l}),sD(8),lD()],open:A,onOpenChange:u,placement:"bottom-start"}),h=KP(f,{handleClose:rN()}),{getReferenceProps:p,getFloatingProps:v}=JP([h]),x=a.props.children,y=i.props.children;return g.jsxs("span",{...n,children:[g.jsx("span",{className:"twoslash-target",ref:C.setReference,...p(),children:x}),A&&g.jsxs("div",{className:"twoslash-popup-info-hover",ref:C.setFloating,style:m,...v(),children:[g.jsx(WP,{ref:l,context:f,fill:jc.background5,height:3,stroke:jc.border2,strokeWidth:1,width:7}),g.jsx("div",{className:"twoslash-popup-scroll-container",children:y})]})]})}function oN(t){var i;const n=l2(t.className,w3);return(i=t.className)!=null&&i.includes("twoslash-hover")?g.jsx(nN,{...t,className:n}):g.jsx("span",{...t,className:l2(t.className,w3)})}var iN="vocs_Strong";function aN(t){return g.jsx("strong",{...t,className:l2(t.className,iN)})}var sN="vocs_Summary";function lN(t){return g.jsx("summary",{...t,className:l2(t.className,sN)})}var AN="vocs_Table";function cN(t){return g.jsx("table",{...t,className:l2(t.className,AN)})}var uN="vocs_TableCell";function fN(t){return g.jsx("td",{...t,className:l2(t.className,uN)})}var dN="vocs_TableHeader";function mN(t){return g.jsx("th",{...t,className:l2(t.className,dN)})}var CN="vocs_TableRow";function pN(t){return g.jsx("tr",{...t,className:l2(t.className,CN)})}const gN={a:VE,aside:nM,blockquote:iM,code:sM,details:cM,div:oP,pre:MP,header:cP,figcaption:aP,figure:lP,h1:vg,h2:$7,h3:K7,h4:Z7,h5:X7,h6:Q7,hr:fP,kd:lh,li:gP,ol:t=>g.jsx(R3,{ordered:!0,...t}),p:xg,section:_P,span:oN,strong:aN,summary:lN,table:cN,td:fN,th:mN,tr:pN,ul:t=>g.jsx(R3,{ordered:!1,...t})};function hN(){const{pathname:t}=i0(),n=C0(),{ogImageUrl:i}=n;if(!i)return;if(typeof i=="string")return i;const a=D.useMemo(()=>{const l=Object.keys(i).filter(A=>t.startsWith(A));return l[l.length-1]},[i,t]);if(a)return i[a]}function uu(t){const{children:n,content:i,filePath:a,frontmatter:l,lastUpdatedAt:A,path:u}=t,{pathname:f}=i0(),C=D.useRef(void 0);return D.useEffect(()=>{C.current=f}),g.jsxs(g.Fragment,{children:[g.jsx(DN,{frontmatter:l}),typeof window<"u"&&g.jsx(ug,{}),g.jsx(zE,{components:gN,children:g.jsx(d6,{frontmatter:l,path:u,children:g.jsx(Sg.Provider,{value:{content:i,filePath:a,frontmatter:l,lastUpdatedAt:A,previousPath:C.current},children:n})})})]})}function DN({frontmatter:t}){var v,x,y,B,F,T;const n=C0(),i=hN(),{baseUrl:a,font:l,iconUrl:A,logoUrl:u}=n,f=(t==null?void 0:t.description)??n.description,C=(t==null?void 0:t.title)??n.title,m=(()=>{if(n.title&&!C.includes(n.title))return n.titleTemplate})(),h=typeof window<"u"&&window.location.hostname==="localhost",p=m?m.replace("%s",C):C;return g.jsxs(g.Fragment,{children:[p&&g.jsx("title",{children:p}),a&&!0&&!h&&g.jsx("base",{href:a}),f!=="undefined"&&g.jsx("meta",{name:"description",content:f}),A&&typeof A=="string"&&g.jsx("link",{rel:"icon",href:A,type:Pc(A)}),A&&typeof A!="string"&&g.jsx("link",{rel:"icon",href:A.light,type:Pc(A.light)}),A&&typeof A!="string"&&g.jsx("link",{rel:"icon",href:A.dark,type:Pc(A.dark),media:"(prefers-color-scheme: dark)"}),g.jsx("meta",{property:"og:type",content:"website"}),g.jsx("meta",{property:"og:title",content:C||n.title}),a&&g.jsx("meta",{property:"og:url",content:a}),f!=="undefined"&&g.jsx("meta",{property:"og:description",content:f}),i&&g.jsx("meta",{property:"og:image",content:i.replace("%logo",`${a||""}${typeof u=="string"?u:(u==null?void 0:u.dark)||""}`).replace("%title",C||"").replace("%description",(f!=="undefined"?f:"")||"")}),(((v=l==null?void 0:l.default)==null?void 0:v.google)||((x=l==null?void 0:l.mono)==null?void 0:x.google))&&g.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(((y=l==null?void 0:l.default)==null?void 0:y.google)||((B=l==null?void 0:l.mono)==null?void 0:B.google))&&g.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),((F=l==null?void 0:l.default)==null?void 0:F.google)&&g.jsx("link",{href:`https://fonts.googleapis.com/css2?family=${l.default.google}:wght@300;400;500&display=swap`,rel:"stylesheet"}),((T=l==null?void 0:l.mono)==null?void 0:T.google)&&g.jsx("link",{href:`https://fonts.googleapis.com/css2?family=${l.mono.google}:wght@300;400;500&display=swap`,rel:"stylesheet"}),g.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),i&&g.jsx("meta",{property:"twitter:image",content:i.replace("%logo",`${a||""}${typeof u=="string"?u:(u==null?void 0:u.dark)||""}`).replace("%title",C?encodeURIComponent(C):"").replace("%description",f?encodeURIComponent(f):"")})]})}function Pc(t){if(t.endsWith(".svg"))return"image/svg+xml";if(t.endsWith(".png"))return"image/png";if(t.endsWith(".jpg"))return"image/jpeg";if(t.endsWith(".ico"))return"image/x-icon";if(t.endsWith(".webp"))return"image/webp"}const vN=(()=>{const t=Fu.find(({path:n})=>n==="*");return t?{path:t.path,lazy:async()=>{const{frontmatter:n,...i}=await t.lazy();return{...i,element:g.jsx(uu,{frontmatter:n,path:t.path,children:g.jsx(lu,{children:g.jsx(i.default,{})})})}}}:{path:"*",lazy:void 0,element:g.jsx(uu,{frontmatter:{layout:"minimal"},path:"*",children:g.jsx(lu,{children:g.jsx(H5,{})})})}})(),k3=[...Fu.filter(({path:t})=>t!=="*").map(t=>({path:t.path,lazy:async()=>{const{frontmatter:n,...i}=await t.lazy();return{...i,element:g.jsx(uu,{content:decodeURIComponent(t.content??""),filePath:t.filePath,frontmatter:n,lastUpdatedAt:t.lastUpdatedAt,path:t.path,children:g.jsx(lu,{children:g.jsx(i.default,{})})})}}})),vN];async function xN(t,n){var a;const i=(a=ht(t,window.location,n))==null?void 0:a.filter(l=>l.route.lazy);i&&(i==null?void 0:i.length)>0&&await Promise.all(i.map(async l=>{const A=await l.route.lazy();Object.assign(l.route,{...A,lazy:void 0})}))}function yN(){const t=document.querySelectorAll('style[data-vocs-temp-style="true"]');for(const n of t)n.remove()}BN();async function BN(){const t=Cg().basePath;await xN(k3,t),yN();const n=A5(k3,{basename:t});gy.hydrateRoot(document.getElementById("app"),g.jsx(F5,{children:g.jsx(kB,{router:n})}))}export{HM as C,Be as L,qM as R,jM as T,PN as a,Tc as b,l2 as c,C0 as d,GF as e,OM as f,g as j,UE as u};
